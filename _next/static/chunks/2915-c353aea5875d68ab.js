(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2915],{22952:function(e,t,r){"use strict";var n=r(2265),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,a=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,u){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=s(e,(d=l(function(){function e(e){if(!o){if(o=!0,s=e,e=n(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var r=n(e);return void 0!==u&&u(t,r)?(s=e,t):(s=e,a=r)}var s,a,o=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,u]))[0],d[1]);return o(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},99581:function(e,t,r){"use strict";e.exports=r(22952)},45152:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},97495:function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function n(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=t.isBytes=void 0,t.number=r,t.bool=n,t.isBytes=i,t.bytes=s,t.hash=a,t.exists=o,t.output=l,t.default={number:r,bool:n,bytes:s,hash:a,exists:o,output:l}},17353:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;let r=BigInt(4294967296-1),n=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:a,l:o}=i(e[s],t);[r[s],n[s]]=[a,o]}return[r,n]}t.fromBig=i,t.split=s;let a=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=a;let o=(e,t,r)=>e>>>r;t.shrSH=o;let l=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=l;let c=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=c;let u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;let d=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=d;let h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;let f=(e,t)=>t;t.rotr32H=f;let p=(e,t)=>e;t.rotr32L=p;let y=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=y;let g=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=g;let m=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=m;let b=(e,t,r)=>e<<r-32|t>>>64-r;function v(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}}t.rotlBL=b,t.add=v;let w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=w;let _=(e,t,r,n)=>t+r+n+(e/4294967296|0)|0;t.add3H=_;let E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=E;let x=(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0;t.add4H=x;let I=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=I;let S=(e,t,r,n,i,s)=>t+r+n+i+s+(e/4294967296|0)|0;t.add5H=S,t.default={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:l,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:b,add:v,add3L:w,add3H:_,add4L:E,add4H:x,add5H:S,add5L:I}},13933:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},65727:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;let n=r(97495),i=r(17353),s=r(36247),a=[],o=[],l=[],c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],a.push(2*(5*n+r)),o.push((e+1)*(e+2)/2%64);let i=c;for(let e=0;e<7;e++)(t=(t<<u^(t>>h)*p)%f)&d&&(i^=u<<(u<<BigInt(e))-u);l.push(i)}let[y,g]=(0,i.split)(l,!0),m=(e,t,r)=>r>32?(0,i.rotlBH)(e,t,r):(0,i.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,i.rotlBL)(e,t,r):(0,i.rotlSL)(e,t,r);function v(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=m(s,a,1)^r[n],l=b(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=o[r],s=m(t,i,n),l=b(t,i,n),c=a[r];t=e[c],i=e[c+1],e[c]=s,e[c+1]=l}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=y[n],e[1]^=g[n]}r.fill(0)}t.keccakP=v;class w extends s.Hash{constructor(e,t,r,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.number)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),v(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.exists)(this);let{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.exists)(this,!1),(0,n.bytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.output)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new w(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=w;let _=(e,t,r)=>(0,s.wrapConstructor)(()=>new w(t,e,r));t.sha3_224=_(6,144,28),t.sha3_256=_(6,136,32),t.sha3_384=_(6,104,48),t.sha3_512=_(6,72,64),t.keccak_224=_(1,144,28),t.keccak_256=_(1,136,32),t.keccak_384=_(1,104,48),t.keccak_512=_(1,72,64);let E=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0));t.shake128=E(31,168,16),t.shake256=E(31,136,32)},36247:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;let n=r(13933),i=r(97495);t.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.rotl=(e,t)=>e<<t|e>>>32-t>>>0,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,t.byteSwapIfBE=t.isLE?e=>e:e=>(0,t.byteSwap)(e),t.byteSwap32=function(e){for(let r=0;r<e.length;r++)e[r]=(0,t.byteSwap)(e[r])};let s=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));t.bytesToHex=function(e){(0,i.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t};let a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=a._0&&e<=a._9?e-a._0:e>=a._A&&e<=a._F?e-(a._A-10):e>=a._a&&e<=a._f?e-(a._a-10):void 0}t.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=o(e.charCodeAt(i)),s=o(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n};let l=async()=>{};async function c(e,r,n){let i=Date.now();for(let s=0;s<e;s++){n(s);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}}function u(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function d(e){return"string"==typeof e&&(e=u(e)),(0,i.bytes)(e),e}t.nextTick=l,t.asyncLoop=c,t.utf8ToBytes=u,t.toBytes=d,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.bytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r};class h{clone(){return this._cloneInto()}}t.Hash=h;let f={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==f.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){let t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(d(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(d(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}},98452:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n);else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}})},81310:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},12238:function(e,t,r){"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){let e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},33531:function(e,t,r){"use strict";var n=r(25566);function i(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==n&&void 0!==n.versions&&void 0!==n.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=i,t.isNode=s,t.isBrowser=function(){return!i()&&!s()}},13303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45161);n.__exportStar(r(12238),t),n.__exportStar(r(33531),t)},45161:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return w},__asyncGenerator:function(){return v},__asyncValues:function(){return _},__await:function(){return b},__awaiter:function(){return u},__classPrivateFieldGet:function(){return S},__classPrivateFieldSet:function(){return A},__createBinding:function(){return h},__decorate:function(){return o},__exportStar:function(){return f},__extends:function(){return i},__generator:function(){return d},__importDefault:function(){return I},__importStar:function(){return x},__makeTemplateObject:function(){return E},__metadata:function(){return c},__param:function(){return l},__read:function(){return y},__rest:function(){return a},__spread:function(){return g},__spreadArrays:function(){return m},__values:function(){return p}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function h(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})})}function o(e,t){try{var r;(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},93514:function(e,t,r){"use strict";r.d(t,{q:function(){return n}});class n{}},96756:function(e,t,r){"use strict";r.d(t,{C$:function(){return c},Lx:function(){return l}});var n=r(55445),i=r(40537),s=r(93514);class a extends s.q{constructor(e){super()}}let o=i.FIVE_SECONDS,l={pulse:"heartbeat_pulse"};class c extends a{constructor(e){super(e),this.events=new n.EventEmitter,this.interval=o,this.interval=e?.interval||o}static async init(e){let t=new c(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,i.toMiliseconds)(this.interval))}pulse(){this.events.emit(l.pulse)}}},5071:function(e,t,r){"use strict";r.d(t,{Z:function(){return b},k:function(){return b}});var n=r(55445),i=r(5108),s=r.n(i),a=r(80577),o=r(5276),l=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&p(e,r,t[r]);if(d)for(var r of d(t))f.call(t,r)&&p(e,r,t[r]);return e},g=(e,t)=>c(e,u(t));let m={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class b{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new n.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,o.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,a.u)(e),r=await (await s()(this.url,g(y({},m),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,o.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,a.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await s()(e,g(y({},m),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,a.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),n=r.message||r.toString(),i=(0,o.formatJsonRpcError)(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return(0,o.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}},5108:function(e,t,r){var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();(function(e){var t=void 0!==i&&i||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function f(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;n.arrayBuffer&&n.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(n.blob)return this.blob().then(f);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=d(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=h(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},n.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=o(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[o(e)]},u.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},u.prototype.set=function(e,t){this.map[o(e)]=l(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var g=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function m(e,r){if(!(this instanceof m))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,s=(r=r||{}).body;if(e instanceof m){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new u(r.headers)),this.method=(i=(n=r.method||this.method||"GET").toUpperCase(),g.indexOf(i)>-1?i:n),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var w=[301,302,303,307,308];v.redirect=function(e,t){if(-1===w.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(r,i){return new Promise(function(s,a){var c=new m(r,i);if(c.signal&&c.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var d=new XMLHttpRequest;function h(){d.abort()}if(d.onload=function(){var e,t,r={statusText:d.statusText,headers:(e=d.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(d.status<200||d.status>599)?r.status=200:r.status=d.status,r.url="responseURL"in d?d.responseURL:r.headers.get("X-Request-URL");var n="response"in d?d.response:d.responseText;setTimeout(function(){s(new v(n,r))},0)},d.onerror=function(){setTimeout(function(){a(TypeError("Network request failed"))},0)},d.ontimeout=function(){setTimeout(function(){a(TypeError("Network request timed out"))},0)},d.onabort=function(){setTimeout(function(){a(new e.DOMException("Aborted","AbortError"))},0)},d.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?d.withCredentials=!0:"omit"===c.credentials&&(d.withCredentials=!1),"responseType"in d&&(n.blob?d.responseType="blob":n.arrayBuffer&&(d.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof u||t.Headers&&i.headers instanceof t.Headers)){var f=[];Object.getOwnPropertyNames(i.headers).forEach(function(e){f.push(o(e)),d.setRequestHeader(e,l(i.headers[e]))}),c.headers.forEach(function(e,t){-1===f.indexOf(t)&&d.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){d.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",h),d.onreadystatechange=function(){4===d.readyState&&c.signal.removeEventListener("abort",h)}),d.send(void 0===c._bodyInit?null:c._bodyInit)})}_.polyfill=!0,t.fetch||(t.fetch=_,t.Headers=u,t.Request=m,t.Response=v),e.Headers=u,e.Request=m,e.Response=v,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0})})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},38979:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(55445),i=r(5276);class s extends i.IJsonRpcProvider{constructor(e){super(e),this.events=new n.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,i.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,i.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise(async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,e=>{(0,i.isJsonRpcError)(e)?n(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){n(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,i.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}},44265:function(e,t,r){"use strict";r.d(t,{CA:function(){return i},JV:function(){return o},O4:function(){return n},dQ:function(){return s},xK:function(){return a}});let n="INTERNAL_ERROR",i="SERVER_ERROR",s=[-32700,-32600,-32601,-32602,-32603],a={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[n]:{code:-32603,message:"Internal error"},[i]:{code:-32e3,message:"Server error"}},o=i},23497:function(e,t,r){"use strict";var n=r(13303);r.o(n,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return n.IJsonRpcProvider}}),r.o(n,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return n.formatJsonRpcError}}),r.o(n,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return n.formatJsonRpcRequest}}),r.o(n,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return n.formatJsonRpcResult}}),r.o(n,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return n.getBigIntRpcId}}),r.o(n,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return n.isHttpUrl}}),r.o(n,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return n.isJsonRpcError}}),r.o(n,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return n.isJsonRpcRequest}}),r.o(n,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return n.isJsonRpcResponse}}),r.o(n,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return n.isJsonRpcResult}}),r.o(n,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return n.isLocalhostUrl}}),r.o(n,"isReactNative")&&r.d(t,{isReactNative:function(){return n.isReactNative}}),r.o(n,"isWsUrl")&&r.d(t,{isWsUrl:function(){return n.isWsUrl}}),r.o(n,"payloadId")&&r.d(t,{payloadId:function(){return n.payloadId}})},28418:function(e,t,r){"use strict";r.d(t,{CX:function(){return o},L2:function(){return a},by:function(){return s},i5:function(){return i}});var n=r(44265);function i(e){return n.dQ.includes(e)}function s(e){return Object.keys(n.xK).includes(e)?n.xK[e]:n.xK[n.JV]}function a(e){return Object.values(n.xK).find(t=>t.code===e)||n.xK[n.JV]}function o(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${r} RPC url at ${t}`):e}},74947:function(e,t,r){"use strict";r.d(t,{CS:function(){return a},RI:function(){return c},o0:function(){return s},sT:function(){return o},tm:function(){return l}});var n=r(28418),i=r(44265);function s(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function a(e=6){return BigInt(s(e))}function o(e,t,r){return{id:r||s(),jsonrpc:"2.0",method:e,params:t}}function l(e,t){return{id:e,jsonrpc:"2.0",result:t}}function c(e,t,r){var s;return{id:e,jsonrpc:"2.0",error:void 0===(s=t)?(0,n.by)(i.O4):("string"==typeof s&&(s=Object.assign(Object.assign({},(0,n.by)(i.CA)),{message:s})),void 0!==r&&(s.data=r),(0,n.i5)(s.code)&&(s=(0,n.L2)(s.code)),s)}}},5276:function(e,t,r){"use strict";r.d(t,{IJsonRpcProvider:function(){return a.x0},formatJsonRpcError:function(){return s.RI},formatJsonRpcRequest:function(){return s.sT},formatJsonRpcResult:function(){return s.tm},getBigIntRpcId:function(){return s.CS},isHttpUrl:function(){return o.jK},isJsonRpcError:function(){return l.jg},isJsonRpcRequest:function(){return l.DW},isJsonRpcResponse:function(){return l.u},isJsonRpcResult:function(){return l.k4},isLocalhostUrl:function(){return o.JF},isWsUrl:function(){return o.UZ},parseConnectionError:function(){return n.CX},payloadId:function(){return s.o0}}),r(44265);var n=r(28418),i=r(23497);r.o(i,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return i.IJsonRpcProvider}}),r.o(i,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return i.formatJsonRpcError}}),r.o(i,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return i.formatJsonRpcRequest}}),r.o(i,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return i.formatJsonRpcResult}}),r.o(i,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return i.getBigIntRpcId}}),r.o(i,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return i.isHttpUrl}}),r.o(i,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return i.isJsonRpcError}}),r.o(i,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return i.isJsonRpcRequest}}),r.o(i,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return i.isJsonRpcResponse}}),r.o(i,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return i.isJsonRpcResult}}),r.o(i,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return i.isLocalhostUrl}}),r.o(i,"isReactNative")&&r.d(t,{isReactNative:function(){return i.isReactNative}}),r.o(i,"isWsUrl")&&r.d(t,{isWsUrl:function(){return i.isWsUrl}}),r.o(i,"payloadId")&&r.d(t,{payloadId:function(){return i.payloadId}});var s=r(74947),a=r(75826),o=r(20276),l=r(65505)},75826:function(e,t,r){"use strict";r.d(t,{x0:function(){return s}});class n{}class i extends n{constructor(){super()}}class s extends i{constructor(e){super()}}},20276:function(e,t,r){"use strict";function n(e,t){let r=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function i(e){return n(e,"^https?:")}function s(e){return n(e,"^wss?:")}function a(e){return RegExp("wss?://localhost(:d{2,5})?").test(e)}r.d(t,{JF:function(){return a},UZ:function(){return s},jK:function(){return i}})},65505:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function i(e){return n(e)&&"method"in e}function s(e){return n(e)&&(a(e)||o(e))}function a(e){return"result"in e}function o(e){return"error"in e}r.d(t,{DW:function(){return i},jg:function(){return o},k4:function(){return a},u:function(){return s}})},75646:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(55445),i=r(80577),s=r(5276);let a=()=>"u">typeof WebSocket||"u">typeof r.g&&"u">typeof r.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,o=e=>e.split("?")[0],l="u">typeof WebSocket?WebSocket:"u">typeof r.g&&"u">typeof r.g.WebSocket?r.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:r(16854);class c{constructor(e){if(this.url=e,this.events=new n.EventEmitter,this.registering=!1,!(0,s.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,i.u)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,s.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let n=(0,s.isReactNative)()?void 0:{rejectUnauthorized:!(0,s.isLocalhostUrl)(e)},i=new l(e,[],n);a()?i.onerror=e=>{r(this.emitError(e.error))}:i.on("error",e=>{r(this.emitError(e))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,i.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),n=r.message||r.toString(),i=(0,s.formatJsonRpcError)(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return(0,s.parseConnectionError)(e,o(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${o(this.url)}`));return this.events.emit("register_error",t),t}}},16854:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},11075:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(90059),i=r(82957).lW;function s(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function a(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return a(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let o="base64:";function l(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function c(e){return(e=l(e))?e+":":""}let u=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function d(e,t,r){return e.watch?e.watch((e,n)=>t(e,r+n)):()=>{}}async function h(e){"function"==typeof e.dispose&&await s(e.dispose)}var f=r(27600),p=r(80577),y=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",n=e=>r+e;return e.dbName&&e.storeName&&(t=(0,f.MT)(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await (0,f.U2)(n(e),t)>"u"),getItem:async e=>await (0,f.U2)(n(e),t)??null,setItem:(e,r)=>(0,f.t8)(n(e),r,t),removeItem:e=>(0,f.IV)(n(e),t),getKeys:()=>(0,f.XP)(t),clear:()=>(0,f.ZH)(t)}};class g{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||u()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},f=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),p=(e,r)=>{if(t.watching)for(let n of(r=l(r),t.watchListeners))n(e,r)},y=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await d(t.mounts[e],p,e)},g=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},m=(e,t,n)=>{let i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(let n of e){let e="string"==typeof n,i=l(e?n:n.key),a=e?void 0:n.value,o=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:a,relativeKey:c.relativeKey,options:o})}return Promise.all([...i.values()].map(e=>n(e))).then(e=>e.flat())},b={hasItem(e,t={}){let{relativeKey:n,driver:i}=r(e=l(e));return s(i.hasItem,n,t)},getItem(e,t={}){let{relativeKey:i,driver:a}=r(e=l(e));return s(a.getItem,i,t).then(e=>(0,n.ZP)(e))},getItems:(e,t={})=>m(e,t,e=>e.driver.getItems?s(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return l(e.join(":"))}(e.base,t.key),value:(0,n.ZP)(t.value)}))):Promise.all(e.items.map(t=>s(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:(0,n.ZP)(e)}))))),getItemRaw(e,t={}){let{relativeKey:n,driver:a}=r(e=l(e));return a.getItemRaw?s(a.getItemRaw,n,t):s(a.getItem,n,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(o)?(t=e.slice(o.length),globalThis.Buffer?i.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,n={}){if(void 0===t)return b.removeItem(e);let{relativeKey:i,driver:o}=r(e=l(e));o.setItem&&(await s(o.setItem,i,a(t),n),o.watch||p("update",e))},async setItems(e,t){await m(e,t,async e=>{if(e.driver.setItems)return s(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:a(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>s(e.driver.setItem,t.relativeKey,a(t.value),t.options)))})},async setItemRaw(e,t,n={}){if(void 0===t)return b.removeItem(e,n);let{relativeKey:a,driver:c}=r(e=l(e));if(c.setItemRaw)await s(c.setItemRaw,a,t,n);else{if(!c.setItem)return;await s(c.setItem,a,"string"==typeof t?t:o+(globalThis.Buffer?i.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),n)}c.watch||p("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:n,driver:i}=r(e=l(e));i.removeItem&&(await s(i.removeItem,n,t),(t.removeMeta||t.removeMata)&&await s(i.removeItem,n+"$",t),i.watch||p("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:a}=r(e=l(e)),o=Object.create(null);if(a.getMeta&&Object.assign(o,await s(a.getMeta,i,t)),!t.nativeOnly){let e=await s(a.getItem,i+"$",t).then(e=>(0,n.ZP)(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(o,e))}return o},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=f(e=c(e),!0),n=[],i=[],a=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(a=!1),await s(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+l(r);n.some(e=>t.startsWith(e))||i.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let o=void 0!==t.maxDepth&&!a;return i.filter(r=>{var n;return(!o||function(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}(r,t.maxDepth))&&((n=e)?r.startsWith(n)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=c(e),await Promise.all(f(e,!1).map(async e=>e.driver.clear?s(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>h(e)))},watch:async e=>(await y(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await g()}),async unwatch(){t.watchListeners=[],await g()},mount(e,r){if((e=c(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(d(r,p,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),b},async unmount(e,r=!0){(e=c(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await h(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=l(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>f(e=l(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>b.getKeys(e,t),get:(e,t={})=>b.getItem(e,t),set:(e,t,r={})=>b.setItem(e,t,r),has:(e,t={})=>b.hasItem(e,t),del:(e,t={})=>b.removeItem(e,t),remove:(e,t={})=>b.removeItem(e,t)};return b}({driver:y({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,p.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var m="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},b={exports:{}};function v(e){var t;return[e[0],(0,p.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof m&&m.localStorage?b.exports=m.localStorage:"u">typeof window&&window.localStorage?b.exports=window.localStorage:b.exports=new e}();class w{constructor(){this.localStorage=b.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(v)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,p.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,p.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}let _=async(e,t,r)=>{let n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let a=[];for(;s.length;){let r=s.shift();if(!r)continue;let n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){let n=await e.getItem(r);await t.setItem(r,n),a.push(r)}}await t.setItem(n,1),r(t),E(e,a)},E=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class x{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new w;this.storage=e;try{let t=new g;_(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}},21086:function(e,t,r){"use strict";r.d(t,{iO:function(){return n}});let n={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}},46633:function(e,t,r){"use strict";r.d(t,{Au:function(){return tS},bG:function(){return tx},vf:function(){return tA},xp:function(){return tI}});var n=r(40537),i=r(80577);function s(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let o="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,l=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function c(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),s(e),e}class u{clone(){return this._cloneInto()}}function d(e=32){if(o&&"function"==typeof o.getRandomValues)return o.getRandomValues(new Uint8Array(e));if(o&&"function"==typeof o.randomBytes)return o.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class h extends u{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l(this.buffer)}update(e){a(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=c(e)).length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let t=l(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){a(this),function(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);let c=l(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,h=this.get();if(d>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)c.setUint32(4*e,h[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}let f=BigInt(4294967296-1),p=BigInt(32),y={split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:a}=function(e,t=!1){return t?{h:Number(e&f),l:Number(e>>p&f)}:{h:0|Number(e>>p&f),l:0|Number(e&f)}}(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]},shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/4294967296|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[g,m]=y.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),b=new Uint32Array(80),v=new Uint32Array(80);class w extends h{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:y}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)b[r]=e.getUint32(t),v[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|b[e-15],r=0|v[e-15],n=y.rotrSH(t,r,1)^y.rotrSH(t,r,8)^y.shrSH(t,r,7),i=y.rotrSL(t,r,1)^y.rotrSL(t,r,8)^y.shrSL(t,r,7),s=0|b[e-2],a=0|v[e-2],o=y.rotrSH(s,a,19)^y.rotrBH(s,a,61)^y.shrSH(s,a,6),l=y.rotrSL(s,a,19)^y.rotrBL(s,a,61)^y.shrSL(s,a,6),c=y.add4L(i,l,v[e-7],v[e-16]),u=y.add4H(c,n,o,b[e-7],b[e-16]);b[e]=0|u,v[e]=0|c}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:o,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:w,Hh:_,Hl:E}=this;for(let e=0;e<80;e++){let t=y.rotrSH(u,d,14)^y.rotrSH(u,d,18)^y.rotrBH(u,d,41),x=y.rotrSL(u,d,14)^y.rotrSL(u,d,18)^y.rotrBL(u,d,41),I=u&h^~u&p,S=d&f^~d&w,A=y.add5L(E,x,S,m[e],v[e]),k=y.add5H(A,_,t,I,g[e],b[e]),T=0|A,C=y.rotrSH(r,n,28)^y.rotrBH(r,n,34)^y.rotrBH(r,n,39),O=y.rotrSL(r,n,28)^y.rotrBL(r,n,34)^y.rotrBL(r,n,39),P=r&i^r&a^i&a,R=n&s^n&o^s&o;_=0|p,E=0|w,p=0|h,w=0|f,h=0|u,f=0|d,({h:u,l:d}=y.add(0|l,0|c,0|k,0|T)),l=0|a,c=0|o,a=0|i,o=0|s,i=0|r,s=0|n;let D=y.add3L(T,O,R);r=y.add3H(D,k,C,P),n=0|D}({h:r,l:n}=y.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=y.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:o}=y.add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:l,l:c}=y.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:d}=y.add(0|this.Eh,0|this.El,0|u,0|d)),({h:h,l:f}=y.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:w}=y.add(0|this.Gh,0|this.Gl,0|p,0|w)),({h:_,l:E}=y.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,n,i,s,a,o,l,c,u,d,h,f,p,w,_,E)}roundClean(){b.fill(0),v.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let _=function(e){let t=t=>e().update(c(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new w),E=BigInt(0),x=BigInt(1),I=BigInt(2);function S(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function A(e){if(!S(e))throw Error("Uint8Array expected")}function k(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let T=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function C(e){A(e);let t="";for(let r=0;r<e.length;r++)t+=T[e[r]];return t}function O(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?E:BigInt("0x"+e)}let P={_0:48,_9:57,A:65,F:70,a:97,f:102};function R(e){return e>=P._0&&e<=P._9?e-P._0:e>=P.A&&e<=P.F?e-(P.A-10):e>=P.a&&e<=P.f?e-(P.a-10):void 0}function D(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=R(e.charCodeAt(i)),s=R(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n}function N(e){return A(e),O(C(Uint8Array.from(e).reverse()))}function U(e,t){return D(e.toString(16).padStart(2*t,"0"))}function B(e,t){return U(e,t).reverse()}function L(e,t,r){let n;if("string"==typeof t)try{n=D(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(S(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function j(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];A(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let M=e=>"bigint"==typeof e&&E<=e;function z(e,t,r,n){if(!(M(t)&&M(r)&&M(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let $=e=>(I<<BigInt(e-1))-x,F={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||S(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function q(e,t,r={}){let n=(t,r,n)=>{let i=F[r];if("function"!=typeof i)throw Error("invalid validator function");let s=e[t];if(!(n&&void 0===s)&&!i(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function W(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}let V=BigInt(0),H=BigInt(1),K=BigInt(2),G=BigInt(3),Z=BigInt(4),J=BigInt(5),Y=BigInt(8);function Q(e,t){let r=e%t;return r>=V?r:t+r}function X(e,t,r){let n=e;for(;t-- >V;)n*=n,n%=r;return n}function ee(e,t){if(e===V)throw Error("invert: expected non-zero number");if(t<=V)throw Error("invert: expected positive modulus, got "+t);let r=Q(e,t),n=t,i=V,s=H;for(;r!==V;){let e=n/r,t=n%r,a=i-s*e;n=r,r=t,i=s,s=a}if(n!==H)throw Error("invert: does not exist");return Q(i,t)}let et=(e,t)=>(Q(e,t)&H)===H,er=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function en(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ei(e,t,r=!1,n={}){let i;if(e<=V)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:a}=en(e,t);if(a>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:a,MASK:$(s),ZERO:V,ONE:H,create:t=>Q(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return V<=t&&t<e},is0:e=>e===V,isOdd:e=>(e&H)===H,neg:t=>Q(-t,e),eql:(e,t)=>e===t,sqr:t=>Q(t*t,e),add:(t,r)=>Q(t+r,e),sub:(t,r)=>Q(t-r,e),mul:(t,r)=>Q(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<V)throw Error("invalid exponent, negatives unsupported");if(r===V)return e.ONE;if(r===H)return t;let n=e.ONE,i=t;for(;r>V;)r&H&&(n=e.mul(n,i)),i=e.sqr(i),r>>=H;return n})(o,e,t),div:(t,r)=>Q(t*ee(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ee(t,e),sqrt:n.sqrt||(t=>(i||(i=function(e){if(e%Z===G){let t=(e+H)/Z;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%Y===J){let t=(e-J)/Y;return function(e,r){let n=e.mul(r,K),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,K),i),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n;let i=(e-H)/K;for(t=e-H,r=0;t%K===V;t/=K,r++);for(n=K;n<e&&function(e,t,r){if(t<V)throw Error("invalid exponent, negatives unsupported");if(r<=V)throw Error("invalid modulus");if(r===H)return V;let n=H;for(;t>V;)t&H&&(n=n*e%r),e=e*e%r,t>>=H;return n}(n,i,e)!==e-H;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+H)/Z;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(t+H)/K;return function(e,a){if(e.pow(a,i)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,s),u=e.pow(a,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,H<<BigInt(o-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),o=t}return c}}(e)}(e)),i(o,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?B(e,a):U(e,a),fromBytes:e=>{if(e.length!==a)throw Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);return r?N(e):O(C(e))}});return Object.freeze(o)}let es=BigInt(0),ea=BigInt(1);function eo(e,t){let r=t.negate();return e?r:t}function el(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ec(e,t){return el(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let eu=new WeakMap,ed=new WeakMap;function eh(e){return ed.get(e)||1}let ef=BigInt(0),ep=BigInt(1),ey=BigInt(2),eg=BigInt(8),em={zip215:!0};BigInt(0),BigInt(1);let eb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ev=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let ew=BigInt(1),e_=BigInt(2);BigInt(3);let eE=BigInt(5),ex=BigInt(8),eI=ei(eb,void 0,!0),eS=function(e){var t;let r=function(e){let t=(q(e.Fp,er.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),q(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...en(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return q(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:i,prehash:s,hash:a,randomBytes:o,nByteLength:l,h:c}=r,u=ey<<BigInt(8*l)-ep,d=n.create,h=ei(r.n,r.nBitLength),f=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch{return{isValid:!1,value:ef}}}),p=r.adjustScalarBytes||(e=>e),y=r.domain||((e,t,r)=>{if(k("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function g(e,t){z("coordinate "+e,t,ef,u)}function m(e){if(!(e instanceof w))throw Error("ExtendedPoint expected")}let b=W((e,t)=>{let{ex:r,ey:i,ez:s}=e,a=e.is0();null==t&&(t=a?eg:n.inv(s));let o=d(r*t),l=d(i*t),c=d(s*t);if(a)return{x:ef,y:ep};if(c!==ep)throw Error("invZ was invalid");return{x:o,y:l}}),v=W(e=>{let{a:t,d:n}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:i,ey:s,ez:a,et:o}=e,l=d(i*i),c=d(s*s),u=d(a*a),h=d(u*u),f=d(l*t);if(d(u*d(f+c))!==d(h+d(n*d(l*c))))throw Error("bad point: equation left != right (1)");if(d(i*s)!==d(a*o))throw Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return g("x",t),g("y",r),new w(t,r,ep,d(t*r))}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(w.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,s=function(e){let t;for(t=0;e>E;e>>=x,t+=1);return t}(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,o=(1<<a)-1,l=Array(o+1).fill(i),c=Math.floor((t.BITS-1)/a)*a,u=i;for(let e=c;e>=0;e-=a){l.fill(i);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(o));l[i]=l[i].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<a;e++)u=u.double()}return u}(w,h,e,t)}_setWindowSize(e){S.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){m(e);let{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:a}=e,o=d(t*a),l=d(i*n),c=d(r*a),u=d(s*n);return o===l&&c===u}is0(){return this.equals(w.ZERO)}negate(){return new w(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){let{a:e}=r,{ex:t,ey:n,ez:i}=this,s=d(t*t),a=d(n*n),o=d(ey*d(i*i)),l=d(e*s),c=t+n,u=d(d(c*c)-s-a),h=l+a,f=h-o,p=l-a,y=d(u*f),g=d(h*p),m=d(u*p);return new w(y,g,d(f*h),m)}add(e){m(e);let{a:t,d:n}=r,{ex:i,ey:s,ez:a,et:o}=this,{ex:l,ey:c,ez:u,et:h}=e;if(t===BigInt(-1)){let e=d((s-i)*(c+l)),t=d((s+i)*(c-l)),r=d(t-e);if(r===ef)return this.double();let n=d(a*ey*h),f=d(o*ey*u),p=f+n,y=t+e,g=f-n,m=d(p*r),b=d(y*g),v=d(p*g);return new w(m,b,d(r*y),v)}let f=d(i*l),p=d(s*c),y=d(o*n*h),g=d(a*u),b=d((i+s)*(l+c)-f-p),v=g-y,_=g+y,E=d(p-t*f),x=d(b*v),I=d(_*E),S=d(b*E);return new w(x,I,d(v*_),S)}subtract(e){return this.add(e.negate())}wNAF(e){return S.wNAFCached(this,e,w.normalizeZ)}multiply(e){z("scalar",e,ep,i);let{p:t,f:r}=this.wNAF(e);return w.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=w.ZERO){return z("scalar",e,ef,i),e===ef?I:this.is0()||e===ep?this:S.wNAFCachedUnsafe(this,e,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,i).is0()}toAffine(e){return b(this,e)}clearCofactor(){let{h:e}=r;return e===ep?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:i,a:s}=r,a=n.BYTES;e=L("pointHex",e,a),k("zip215",t);let o=e.slice(),l=e[a-1];o[a-1]=-129&l;let c=N(o);z("pointHex.y",c,ef,t?u:n.ORDER);let h=d(c*c),{isValid:p,value:y}=f(d(h-ep),d(i*h-s));if(!p)throw Error("Point.fromHex: invalid y coordinate");let g=(y&ep)===ep,m=(128&l)!=0;if(!t&&y===ef&&m)throw Error("Point.fromHex: x=0 and x_0=1");return m!==g&&(y=d(-y)),w.fromAffine({x:y,y:c})}static fromPrivateKey(e){return A(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=B(t,n.BYTES);return r[r.length-1]|=e&ep?128:0,r}toHex(){return C(this.toRawBytes())}}w.BASE=new w(r.Gx,r.Gy,ep,d(r.Gx*r.Gy)),w.ZERO=new w(ef,ep,ep,ef);let{BASE:_,ZERO:I}=w,S=(t=8*l,{constTimeNegate:eo,hasPrecomputes:e=>1!==eh(e),unsafeLadder(e,t,r=w.ZERO){let n=e;for(;t>es;)t&ea&&(r=r.add(n)),n=n.double(),t>>=ea;return r},precomputeWindow(e,r){let{windows:n,windowSize:i}=ec(r,t),s=[],a=e,o=a;for(let e=0;e<n;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(e,r,n){let{windows:i,windowSize:s}=ec(e,t),a=w.ZERO,o=w.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<i;e++){let t=e*s,i=Number(n&l);n>>=u,i>s&&(i-=c,n+=ea);let d=t+Math.abs(i)-1,h=e%2!=0,f=i<0;0===i?o=o.add(eo(h,r[t])):a=a.add(eo(f,r[d]))}return{p:a,f:o}},wNAFUnsafe(e,r,n,i=w.ZERO){let{windows:s,windowSize:a}=ec(e,t),o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*a;if(n===es)break;let s=Number(n&o);if(n>>=c,s>a&&(s-=l,n+=ea),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),i=i.add(u)}return i},getPrecomputes(e,t,r){let n=eu.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&eu.set(t,r(n))),n},wNAFCached(e,t,r){let n=eh(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=eh(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){el(r,t),ed.set(e,r),eu.delete(e)}});function A(e){let t=n.BYTES;e=L("private key",e,t);let r=L("hashed private key",a(e),2*t),s=p(r.slice(0,t)),o=r.slice(t,2*t),l=Q(N(s),i),c=_.multiply(l),u=c.toRawBytes();return{head:s,prefix:o,scalar:l,point:c,pointBytes:u}}function T(e=new Uint8Array,...t){return Q(N(a(y(j(...t),L("context",e),!!s))),i)}return _._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,r={}){e=L("message",e),s&&(e=s(e));let{prefix:a,scalar:o,pointBytes:l}=A(t),c=T(r.context,a,e),u=_.multiply(c).toRawBytes(),d=Q(c+T(r.context,u,l,e)*o,i);return z("signature.s",d,ef,i),L("result",j(u,B(d,n.BYTES)),2*n.BYTES)},verify:function(e,t,r,i=em){let a,o,l;let{context:c,zip215:u}=i,d=n.BYTES;e=L("signature",e,2*d),t=L("message",t),r=L("publicKey",r,d),void 0!==u&&k("zip215",u),s&&(t=s(t));let h=N(e.slice(d,2*d));try{a=w.fromHex(r,u),o=w.fromHex(e.slice(0,d),u),l=_.multiplyUnsafe(h)}catch{return!1}if(!u&&a.isSmallOrder())return!1;let f=T(c,o.toRawBytes(),a.toRawBytes(),t);return o.add(a.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(n.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:eI,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ex,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_,randomBytes:d,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=Q(t*t*t,eb),n=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=e*e%eb*e%eb,a=X(s,e_,eb)*s%eb,o=X(a,ew,eb)*e%eb,l=X(o,eE,eb)*o%eb,c=X(l,t,eb)*l%eb,u=X(c,r,eb)*c%eb,d=X(u,n,eb)*u%eb,h=X(d,i,eb)*d%eb,f=X(h,i,eb)*d%eb,p=X(f,t,eb)*l%eb;return{pow_p_5_8:X(p,e_,eb)*e%eb,b2:s}}(e*Q(r*r*t,eb)).pow_p_5_8,i=Q(e*r*n,eb),s=Q(t*i*i,eb),a=i,o=Q(i*ev,eb),l=s===e,c=s===Q(-e,eb),u=s===Q(-e*ev,eb);return l&&(i=a),(c||u)&&(i=o),et(i,eb)&&(i=Q(-i,eb)),{isValid:l||c,value:i}}}),eA="base64url",ek="utf8",eT="utf8",eC="base58btc";function eO(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function eP(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?eO(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function eR(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=eP(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return eO(r)}var eD=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=o*a[h]>>>0,a[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===a[f];)f++;for(var p=new Uint8Array(n+(s-f)),y=n;f!==s;)p[y++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],h=0,f=a-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*c[f]>>>0,c[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=h,i++}for(var p=a-n;p!==a&&0===c[p];)p++;for(var y=l.repeat(r);p<a;++p)y+=e.charAt(c[p]);return y},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};let eN=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},eU=e=>new TextEncoder().encode(e),eB=e=>new TextDecoder().decode(e);class eL{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ej{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ez(this,e)}}class eM{constructor(e){this.decoders=e}or(e){return ez(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let ez=(e,t)=>new eM({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class e${constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new eL(e,t,r),this.decoder=new ej(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let eF=({name:e,prefix:t,encode:r,decode:n})=>new e$(e,t,r,n),eq=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=eD(r,t);return eF({prefix:e,name:t,encode:n,decode:e=>eN(i(e))})},eW=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let a=new Uint8Array(s*r/8|0),o=0,l=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);l=l<<r|s,(o+=r)>=8&&(o-=8,a[c++]=255&l>>o)}if(o>=r||255&l<<8-o)throw SyntaxError("Unexpected end of data");return a},eV=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let n=0;n<e.length;++n)for(o=o<<8|e[n],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},eH=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>eF({prefix:t,name:e,encode:e=>eV(e,n,r),decode:t=>eW(t,n,r,e)});var eK=Object.freeze({__proto__:null,identity:eF({prefix:"\0",name:"identity",encode:e=>eB(e),decode:e=>eU(e)})}),eG=Object.freeze({__proto__:null,base2:eH({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),eZ=Object.freeze({__proto__:null,base8:eH({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),eJ=Object.freeze({__proto__:null,base10:eq({prefix:"9",name:"base10",alphabet:"0123456789"})}),eY=Object.freeze({__proto__:null,base16:eH({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:eH({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let eQ=eH({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eX=eH({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e0=eH({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e1=eH({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e2=eH({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e3=eH({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var e5=Object.freeze({__proto__:null,base32:eQ,base32upper:eX,base32pad:e0,base32padupper:e1,base32hex:e2,base32hexupper:e3,base32hexpad:eH({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:eH({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:eH({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),e8=Object.freeze({__proto__:null,base36:eq({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:eq({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),e6=Object.freeze({__proto__:null,base58btc:eq({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:eq({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let e4=eH({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var e9=Object.freeze({__proto__:null,base64:e4,base64pad:eH({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:eH({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:eH({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let e7=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),te=e7.reduce((e,t,r)=>(e[r]=t,e),[]),tt=e7.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var tr=Object.freeze({__proto__:null,base256emoji:eF({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=te[t],"")},decode:function(e){let t=[];for(let r of e){let e=tt[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function tn(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw tn.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return tn.bytes=s-t,n}var ti=function e(t,r,n){r=r||[],n=n||0;for(var i=n;t>=2147483648;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r};let ts=(e,t,r=0)=>(ti(e,t,r),t),ta=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,to=(e,t)=>{let r=t.byteLength,n=ta(e),i=n+ta(r),s=new Uint8Array(i+r);return ts(e,s,0),ts(r,s,n),s.set(t,i),new tl(e,r,t,s)};class tl{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let tc=({name:e,code:t,encode:r})=>new tu(e,t,r);class tu{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?to(this.code,t):t.then(e=>to(this.code,e))}throw Error("Unknown type, must be binary type")}}let td=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var th=Object.freeze({__proto__:null,sha256:tc({name:"sha2-256",code:18,encode:td("SHA-256")}),sha512:tc({name:"sha2-512",code:19,encode:td("SHA-512")})}),tf=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:eN,digest:e=>to(0,eN(e))}});new TextEncoder,new TextDecoder;let tp={...eK,...eG,...eZ,...eJ,...eY,...e5,...e8,...e6,...e9,...tr};function ty(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...th,...tf});let tg=ty("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),tm=ty("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=eP((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),tb={utf8:tg,"utf-8":tg,hex:tp.base16,latin1:tm,ascii:tm,binary:tm,...tp};function tv(e,t="utf8"){let r=tb[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function tw(e,t="utf8"){let r=tb[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?eO(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function t_(e){return(0,i.D)(tv(tw(e,eA),ek))}function tE(e){return tv(tw((0,i.u)(e),ek),eA)}function tx(e){return["did","key","z"+tv(eR([tw("K36",eC),e]),eC)].join(":")}function tI(e){let t=e.split("."),r=t_(t[0]);return{header:r,payload:t_(t[1]),signature:tw(t[2],eA),data:tw(t.slice(0,2).join("."),eT)}}function tS(e=d(32)){let t=eS.getPublicKey(e);return{secretKey:eR([e,t]),publicKey:t}}async function tA(e,t,r,i,s=(0,n.fromMiliseconds)(Date.now())){var a,o;let l={alg:"EdDSA",typ:"JWT"},c={iss:tx(i.publicKey),sub:e,aud:t,iat:s,exp:s+r},u=tw([tE((a={header:l,payload:c}).header),tE(a.payload)].join("."),eT);return[tE((o={header:l,payload:c,signature:eS.sign(u,i.secretKey.slice(0,32))}).header),tE(o.payload),tv(o.signature,eA)].join(".")}},80577:function(e,t,r){"use strict";r.d(t,{D:function(){return s},u:function(){return a}});let n=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),i=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function s(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return i(e)}catch(t){return e}}function a(e){return"string"==typeof e?e:n(e)||""}},70213:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(62494);n.__exportStar(r(12658),t),n.__exportStar(r(75127),t)},12658:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},75127:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},40537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(62494);n.__exportStar(r(78627),t),n.__exportStar(r(59854),t),n.__exportStar(r(3205),t),n.__exportStar(r(70213),t)},3205:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(62494).__exportStar(r(71146),t)},71146:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},68353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let n=r(70213);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},86029:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},78627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(62494);n.__exportStar(r(86029),t),n.__exportStar(r(68353),t)},59854:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},62494:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return w},__asyncGenerator:function(){return v},__asyncValues:function(){return _},__await:function(){return b},__awaiter:function(){return u},__classPrivateFieldGet:function(){return S},__classPrivateFieldSet:function(){return A},__createBinding:function(){return h},__decorate:function(){return o},__exportStar:function(){return f},__extends:function(){return i},__generator:function(){return d},__importDefault:function(){return I},__importStar:function(){return x},__makeTemplateObject:function(){return E},__metadata:function(){return c},__param:function(){return l},__read:function(){return y},__rest:function(){return a},__spread:function(){return g},__spreadArrays:function(){return m},__values:function(){return p}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function h(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})})}function o(e,t){try{var r;(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},76454:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},3897:function(e,t,r){"use strict";t.D=void 0;let n=r(76454);t.D=function(){let e,t,r;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function i(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let n=r[e],i=["itemprop","property","name"].map(e=>n.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(i.length&&i){let e=n.getAttribute("content");if(e)return e}}return""}let s=((r=i("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),a=i("description","og:description","twitter:description","keywords");return{description:a,url:t.origin,icons:function(){let r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){let i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=i.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;n.push(r)}else n.push(e)}}}return n}(),name:s}}},59196:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),a=s[0],o=s[1],c=new i((a+o)*3/4-o),u=0,d=o>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=0,o=n-i;a<o;a+=16383)s.push(function(e,t,n){for(var i,s=[],a=t;a<n;a+=3)s.push(r[(i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},9440:function(e,t,r){let n=r(25003);function i(e,t,r){let n=e[t]+e[r],i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function s(e,t,r,n){let i=e[t]+r;r<0&&(i+=4294967296);let s=e[t+1]+n;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function a(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function o(e,t,r,n,a,o){let l=d[a],c=d[a+1],h=d[o],f=d[o+1];i(u,e,t),s(u,e,l,c);let p=u[n]^u[e],y=u[n+1]^u[e+1];u[n]=y,u[n+1]=p,i(u,r,n),p=u[t]^u[r],y=u[t+1]^u[r+1],u[t]=p>>>24^y<<8,u[t+1]=y>>>24^p<<8,i(u,e,t),s(u,e,h,f),p=u[n]^u[e],y=u[n+1]^u[e+1],u[n]=p>>>16^y<<16,u[n+1]=y>>>16^p<<16,i(u,r,n),p=u[t]^u[r],y=u[t+1]^u[r+1],u[t]=y>>>31^p<<1,u[t+1]=p>>>31^y<<1}let l=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(e){return 2*e})),u=new Uint32Array(32),d=new Uint32Array(32);function h(e,t){let r=0;for(r=0;r<16;r++)u[r]=e.h[r],u[r+16]=l[r];for(u[24]=u[24]^e.t,u[25]=u[25]^e.t/4294967296,t&&(u[28]=~u[28],u[29]=~u[29]),r=0;r<32;r++)d[r]=a(e.b,4*r);for(r=0;r<12;r++)o(0,8,16,24,c[16*r+0],c[16*r+1]),o(2,10,18,26,c[16*r+2],c[16*r+3]),o(4,12,20,28,c[16*r+4],c[16*r+5]),o(6,14,22,30,c[16*r+6],c[16*r+7]),o(0,10,20,30,c[16*r+8],c[16*r+9]),o(2,12,22,24,c[16*r+10],c[16*r+11]),o(4,14,16,26,c[16*r+12],c[16*r+13]),o(6,8,18,28,c[16*r+14],c[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^u[r]^u[r+16]}let f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function p(e,t,r,n){if(0===e||e>64)throw Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&16!==r.length)throw Error("Illegal salt, expected Uint8Array with length is 16");if(n&&16!==n.length)throw Error("Illegal personal, expected Uint8Array with length is 16");let i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};f.fill(0),f[0]=e,t&&(f[1]=t.length),f[2]=1,f[3]=1,r&&f.set(r,32),n&&f.set(n,48);for(let e=0;e<16;e++)i.h[e]=l[e]^a(f,4*e);return t&&(y(i,t),i.c=128),i}function y(e,t){for(let r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,h(e,!1),e.c=0),e.b[e.c++]=t[r]}function g(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;h(e,!0);let t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function m(e,t,r,i,s){r=r||64,e=n.normalizeInput(e),i&&(i=n.normalizeInput(i)),s&&(s=n.normalizeInput(s));let a=p(r,t,i,s);return y(a,e),g(a)}e.exports={blake2b:m,blake2bHex:function(e,t,r,i,s){let a=m(e,t,r,i,s);return n.toHex(a)},blake2bInit:p,blake2bUpdate:y,blake2bFinal:g}},55437:function(e,t,r){let n=r(25003);function i(e,t,r,n,i,a){l[e]=l[e]+l[t]+i,l[n]=s(l[n]^l[e],16),l[r]=l[r]+l[n],l[t]=s(l[t]^l[r],12),l[e]=l[e]+l[t]+a,l[n]=s(l[n]^l[e],8),l[r]=l[r]+l[n],l[t]=s(l[t]^l[r],7)}function s(e,t){return e>>>t^e<<32-t}let a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),l=new Uint32Array(16),c=new Uint32Array(16);function u(e,t){let r=0;for(r=0;r<8;r++)l[r]=e.h[r],l[r+8]=a[r];for(l[12]^=e.t,l[13]^=e.t/4294967296,t&&(l[14]=~l[14]),r=0;r<16;r++){var n,s;c[r]=(n=e.b)[s=4*r]^n[s+1]<<8^n[s+2]<<16^n[s+3]<<24}for(r=0;r<10;r++)i(0,4,8,12,c[o[16*r+0]],c[o[16*r+1]]),i(1,5,9,13,c[o[16*r+2]],c[o[16*r+3]]),i(2,6,10,14,c[o[16*r+4]],c[o[16*r+5]]),i(3,7,11,15,c[o[16*r+6]],c[o[16*r+7]]),i(0,5,10,15,c[o[16*r+8]],c[o[16*r+9]]),i(1,6,11,12,c[o[16*r+10]],c[o[16*r+11]]),i(2,7,8,13,c[o[16*r+12]],c[o[16*r+13]]),i(3,4,9,14,c[o[16*r+14]],c[o[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=l[r]^l[r+8]}function d(e,t){if(!(e>0&&e<=32))throw Error("Incorrect output length, should be in [1, 32]");let r=t?t.length:0;if(t&&!(r>0&&r<=32))throw Error("Incorrect key length, should be in [1, 32]");let n={h:new Uint32Array(a),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(h(n,t),n.c=64),n}function h(e,t){for(let r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,u(e,!1),e.c=0),e.b[e.c++]=t[r]}function f(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;u(e,!0);let t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function p(e,t,r){r=r||32,e=n.normalizeInput(e);let i=d(r,t);return h(i,e),f(i)}e.exports={blake2s:p,blake2sHex:function(e,t,r){let i=p(e,t,r);return n.toHex(i)},blake2sInit:d,blake2sUpdate:h,blake2sFinal:f}},84041:function(e,t,r){let n=r(9440),i=r(55437);e.exports={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:i.blake2s,blake2sHex:i.blake2sHex,blake2sInit:i.blake2sInit,blake2sUpdate:i.blake2sUpdate,blake2sFinal:i.blake2sFinal}},25003:function(e){function t(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else if("string"==typeof e)t=new TextEncoder().encode(e);else throw Error("Input must be an string, Buffer or Uint8Array");return t},toHex:function(e){return Array.prototype.map.call(e,function(e){return(e<16?"0":"")+e.toString(16)}).join("")},debugPrint:function(e,r,n){let i="\n"+e+" = ";for(let s=0;s<r.length;s+=2){if(32===n)i+=t(r[s]).toUpperCase()+" "+t(r[s+1]).toUpperCase();else if(64===n)i+=t(r[s+1]).toUpperCase()+t(r[s]).toUpperCase();else throw Error("Invalid size "+n);s%6==4?i+="\n"+Array(e.length+4).join(" "):s<r.length-2&&(i+=" ")}console.log(i)},testSpeed:function(e,t,r){let n=new Date().getTime(),i=new Uint8Array(t);for(let e=0;e<t;e++)i[e]=e%256;let s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let s=0;s<r;s++){let r=e(i),s=new Date().getTime(),a=s-n;n=s,console.log("Hashed in "+a+"ms: "+r.substring(0,20)+"..."),console.log(Math.round(t/1048576/(a/1e3)*100)/100+" MB PER SECOND")}}}},82957:function(e,t,r){"use strict";let n=r(59196),i=r(68848),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(L(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);let i=function(e){var t;if(o.isBuffer(e)){let t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|f(e))}function d(e){let t=e.length<0?0:0|f(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}function f(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(i)return n?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=j[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var s,a;return s=t,a=r,0===s&&a===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let s,a=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*a}else -1!==n&&(s-=s-n),n=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return -1}function v(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,i,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function E(e,t,r,n,i){O(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,n,i){O(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function I(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function S(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function A(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.lW=o,t.h2=50,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(L(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(L(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(o.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(L(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,a=r-t,l=Math.min(s,a),c=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){var i,s,a,o,l,c,u,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,B(N(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=r,B(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,o);case"base64":return l=t,c=r,B(U(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,d=r,B(function(e,t){let r,n;let i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-u),this,u,d);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=M(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=M(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=M(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),o.prototype.readBigInt64BE=M(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=M(function(e,t=0){return E(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=M(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=M(function(e,t=0){return E(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=M(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=o.isBuffer(e)?e:o.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};let k={};function T(e,t,r){k[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function C(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function O(e,t,r,n,i,s){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new k.ERR_OUT_OF_RANGE("value",n,e)}P(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&R(i,n.length-(s+1))}function P(e,t){if("number"!=typeof e)throw new k.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw P(e,r),new k.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new k.ERR_BUFFER_OUT_OF_BOUNDS;throw new k.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}T("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),T("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),T("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=C(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=C(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let D=/[^+/0-9A-Za-z-_]/g;function N(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function U(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let j=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function M(e){return"undefined"==typeof BigInt?z:e}function z(){throw Error("BigInt not supported")}},3096:function(e){"use strict";e.exports=function e(t){if("number"==typeof t&&isNaN(t))throw Error("NaN is not allowed");if("number"==typeof t&&!isFinite(t))throw Error("Infinity is not allowed");if(null===t||"object"!=typeof t)return JSON.stringify(t);if(t.toJSON instanceof Function)return e(t.toJSON());if(Array.isArray(t)){let r=t.reduce((t,r,n)=>`${t}${0===n?"":","}${e(void 0===r||"symbol"==typeof r?null:r)}`,"");return`[${r}]`}let r=Object.keys(t).sort().reduce((r,n)=>{if(void 0===t[n]||"symbol"==typeof t[n])return r;let i=0===r.length?"":",";return`${r}${i}${e(n)}:${e(t[n])}`},"");return`{${r}}`}},65383:function(e,t,r){"use strict";r.d(t,{qY:function(){return f}});var n=r(25566),i=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},a=function(e){this.version=e,this.type="node",this.name="node",this.os=n.platform},o=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},l=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},c=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],h=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new c:"undefined"!=typeof navigator?p(navigator.userAgent):void 0!==n&&n.version?new a(n.version.slice(1)):null}function p(e){var t=""!==e&&d.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]},!1);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new l;var a=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);a?a.length<3&&(a=i(i([],a,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-a.length),!0)):a=[];var c=a.join("."),f=function(e){for(var t=0,r=h.length;t<r;t++){var n=h[t],i=n[0];if(n[1].exec(e))return i}return null}(e),p=u.exec(e);return p&&p[1]?new o(r,c,f,p[1]):new s(r,c,f)}},55445:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,n){var i;function s(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&(i={once:!0},"function"==typeof e.on&&y(e,"error",s,i))})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){if(o(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"==typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var i,s,a,c=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,o=Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var c=l.length,u=p(l,c),r=0;r<c;++r)n(u[r],this,t);return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,a;if(o(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},90548:function(e){var t;t=function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(r,n){if(n=n||{},"function"!=typeof r)throw new t("fetch must be a function");if("object"!=typeof n)throw new t("defaults must be an object");if(void 0!==n.retries&&!e(n.retries))throw new t("retries must be a positive integer");if(void 0!==n.retryDelay&&!e(n.retryDelay)&&"function"!=typeof n.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!=typeof n.retryOn)throw new t("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(i,s){var a=n.retries,o=n.retryDelay,l=n.retryOn;if(s&&void 0!==s.retries){if(e(s.retries))a=s.retries;else throw new t("retries must be a positive integer")}if(s&&void 0!==s.retryDelay){if(e(s.retryDelay)||"function"==typeof s.retryDelay)o=s.retryDelay;else throw new t("retryDelay must be a positive integer or a function returning a positive integer")}if(s&&s.retryOn){if(Array.isArray(s.retryOn)||"function"==typeof s.retryOn)l=s.retryOn;else throw new t("retryOn property expects an array or function")}return new Promise(function(e,t){var n=function(n){r("undefined"!=typeof Request&&i instanceof Request?i.clone():i,s).then(function(r){if(Array.isArray(l)&&-1===l.indexOf(r.status))e(r);else if("function"==typeof l)try{return Promise.resolve(l(n,null,r)).then(function(t){t?c(n,null,r):e(r)}).catch(t)}catch(e){t(e)}else n<a?c(n,null,r):e(r)}).catch(function(e){if("function"==typeof l)try{Promise.resolve(l(n,e,null)).then(function(r){r?c(n,e,null):t(e)}).catch(function(e){t(e)})}catch(e){t(e)}else n<a?c(n,e,null):t(e)})};function c(e,t,r){setTimeout(function(){n(++e)},"function"==typeof o?o(e,t,r):o)}n(0)})}}},e.exports=t()},68848:function(e,t){t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=256*s+e[t+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=c}return(f?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,h=23===i?5960464477539062e-23:0,f=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(t*l-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[r+f]=255&a,f+=p,a/=256,c-=8);e[r+f-p]|=128*y}},79080:function(e,t,r){"use strict";r.d(t,{YM:function(){return i},az:function(){return v},h:function(){return v},sY:function(){return N}});var n,i,s,a,o,l,c,u,d,h,f={},p=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function m(e,t){for(var r in t)e[r]=t[r];return e}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function v(e,t,r){var i,s,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?s=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return w(e,o,i,s,null)}function w(e,t,r,n,a){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++s:a,__i:-1,__u:0};return null==a&&null!=i.vnode&&i.vnode(o),o}function _(e){return e.children}function E(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?x(e):null}function I(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!S.__r++||o!==i.debounceRendering)&&((o=i.debounceRendering)||l)(S)}function S(){var e,t,r,n,s,o,l,u;for(a.sort(c);e=a.shift();)e.__d&&(t=a.length,n=void 0,o=(s=(r=e).__v).__e,l=[],u=[],r.__P&&((n=m({},s)).__v=s.__v+1,i.vnode&&i.vnode(n),O(r.__P,n,s,r.__n,r.__P.namespaceURI,32&s.__u?[o]:null,l,null==o?x(s):o,!!(32&s.__u),u),n.__v=s.__v,n.__.__k[n.__i]=n,P(l,n,u),n.__e!=o&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),a.length>t&&a.sort(c));S.__r=0}function A(e,t,r,n,s,a,o,l,c,u,d){var h,y,m,v,E,I=n&&n.__k||p,S=t.length;for(r.__d=c,function(e,t,r){var n,s,a,o,l,c=t.length,u=r.length,d=u,h=0;for(e.__k=[],n=0;n<c;n++)null!=(s=t[n])&&"boolean"!=typeof s&&"function"!=typeof s?(o=n+h,(s=e.__k[n]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?w(null,s,null,null,null):g(s)?w(_,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?w(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!==(l=s.__i=function(e,t,r,n){var i=e.key,s=e.type,a=r-1,o=r+1,l=t[r];if(null===l||l&&i==l.key&&s===l.type&&0==(131072&l.__u))return r;if(n>(null!=l&&0==(131072&l.__u)?1:0))for(;a>=0||o<t.length;){if(a>=0){if((l=t[a])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return a;a--}if(o<t.length){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return o;o++}}return -1}(s,r,o,d))&&(d--,(a=r[l])&&(a.__u|=131072)),null==a||null===a.__v?(-1==l&&h--,"function"!=typeof s.type&&(s.__u|=65536)):l!==o&&(l==o-1?h--:l==o+1?h++:(l>o?h--:h++,s.__u|=65536))):s=e.__k[n]=null;if(d)for(n=0;n<u;n++)null!=(a=r[n])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=x(a)),function e(t,r,n){var s,a;if(i.unmount&&i.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||R(s,null,r)),null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){i.__e(e,r)}s.base=s.__P=null}if(s=t.__k)for(a=0;a<s.length;a++)s[a]&&e(s[a],r,n||"function"!=typeof t.type);n||b(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(a,a))}(r,t,I),c=r.__d,h=0;h<S;h++)null!=(m=r.__k[h])&&(y=-1===m.__i?f:I[m.__i]||f,m.__i=h,O(e,m,y,s,a,o,l,c,u,d),v=m.__e,m.ref&&y.ref!=m.ref&&(y.ref&&R(y.ref,null,m),d.push(m.ref,m.__c||v,m)),null==E&&null!=v&&(E=v),65536&m.__u||y.__k===m.__k?c=function e(t,r,n){var i,s;if("function"==typeof t.type){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,r=e(i[s],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=x(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(m,c,e):"function"==typeof m.type&&void 0!==m.__d?c=m.__d:v&&(c=v.nextSibling),m.__d=void 0,m.__u&=-196609);r.__d=c,r.__e=E}function k(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||y.test(t)?r:r+"px"}function T(e,t,r,n,i){var s;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||k(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||k(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase() in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=u,e.addEventListener(t,s?h:d,s)):e.removeEventListener(t,s?h:d,s);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function C(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<r.u)return;return r(i.event?i.event(t):t)}}}function O(e,t,r,s,a,o,l,c,u,d){var h,p,y,v,w,I,S,k,C,O,P,R,N,U,B,L,j=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(u=!!(32&r.__u),o=[c=t.__e=r.__e]),(h=i.__b)&&h(t);e:if("function"==typeof j)try{if(k=t.props,C="prototype"in j&&j.prototype.render,O=(h=j.contextType)&&s[h.__c],P=h?O?O.props.value:h.__:s,r.__c?S=(p=t.__c=r.__c).__=p.__E:(C?t.__c=p=new j(k,P):(t.__c=p=new E(k,P),p.constructor=j,p.render=D),O&&O.sub(p),p.props=k,p.state||(p.state={}),p.context=P,p.__n=s,y=p.__d=!0,p.__h=[],p._sb=[]),C&&null==p.__s&&(p.__s=p.state),C&&null!=j.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=m({},p.__s)),m(p.__s,j.getDerivedStateFromProps(k,p.__s))),v=p.props,w=p.state,p.__v=t,y)C&&null==j.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),C&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(C&&null==j.getDerivedStateFromProps&&k!==v&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,P),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,P)||t.__v===r.__v)){for(t.__v!==r.__v&&(p.props=k,p.state=p.__s,p.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),R=0;R<p._sb.length;R++)p.__h.push(p._sb[R]);p._sb=[],p.__h.length&&l.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,P),C&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(v,w,I)})}if(p.context=P,p.props=k,p.__P=e,p.__e=!1,N=i.__r,U=0,C){for(p.state=p.__s,p.__d=!1,N&&N(t),h=p.render(p.props,p.state,p.context),B=0;B<p._sb.length;B++)p.__h.push(p._sb[B]);p._sb=[]}else do p.__d=!1,N&&N(t),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++U<25);p.state=p.__s,null!=p.getChildContext&&(s=m(m({},s),p.getChildContext())),C&&!y&&null!=p.getSnapshotBeforeUpdate&&(I=p.getSnapshotBeforeUpdate(v,w)),A(e,g(L=null!=h&&h.type===_&&null==h.key?h.props.children:h)?L:[L],t,r,s,a,o,l,c,u,d),p.base=t.__e,t.__u&=-161,p.__h.length&&l.push(p),S&&(p.__E=p.__=null)}catch(e){if(t.__v=null,u||null!=o){for(t.__u|=u?160:32;c&&8===c.nodeType&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,t.__e=c}else t.__e=r.__e,t.__k=r.__k;i.__e(e,t,r)}else null==o&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,s,a,o,l,c,u){var d,h,p,y,m,v,w,_=r.props,E=t.props,I=t.type;if("svg"===I?a="http://www.w3.org/2000/svg":"math"===I?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=o){for(d=0;d<o.length;d++)if((m=o[d])&&"setAttribute"in m==!!I&&(I?m.localName===I:3===m.nodeType)){e=m,o[d]=null;break}}if(null==e){if(null===I)return document.createTextNode(E);e=document.createElementNS(a,I,E.is&&E),c&&(i.__m&&i.__m(t,o),c=!1),o=null}if(null===I)_===E||c&&e.data===E||(e.data=E);else{if(o=o&&n.call(e.childNodes),_=r.props||f,!c&&null!=o)for(_={},d=0;d<e.attributes.length;d++)_[(m=e.attributes[d]).name]=m.value;for(d in _)if(m=_[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=m;else if(!(d in E)){if("value"==d&&"defaultValue"in E||"checked"==d&&"defaultChecked"in E)continue;T(e,d,null,m,a)}for(d in E)m=E[d],"children"==d?y=m:"dangerouslySetInnerHTML"==d?h=m:"value"==d?v=m:"checked"==d?w=m:c&&"function"!=typeof m||_[d]===m||T(e,d,m,_[d],a);if(h)c||p&&(h.__html===p.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(p&&(e.innerHTML=""),A(e,g(y)?y:[y],t,r,s,"foreignObject"===I?"http://www.w3.org/1999/xhtml":a,o,l,o?o[0]:r.__k&&x(r,0),c,u),null!=o)for(d=o.length;d--;)b(o[d]);c||(d="value","progress"===I&&null==v?e.removeAttribute("value"):void 0===v||v===e[d]&&("progress"!==I||v)&&("option"!==I||v===_[d])||T(e,d,v,_[d],a),d="checked",void 0!==w&&w!==e[d]&&T(e,d,w,_[d],a))}return e}(r.__e,t,r,s,a,o,l,u,d);(h=i.diffed)&&h(t)}function P(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)R(r[n],r[++n],r[++n]);i.__c&&i.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){i.__e(e,t.__v)}})}function R(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,r)}}function D(e,t,r){return this.constructor(e,r)}function N(e,t,r){var s,a,o,l;i.__&&i.__(e,t),a=(s="function"==typeof r)?null:r&&r.__k||t.__k,o=[],l=[],O(t,e=(!s&&r||t).__k=v(_,null,[e]),a||f,f,t.namespaceURI,!s&&r?[r]:a?null:t.firstChild?n.call(t.childNodes):null,o,!s&&r?r:a?a.__e:t.firstChild,s,l),P(o,e,l)}n=p.slice,i={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},s=0,E.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},r),this.props)),e&&m(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),I(this))},E.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),I(this))},E.prototype.render=_,a=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},S.__r=0,u=0,d=C(!1),h=C(!0)},99799:function(e,t,r){"use strict";r.d(t,{Ye:function(){return w},d4:function(){return v},eJ:function(){return b}});var n,i,s,a,o=r(79080),l=0,c=[],u=o.YM,d=u.__b,h=u.__r,f=u.diffed,p=u.__c,y=u.unmount,g=u.__;function m(e,t){u.__h&&u.__h(i,e,l||t),l=0;var r=i.__H||(i.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function b(e){return l=1,function(e,t,r){var s=m(n++,2);if(s.t=e,!s.__c&&(s.__=[A(void 0,t),function(e){var t=s.__N?s.__N[0]:s.__[0],r=s.t(t,e);t!==r&&(s.__N=[r,s.__[1]],s.__c.setState({}))}],s.__c=i,!i.u)){var a=function(e,t,r){if(!s.__c.__H)return!0;var n=s.__c.__H.__.filter(function(e){return!!e.__c});if(n.every(function(e){return!e.__N}))return!o||o.call(this,e,t,r);var i=!1;return n.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}}),!(!i&&s.__c.props===e)&&(!o||o.call(this,e,t,r))};i.u=!0;var o=i.shouldComponentUpdate,l=i.componentWillUpdate;i.componentWillUpdate=function(e,t,r){if(this.__e){var n=o;o=void 0,a(e,t,r),o=n}l&&l.call(this,e,t,r)},i.shouldComponentUpdate=a}return s.__N||s.__}(A,e)}function v(e,t){var r=m(n++,3);!u.__s&&S(r.__H,t)&&(r.__=e,r.i=t,i.__H.__h.push(r))}function w(e,t){var r=m(n++,7);return S(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function _(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(x),e.__H.__h.forEach(I),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){i=null,d&&d(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),g&&g(e,t)},u.__r=function(e){h&&h(e),n=0;var t=(i=e.__c).__H;t&&(s===i?(t.__h=[],i.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(x),t.__h.forEach(I),t.__h=[],n=0)),s=i},u.diffed=function(e){f&&f(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&a===u.requestAnimationFrame||((a=u.requestAnimationFrame)||function(e){var t,r=function(){clearTimeout(n),E&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);E&&(t=requestAnimationFrame(r))})(_)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),s=i=null},u.__c=function(e,t){t.some(function(e){try{e.__h.forEach(x),e.__h=e.__h.filter(function(e){return!e.__||I(e)})}catch(r){t.some(function(e){e.__h&&(e.__h=[])}),t=[],u.__e(r,e.__v)}}),p&&p(e,t)},u.unmount=function(e){y&&y(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(e){try{x(e)}catch(e){t=e}}),r.__H=void 0,t&&u.__e(t,r.__v))};var E="function"==typeof requestAnimationFrame;function x(e){var t=i,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),i=t}function I(e){var t=i;e.__c=e.__(),i=t}function S(e,t){return!e||e.length!==t.length||t.some(function(t,r){return t!==e[r]})}function A(e,t){return"function"==typeof t?t(e):t}},95172:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var a=Array(s);a[0]=i(e);for(var o=1;o<s;o++)a[o]=i(r[o]);return a.join(" ")}if("string"!=typeof e)return e;var l=r.length;if(0===l)return e;for(var c="",u=0,d=-1,h=e&&e.length||0,f=0;f<h;){if(37===e.charCodeAt(f)&&f+1<h){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=l||null==r[u])break;d<f&&(c+=e.slice(d,f)),c+=Number(r[u]),d=f+2,f++;break;case 105:if(u>=l||null==r[u])break;d<f&&(c+=e.slice(d,f)),c+=Math.floor(Number(r[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=l||void 0===r[u])break;d<f&&(c+=e.slice(d,f));var p=typeof r[u];if("string"===p){c+="'"+r[u]+"'",d=f+2,f++;break}if("function"===p){c+=r[u].name||"<anonymous>",d=f+2,f++;break}c+=i(r[u]),d=f+2,f++;break;case 115:if(u>=l)break;d<f&&(c+=e.slice(d,f)),c+=String(r[u]),d=f+2,f++;break;case 37:d<f&&(c+=e.slice(d,f)),c+="%",d=f+2,f++,u--}++u}++f}return -1===d?e:(d<h&&(c+=e.slice(d)),c)}},1801:function(e,t,r){"use strict";r.d(t,{vJ:function(){return tg},iv:function(){return th},F4:function(){return tm},zo:function(){return tp}});var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var s=r(2265),a="-ms-",o="-moz-",l="-webkit-",c="comm",u="rule",d="decl",h="@keyframes",f=Math.abs,p=String.fromCharCode,y=Object.assign;function g(e,t){return(e=t.exec(e))?e[0]:e}function m(e,t,r){return e.replace(t,r)}function b(e,t,r){return e.indexOf(t,r)}function v(e,t){return 0|e.charCodeAt(t)}function w(e,t,r){return e.slice(t,r)}function _(e){return e.length}function E(e,t){return t.push(e),e}function x(e,t){return e.filter(function(e){return!g(e,t)})}var I=1,S=1,A=0,k=0,T=0,C="";function O(e,t,r,n,i,s,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:I,column:S,length:a,return:"",siblings:o}}function P(e,t){return y(O("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function R(e){for(;e.root;)e=P(e.root,{children:[e]});E(e,e.siblings)}function D(){return T=k<A?v(C,k++):0,S++,10===T&&(S=1,I++),T}function N(){return v(C,k)}function U(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function B(e){var t,r;return(t=k-1,r=function e(t){for(;D();)switch(T){case t:return k;case 34:case 39:34!==t&&39!==t&&e(T);break;case 40:41===t&&e(t);break;case 92:D()}return k}(91===e?e+2:40===e?e+1:e),w(C,t,r)).trim()}function L(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function j(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case d:return e.return=e.return||e.value;case c:return"";case h:return e.return=e.value+"{"+L(e.children,n)+"}";case u:if(!_(e.value=e.props.join(",")))return""}return _(r=L(e.children,n))?e.return=e.value+"{"+r+"}":""}function M(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case d:e.return=function e(t,r,n){var i;switch(i=r,45^v(t,0)?(((i<<2^v(t,0))<<2^v(t,1))<<2^v(t,2))<<2^v(t,3):0){case 5103:return l+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return l+t+t;case 4855:return l+t.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+t;case 4789:return o+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return l+t+o+t+a+t+t;case 5936:switch(v(t,r+11)){case 114:return l+t+a+m(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return l+t+a+m(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return l+t+a+m(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return l+t+a+t+t;case 6165:return l+t+a+"flex-"+t+t;case 5187:return l+t+m(t,/(\w+).+(:[^]+)/,l+"box-$1$2"+a+"flex-$1$2")+t;case 5443:return l+t+a+"flex-item-"+m(t,/flex-|-self/g,"")+(g(t,/flex-|baseline/)?"":a+"grid-row-"+m(t,/flex-|-self/g,""))+t;case 4675:return l+t+a+"flex-line-pack"+m(t,/align-content|flex-|-self/g,"")+t;case 5548:return l+t+a+m(t,"shrink","negative")+t;case 5292:return l+t+a+m(t,"basis","preferred-size")+t;case 6060:return l+"box-"+m(t,"-grow","")+l+t+a+m(t,"grow","positive")+t;case 4554:return l+m(t,/([^-])(transform)/g,"$1"+l+"$2")+t;case 6187:return m(m(m(t,/(zoom-|grab)/,l+"$1"),/(image-set)/,l+"$1"),t,"")+t;case 5495:case 3959:return m(t,/(image-set\([^]*)/,l+"$1$`$1");case 4968:return m(m(t,/(.+:)(flex-)?(.*)/,l+"box-pack:$3"+a+"flex-pack:$3"),/space-between/,"justify")+l+t+t;case 4200:if(!g(t,/flex-|baseline/))return a+"grid-column-align"+w(t,r)+t;break;case 2592:case 3360:return a+m(t,"template-","")+t;case 4384:case 3616:if(n&&n.some(function(e,t){return r=t,g(e.props,/grid-\w+-end/)}))return~b(t+(n=n[r].value),"span",0)?t:a+m(t,"-start","")+t+a+"grid-row-span:"+(~b(n,"span",0)?g(n,/\d+/):+g(n,/\d+/)-+g(t,/\d+/))+";";return a+m(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(e){return g(e.props,/grid-\w+-start/)})?t:a+m(m(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return m(t,/(.+)-inline(.+)/,l+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_(t)-1-r>6)switch(v(t,r+1)){case 109:if(45!==v(t,r+4))break;case 102:return m(t,/(.+:)(.+)-([^]+)/,"$1"+l+"$2-$3$1"+o+(108==v(t,r+3)?"$3":"$2-$3"))+t;case 115:return~b(t,"stretch",0)?e(m(t,"stretch","fill-available"),r,n)+t:t}break;case 5152:case 5920:return m(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(e,r,n,i,s,o,l){return a+r+":"+n+l+(i?a+r+"-span:"+(s?o:+o-+n)+l:"")+t});case 4949:if(121===v(t,r+6))return m(t,":",":"+l)+t;break;case 6444:switch(v(t,45===v(t,14)?18:11)){case 120:return m(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+l+(45===v(t,14)?"inline-":"")+"box$3$1"+l+"$2$3$1"+a+"$2box$3")+t;case 100:return m(t,":",":"+a)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return m(t,"scroll-","scroll-snap-")+t}return t}(e.value,e.length,r);return;case h:return L([P(e,{value:m(e.value,"@","@"+l)})],n);case u:if(e.length){var i,s;return i=r=e.props,s=function(t){switch(g(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":R(P(e,{props:[m(t,/:(read-\w+)/,":"+o+"$1")]})),R(P(e,{props:[t]})),y(e,{props:x(r,n)});break;case"::placeholder":R(P(e,{props:[m(t,/:(plac\w+)/,":"+l+"input-$1")]})),R(P(e,{props:[m(t,/:(plac\w+)/,":"+o+"$1")]})),R(P(e,{props:[m(t,/:(plac\w+)/,a+"input-$1")]})),R(P(e,{props:[t]})),y(e,{props:x(r,n)})}return""},i.map(s).join("")}}}function z(e,t,r,n,i,s,a,o,l,c,d,h){for(var p=i-1,y=0===i?s:[""],g=y.length,b=0,v=0,_=0;b<n;++b)for(var E=0,x=w(e,p+1,p=f(v=a[b])),I=e;E<g;++E)(I=(v>0?y[E]+" "+x:m(x,/&\f/g,y[E])).trim())&&(l[_++]=I);return O(e,t,r,0===i?u:o,l,c,d,h)}function $(e,t,r,n,i){return O(e,t,r,d,w(e,0,n),w(e,n+1,-1),n,i)}var F={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},q=r(25566),W=void 0!==q&&void 0!==q.env&&(q.env.REACT_APP_SC_ATTR||q.env.SC_ATTR)||"data-styled",V="active",H="data-styled-version",K="6.3.11",G="/*!sc*/\n",Z="undefined"!=typeof window&&"undefined"!=typeof document,J=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==q&&void 0!==q.env&&void 0!==q.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==q.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==q.env.REACT_APP_SC_DISABLE_SPEEDY&&q.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==q&&void 0!==q.env&&void 0!==q.env.SC_DISABLE_SPEEDY&&""!==q.env.SC_DISABLE_SPEEDY&&"false"!==q.env.SC_DISABLE_SPEEDY&&q.env.SC_DISABLE_SPEEDY),Y={};function Q(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var X=new Map,ee=new Map,et=1,er=function(e){if(X.has(e))return X.get(e);for(;ee.has(et);)et++;var t=et++;return X.set(e,t),ee.set(t,e),t},en=function(e,t){et=t+1,X.set(e,t),ee.set(t,e)},ei=Object.freeze([]),es=Object.freeze({});function ea(e,t,r){return void 0===r&&(r=es),e.theme!==r.theme&&e.theme||t||r.theme}var eo=new Set(["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","body","button","br","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","slot","small","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use"]),el=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ec=/(^-|-$)/g;function eu(e){return e.replace(el,"-").replace(ec,"")}var ed=/(a)(d)/gi,eh=function(e){return String.fromCharCode(e+(e>25?39:97))};function ef(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=eh(t%52)+r;return(eh(t%52)+r).replace(ed,"$1-$2")}var ep,ey=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},eg=function(e){return ey(5381,e)};function em(e){return ef(eg(e)>>>0)}function eb(e){return"string"==typeof e}var ev="function"==typeof Symbol&&Symbol.for,ew=ev?Symbol.for("react.memo"):60115,e_=ev?Symbol.for("react.forward_ref"):60112,eE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ex={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},eI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eS=((ep={})[e_]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ep[ew]=eI,ep);function eA(e){return("type"in e&&e.type.$$typeof)===ew?eI:"$$typeof"in e?eS[e.$$typeof]:eE}var ek=Object.defineProperty,eT=Object.getOwnPropertyNames,eC=Object.getOwnPropertySymbols,eO=Object.getOwnPropertyDescriptor,eP=Object.getPrototypeOf,eR=Object.prototype;function eD(e){return"function"==typeof e}function eN(e){return"object"==typeof e&&"styledComponentId"in e}function eU(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function eB(e,t){return e.join(t||"")}function eL(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function ej(e,t){Object.defineProperty(e,"toString",{value:t})}var eM=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e,this._cGroup=0,this._cIndex=0}return e.prototype.indexOfGroup=function(e){if(e===this._cGroup)return this._cIndex;var t=this._cIndex;if(e>this._cGroup)for(var r=this._cGroup;r<e;r++)t+=this.groupSizes[r];else for(r=this._cGroup-1;r>=e;r--)t-=this.groupSizes[r];return this._cGroup=e,this._cIndex=t,t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,i=n;e>=i;)if((i<<=1)<0)throw Q(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var s=n;s<i;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),o=0,l=(s=0,t.length);s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++,o++);o>0&&this._cGroup>e&&(this._cIndex+=o)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var i=r;i<n;i++)this.tag.deleteRule(r);t>0&&this._cGroup>e&&(this._cIndex-=t)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),i=n+r,s=n;s<i;s++)t+=this.tag.getRule(s)+G;return t},e}(),ez="style[".concat(W,"][").concat(H,'="').concat(K,'"]'),e$=new RegExp("^".concat(W,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),eF=function(e){return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot||"host"in e&&11===e.nodeType},eq=function(e){if(!e)return document;if(eF(e))return e;if("getRootNode"in e){var t=e.getRootNode();if(eF(t))return t}return document},eW=function(e,t,r){for(var n,i=r.split(","),s=0,a=i.length;s<a;s++)(n=i[s])&&e.registerName(t,n)},eV=function(e,t){for(var r,n=(null!==(r=t.textContent)&&void 0!==r?r:"").split(G),i=[],s=0,a=n.length;s<a;s++){var o=n[s].trim();if(o){var l=o.match(e$);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(en(u,c),eW(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(o)}}},eH=function(e){for(var t=eq(e.options.target).querySelectorAll(ez),r=0,n=t.length;r<n;r++){var i=t[r];i&&i.getAttribute(W)!==V&&(eV(e,i),i.parentNode&&i.parentNode.removeChild(i))}},eK=function(e){var t,n=document.head,i=e||n,s=document.createElement("style"),a=(t=Array.from(i.querySelectorAll("style[".concat(W,"]"))))[t.length-1],o=void 0!==a?a.nextSibling:null;s.setAttribute(W,V),s.setAttribute(H,K);var l=r.nc;return l&&s.setAttribute("nonce",l),i.insertBefore(s,o),s},eG=function(){function e(e){this.element=eK(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){var t;if(e.sheet)return e.sheet;for(var r=null!==(t=e.getRootNode().styleSheets)&&void 0!==t?t:document.styleSheets,n=0,i=r.length;n<i;n++){var s=r[n];if(s.ownerNode===e)return s}throw Q(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),eZ=function(){function e(e){this.element=eK(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),eJ=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(e===this.length?this.rules.push(t):this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),eY=Z,eQ={isServer:!Z,useCSSOMInjection:!J},eX=function(){function e(e,t,r){void 0===e&&(e=es),void 0===t&&(t={});var i=this;this.options=n(n({},eQ),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Z&&eY&&(eY=!1,eH(this)),ej(this,function(){return function(e){for(var t=e.getTag(),r=t.length,n="",i=0;i<r;i++)(function(r){var i=ee.get(r);if(void 0!==i){var s=e.names.get(i);if(void 0!==s&&s.size){var a=t.getGroup(r);if(0!==a.length){var o=W+".g"+r+'[id="'+i+'"]',l="";s.forEach(function(e){e.length>0&&(l+=e+",")}),n+=a+o+'{content:"'+l+'"}'+G}}}})(i);return n}(i)})}return e.registerId=function(e){return er(e)},e.prototype.rehydrate=function(){!this.server&&Z&&eH(this)},e.prototype.reconstructWithOptions=function(t,r){void 0===r&&(r=!0);var i=new e(n(n({},this.options),t),this.gs,r&&this.names||void 0);return!this.server&&Z&&t.target!==this.options.target&&eq(this.options.target)!==eq(t.target)&&eH(i),i},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){var e,t,r;return this.tag||(this.tag=(t=(e=this.options).useCSSOMInjection,r=e.target,new eM(e.isServer?new eJ(r):t?new eG(r):new eZ(r))))},e.prototype.hasNameForId=function(e,t){var r,n;return null!==(n=null===(r=this.names.get(e))||void 0===r?void 0:r.has(t))&&void 0!==n&&n},e.prototype.registerName=function(e,t){er(e);var r=this.names.get(e);r?r.add(t):this.names.set(e,new Set([t]))},e.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(er(e),r)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(er(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),e0=/&/g;function e1(e){if(-1===e.indexOf("}"))return!1;for(var t=e.length,r=0,n=0,i=!1,s=0;s<t;s++){var a=e.charCodeAt(s);if(0!==n||i||47!==a||42!==e.charCodeAt(s+1)){if(i)42===a&&47===e.charCodeAt(s+1)&&(i=!1,s++);else if(34!==a&&39!==a||0!==s&&92===e.charCodeAt(s-1)){if(0===n){if(123===a)r++;else if(125===a&&--r<0)return!0}}else 0===n?n=a:n===a&&(n=0)}else i=!0,s++}return 0!==r||0!==n}function e2(e){var t,r,n,i,s,a,o=void 0===e?es:e,l=o.options,d=void 0===l?es:l,h=o.plugins,y=void 0===h?ei:h,g=function(e,t,r){return r.startsWith(s)&&r.endsWith(s)&&r.replaceAll(s,"").length>0?".".concat(i):e},x=y.slice();x.push(function(e){e.type===u&&e.value.includes("&")&&(a||(a=RegExp("\\".concat(s,"\\b"),"g")),e.props[0]=e.props[0].replace(e0,s).replace(a,g))}),d.prefix&&x.push(M),x.push(j);var P=[],R=(r=(t=x.concat((n=function(e){return P.push(e)},function(e){!e.root&&(e=e.return)&&n(e)}))).length,function(e,n,i,s){for(var a="",o=0;o<r;o++)a+=t[o](e,n,i,s)||"";return a}),F=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r=""),void 0===n&&(n="&"),i=n,s=t,a=void 0;var o,l,u,h=function(e){if(!e1(e))return e;for(var t=e.length,r="",n=0,i=0,s=0,a=!1,o=0;o<t;o++){var l=e.charCodeAt(o);if(0!==s||a||47!==l||42!==e.charCodeAt(o+1)){if(a)42===l&&47===e.charCodeAt(o+1)&&(a=!1,o++);else if(34!==l&&39!==l||0!==o&&92===e.charCodeAt(o-1)){if(0===s){if(123===l)i++;else if(125===l){if(--i<0){for(var c=o+1;c<t;){var u=e.charCodeAt(c);if(59===u||10===u)break;c++}c<t&&59===e.charCodeAt(c)&&c++,i=0,o=c-1,n=c;continue}0===i&&(r+=e.substring(n,o+1),n=o+1)}else 59===l&&0===i&&(r+=e.substring(n,o+1),n=o+1)}}else 0===s?s=l:s===l&&(s=0)}else a=!0,o++}if(n<t){var d=e.substring(n);e1(d)||(r+=d)}return r}(function(e){if(-1===e.indexOf("//"))return e;for(var t=e.length,r=[],n=0,i=0,s=0,a=0;i<t;){var o=e.charCodeAt(i);if(34!==o&&39!==o||0!==i&&92===e.charCodeAt(i-1)){if(0===s){if(47===o&&i+1<t&&42===e.charCodeAt(i+1)){for(i+=2;i+1<t&&(42!==e.charCodeAt(i)||47!==e.charCodeAt(i+1));)i++;i+=2}else if(40===o&&i>=3&&108==(32|e.charCodeAt(i-1))&&114==(32|e.charCodeAt(i-2))&&117==(32|e.charCodeAt(i-3)))a=1,i++;else if(a>0)41===o?a--:40===o&&a++,i++;else if(42===o&&i+1<t&&47===e.charCodeAt(i+1))i>n&&r.push(e.substring(n,i)),n=i+=2;else if(47===o&&i+1<t&&47===e.charCodeAt(i+1)){for(i>n&&r.push(e.substring(n,i));i<t&&10!==e.charCodeAt(i);)i++;n=i}else i++}else i++}else 0===s?s=o:s===o&&(s=0),i++}return 0===n?e:(n<t&&r.push(e.substring(n)),r.join(""))}(e)),y=(u=function e(t,r,n,i,s,a,o,l,u){for(var d,h=0,y=0,g=o,x=0,A=0,P=0,R=1,L=1,j=1,M=0,F="",q=s,W=a,V=i,H=F;L;)switch(P=M,M=D()){case 40:if(108!=P&&58==v(H,g-1)){-1!=b(H+=m(B(M),"&","&\f"),"&\f",f(h?l[h-1]:0))&&(j=-1);break}case 34:case 39:case 91:H+=B(M);break;case 9:case 10:case 13:case 32:H+=function(e){for(;T=N();)if(T<33)D();else break;return U(e)>2||U(T)>3?"":" "}(P);break;case 92:H+=function(e,t){for(var r;--t&&D()&&!(T<48)&&!(T>102)&&(!(T>57)||!(T<65))&&(!(T>70)||!(T<97)););return r=k+(t<6&&32==N()&&32==D()),w(C,e,r)}(k-1,7);continue;case 47:switch(N()){case 42:case 47:E(O(d=function(e,t){for(;D();)if(e+T===57)break;else if(e+T===84&&47===N())break;return"/*"+w(C,t,k-1)+"*"+p(47===e?e:D())}(D(),k),r,n,c,p(T),w(d,2,-2),0,u),u),(5==U(P||1)||5==U(N()||1))&&_(H)&&" "!==w(H,-1,void 0)&&(H+=" ");break;default:H+="/"}break;case 123*R:l[h++]=_(H)*j;case 125*R:case 59:case 0:switch(M){case 0:case 125:L=0;case 59+y:-1==j&&(H=m(H,/\f/g,"")),A>0&&(_(H)-g||0===R&&47===P)&&E(A>32?$(H+";",i,n,g-1,u):$(m(H," ","")+";",i,n,g-2,u),u);break;case 59:H+=";";default:if(E(V=z(H,r,n,h,y,s,l,F,q=[],W=[],g,a),a),123===M){if(0===y)e(H,r,V,V,q,a,g,l,W);else{switch(x){case 99:if(110===v(H,3))break;case 108:if(97===v(H,2))break;default:y=0;case 100:case 109:case 115:}y?e(t,V,V,i&&E(z(t,V,V,0,0,s,l,F,s,q=[],g,W),W),s,W,g,l,i?q:W):e(H,V,V,V,[""],W,0,l,W)}}}h=y=A=0,R=j=1,F=H="",g=o;break;case 58:g=1+_(H),A=P;default:if(R<1){if(123==M)--R;else if(125==M&&0==R++&&125==(T=k>0?v(C,--k):0,S--,10===T&&(S=1,I--),T))continue}switch(H+=p(M),M*R){case 38:j=y>0?1:(H+="\f",-1);break;case 44:l[h++]=(_(H)-1)*j,j=1;break;case 64:45===N()&&(H+=B(D())),x=N(),y=g=_(F=H+=function(e){for(;!U(N());)D();return w(C,e,k)}(k)),M++;break;case 45:45===P&&2==_(H)&&(R=0)}}return a}("",null,null,null,[""],(l=o=r||t?"".concat(r," ").concat(t," { ").concat(h," }"):h,I=S=1,A=_(C=l),k=0,o=[]),0,[0],o),C="",u);return d.namespace&&(y=function e(t,r){return t.map(function(t){return"rule"===t.type&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(e){return"".concat(r," ").concat(e)})),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=e(t.children,r)),t})}(y,d.namespace)),P=[],L(y,R),P};return F.hash=y.length?y.reduce(function(e,t){return t.name||Q(15),ey(e,t.name)},5381).toString():"",F}var e3=new eX,e5=e2(),e8=s.createContext({shouldForwardProp:void 0,styleSheet:e3,stylis:e5}),e6=(e8.Consumer,s.createContext(void 0));function e4(){return s.useContext(e8)}function e9(e){if(!s.useMemo)return e.children;var t=e4().styleSheet,r=s.useMemo(function(){var r=t;return e.sheet?r=e.sheet:e.target&&(r=r.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(r=r.reconstructWithOptions({useCSSOMInjection:!1})),r},[e.disableCSSOMInjection,e.sheet,e.target,t]),n=s.useMemo(function(){return e2({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:e.stylisPlugins})},[e.enableVendorPrefixes,e.namespace,e.stylisPlugins]),i=s.useMemo(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:r,stylis:n}},[e.shouldForwardProp,r,n]);return s.createElement(e8.Provider,{value:i},s.createElement(e6.Provider,{value:n},e.children))}var e7=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=e5);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,ej(this,function(){throw Q(12,String(r.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=e5),this.name+e.hash},e}();function te(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(1===r&&"-"===n&&"-"===e[0])return e;n>="A"&&n<="Z"?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var tt=function(e){return null==e||!1===e||""===e},tr=function(e){var t=[];for(var r in e){var n=e[r];e.hasOwnProperty(r)&&!tt(n)&&(Array.isArray(n)&&n.isCss||eD(n)?t.push("".concat(te(r),":"),n,";"):eL(n)?t.push.apply(t,i(i(["".concat(r," {")],tr(n),!1),["}"],!1)):t.push("".concat(te(r),": ").concat(null==n||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||r in F||r.startsWith("--")?String(n).trim():"".concat(n,"px"),";")))}return t};function tn(e,t,r,n,i){if(void 0===i&&(i=[]),"string"==typeof e)return e&&i.push(e),i;if(tt(e))return i;if(eN(e))return i.push(".".concat(e.styledComponentId)),i;if(eD(e))return!eD(e)||e.prototype&&e.prototype.isReactComponent||!t?(i.push(e),i):tn(e(t),t,r,n,i);if(e instanceof e7)return r?(e.inject(r,n),i.push(e.getName(n))):i.push(e),i;if(eL(e)){for(var s=tr(e),a=0;a<s.length;a++)i.push(s[a]);return i}if(!Array.isArray(e))return i.push(e.toString()),i;for(a=0;a<e.length;a++)tn(e[a],t,r,n,i);return i}function ti(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(eD(r)&&!eN(r))return!1}return!0}var ts=eg(K),ta=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&ti(e),this.componentId=t,this.baseHash=ey(ts,t),this.baseStyle=r,eX.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r).className:"";if(this.isStatic&&!r.hash){if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=eU(n,this.staticRulesId);else{var i=eB(tn(this.rules,e,t,r)),s=ef(ey(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var a=r(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,a)}n=eU(n,s),this.staticRulesId=s}}else{for(var o=ey(this.baseHash,r.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=eB(tn(u,e,t,r));o=ey(ey(o,String(c)),d),l+=d}}if(l){var h=ef(o>>>0);if(!t.hasNameForId(this.componentId,h)){var f=r(l,".".concat(h),void 0,this.componentId);t.insertRules(this.componentId,h,f)}n=eU(n,h)}}return{className:n,css:"undefined"==typeof window?t.getTag().getGroup(er(this.componentId)):""}},e}(),to=s.createContext(void 0);to.Consumer;var tl={};function tc(e,t,r){var i,a,o,l,c=eN(e),u=!eb(e),d=t.attrs,h=void 0===d?ei:d,f=t.componentId,p=void 0===f?(i=t.displayName,a=t.parentComponentId,tl[o="string"!=typeof i?"sc":eu(i)]=(tl[o]||0)+1,l="".concat(o,"-").concat(em(K+o+tl[o])),a?"".concat(a,"-").concat(l):l):f,y=t.displayName,g=void 0===y?eb(e)?"styled.".concat(e):"Styled(".concat(e.displayName||e.name||"Component",")"):y,m=t.displayName&&t.componentId?"".concat(eu(t.displayName),"-").concat(t.componentId):t.componentId||p,b=c&&e.attrs?e.attrs.concat(h).filter(Boolean):h,v=t.shouldForwardProp;if(c&&e.shouldForwardProp){var w=e.shouldForwardProp;if(t.shouldForwardProp){var _=t.shouldForwardProp;v=function(e,t){return w(e,t)&&_(e,t)}}else v=w}var E=new ta(r,m,c?e.componentStyle:void 0);function x(e,t){return function(e,t,r){var i,a=e.attrs,o=e.componentStyle,l=e.defaultProps,c=e.foldedComponentIds,u=e.styledComponentId,d=e.target,h=s.useContext(to),f=e4(),p=e.shouldForwardProp||f.shouldForwardProp,y=ea(t,h,l)||es,g=function(e,t,r){for(var i,s=n(n({},t),{className:void 0,theme:r}),a=0;a<e.length;a+=1){var o=eD(i=e[a])?i(s):i;for(var l in o)"className"===l?s.className=eU(s.className,o[l]):"style"===l?s.style=n(n({},s.style),o[l]):s[l]=o[l]}return"className"in t&&"string"==typeof t.className&&(s.className=eU(s.className,t.className)),s}(a,t,y),m=g.as||d,b={};for(var v in g)void 0===g[v]||"$"===v[0]||"as"===v||"theme"===v&&g.theme===y||("forwardedAs"===v?b.as=g.forwardedAs:p&&!p(v,m)||(b[v]=g[v]));var w=(i=e4(),o.generateAndInjectStyles(g,i.styleSheet,i.stylis)).className,_=eU(c,u);return w&&(_+=" "+w),g.className&&(_+=" "+g.className),b[eb(m)&&!eo.has(m)?"class":"className"]=_,r&&(b.ref=r),(0,s.createElement)(m,b)}(I,e,t)}x.displayName=g;var I=s.forwardRef(x);return I.attrs=b,I.componentStyle=E,I.displayName=g,I.shouldForwardProp=v,I.foldedComponentIds=c?eU(e.foldedComponentIds,e.styledComponentId):"",I.styledComponentId=m,I.target=c?e.target:e,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=c?function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)(function e(t,r,n){if(void 0===n&&(n=!1),!n&&!eL(t)&&!Array.isArray(t))return r;if(Array.isArray(r))for(var i=0;i<r.length;i++)t[i]=e(t[i],r[i]);else if(eL(r))for(var i in r)t[i]=e(t[i],r[i]);return t})(e,t[n],!0);return e}({},e.defaultProps,t):t}}),ej(I,function(){return".".concat(I.styledComponentId)}),u&&function e(t,r,n){if("string"!=typeof r){if(eR){var i=eP(r);i&&i!==eR&&e(t,i,n)}var s=eT(r);eC&&(s=s.concat(eC(r)));for(var a=eA(t),o=eA(r),l=0;l<s.length;++l){var c=s[l];if(!(c in ex||n&&n[c]||o&&c in o||a&&c in a)){var u=eO(r,c);try{ek(t,c,u)}catch(e){}}}}return t}(I,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function tu(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r}var td=function(e){return Object.assign(e,{isCss:!0})};function th(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return eD(e)||eL(e)?td(tn(tu(ei,i([e],t,!0)))):0===t.length&&1===e.length&&"string"==typeof e[0]?tn(e):td(tn(tu(e,t)))}var tf=function(e){return function e(t,r,s){if(void 0===s&&(s=es),!r)throw Q(1,r);var a=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return t(r,s,th.apply(void 0,i([e],n,!1)))};return a.attrs=function(i){return e(t,r,n(n({},s),{attrs:Array.prototype.concat(s.attrs,i).filter(Boolean)}))},a.withConfig=function(i){return e(t,r,n(n({},s),i))},a}(tc,e)},tp=tf;eo.forEach(function(e){tp[e]=tf(e)});var ty=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=ti(e),eX.registerId(this.componentId+1)}return e.prototype.createStyles=function(e,t,r,n){var i=n(eB(tn(this.rules,t,r,n)),""),s=this.componentId+e;r.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,r,n){e>2&&eX.registerId(this.componentId+e);var i=this.componentId+e;this.isStatic?r.hasNameForId(i,i)||this.createStyles(e,t,r,n):(this.removeStyles(e,r),this.createStyles(e,t,r,n))},e}();function tg(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=th.apply(void 0,i([e],t,!1)),o="sc-global-".concat(em(JSON.stringify(a))),l=new ty(a,o),c=new WeakMap,u=function(e){var t=e4(),r=s.useContext(to),n=c.get(t.styleSheet);return void 0===n&&(n=t.styleSheet.allocateGSInstance(o),c.set(t.styleSheet,n)),"undefined"!=typeof window&&t.styleSheet.server||d(n,e,t.styleSheet,r,t.stylis),s.useLayoutEffect(function(){return t.styleSheet.server||d(n,e,t.styleSheet,r,t.stylis),function(){var e;l.removeStyles(n,t.styleSheet),e=t.styleSheet.options.target,"undefined"!=typeof document&&(null!=e?e:document).querySelectorAll('style[data-styled-global="'.concat(o,'"]')).forEach(function(e){return e.remove()})}},[n,e,t.styleSheet,r,t.stylis]),null};function d(e,t,r,i,s){if(l.isStatic)l.renderStyles(e,Y,r,s);else{var a=n(n({},t),{theme:ea(t,i,u.defaultProps)});l.renderStyles(e,a,r,s)}}return s.memo(u)}function tm(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=eB(th.apply(void 0,i([e],t,!1)));return new e7(em(n),n)}!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=r.nc,i=eB([n&&'nonce="'.concat(n,'"'),"".concat(W,'="true"'),"".concat(H,'="').concat(K,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Q(2);return e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)throw Q(2);var t,i=e.instance.toString();if(!i)return[];var a=((t={})[W]="",t[H]=K,t.dangerouslySetInnerHTML={__html:i},t),o=r.nc;return o&&(a.nonce=o),[s.createElement("style",n({},a,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new eX({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Q(2);return s.createElement(e9,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Q(3)}}()},9315:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});for(var n,i=new Uint8Array(16),s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=[],o=0;o<256;++o)a.push((o+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!("string"==typeof r&&s.test(r)))throw TypeError("Stringified UUID is invalid");return r},c=function(e,t,r){var s=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=s[a];return t}return l(s)}},25566:function(e){var t,r,n,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=o(d);c=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||c||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},77409:function(e,t,r){var n=r(82957).lW;let i=r(29950);function s(e){if(e.startsWith("int["))return"int256"+e.slice(3);if("int"===e)return"int256";if(e.startsWith("uint["))return"uint256"+e.slice(4);if("uint"===e)return"uint256";if(e.startsWith("fixed["))return"fixed128x128"+e.slice(5);if("fixed"===e)return"fixed128x128";if(e.startsWith("ufixed["))return"ufixed128x128"+e.slice(6);else if("ufixed"===e)return"ufixed128x128";return e}function a(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function o(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function l(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":Number.parseInt(t[2],10):null}function c(e){var t=typeof e;if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw Error("Argument is not a number")}function u(e,t){if("address"===e)return u("uint160",c(t));if("bool"===e)return u("uint8",t?1:0);if("string"===e)return u("bytes",new n(t,"utf8"));if((f=e).lastIndexOf("]")===f.length-1){if(void 0===t.length)throw Error("Not an array?");if("dynamic"!==(r=l(e))&&0!==r&&t.length>r)throw Error("Elements exceed array size: "+r);for(h in d=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)d.push(u(e,t[h]));if("dynamic"===r){var r,s,d,h,f,p=u("uint256",t.length);d.unshift(p)}return n.concat(d)}if("bytes"===e)return t=new n(t),d=n.concat([u("uint256",t.length),t]),t.length%32!=0&&(d=n.concat([d,i.zeros(32-t.length%32)])),d;if(e.startsWith("bytes")){if((r=a(e))<1||r>32)throw Error("Invalid bytes<N> width: "+r);return i.setLengthRight(t,32)}else if(e.startsWith("uint")){if((r=a(e))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);s=c(t);let n=i.bitLengthFromBigInt(s);if(n>r)throw Error("Supplied uint exceeds width: "+r+" vs "+n);if(s<0)throw Error("Supplied uint is negative");return i.bufferBEFromBigInt(s,32)}else if(e.startsWith("int")){if((r=a(e))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);s=c(t);let n=i.bitLengthFromBigInt(s);if(n>r)throw Error("Supplied int exceeds width: "+r+" vs "+n);let o=i.twosFromBigInt(s,256);return i.bufferBEFromBigInt(o,32)}else if(e.startsWith("ufixed")){if(r=o(e),(s=c(t))<0)throw Error("Supplied ufixed is negative");return u("uint256",s*BigInt(2)**BigInt(r[1]))}else if(e.startsWith("fixed"))return r=o(e),u("int256",c(t)*BigInt(2)**BigInt(r[1]));throw Error("Unsupported or invalid type: "+e)}function d(e,t){if(e.length!==t.length)throw Error("Number of types are not matching the values");for(var r,o,l=[],u=0;u<e.length;u++){var d=s(e[u]),h=t[u];if("bytes"===d)l.push(h);else if("string"===d)l.push(new n(h,"utf8"));else if("bool"===d)l.push(new n(h?"01":"00","hex"));else if("address"===d)l.push(i.setLength(h,20));else if(d.startsWith("bytes")){if((r=a(d))<1||r>32)throw Error("Invalid bytes<N> width: "+r);l.push(i.setLengthRight(h,r))}else if(d.startsWith("uint")){if((r=a(d))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);o=c(h);let e=i.bitLengthFromBigInt(o);if(e>r)throw Error("Supplied uint exceeds width: "+r+" vs "+e);l.push(i.bufferBEFromBigInt(o,r/8))}else if(d.startsWith("int")){if((r=a(d))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);o=c(h);let e=i.bitLengthFromBigInt(o);if(e>r)throw Error("Supplied int exceeds width: "+r+" vs "+e);let t=i.twosFromBigInt(o,r);l.push(i.bufferBEFromBigInt(t,r/8))}else throw Error("Unsupported or invalid type: "+d)}return n.concat(l)}e.exports={rawEncode:function(e,t){var r=[],i=[],a=32*e.length;for(var o in e){var c=s(e[o]),d=u(c,t[o]);"string"===c||"bytes"===c||"dynamic"===l(c)?(r.push(u("uint256",a)),i.push(d),a+=d.length):r.push(d)}return n.concat(r.concat(i))},solidityPack:d,soliditySHA3:function(e,t){return i.keccak(d(e,t))}}},14688:function(e,t,r){var n=r(82957).lW;let i=r(29950),s=r(77409),a={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},o={encodeData(e,t,r,a=!0){let o=["bytes32"],l=[this.hashType(e,r)];if(a){let c=(e,t,o)=>{if(void 0!==r[t])return["bytes32",null==o?"0x0000000000000000000000000000000000000000000000000000000000000000":i.keccak(this.encodeData(t,o,r,a))];if(void 0===o)throw Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",i.keccak(o)];if("string"===t)return"string"==typeof o&&(o=n.from(o,"utf8")),["bytes32",i.keccak(o)];if(t.lastIndexOf("]")===t.length-1){let r=t.slice(0,t.lastIndexOf("[")),n=o.map(t=>c(e,r,t));return["bytes32",i.keccak(s.rawEncode(n.map(([e])=>e),n.map(([,e])=>e)))]}return[t,o]};for(let n of r[e]){let[e,r]=c(n.name,n.type,t[n.name]);o.push(e),l.push(r)}}else for(let s of r[e]){let e=t[s.name];if(void 0!==e){if("bytes"===s.type)o.push("bytes32"),e=i.keccak(e),l.push(e);else if("string"===s.type)o.push("bytes32"),"string"==typeof e&&(e=n.from(e,"utf8")),e=i.keccak(e),l.push(e);else if(void 0!==r[s.type])o.push("bytes32"),e=i.keccak(this.encodeData(s.type,e,r,a)),l.push(e);else if(s.type.lastIndexOf("]")===s.type.length-1)throw Error("Arrays currently unimplemented in encodeData");else o.push(s.type),l.push(e)}}return s.rawEncode(o,l)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter(t=>t!==e);for(let i of n=[e].concat(n.sort())){if(!t[i])throw Error("No type definition specified: "+i);r+=i+"("+t[i].map(({name:e,type:t})=>t+" "+e).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;for(let n of(r.push(e),t[e]))for(let e of this.findTypeDependencies(n.type,t,r))r.includes(e)||r.push(e);return r},hashStruct(e,t,r,n=!0){return i.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return i.keccak(this.encodeType(e,t))},sanitizeData(e){let t={};for(let r in a.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){let r=this.sanitizeData(e),s=[n.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&s.push(this.hashStruct(r.primaryType,r.message,r.types,t)),i.keccak(n.concat(s))}};e.exports={TYPED_MESSAGE_SCHEMA:a,TypedDataUtils:o,hashForSignTypedDataLegacy:function(e){return function(e){let t=Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;let r=e.map(function(e){return"bytes"===e.type?i.toBuffer(e.value):e.value}),n=e.map(function(e){return e.type}),a=e.map(function(e){if(!e.name)throw t;return e.type+" "+e.name});return s.soliditySHA3(["bytes32","bytes32"],[s.soliditySHA3(Array(e.length).fill("string"),a),s.soliditySHA3(n,r)])}(e.data)},hashForSignTypedData_v3:function(e){return o.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return o.hash(e.data)}}},29950:function(e,t,r){var n=r(82957).lW;let{keccak_256:i}=r(65727);function s(e){return n.allocUnsafe(e).fill(0)}function a(e,t){let r=e.toString(16);r.length%2!=0&&(r="0"+r);let i=r.match(/.{1,2}/g).map(e=>parseInt(e,16));for(;i.length<t;)i.unshift(0);return n.from(i)}function o(e,t,r){let n=s(t);return(e=l(e),r)?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function l(e){if(!n.isBuffer(e)){if(Array.isArray(e))e=n.from(e);else if("string"==typeof e){var t;e=c(e)?n.from((t=u(e)).length%2?"0"+t:t,"hex"):n.from(e)}else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=n.allocUnsafe(0);else if("bigint"==typeof e)e=a(e);else if(e.toArray)e=n.from(e.toArray());else throw Error("invalid type")}return e}function c(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function u(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:s,setLength:o,setLengthRight:function(e,t){return o(e,t,!0)},isHexString:c,stripHexPrefix:u,toBuffer:l,bufferToHex:function(e){return"0x"+(e=l(e)).toString("hex")},keccak:function(e,t){if(e=l(e),t||(t=256),256!==t)throw Error("unsupported");return n.from(i(new Uint8Array(e)))},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:a,twosFromBigInt:function(e,t){return(e<0n?(~e&(1n<<BigInt(t))-1n)+1n:e)&(1n<<BigInt(t))-1n}}},27208:function(e,t,r){"use strict";let n=r(95172);e.exports=u;let i=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e,t){return"silent"===e?1/0:t.levels.values[e]}let a=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),l={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[o]};t[o]=r}function u(e){var t,r;(e=e||{}).browser=e.browser||{};let n=e.browser.transmit;if(n&&"function"!=typeof n.send)throw Error("pino: transmit option must have a send function");let o=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);let p=e.serializers||{},y=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(p),g=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(g=!1);let w=Object.keys(e.customLevels||{}),_=["error","fatal","warn","info","debug","trace"].concat(w);"function"==typeof o&&_.forEach(function(e){o[e]=o}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let E=e.level||"info",x=Object.create(o);x.log||(x.log=m),function(e,t,r){let n={};t.forEach(e=>{n[e]=r[e]?r[e]:i[e]||i[l[e]||"log"]||m}),e[a]=n}(x,_,o),c({},x),Object.defineProperty(x,"levelVal",{get:function(){return s(this.level,this)}}),Object.defineProperty(x,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,d(this,I,x,"error"),d(this,I,x,"fatal"),d(this,I,x,"warn"),d(this,I,x,"info"),d(this,I,x,"debug"),d(this,I,x,"trace"),w.forEach(e=>{d(this,I,x,e)})}});let I={transmit:n,serialize:y,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:_,timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?b:v,messageKey:e.messageKey||"msg",onChild:e.onChild||m};function S(t,r,i){if(!r)throw Error("missing bindings for child Pino");i=i||{},y&&r.serializers&&(i.serializers=r.serializers);let s=i.serializers;if(y&&s){var a=Object.assign({},p,s),o=!0===e.browser.serialize?Object.keys(a):y;delete r.serializers,h([r],o,a,this._stdErrSerialize)}function l(e){this._childLevel=(0|e._childLevel)+1,this.bindings=r,a&&(this.serializers=a,this._serialize=o),n&&(this._logEvent=f([].concat(e._logEvent.bindings,r)))}l.prototype=this;let u=new l(this);return c(this,u),u.child=function(...e){return S.call(this,t,...e)},u.level=i.level||this.level,t.onChild(u),u}return x.levels=function(e){let t=e.customLevels||{};return{values:Object.assign({},u.levels.values,t),labels:Object.assign({},u.levels.labels,function(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}(t))}}(e),x.level=E,x.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},x.setMaxListeners=x.getMaxListeners=x.emit=x.addListener=x.on=x.prependListener=x.once=x.prependOnceListener=x.removeListener=x.removeAllListeners=x.listeners=x.listenerCount=x.eventNames=x.write=x.flush=m,x.serializers=p,x._serialize=y,x._stdErrSerialize=g,x.child=function(...e){return S.call(this,I,...e)},n&&(x._logEvent=f()),x}function d(e,t,r,l){var c,u;if(Object.defineProperty(e,l,{value:s(e.level,r)>s(l,r)?m:r[a][l],writable:!0,enumerable:!0,configurable:!0}),e[l]===m){if(!t.transmit)return;let n=s(t.transmit.level||e.level,r);if(s(l,r)<n)return}e[l]=(c=e[a][l],function(){let a=t.timestamp(),o=Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var d=0;d<o.length;d++)o[d]=arguments[d];var p=!1;if(t.serialize&&(h(o,this._serialize,this.serializers,this._stdErrSerialize),p=!0),t.asObject||t.formatters?c.call(u,...function(e,t,r,i,s){let{level:a,log:o=e=>e}=s.formatters||{},l=r.slice(),c=l[0],u={},d=(0|e._childLevel)+1;if(d<1&&(d=1),i&&(u.time=i),a?Object.assign(u,a(t,e.levels.values[t])):u.level=e.levels.values[t],s.asObjectBindingsOnly){if(null!==c&&"object"==typeof c)for(;d--&&"object"==typeof l[0];)Object.assign(u,l.shift());return[o(u),...l]}if(null!==c&&"object"==typeof c){for(;d--&&"object"==typeof l[0];)Object.assign(u,l.shift());c=l.length?n(l.shift(),l):void 0}else"string"==typeof c&&(c=n(l.shift(),l));return void 0!==c&&(u[s.messageKey]=c),[o(u)]}(this,l,o,a,t)):c.apply(u,o),t.transmit){let n=t.transmit.level||e._level,i=s(n,r),c=s(l,r);if(c<i)return;(function(e,t,r,n=!1){let i=t.send,s=t.ts,a=t.methodLevel,o=t.methodValue,l=t.val,c=e._logEvent.bindings;n||h(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=r.filter(function(e){return -1===c.indexOf(e)}),e._logEvent.level.label=a,e._logEvent.level.value=o,i(a,e._logEvent,l),e._logEvent=f(c)})(this,{ts:a,methodLevel:l,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:s(e._level,r)},o,p)}});let d=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[o];for(;r.parent;)(r=r.parent).logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==d.length&&(e[l]=(u=e[l],function(){return u.apply(this,[...d,...arguments])}))}function h(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=u.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i])&&t)for(let n in e[i])t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function f(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function p(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function y(){return{}}function g(e){return e}function m(){}function b(){return!1}function v(){return Date.now()}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},u.stdSerializers={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:y,res:y,err:p,errWithCause:p},u.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:v,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),e.exports.default=u,e.exports.pino=u},33577:function(e,t,r){"use strict";r.d(t,{dk:function(){return h},fw:function(){return d}});var n=r(2265),i=r(13323),s=r(64518),a=r(12340),o=r(93689),l=r(6885),c=r(27847);let u=(0,n.createContext)(null);function d(){let[e,t]=(0,n.useState)([]);return[e.length>0?e.join(" "):void 0,(0,n.useMemo)(()=>function(e){let r=(0,i.z)(e=>(t(t=>[...t,e]),()=>t(t=>{let r=t.slice(),n=r.indexOf(e);return -1!==n&&r.splice(n,1),r}))),s=(0,n.useMemo)(()=>({register:r,slot:e.slot,name:e.name,props:e.props,value:e.value}),[r,e.slot,e.name,e.props,e.value]);return n.createElement(u.Provider,{value:s},e.children)},[t])]}u.displayName="DescriptionContext";let h=Object.assign((0,c.yV)(function(e,t){let r=(0,n.useId)(),i=(0,l.B)(),{id:d="headlessui-description-".concat(r),...h}=e,f=function e(){let t=(0,n.useContext)(u);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),p=(0,o.T)(t);(0,s.e)(()=>f.register(d),[d,f.register]);let y=(0,a.x)({...f.slot,disabled:i||!1}),g={ref:p,...f.props,id:d};return(0,c.L6)()({ourProps:g,theirProps:h,slot:y,defaultTag:"p",name:f.name||"Description"})}),{})},83467:function(e,t,r){"use strict";let n,i,s,a,o;r.d(t,{Vq:function(){return ed},EM:function(){return eu}});var l=r(2265),c=r(37388),u=r(31948);function d(e,t,r,n){let i=(0,u.E)(r);(0,l.useEffect)(()=>{function r(e){i.current(e)}return(e=null!=e?e:window).addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)},[e,t,n])}var h=r(76505),f=r(13323),p=r(16821),y=r(64518),g=r(33106),m=r(41264),b=r(40048),v=r(27847),w=((n=w||{})[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n);let _=(0,v.yV)(function(e,t){var r;let{features:n=1,...i}=e,s={ref:t,"aria-hidden":(2&n)==2||(null!=(r=i["aria-hidden"])?r:void 0),hidden:(4&n)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&n)==4&&(2&n)!=2&&{display:"none"}}};return(0,v.L6)()({ourProps:s,theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})});var E=r(91133),x=r(40293);let I=(0,l.createContext)(null);function S(e){let{children:t,node:r}=e,[n,i]=(0,l.useState)(null),s=A(null!=r?r:n);return l.createElement(I.Provider,{value:s},t,null===s&&l.createElement(_,{features:w.Hidden,ref:e=>{var t,r;if(e){for(let n of null!=(r=null==(t=(0,x.r3)(e))?void 0:t.querySelectorAll("html > *, body > *"))?r:[])if(n!==document.body&&n!==document.head&&E.kK(n)&&null!=n&&n.contains(e)){i(n);break}}}}))}function A(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=(e=(0,l.useContext)(I))?e:t}var k=r(26074),T=r(72238),C=r(12340),O=r(93689);let P=(0,l.createContext)(()=>{});function R(e){let{value:t,children:r}=e;return l.createElement(P.Provider,{value:t},r)}var D=r(37863),N=r(27988),U=r(22055),B=r(46187),L=r(24536),j=r(33577),M=r(90945),z=r(93394),$=r(99417),F=r(3141),q=((i=q||{})[i.Forwards=0]="Forwards",i[i.Backwards=1]="Backwards",i);function W(e,t){let r=(0,l.useRef)([]),n=(0,f.z)(e);(0,l.useEffect)(()=>{let e=[...r.current];for(let[i,s]of t.entries())if(r.current[i]!==s){let i=n(t,e);return r.current=t,i}},[n,...t])}var V=r(37105);let H=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){if(!E.sP(e.target)||e.target===document.body||H[0]===e.target)return;let t=e.target;t=t.closest(V.y),H.unshift(null!=t?t:e.target),(H=H.filter(e=>null!=e&&e.isConnected)).splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var K=r(96822);function G(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let r of e.current)E.kK(r.current)&&t.add(r.current);return t}var Z=((s=Z||{})[s.None=0]="None",s[s.InitialFocus=1]="InitialFocus",s[s.TabLock=2]="TabLock",s[s.FocusLock=4]="FocusLock",s[s.RestoreFocus=8]="RestoreFocus",s[s.AutoFocus=16]="AutoFocus",s);let J=Object.assign((0,v.yV)(function(e,t){let r,n=(0,l.useRef)(null),i=(0,O.T)(n,t),{initialFocus:s,initialFocusFallback:a,containers:o,features:c=15,...u}=e;(0,T.H)()||(c=0);let p=(0,b.i)(n.current);!function(e,t){let{ownerDocument:r}=t,n=!!(8&e),i=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,l.useRef)(H.slice());return W((e,r)=>{let[n]=e,[i]=r;!0===i&&!1===n&&(0,K.Y)(()=>{t.current.splice(0)}),!1===i&&!0===n&&(t.current=H.slice())},[e,H,t]),(0,f.z)(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(n);W(()=>{n||(0,x.H9)(null==r?void 0:r.body)&&(0,V.C5)(i())},[n]),(0,$.L)(()=>{n&&(0,V.C5)(i())})}(c,{ownerDocument:p});let y=function(e,t){let{ownerDocument:r,container:n,initialFocus:i,initialFocusFallback:s}=t,a=(0,l.useRef)(null),o=(0,h.g)(!!(1&e),"focus-trap#initial-focus"),c=(0,z.t)();return W(()=>{if(0===e)return;if(!o){null!=s&&s.current&&(0,V.C5)(s.current);return}let t=n.current;t&&(0,K.Y)(()=>{if(!c.current)return;let n=null==r?void 0:r.activeElement;if(null!=i&&i.current){if((null==i?void 0:i.current)===n){a.current=n;return}}else if(t.contains(n)){a.current=n;return}if(null!=i&&i.current)(0,V.C5)(i.current);else{if(16&e){if((0,V.jA)(t,V.TO.First|V.TO.AutoFocus)!==V.fE.Error)return}else if((0,V.jA)(t,V.TO.First)!==V.fE.Error)return;if(null!=s&&s.current&&((0,V.C5)(s.current),(null==r?void 0:r.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}a.current=null==r?void 0:r.activeElement})},[s,o,e]),a}(c,{ownerDocument:p,container:n,initialFocus:s,initialFocusFallback:a});!function(e,t){let{ownerDocument:r,container:n,containers:i,previousActiveElement:s}=t,a=(0,z.t)(),o=!!(4&e);d(null==r?void 0:r.defaultView,"focus",e=>{if(!o||!a.current)return;let t=G(i);E.Re(n.current)&&t.add(n.current);let r=s.current;if(!r)return;let l=e.target;E.Re(l)?Y(t,l)?(s.current=l,(0,V.C5)(l)):(e.preventDefault(),e.stopPropagation(),(0,V.C5)(r)):(0,V.C5)(s.current)},!0)}(c,{ownerDocument:p,container:n,containers:o,previousActiveElement:y});let g=(r=(0,l.useRef)(0),(0,F.s)(!0,"keydown",e=>{"Tab"===e.key&&(r.current=e.shiftKey?1:0)},!0),r),m=(0,f.z)(e=>{if(!E.Re(n.current))return;let t=n.current;(0,L.E)(g.current,{[q.Forwards]:()=>{(0,V.jA)(t,V.TO.First,{skipElements:[e.relatedTarget,a]})},[q.Backwards]:()=>{(0,V.jA)(t,V.TO.Last,{skipElements:[e.relatedTarget,a]})}})}),I=(0,h.g)(!!(2&c),"focus-trap#tab-lock"),S=(0,M.G)(),A=(0,l.useRef)(!1),k=(0,v.L6)();return l.createElement(l.Fragment,null,I&&l.createElement(_,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:w.Focusable}),k({ourProps:{ref:i,onKeyDown(e){"Tab"==e.key&&(A.current=!0,S.requestAnimationFrame(()=>{A.current=!1}))},onBlur(e){if(!(4&c))return;let t=G(o);E.Re(n.current)&&t.add(n.current);let r=e.relatedTarget;E.sP(r)&&"true"!==r.dataset.headlessuiFocusGuard&&(Y(t,r)||(A.current?(0,V.jA)(n.current,(0,L.E)(g.current,{[q.Forwards]:()=>V.TO.Next,[q.Backwards]:()=>V.TO.Previous})|V.TO.WrapAround,{relativeTo:e.target}):E.sP(e.target)&&(0,V.C5)(e.target)))}},theirProps:u,defaultTag:"div",name:"FocusTrap"}),I&&l.createElement(_,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:w.Focusable}))}),{features:Z});function Y(e,t){for(let r of e)if(r.contains(t))return!0;return!1}var Q=r(31094),X=r(45926),ee=((a=ee||{})[a.Open=0]="Open",a[a.Closed=1]="Closed",a),et=((o=et||{})[o.SetTitleId=0]="SetTitleId",o);let er={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},en=(0,l.createContext)(null);function ei(e){let t=(0,l.useContext)(en);if(null===t){let t=Error("<".concat(e," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,ei),t}return t}function es(e,t){return(0,L.E)(t.type,er,e,t)}en.displayName="DialogContext";let ea=(0,v.yV)(function(e,t){let r=(0,l.useId)(),{id:n="headlessui-dialog-".concat(r),open:i,onClose:s,initialFocus:a,role:o="dialog",autoFocus:u=!0,__demoMode:w=!1,unmount:_=!1,...I}=e,S=(0,l.useRef)(!1);o="dialog"===o||"alertdialog"===o?o:(S.current||(S.current=!0,console.warn("Invalid role [".concat(o,"] passed to <Dialog />. Only `dialog` and and `alertdialog` are supported. Using `dialog` instead."))),"dialog");let P=(0,D.oJ)();void 0===i&&null!==P&&(i=(P&D.ZM.Open)===D.ZM.Open);let L=(0,l.useRef)(null),M=(0,O.T)(L,t),z=(0,b.i)(L.current),$=i?0:1,[F,q]=(0,l.useReducer)(es,{titleId:null,descriptionId:null,panelRef:(0,l.createRef)()}),W=(0,f.z)(()=>s(!1)),V=(0,f.z)(e=>q({type:0,id:e})),H=!!(0,T.H)()&&0===$,[K,G]=(0,Q.kF)(),Y=A(),{resolveContainers:X}=function(){let{defaultContainers:e=[],portals:t,mainTreeNode:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,f.z)(()=>{var n,i;let s=(0,x.r3)(r),a=[];for(let t of e)null!==t&&(E.kK(t)?a.push(t):"current"in t&&E.kK(t.current)&&a.push(t.current));if(null!=t&&t.current)for(let e of t.current)a.push(e);for(let e of null!=(n=null==s?void 0:s.querySelectorAll("html > *, body > *"))?n:[])e!==document.body&&e!==document.head&&E.kK(e)&&"headlessui-portal-root"!==e.id&&(r&&(e.contains(r)||e.contains(null==(i=null==r?void 0:r.getRootNode())?void 0:i.host))||a.some(t=>e.contains(t))||a.push(e));return a});return{resolveContainers:n,contains:(0,f.z)(e=>n().some(t=>t.contains(e)))}}({mainTreeNode:Y,portals:K,defaultContainers:[{get current(){var ee;return null!=(ee=F.panelRef.current)?ee:L.current}}]}),et=null!==P&&(P&D.ZM.Closing)===D.ZM.Closing;(0,p.s)(!w&&!et&&H,{allowed:(0,f.z)(()=>{var e,t;return[null!=(t=null==(e=L.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:(0,f.z)(()=>{var e;return[null!=(e=null==Y?void 0:Y.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let er=U.n.get(null);(0,y.e)(()=>{if(H)return er.actions.push(n),()=>er.actions.pop(n)},[er,n,H]);let ei=(0,B.M)(er,(0,l.useCallback)(e=>er.selectors.isTop(e,n),[er,n]));(0,m.O)(ei,X,e=>{e.preventDefault(),W()}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof document?document.defaultView:null,r=arguments.length>2?arguments[2]:void 0,n=(0,h.g)(e,"escape");d(t,"keydown",e=>{n&&(e.defaultPrevented||e.key===c.R.Escape&&r(e))})}(ei,null==z?void 0:z.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),W()}),(0,k.P)(!w&&!et&&H,z,X),(0,g.m)(H,L,W);let[ea,ec]=(0,j.fw)(),eu=(0,l.useMemo)(()=>[{dialogState:$,close:W,setTitleId:V,unmount:_},F],[$,W,V,_,F]),ed=(0,C.x)({open:0===$}),eh={ref:M,id:n,role:o,tabIndex:-1,"aria-modal":w?void 0:0===$||void 0,"aria-labelledby":F.titleId,"aria-describedby":ea,unmount:_},ef=!function(){var e;let[t]=(0,l.useState)(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[r,n]=(0,l.useState)(null!=(e=null==t?void 0:t.matches)&&e);return(0,y.e)(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){n(e.matches)}},[t]),r}(),ep=Z.None;H&&!w&&(ep|=Z.RestoreFocus,ep|=Z.TabLock,u&&(ep|=Z.AutoFocus),ef&&(ep|=Z.InitialFocus));let ey=(0,v.L6)();return l.createElement(D.uu,null,l.createElement(N.O,{force:!0},l.createElement(Q.h_,null,l.createElement(en.Provider,{value:eu},l.createElement(Q.wA,{target:L},l.createElement(N.O,{force:!1},l.createElement(ec,{slot:ed},l.createElement(G,null,l.createElement(J,{initialFocus:a,initialFocusFallback:L,containers:X,features:ep},l.createElement(R,{value:W},ey({ourProps:eh,theirProps:I,slot:ed,defaultTag:eo,features:el,visible:0===$,name:"Dialog"})))))))))))}),eo="div",el=v.VN.RenderStrategy|v.VN.Static,ec=(0,v.yV)(function(e,t){let{transition:r=!1,open:n,...i}=e,s=(0,D.oJ)(),a=e.hasOwnProperty("open")||null!==s,o=e.hasOwnProperty("onClose");if(!a&&!o)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&"boolean"!=typeof e.open)throw Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(e.open));if("function"!=typeof e.onClose)throw Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(e.onClose));return(void 0!==n||r)&&!i.static?l.createElement(S,null,l.createElement(X.u,{show:n,transition:r,unmount:i.unmount},l.createElement(ea,{ref:t,...i}))):l.createElement(S,null,l.createElement(ea,{ref:t,open:n,...i}))}),eu=(0,v.yV)(function(e,t){let r=(0,l.useId)(),{id:n="headlessui-dialog-panel-".concat(r),transition:i=!1,...s}=e,[{dialogState:a,unmount:o},c]=ei("Dialog.Panel"),u=(0,O.T)(t,c.panelRef),d=(0,C.x)({open:0===a}),h=(0,f.z)(e=>{e.stopPropagation()}),p=i?X.x:l.Fragment,y=(0,v.L6)();return l.createElement(p,{...i?{unmount:o}:{}},y({ourProps:{ref:u,id:n,onClick:h},theirProps:s,slot:d,defaultTag:"div",name:"Dialog.Panel"}))}),ed=Object.assign(ec,{Panel:eu,Title:((0,v.yV)(function(e,t){let{transition:r=!1,...n}=e,[{dialogState:i,unmount:s}]=ei("Dialog.Backdrop"),a=(0,C.x)({open:0===i}),o=r?X.x:l.Fragment,c=(0,v.L6)();return l.createElement(o,{...r?{unmount:s}:{}},c({ourProps:{ref:t,"aria-hidden":!0},theirProps:n,slot:a,defaultTag:"div",name:"Dialog.Backdrop"}))}),(0,v.yV)(function(e,t){let r=(0,l.useId)(),{id:n="headlessui-dialog-title-".concat(r),...i}=e,[{dialogState:s,setTitleId:a}]=ei("Dialog.Title"),o=(0,O.T)(t);(0,l.useEffect)(()=>(a(n),()=>a(null)),[n,a]);let c=(0,C.x)({open:0===s});return(0,v.L6)()({ourProps:{ref:o,id:n},theirProps:i,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),Description:j.dk})},37388:function(e,t,r){"use strict";let n;r.d(t,{R:function(){return i}});var i=((n=i||{}).Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n)},31094:function(e,t,r){"use strict";r.d(t,{h_:function(){return _},kF:function(){return b},wA:function(){return w}});var n=r(2265),i=r(54887),s=r(90945),a=r(13323),o=r(99417),l=r(40048),c=r(93689),u=r(27988),d=r(61424),h=r(27847);let f=n.Fragment,p=(0,h.yV)(function(e,t){let{ownerDocument:r=null,...a}=e,p=(0,n.useRef)(null),y=(0,c.T)((0,c.h)(e=>{p.current=e}),t),b=(0,l.i)(p.current),v=function(e){let t=(0,u.n)(),r=(0,n.useContext)(g),[i,s]=(0,n.useState)(()=>{var n;if(!t&&null!==r)return null!=(n=r.current)?n:null;if(d.O.isServer)return null;let i=null==e?void 0:e.getElementById("headlessui-portal-root");if(i)return i;if(null===e)return null;let s=e.createElement("div");return s.setAttribute("id","headlessui-portal-root"),e.body.appendChild(s)});return(0,n.useEffect)(()=>{null!==i&&(null!=e&&e.body.contains(i)||null==e||e.body.appendChild(i))},[i,e]),(0,n.useEffect)(()=>{t||null!==r&&s(r.current)},[r,s,t]),i}(null!=r?r:b),w=(0,n.useContext)(m),_=(0,s.G)(),E=(0,h.L6)();return(0,o.L)(()=>{var e;v&&v.childNodes.length<=0&&(null==(e=v.parentElement)||e.removeChild(v))}),v?(0,i.createPortal)(n.createElement("div",{"data-headlessui-portal":"",ref:e=>{_.dispose(),w&&e&&_.add(w.register(e))}},E({ourProps:{ref:y},theirProps:a,slot:{},defaultTag:f,name:"Portal"})),v):null}),y=n.Fragment,g=(0,n.createContext)(null),m=(0,n.createContext)(null);function b(){let e=(0,n.useContext)(m),t=(0,n.useRef)([]),r=(0,a.z)(r=>(t.current.push(r),e&&e.register(r),()=>i(r))),i=(0,a.z)(r=>{let n=t.current.indexOf(r);-1!==n&&t.current.splice(n,1),e&&e.unregister(r)}),s=(0,n.useMemo)(()=>({register:r,unregister:i,portals:t}),[r,i,t]);return[t,(0,n.useMemo)(()=>function(e){let{children:t}=e;return n.createElement(m.Provider,{value:s},t)},[s])]}let v=(0,h.yV)(function(e,t){let r=(0,c.T)(t),{enabled:i=!0,ownerDocument:s,...a}=e,o=(0,h.L6)();return i?n.createElement(p,{...a,ownerDocument:s,ref:r}):o({ourProps:{ref:r},theirProps:a,slot:{},defaultTag:f,name:"Portal"})}),w=(0,h.yV)(function(e,t){let{target:r,...i}=e,s={ref:(0,c.T)(t)},a=(0,h.L6)();return n.createElement(g.Provider,{value:r},a({ourProps:s,theirProps:i,defaultTag:y,name:"Popover.Group"}))}),_=Object.assign(v,{Group:w})},45926:function(e,t,r){"use strict";let n;r.d(t,{u:function(){return T},x:function(){return k}});var i=r(2265),s=r(90945),a=r(13323),o=r(93394),l=r(64518),c=r(31948),u=r(72238),d=r(93689),h=r(34723),f=r(37863),p=r(42120),y=r(24536),g=r(27847);function m(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!(0,g.M2)(null!=(t=e.as)?t:x)||1===i.Children.count(e.children)}let b=(0,i.createContext)(null);b.displayName="TransitionContext";var v=((n=v||{}).Visible="visible",n.Hidden="hidden",n);let w=(0,i.createContext)(null);function _(e){return"children"in e?_(e.children):e.current.filter(e=>{let{el:t}=e;return null!==t.current}).filter(e=>{let{state:t}=e;return"visible"===t}).length>0}function E(e,t){let r=(0,c.E)(e),n=(0,i.useRef)([]),l=(0,o.t)(),u=(0,s.G)(),d=(0,a.z)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.l4.Hidden,i=n.current.findIndex(t=>{let{el:r}=t;return r===e});-1!==i&&((0,y.E)(t,{[g.l4.Unmount](){n.current.splice(i,1)},[g.l4.Hidden](){n.current[i].state="hidden"}}),u.microTask(()=>{var e;!_(n)&&l.current&&(null==(e=r.current)||e.call(r))}))}),h=(0,a.z)(e=>{let t=n.current.find(t=>{let{el:r}=t;return r===e});return t?"visible"!==t.state&&(t.state="visible"):n.current.push({el:e,state:"visible"}),()=>d(e,g.l4.Unmount)}),f=(0,i.useRef)([]),p=(0,i.useRef)(Promise.resolve()),m=(0,i.useRef)({enter:[],leave:[]}),b=(0,a.z)((e,r,n)=>{f.current.splice(0),t&&(t.chains.current[r]=t.chains.current[r].filter(t=>{let[r]=t;return r!==e})),null==t||t.chains.current[r].push([e,new Promise(e=>{f.current.push(e)})]),null==t||t.chains.current[r].push([e,new Promise(e=>{Promise.all(m.current[r].map(e=>{let[t,r]=e;return r})).then(()=>e())})]),"enter"===r?p.current=p.current.then(()=>null==t?void 0:t.wait.current).then(()=>n(r)):n(r)}),v=(0,a.z)((e,t,r)=>{Promise.all(m.current[t].splice(0).map(e=>{let[t,r]=e;return r})).then(()=>{var e;null==(e=f.current.shift())||e()}).then(()=>r(t))});return(0,i.useMemo)(()=>({children:n,register:h,unregister:d,onStart:b,onStop:v,wait:p,chains:m}),[h,d,n,b,v,m,p])}w.displayName="NestingContext";let x=i.Fragment,I=g.VN.RenderStrategy,S=(0,g.yV)(function(e,t){let{show:r,appear:n=!1,unmount:s=!0,...o}=e,c=(0,i.useRef)(null),h=m(e),p=(0,d.T)(...h?[c,t]:null===t?[]:[t]);(0,u.H)();let y=(0,f.oJ)();if(void 0===r&&null!==y&&(r=(y&f.ZM.Open)===f.ZM.Open),void 0===r)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,x]=(0,i.useState)(r?"visible":"hidden"),S=E(()=>{r||x("hidden")}),[k,T]=(0,i.useState)(!0),C=(0,i.useRef)([r]);(0,l.e)(()=>{!1!==k&&C.current[C.current.length-1]!==r&&(C.current.push(r),T(!1))},[C,r]);let O=(0,i.useMemo)(()=>({show:r,appear:n,initial:k}),[r,n,k]);(0,l.e)(()=>{r?x("visible"):_(S)||null===c.current||x("hidden")},[r,S]);let P={unmount:s},R=(0,a.z)(()=>{var t;k&&T(!1),null==(t=e.beforeEnter)||t.call(e)}),D=(0,a.z)(()=>{var t;k&&T(!1),null==(t=e.beforeLeave)||t.call(e)}),N=(0,g.L6)();return i.createElement(w.Provider,{value:S},i.createElement(b.Provider,{value:O},N({ourProps:{...P,as:i.Fragment,children:i.createElement(A,{ref:p,...P,...o,beforeEnter:R,beforeLeave:D})},theirProps:{},defaultTag:i.Fragment,features:I,visible:"visible"===v,name:"Transition"})))}),A=(0,g.yV)(function(e,t){var r,n;let{transition:s=!0,beforeEnter:o,afterEnter:c,beforeLeave:v,afterLeave:S,enter:A,enterFrom:k,enterTo:T,entered:C,leave:O,leaveFrom:P,leaveTo:R,...D}=e,[N,U]=(0,i.useState)(null),B=(0,i.useRef)(null),L=m(e),j=(0,d.T)(...L?[B,t,U]:null===t?[]:[t]),M=null==(r=D.unmount)||r?g.l4.Unmount:g.l4.Hidden,{show:z,appear:$,initial:F}=function(){let e=(0,i.useContext)(b);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[q,W]=(0,i.useState)(z?"visible":"hidden"),V=function(){let e=(0,i.useContext)(w);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:H,unregister:K}=V;(0,l.e)(()=>H(B),[H,B]),(0,l.e)(()=>{if(M===g.l4.Hidden&&B.current){if(z&&"visible"!==q){W("visible");return}return(0,y.E)(q,{hidden:()=>K(B),visible:()=>H(B)})}},[q,B,H,K,z,M]);let G=(0,u.H)();(0,l.e)(()=>{if(L&&G&&"visible"===q&&null===B.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[B,q,G,L]);let Z=F&&!$,J=$&&z&&F,Y=(0,i.useRef)(!1),Q=E(()=>{Y.current||(W("hidden"),K(B))},V),X=(0,a.z)(e=>{Y.current=!0,Q.onStart(B,e?"enter":"leave",e=>{"enter"===e?null==o||o():"leave"===e&&(null==v||v())})}),ee=(0,a.z)(e=>{let t=e?"enter":"leave";Y.current=!1,Q.onStop(B,t,e=>{"enter"===e?null==c||c():"leave"===e&&(null==S||S())}),"leave"!==t||_(Q)||(W("hidden"),K(B))});(0,i.useEffect)(()=>{L&&s||(X(z),ee(z))},[z,L,s]);let et=!(!s||!L||!G||Z),[,er]=(0,h.Y)(et,N,z,{start:X,end:ee}),en=(0,g.oA)({ref:j,className:(null==(n=(0,p.A)(D.className,J&&A,J&&k,er.enter&&A,er.enter&&er.closed&&k,er.enter&&!er.closed&&T,er.leave&&O,er.leave&&!er.closed&&P,er.leave&&er.closed&&R,!er.transition&&z&&C))?void 0:n.trim())||void 0,...(0,h.X)(er)}),ei=0;"visible"===q&&(ei|=f.ZM.Open),"hidden"===q&&(ei|=f.ZM.Closed),z&&"hidden"===q&&(ei|=f.ZM.Opening),z||"visible"!==q||(ei|=f.ZM.Closing);let es=(0,g.L6)();return i.createElement(w.Provider,{value:Q},i.createElement(f.up,{value:ei},es({ourProps:en,theirProps:D,defaultTag:x,features:I,visible:"visible"===q,name:"Transition.Child"})))}),k=(0,g.yV)(function(e,t){let r=null!==(0,i.useContext)(b),n=null!==(0,f.oJ)();return i.createElement(i.Fragment,null,!r&&n?i.createElement(S,{ref:t,...e}):i.createElement(A,{ref:t,...e}))}),T=Object.assign(S,{Child:k,Root:S})},90945:function(e,t,r){"use strict";r.d(t,{G:function(){return s}});var n=r(2265),i=r(16015);function s(){let[e]=(0,n.useState)(i.k);return(0,n.useEffect)(()=>()=>e.dispose(),[e]),e}},70208:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(2265),i=r(31948);function s(e,t,r,s){let a=(0,i.E)(r);(0,n.useEffect)(()=>{if(e)return document.addEventListener(t,r,s),()=>document.removeEventListener(t,r,s);function r(e){a.current(e)}},[e,t,s])}},13323:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var n=r(2265),i=r(31948);let s=function(e){let t=(0,i.E)(e);return n.useCallback(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current(...r)},[t])}},16821:function(e,t,r){"use strict";r.d(t,{s:function(){return u}});var n=r(16015),i=r(40293),s=r(76505),a=r(64518);let o=new Map,l=new Map;function c(e){var t;let r=null!=(t=l.get(e))?t:0;return l.set(e,r+1),0!==r||(o.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>(function(e){var t;let r=null!=(t=l.get(e))?t:1;if(1===r?l.delete(e):l.set(e,r-1),1!==r)return;let n=o.get(e);n&&(null===n["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,o.delete(e))})(e)}function u(e){let{allowed:t,disallowed:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,s.g)(e,"inert-others");(0,a.e)(()=>{var e,s;if(!o)return;let a=(0,n.k)();for(let t of null!=(e=null==r?void 0:r())?e:[])t&&a.add(c(t));let l=null!=(s=null==t?void 0:t())?s:[];for(let e of l){if(!e)continue;let t=(0,i.r3)(e);if(!t)continue;let r=e.parentElement;for(;r&&r!==t.body;){for(let e of r.children)l.some(t=>e.contains(t))||a.add(c(e));r=r.parentElement}}return a.dispose},[o,t,r])}},93394:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var n=r(2265),i=r(64518);function s(){let e=(0,n.useRef)(!1);return(0,i.e)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},76505:function(e,t,r){"use strict";r.d(t,{g:function(){return o}});var n=r(2265),i=r(22055),s=r(46187),a=r(64518);function o(e,t){let r=(0,n.useId)(),o=i.n.get(t),[l,c]=(0,s.M)(o,(0,n.useCallback)(e=>[o.selectors.isTop(e,r),o.selectors.inStack(e,r)],[o,r]));return(0,a.e)(()=>{if(e)return o.actions.push(r),()=>o.actions.pop(r)},[o,e,r]),!!e&&(!c||l)}},64518:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(2265),i=r(61424);let s=(e,t)=>{i.O.isServer?(0,n.useEffect)(e,t):(0,n.useLayoutEffect)(e,t)}},31948:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(2265),i=r(64518);function s(e){let t=(0,n.useRef)(e);return(0,i.e)(()=>{t.current=e},[e]),t}},33106:function(e,t,r){"use strict";r.d(t,{m:function(){return o}});var n=r(2265),i=r(16015),s=r(91133),a=r(31948);function o(e,t,r){let o=(0,a.E)(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&r()});(0,n.useEffect)(()=>{if(!e)return;let r=null===t?null:s.Re(t)?t:t.current;if(!r)return;let n=(0,i.k)();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>o.current(r));e.observe(r),n.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>o.current(r));e.observe(r),n.add(()=>e.disconnect())}return()=>n.dispose()},[t,o,e])}},99417:function(e,t,r){"use strict";r.d(t,{L:function(){return a}});var n=r(2265),i=r(96822),s=r(13323);function a(e){let t=(0,s.z)(e),r=(0,n.useRef)(!1);(0,n.useEffect)(()=>(r.current=!1,()=>{r.current=!0,(0,i.Y)(()=>{r.current&&t()})}),[t])}},41264:function(e,t,r){"use strict";r.d(t,{O:function(){return u}});var n=r(2265),i=r(91133),s=r(37105),a=r(52108),o=r(70208),l=r(31948),c=r(3141);function u(e,t,r){let u=(0,l.E)(r),d=(0,n.useCallback)(function(e,r){if(e.defaultPrevented)return;let n=r(e);if(null!==n&&n.getRootNode().contains(n)&&n.isConnected){for(let r of function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t))if(null!==r&&(r.contains(n)||e.composed&&e.composedPath().includes(r)))return;return(0,s.sP)(n,s.tJ.Loose)||-1===n.tabIndex||e.preventDefault(),u.current(e,n)}},[u,t]),h=(0,n.useRef)(null);(0,o.I)(e,"pointerdown",e=>{var t,r;(0,a.tq)()||(h.current=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)},!0),(0,o.I)(e,"pointerup",e=>{if((0,a.tq)()||!h.current)return;let t=h.current;return h.current=null,d(e,()=>t)},!0);let f=(0,n.useRef)({x:0,y:0});(0,o.I)(e,"touchstart",e=>{f.current.x=e.touches[0].clientX,f.current.y=e.touches[0].clientY},!0),(0,o.I)(e,"touchend",e=>{let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(!(Math.abs(t.x-f.current.x)>=30||Math.abs(t.y-f.current.y)>=30))return d(e,()=>i.sP(e.target)?e.target:null)},!0),(0,c.s)(e,"blur",e=>d(e,()=>i.jQ(window.document.activeElement)?window.document.activeElement:null),!0)}},40048:function(e,t,r){"use strict";r.d(t,{i:function(){return s}});var n=r(2265),i=r(40293);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.useMemo)(()=>(0,i.r3)(...t),[...t])}},26074:function(e,t,r){"use strict";let n,i;r.d(t,{P:function(){return y}});var s,a,o=r(2265),l=r(64518),c=r(16015),u=r(91133),d=r(52108);function h(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let f=(s=()=>new Map,a={PUSH(e,t){var r;let n=null!=(r=this.get(e))?r:{doc:e,count:0,d:(0,c.k)(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(t),n.computedMeta=h(n.meta),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t),r.computedMeta=h(r.meta)),this},SCROLL_PREVENT(e){let t;let r={doc:e.doc,d:e.d,meta:()=>e.computedMeta},n=[(0,d.gn)()?{before(e){let{doc:t,d:r,meta:n}=e;function i(e){for(let t of n().containers)for(let r of t())if(r.contains(e))return!0;return!1}r.microTask(()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=(0,c.k)();e.style(t.documentElement,"scrollBehavior","auto"),r.add(()=>r.microTask(()=>e.dispose()))}let n=null!=(e=window.scrollY)?e:window.pageYOffset,s=null;r.addEventListener(t,"click",e=>{if(u.sP(e.target))try{let r=e.target.closest("a");if(!r)return;let{hash:n}=new URL(r.href),a=t.querySelector(n);u.sP(a)&&!i(a)&&(s=a)}catch(e){}},!0),r.group(e=>{r.addEventListener(t,"touchstart",t=>{if(e.dispose(),u.sP(t.target)&&u.nR(t.target)){if(i(t.target)){let r=t.target;for(;r.parentElement&&i(r.parentElement);)r=r.parentElement;e.style(r,"overscrollBehavior","contain")}else e.style(t.target,"touchAction","none")}})}),r.addEventListener(t,"touchmove",e=>{if(u.sP(e.target)&&!u.LL(e.target)){if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),r.add(()=>{var e;n!==(null!=(e=window.scrollY)?e:window.pageYOffset)&&window.scrollTo(0,n),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{},{before(e){var r;let{doc:n}=e,i=n.documentElement;t=Math.max(0,(null!=(r=n.defaultView)?r:window).innerWidth-i.clientWidth)},after(e){let{doc:r,d:n}=e,i=r.documentElement,s=Math.max(0,i.clientWidth-i.offsetWidth),a=Math.max(0,t-s);n.style(i,"paddingRight","".concat(a,"px"))}},{before(e){let{doc:t,d:r}=e;r.style(t.documentElement,"overflow","hidden")}}];n.forEach(e=>{let{before:t}=e;return null==t?void 0:t(r)}),n.forEach(e=>{let{after:t}=e;return null==t?void 0:t(r)})},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}},n=s(),i=new Set,{getSnapshot:()=>n,subscribe:e=>(i.add(e),()=>i.delete(e)),dispatch(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];let o=a[e].call(n,...r);o&&(n=o,i.forEach(e=>e()))}});f.subscribe(()=>{let e=f.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let e="hidden"===t.get(r.doc),n=0!==r.count;(n&&!e||!n&&e)&&f.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),0===r.count&&f.dispatch("TEARDOWN",r)}});var p=r(76505);function y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),n=(0,o.useSyncExternalStore)(f.subscribe,f.getSnapshot,f.getSnapshot),i=t?n.get(t):void 0;i&&i.count,(0,l.e)(()=>{if(!(!t||!e))return f.dispatch("PUSH",t,r),()=>f.dispatch("POP",t,r)},[e,t])}((0,p.g)(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],r]}})}},72238:function(e,t,r){"use strict";r.d(t,{H:function(){return a}});var n,i=r(2265),s=r(61424);function a(){let e;let t=(e="undefined"==typeof document,(0,(n||(n=r.t(i,2))).useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[a,o]=i.useState(s.O.isHandoffComplete);return a&&!1===s.O.isHandoffComplete&&o(!1),i.useEffect(()=>{!0!==a&&o(!0)},[a]),i.useEffect(()=>s.O.handoff(),[]),!t&&a}},12340:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});var n=r(2265);function i(e){return(0,n.useMemo)(()=>e,Object.values(e))}},93689:function(e,t,r){"use strict";r.d(t,{T:function(){return o},h:function(){return a}});var n=r(2265),i=r(13323);let s=Symbol();function a(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Object.assign(e,{[s]:t})}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let a=(0,n.useRef)(t);(0,n.useEffect)(()=>{a.current=t},[t]);let o=(0,i.z)(e=>{for(let t of a.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return t.every(e=>null==e||(null==e?void 0:e[s]))?void 0:o}},34723:function(e,t,r){"use strict";let n;r.d(t,{X:function(){return h},Y:function(){return f}});var i,s,a=r(2265),o=r(16015),l=r(90945),c=r(64518),u=r(25566);void 0!==u&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(i=null==u?void 0:u.env)?void 0:i.NODE_ENV)==="test"&&void 0===(null==(s=null==Element?void 0:Element.prototype)?void 0:s.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn("Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.\nPlease install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.\n\nExample usage:\n```js\nimport { mockAnimationsApi } from 'jsdom-testing-mocks'\nmockAnimationsApi()\n```"),[]});var d=((n=d||{})[n.None=0]="None",n[n.Closed=1]="Closed",n[n.Enter=2]="Enter",n[n.Leave=4]="Leave",n);function h(e){let t={};for(let r in e)!0===e[r]&&(t["data-".concat(r)]="");return t}function f(e,t,r,n){let[i,s]=(0,a.useState)(r),{hasFlag:u,addFlag:d,removeFlag:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,r]=(0,a.useState)(e),n=(0,a.useCallback)(e=>r(e),[]),i=(0,a.useCallback)(e=>r(t=>t|e),[]),s=(0,a.useCallback)(e=>(t&e)===e,[t]);return{flags:t,setFlag:n,addFlag:i,hasFlag:s,removeFlag:(0,a.useCallback)(e=>r(t=>t&~e),[]),toggleFlag:(0,a.useCallback)(e=>r(t=>t^e),[])}}(e&&i?3:0),f=(0,a.useRef)(!1),p=(0,a.useRef)(!1),y=(0,l.G)();return(0,c.e)(()=>{var i;if(e){if(r&&s(!0),!t){r&&d(3);return}return null==(i=null==n?void 0:n.start)||i.call(n,r),function(e,t){let{prepare:r,run:n,done:i,inFlight:s}=t,a=(0,o.k)();return function(e,t){let{inFlight:r,prepare:n}=t;if(null!=r&&r.current){n();return}let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}(e,{prepare:r,inFlight:s}),a.nextFrame(()=>{n(),a.requestAnimationFrame(()=>{a.add(function(e,t){var r,n;let i=(0,o.k)();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=null!=(n=null==(r=e.getAnimations)?void 0:r.call(e).filter(e=>e instanceof CSSTransition))?n:[];return 0===a.length?t():Promise.allSettled(a.map(e=>e.finished)).then(()=>{s||t()}),i.dispose}(e,i))})}),a.dispose}(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,p.current||(r?(d(3),h(4)):(d(4),h(2)))},run(){p.current?r?(h(3),d(4)):(h(4),d(3)):r?h(1):d(1)},done(){var e,i,a;p.current&&(null!=(a=null==(i=t.getAnimations)?void 0:i.call(t))?a:[]).some(e=>e instanceof CSSTransition&&"finished"!==e.playState)||(f.current=!1,h(7),r||s(!1),null==(e=null==n?void 0:n.end)||e.call(n,r))}})}},[e,r,t,y]),e?[i,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}},3141:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var n=r(2265),i=r(31948);function s(e,t,r,s){let a=(0,i.E)(r);(0,n.useEffect)(()=>{if(e)return window.addEventListener(t,r,s),()=>window.removeEventListener(t,r,s);function r(e){a.current(e)}},[e,t,s])}},6885:function(e,t,r){"use strict";r.d(t,{B:function(){return s}});var n=r(2265);let i=(0,n.createContext)(void 0);function s(){return(0,n.useContext)(i)}},37863:function(e,t,r){"use strict";let n;r.d(t,{ZM:function(){return a},oJ:function(){return o},up:function(){return l},uu:function(){return c}});var i=r(2265);let s=(0,i.createContext)(null);s.displayName="OpenClosedContext";var a=((n=a||{})[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n);function o(){return(0,i.useContext)(s)}function l(e){let{value:t,children:r}=e;return i.createElement(s.Provider,{value:t},r)}function c(e){let{children:t}=e;return i.createElement(s.Provider,{value:null},t)}},27988:function(e,t,r){"use strict";r.d(t,{O:function(){return a},n:function(){return s}});var n=r(2265);let i=(0,n.createContext)(!1);function s(){return(0,n.useContext)(i)}function a(e){return n.createElement(i.Provider,{value:e.force},e.children)}},46036:function(e,t,r){"use strict";r.d(t,{J:function(){return g},dC:function(){return w},wU:function(){return m}});var n,i,s,a=r(24093),o=r(16015),l=r(61424),c=Object.defineProperty,u=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t,r)=>(u(e,"symbol"!=typeof t?t+"":t,r),r),h=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},f=(e,t,r)=>(h(e,t,"read from private field"),r?r.call(e):t.get(e)),p=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},y=(e,t,r,n)=>(h(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class g{dispose(){this.disposables.dispose()}get state(){return f(this,n)}subscribe(e,t){if(l.O.isServer)return()=>{};let r={selector:e,callback:t,current:e(f(this,n))};return f(this,s).add(r),this.disposables.add(()=>{f(this,s).delete(r)})}on(e,t){return l.O.isServer?()=>{}:(f(this,i).get(e).add(t),this.disposables.add(()=>{f(this,i).get(e).delete(t)}))}send(e){let t=this.reduce(f(this,n),e);if(t!==f(this,n)){for(let e of(y(this,n,t),f(this,s))){let t=e.selector(f(this,n));m(e.current,t)||(e.current=t,e.callback(t))}for(let t of f(this,i).get(e.type))t(f(this,n),e)}}constructor(e){p(this,n,{}),p(this,i,new a.G(()=>new Set)),p(this,s,new Set),d(this,"disposables",(0,o.k)()),y(this,n,e),l.O.isServer&&this.disposables.microTask(()=>{this.dispose()})}}function m(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&b(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&b(e.entries(),t.entries()):!!(v(e)&&v(t))&&b(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function b(e,t){for(;;){let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}}function v(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}function w(e){let[t,r]=e(),n=(0,o.k)();return function(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];t(...i),n.dispose(),n.microTask(r)}}n=new WeakMap,i=new WeakMap,s=new WeakMap},22055:function(e,t,r){"use strict";let n;r.d(t,{M:function(){return u},n:function(){return f}});var i=r(46036),s=r(24093),a=r(24536),o=Object.defineProperty,l=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t,r)=>(l(e,"symbol"!=typeof t?t+"":t,r),r),u=((n=u||{})[n.Push=0]="Push",n[n.Pop=1]="Pop",n);let d={0(e,t){let r=t.id,n=e.stack,i=e.stack.indexOf(r);if(-1!==i){let t=e.stack.slice();return t.splice(i,1),t.push(r),n=t,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(-1===n)return e;let i=e.stack.slice();return i.splice(n,1),{...e,stack:i}}};class h extends i.J{static new(){return new h({stack:[]})}reduce(e,t){return(0,a.E)(t.type,d,e,t)}constructor(){super(...arguments),c(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),c(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}}let f=new s.G(()=>h.new())},46187:function(e,t,r){"use strict";r.d(t,{M:function(){return a}});var n=r(99581),i=r(13323),s=r(46036);function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.wU;return(0,n.useSyncExternalStoreWithSelector)((0,i.z)(t=>e.subscribe(o,t)),(0,i.z)(()=>e.state),(0,i.z)(()=>e.state),(0,i.z)(t),r)}function o(e){return e}},42120:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.from(new Set(t.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}r.d(t,{A:function(){return n}})},24093:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});class n extends Map{get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}constructor(e){super(),this.factory=e}}},16015:function(e,t,r){"use strict";r.d(t,{k:function(){return function e(){let t=[],r={addEventListener:(e,t,n,i)=>(e.addEventListener(t,n,i),r.add(()=>e.removeEventListener(t,n,i))),requestAnimationFrame(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=requestAnimationFrame(...t);return r.add(()=>cancelAnimationFrame(i))},nextFrame(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.requestAnimationFrame(()=>r.requestAnimationFrame(...t))},setTimeout(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=setTimeout(...t);return r.add(()=>clearTimeout(i))},microTask(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let s={current:!0};return(0,n.Y)(()=>{s.current&&t[0]()}),r.add(()=>{s.current=!1})},style(e,t,r){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:n})})},group(t){let r=e();return t(r),this.add(()=>r.dispose())},add:e=>(t.includes(e)||t.push(e),()=>{let r=t.indexOf(e);if(r>=0)for(let e of t.splice(r,1))e()}),dispose(){for(let e of t.splice(0))e()}};return r}}});var n=r(96822)},91133:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function i(e){return n(e)&&"tagName"in e}function s(e){return i(e)&&"accessKey"in e}function a(e){return i(e)&&"tabIndex"in e}function o(e){return i(e)&&"style"in e}function l(e){return s(e)&&"IFRAME"===e.nodeName}function c(e){return s(e)&&"INPUT"===e.nodeName}function u(e){return s(e)&&"LABEL"===e.nodeName}function d(e){return s(e)&&"FIELDSET"===e.nodeName}function h(e){return s(e)&&"LEGEND"===e.nodeName}function f(e){return!!i(e)&&e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]')}r.d(t,{CD:function(){return h},LL:function(){return c},Re:function(){return s},UG:function(){return n},dz:function(){return u},jF:function(){return f},jQ:function(){return l},kK:function(){return i},nR:function(){return o},sP:function(){return a},zO:function(){return d}})},61424:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var n=Object.defineProperty,i=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s=(e,t,r)=>(i(e,"symbol"!=typeof t?t+"":t,r),r);class a{set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}constructor(){s(this,"current",this.detect()),s(this,"handoffState","pending"),s(this,"currentId",0)}}let o=new a},37105:function(e,t,r){"use strict";let n,i,s,a,o;r.d(t,{C5:function(){return E},EO:function(){return I},TO:function(){return p},fE:function(){return y},jA:function(){return S},sP:function(){return v},tJ:function(){return b},wI:function(){return w},y:function(){return h},z2:function(){return x}});var l=r(16015),c=r(91133),u=r(24536),d=r(40293);let h=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(","),f=["[data-autofocus]"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(",");var p=((n=p||{})[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n),y=((i=y||{})[i.Error=0]="Error",i[i.Overflow=1]="Overflow",i[i.Success=2]="Success",i[i.Underflow=3]="Underflow",i),g=((s=g||{})[s.Previous=-1]="Previous",s[s.Next=1]="Next",s);function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(h)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var b=((a=b||{})[a.Strict=0]="Strict",a[a.Loose=1]="Loose",a);function v(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e!==(null==(t=(0,d.r3)(e))?void 0:t.body)&&(0,u.E)(r,{0:()=>e.matches(h),1(){let t=e;for(;null!==t;){if(t.matches(h))return!0;t=t.parentElement}return!1}})}function w(e){(0,l.k)().nextFrame(()=>{let t=(0,d.vY)(e);t&&c.sP(t)&&!v(t,0)&&E(e)})}var _=((o=_||{})[o.Keyboard=0]="Keyboard",o[o.Mouse=1]="Mouse",o);function E(e){null==e||e.focus({preventScroll:!0})}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort((e,r)=>{let n=t(e),i=t(r);if(null===n||null===i)return 0;let s=n.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function I(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===e?document.body:(0,d.k3)(e);return S(m(r),t,{relativeTo:e})}function S(e,t){var r,n,i;let{sorted:s=!0,relativeTo:a=null,skipElements:o=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=Array.isArray(e)?e.length>0?(0,d.k3)(e[0]):document:(0,d.k3)(e),c=Array.isArray(e)?s?x(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(f)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):m(e);o.length>0&&c.length>1&&(c=c.filter(e=>!o.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),a=null!=a?a:null==l?void 0:l.activeElement;let u=(()=>{if(5&t)return 1;if(10&t)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,c.indexOf(a))-1;if(4&t)return Math.max(0,c.indexOf(a))+1;if(8&t)return c.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=32&t?{preventScroll:!0}:{},y=0,g=c.length,b;do{if(y>=g||y+g<=0)return 0;let e=h+y;if(16&t)e=(e+g)%g;else{if(e<0)return 3;if(e>=g)return 1}null==(b=c[e])||b.focus(p),y+=u}while(b!==(0,d.vY)(b));return 6&t&&null!=(i=null==(n=null==(r=b)?void 0:r.matches)?void 0:n.call(r,"textarea,input"))&&i&&b.select(),2}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0))},24536:function(e,t,r){"use strict";function n(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(e in t){let r=t[e];return"function"==typeof r?r(...i):r}let a=Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(e=>'"'.concat(e,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,n),a}r.d(t,{E:function(){return n}})},96822:function(e,t,r){"use strict";function n(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}r.d(t,{Y:function(){return n}})},40293:function(e,t,r){"use strict";r.d(t,{H9:function(){return o},k3:function(){return s},r3:function(){return i},vY:function(){return a}});var n=r(61424);function i(e){var t;return n.O.isServer?null:null==e?document:null!=(t=null==e?void 0:e.ownerDocument)?t:document}function s(e){var t,r;return n.O.isServer?null:null==e?document:null!=(r=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))?r:document}function a(e){var t,r;return null!=(r=null==(t=s(e))?void 0:t.activeElement)?r:null}function o(e){return a(e)===e}},52108:function(e,t,r){"use strict";function n(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i(){return n()||/Android/gi.test(window.navigator.userAgent)}r.d(t,{gn:function(){return n},tq:function(){return i}})},27847:function(e,t,r){"use strict";let n,i;r.d(t,{L6:function(){return u},M2:function(){return b},VN:function(){return l},dG:function(){return p},l4:function(){return c},oA:function(){return g},yV:function(){return y}});var s=r(2265),a=r(42120),o=r(24536),l=((n=l||{})[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n),c=((i=c||{})[i.Unmount=0]="Unmount",i[i.Hidden=1]="Hidden",i);function u(){let e,t;let r=(e=(0,s.useRef)([]),t=(0,s.useCallback)(t=>{for(let r of e.current)null!=r&&("function"==typeof r?r(t):r.current=t)},[]),function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(!n.every(e=>null==e))return e.current=n,t});return(0,s.useCallback)(e=>(function(e){let{ourProps:t,theirProps:r,slot:n,defaultTag:i,features:s,visible:a=!0,name:l,mergeRefs:c}=e;c=null!=c?c:h;let u=f(r,t);if(a)return d(u,n,i,l,c);let p=null!=s?s:0;if(2&p){let{static:e=!1,...t}=u;if(e)return d(t,n,i,l,c)}if(1&p){let{unmount:e=!0,...t}=u;return(0,o.E)(e?0:1,{0:()=>null,1:()=>d({...t,hidden:!0,style:{display:"none"}},n,i,l,c)})}return d(u,n,i,l,c)})({mergeRefs:r,...e}),[r])}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,{as:o=r,children:l,refName:c="ref",...u}=m(e,["unmount","static"]),d=void 0!==e.ref?{[c]:e.ref}:{},h="function"==typeof l?l(t):l;"className"in u&&u.className&&"function"==typeof u.className&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let p={};if(t){let e=!1,r=[];for(let[n,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&r.push(n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())));if(e)for(let e of(p["data-headlessui-state"]=r.join(" "),r))p["data-".concat(e)]=""}if(b(o)&&(Object.keys(g(u)).length>0||Object.keys(g(p)).length>0)){if(!(0,s.isValidElement)(h)||Array.isArray(h)&&h.length>1||b(h.type)){if(Object.keys(g(u)).length>0)throw Error(['Passing props on "Fragment"!',"","The current component <".concat(n,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(g(u)).concat(Object.keys(g(p))).map(e=>"  - ".concat(e)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>"  - ".concat(e)).join("\n")].join("\n"))}else{let e=h.props,t=null==e?void 0:e.className,r="function"==typeof t?function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,a.A)(t(...r),u.className)}:(0,a.A)(t,u.className),n=f(h.props,g(m(u,["ref"])));for(let e in p)e in n&&delete p[e];return(0,s.cloneElement)(h,Object.assign({},n,p,d,{ref:i(s.version.split(".")[0]>="19"?h.props.ref:h.ref,d.ref)},r?{className:r}:{}))}}return(0,s.createElement)(o,Object.assign({},m(u,["ref"]),!b(o)&&d,!b(o)&&p),h)}function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every(e=>null==e)?void 0:e=>{for(let r of t)null!=r&&("function"==typeof r?r(e):r.current=e)}}function f(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return{};if(1===t.length)return t[0];let n={},i={};for(let e of t)for(let t in e)t.startsWith("on")&&"function"==typeof e[t]?(null!=i[t]||(i[t]=[]),i[t].push(e[t])):n[t]=e[t];if(n.disabled||n["aria-disabled"])for(let e in i)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(i[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in i)Object.assign(n,{[e](t){for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];for(let r of i[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;r(t,...n)}}});return n}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return{};if(1===t.length)return t[0];let n={},i={};for(let e of t)for(let t in e)t.startsWith("on")&&"function"==typeof e[t]?(null!=i[t]||(i[t]=[]),i[t].push(e[t])):n[t]=e[t];for(let e in i)Object.assign(n,{[e](){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];for(let t of i[e])null==t||t(...r)}});return n}function y(e){var t;return Object.assign((0,s.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function g(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}function b(e){return e===s.Fragment||e===Symbol.for("react.fragment")}},13705:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Object.create(n.prototype)),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:n.name})}}},92369:function(e,t,r){"use strict";r.d(t,{n:function(){return o}});class n{constructor(e,t){this.type=e,this.data=t}}var i=r(13705),s=r(75596);let a={type:-1,encode:function(e){return e instanceof Date?function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}{let r=e/4294967296,n=new Uint8Array(8),i=new DataView(n.buffer);return i.setUint32(0,t<<2|3&r),i.setUint32(4,4294967295&e),n}}{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,t),(0,s.zT)(n,4,e),r}}(function(e){let t=e.getTime(),r=Math.floor(t/1e3),n=(t-1e3*r)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-1e9*i}}(e)):null},decode:function(e){let t=function(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{let e=t.getUint32(0);return{sec:(3&e)*4294967296+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:(0,s.eu)(t,4),nsec:t.getUint32(0)};default:throw new i._(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class o{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(a)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{let n=-1-e;this.builtInEncoders[n]=t,this.builtInDecoders[n]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){let i=this.builtInEncoders[r];if(null!=i){let s=i(e,t);if(null!=s)return new n(-1-r,s)}}for(let r=0;r<this.encoders.length;r++){let i=this.encoders[r];if(null!=i){let s=i(e,t);if(null!=s)return new n(r,s)}}return e instanceof n?e:null}decode(e,t,r){let i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new n(t,e)}}o.defaultCodec=new o},74772:function(e,t,r){"use strict";function n(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}r.d(t,{J:function(){return w}});var i=r(92369),s=r(75596),a=r(62330),o=r(23277);class l{constructor(e=16,t=16){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let e=0;e<this.maxKeyLength;e++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){let n=this.caches[r-1];t:for(let i of n){let n=i.bytes;for(let i=0;i<r;i++)if(n[i]!==e[t+i])continue t;return i.str}return null}store(e,t){let r=this.caches[e.length-1],n={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=n:r.push(n)}decode(e,t,r){let n=this.find(e,t,r);if(null!=n)return this.hit++,n;this.miss++;let i=(0,a.zV)(e,t,r),s=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(s,i),i}}var c=r(13705);let u="array",d="map_key",h="map_value",f=e=>{if("string"==typeof e||"number"==typeof e)return e;throw new c._("The type of key must be string or number but "+typeof e)};class p{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){let t=this.getUninitializedStateFromPool();t.type=u,t.position=0,t.size=e,t.array=Array(e)}pushMapState(e){let t=this.getUninitializedStateFromPool();t.type=d,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){return this.stackHeadPosition++,this.stackHeadPosition===this.stack.length&&this.stack.push({type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null}),this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw Error("Invalid stack state. Released state is not on top of the stack.");e.type===u&&(e.size=0,e.array=void 0,e.position=0,e.type=void 0),(e.type===d||e.type===h)&&(e.size=0,e.map=void 0,e.readCount=0,e.type=void 0),this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}let y=new DataView(new ArrayBuffer(0)),g=new Uint8Array(y.buffer);try{y.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}let m=RangeError("Insufficient data"),b=new l;class v{constructor(e){this.totalPos=0,this.pos=0,this.view=y,this.bytes=g,this.headByte=-1,this.stack=new p,this.entered=!1,this.extensionCodec=e?.extensionCodec??i.n.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??s.x5,this.maxBinLength=e?.maxBinLength??s.x5,this.maxArrayLength=e?.maxArrayLength??s.x5,this.maxMapLength=e?.maxMapLength??s.x5,this.maxExtLength=e?.maxExtLength??s.x5,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:b,this.mapKeyConverter=e?.mapKeyConverter??f}clone(){return new v({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.reset()}setBuffer(e){let t=(0,o.z)(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(-1!==this.headByte||this.hasRemaining(1)){let t=this.bytes.subarray(this.pos),r=(0,o.z)(e),n=new Uint8Array(t.length+r.length);n.set(t),n.set(r,t.length),this.setBuffer(n)}else this.setBuffer(e)}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:t,pos:r}=this;return RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){let t=this.clone();yield*t.decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{let t;this.entered=!0;let r=!1;for await(let n of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(n);try{t=this.doDecodeSync(),r=!0}catch(e){if(!(e instanceof RangeError))throw e}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return t}let{headByte:i,pos:s,totalPos:a}=this;throw RangeError(`Insufficient data in parsing ${n(i)} at ${a} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async *decodeMultiAsync(e,t){if(this.entered){let r=this.clone();yield*r.decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,n=-1;for await(let i of e){if(t&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(n=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),0!=--n;);}catch(e){if(!(e instanceof RangeError))throw e}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){r:for(;;){let e;let t=this.readHeadByte();if(t>=224)e=t-256;else if(t<192){if(t<128)e=t;else if(t<144){let r=t-128;if(0!==r){this.pushMapState(r),this.complete();continue}e={}}else if(t<160){let r=t-144;if(0!==r){this.pushArrayState(r),this.complete();continue}e=[]}else{let r=t-160;e=this.decodeString(r,0)}}else if(192===t)e=null;else if(194===t)e=!1;else if(195===t)e=!0;else if(202===t)e=this.readF32();else if(203===t)e=this.readF64();else if(204===t)e=this.readU8();else if(205===t)e=this.readU16();else if(206===t)e=this.readU32();else if(207===t)e=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===t)e=this.readI8();else if(209===t)e=this.readI16();else if(210===t)e=this.readI32();else if(211===t)e=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===t){let t=this.lookU8();e=this.decodeString(t,1)}else if(218===t){let t=this.lookU16();e=this.decodeString(t,2)}else if(219===t){let t=this.lookU32();e=this.decodeString(t,4)}else if(220===t){let t=this.readU16();if(0!==t){this.pushArrayState(t),this.complete();continue}e=[]}else if(221===t){let t=this.readU32();if(0!==t){this.pushArrayState(t),this.complete();continue}e=[]}else if(222===t){let t=this.readU16();if(0!==t){this.pushMapState(t),this.complete();continue}e={}}else if(223===t){let t=this.readU32();if(0!==t){this.pushMapState(t),this.complete();continue}e={}}else if(196===t){let t=this.lookU8();e=this.decodeBinary(t,1)}else if(197===t){let t=this.lookU16();e=this.decodeBinary(t,2)}else if(198===t){let t=this.lookU32();e=this.decodeBinary(t,4)}else if(212===t)e=this.decodeExtension(1,0);else if(213===t)e=this.decodeExtension(2,0);else if(214===t)e=this.decodeExtension(4,0);else if(215===t)e=this.decodeExtension(8,0);else if(216===t)e=this.decodeExtension(16,0);else if(199===t){let t=this.lookU8();e=this.decodeExtension(t,1)}else if(200===t){let t=this.lookU16();e=this.decodeExtension(t,2)}else if(201===t){let t=this.lookU32();e=this.decodeExtension(t,4)}else throw new c._(`Unrecognized type byte: ${n(t)}`);this.complete();let r=this.stack;for(;r.length>0;){let t=r.top();if(t.type===u){if(t.array[t.position]=e,t.position++,t.position===t.size)e=t.array,r.release(t);else continue r}else if(t.type===d){if("__proto__"===e)throw new c._("The key __proto__ is not allowed");t.key=this.mapKeyConverter(e),t.type=h;continue r}else if(t.map[t.key]=e,t.readCount++,t.readCount===t.size)e=t.map,r.release(t);else{t.key=null,t.type=d;continue r}}return e}}readHeadByte(){return -1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new c._(`Unrecognized array type byte: ${n(e)}`)}}pushMapState(e){if(e>this.maxMapLength)throw new c._(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new c._(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){let r;if(e>this.maxStrLength)throw new c._(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw m;let n=this.pos+t;return r=this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?this.keyDecoder.decode(this.bytes,n,e):(0,a.xI)(this.bytes,n,e),this.pos+=t+e,r}stateIsMapKey(){return this.stack.length>0&&this.stack.top().type===d}decodeBinary(e,t){if(e>this.maxBinLength)throw new c._(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw m;let r=this.pos+t,n=this.bytes.subarray(r,r+e);return this.pos+=t+e,n}decodeExtension(e,t){if(e>this.maxExtLength)throw new c._(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let r=this.view.getInt8(this.pos+t),n=this.decodeBinary(e,t+1);return this.extensionCodec.decode(n,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,s.Lz)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,s.eu)(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){let e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){let e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function w(e,t){return new v(t).decode(e)}},57978:function(e,t,r){"use strict";r.d(t,{c:function(){return l}});var n=r(62330),i=r(92369),s=r(75596),a=r(23277);class o{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??i.n.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??100,this.initialBufferSize=e?.initialBufferSize??2048,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new o({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw Error(`Too deep objects in depth ${t}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){let t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){let t=new ArrayBuffer(e),r=new Uint8Array(t),n=new DataView(t);r.set(this.bytes),this.view=n,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){let t=(0,n.ZR)(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),(0,n.Rn)(e,this.bytes,this.pos),this.pos+=t}encodeObject(e,t){let r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw Error(`Too large binary: ${t}`);let r=(0,a.z)(e);this.writeU8a(r)}encodeArray(e,t){let r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw Error(`Too large array: ${r}`);for(let r of e)this.doEncode(r,t+1)}countWithoutUndefined(e,t){let r=0;for(let n of t)void 0!==e[n]&&r++;return r}encodeMap(e,t){let r=Object.keys(e);this.sortKeys&&r.sort();let n=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else if(n<4294967296)this.writeU8(223),this.writeU32(n);else throw Error(`Too large map object: ${n}`);for(let n of r){let r=e[n];this.ignoreUndefined&&void 0===r||(this.encodeString(n),this.doEncode(r,t+1))}}encodeExtension(e){if("function"==typeof e.data){let t=e.data(this.pos+6),r=t.length;if(r>=4294967296)throw Error(`Too large extension object: ${r}`);this.writeU8(201),this.writeU32(r),this.writeI8(e.type),this.writeU8a(t);return}let t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,s.$t)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,s.zT)(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function l(e,t){return new o(t).encodeSharedRef(e)}},75596:function(e,t,r){"use strict";r.d(t,{$t:function(){return i},Lz:function(){return o},eu:function(){return a},x5:function(){return n},zT:function(){return s}});let n=4294967295;function i(e,t,r){e.setUint32(t,r/4294967296),e.setUint32(t+4,r)}function s(e,t,r){e.setUint32(t,Math.floor(r/4294967296)),e.setUint32(t+4,r)}function a(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}function o(e,t){return 4294967296*e.getUint32(t)+e.getUint32(t+4)}},23277:function(e,t,r){"use strict";function n(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}r.d(t,{z:function(){return n}})},62330:function(e,t,r){"use strict";function n(e){let t=e.length,r=0,n=0;for(;n<t;){let i=e.charCodeAt(n++);if((4294967168&i)==0){r++;continue}if((4294965248&i)==0)r+=2;else{if(i>=55296&&i<=56319&&n<t){let t=e.charCodeAt(n);(64512&t)==56320&&(++n,i=((1023&i)<<10)+(1023&t)+65536)}(4294901760&i)==0?r+=3:r+=4}}return r}r.d(t,{Rn:function(){return s},ZR:function(){return n},xI:function(){return l},zV:function(){return a}});let i=new TextEncoder;function s(e,t,r){e.length>50?i.encodeInto(e,t.subarray(r)):!function(e,t,r){let n=e.length,i=r,s=0;for(;s<n;){let r=e.charCodeAt(s++);if((4294967168&r)==0){t[i++]=r;continue}if((4294965248&r)==0)t[i++]=r>>6&31|192;else{if(r>=55296&&r<=56319&&s<n){let t=e.charCodeAt(s);(64512&t)==56320&&(++s,r=((1023&r)<<10)+(1023&t)+65536)}(4294901760&r)==0?t[i++]=r>>12&15|224:(t[i++]=r>>18&7|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128}t[i++]=63&r|128}}(e,t,r)}function a(e,t,r){let n=t,i=n+r,s=[],a="";for(;n<i;){let t=e[n++];if((128&t)==0)s.push(t);else if((224&t)==192){let r=63&e[n++];s.push((31&t)<<6|r)}else if((240&t)==224){let r=63&e[n++],i=63&e[n++];s.push((31&t)<<12|r<<6|i)}else if((248&t)==240){let r=(7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++];r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r)}else s.push(t);s.length>=4096&&(a+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(a+=String.fromCharCode(...s)),a}let o=new TextDecoder;function l(e,t,r){return r>200?function(e,t,r){let n=e.subarray(t,t+r);return o.decode(n)}(e,t,r):a(e,t,r)}},59615:function(e,t,r){"use strict";r.d(t,{b:function(){return l},g:function(){return a}});var n=r(93610),i=r(59455);let s={0:"legacy",1:"eip2930",2:"eip1559",3:"eip4844",4:"eip7702"},a={legacy:0,eip2930:1,eip1559:2,eip4844:3,eip7702:4},o=e=>void 0!==e?BigInt(e):void 0;function l(e){let t,{type:r=2,...a}="string"==typeof e?JSON.parse(e):e;a.accessList&&Array.isArray(a.accessList)?t=a.accessList.map(e=>Array.isArray(e)?{address:e[0],storageKeys:e[1]}:e):a.accessList&&(t=Object.entries(a.accessList).map(e=>({address:e[0],storageKeys:e[1]})));let l=Number(a.chainId??1),c=(0,n.v)(a.data)?a.data:a.data?(0,i.NC)(Uint8Array.from(a.data)):void 0,u=a.nonce?Number(a.nonce):void 0,d={chainId:l,data:c,nonce:u,value:o(a.value),gas:o(a.gas??a.gasLimit)},h=Number(r);if(0===h)return{...a,type:s[h],...d,gasPrice:o(a.gasPrice),accessList:void 0,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(1===h)return{...a,type:s[h],...d,gasPrice:o(a.gasPrice),accessList:t,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(2===h)return{...a,type:s[h],...d,nonce:u,accessList:t,maxFeePerGas:o(a.maxFeePerGas),maxPriorityFeePerGas:o(a.maxPriorityFeePerGas),gasPrice:void 0,maxFeePerBlobGas:void 0};throw Error(`Unsupported transaction type: ${r}`)}},35213:function(e,t,r){"use strict";r.d(t,{Wh:function(){return s},dx:function(){return i},fP:function(){return n}});class n extends Error{constructor({error:e,code:t,status:r}){super(e),this.name="PrivyApiError",this.error=e,this.code=t,this.status=r}}class i extends Error{constructor({error:e,code:t}){super(e),this.code=t,this.error=e}}class s extends Error{constructor({error:e,code:t,response:r}){super(e),this.code=t,this.error=e,this.response=r}}},94223:function(e,t,r){"use strict";r.d(t,{Z:function(){return tG}});let n={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"};class i{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(n,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}}let s={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},a=new TextEncoder,o=new TextDecoder,l=e=>{let t=e;"string"==typeof t&&(t=a.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},c=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},u=e=>l(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),d=e=>{let t=e;t instanceof Uint8Array&&(t=o.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return c(t)}catch(e){throw TypeError("The input to be decoded is not correctly encoded.")}};class h extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}class f extends h{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class p{static parse(e){try{return new p(e)}catch(e){return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=function(e){let t,r;if("string"!=typeof e)throw new f("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new f("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new f("Invalid JWT");if(!n)throw new f("JWTs must contain a payload");try{t=d(n)}catch(e){throw new f("Failed to base64url decode the payload")}try{r=JSON.parse(o.decode(t))}catch(e){throw new f("Failed to parse the decoded payload as JSON")}if(!function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(r))throw new f("Invalid JWT Claims Set");return r}(e)}}class y{async updateOnCrossAppAuthentication(e,t){let r=t.access_token,n=y.providerAccessTokenStorageKey(e);await this._storage.put(n,r)}async getProviderAccessToken(e){let t=y.providerAccessTokenStorageKey(e),r=await this._storage.get(t);if("string"!=typeof r)return null;try{if(new p(r).isExpired())throw Error("JWT is expired");return r}catch{return await this._storage.del(t),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(s,{params:{app_id:this._privyInternal.appId}})}constructor(e,t){this._privyInternal=e,this._storage=t}}y.providerAccessTokenStorageKey=e=>`privy:cross-app:${e}`;var g=r(2903);class m{async revoke(){await this._privyInternal.fetch(g.t,{})}constructor(e){this._privyInternal=e}}var b=r(63159),v=r(66809),w=r(35213);let _=e=>!!e.id&&"privy-v2"===e.recovery_method;class E{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(_(this._account))throw new w.dx({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessTokenInternal())throw new w.dx({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new w.dx({code:"embedded_wallet_request_error",error:t})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i}){this._proxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i}}var x=r(18377),I=r(72094);async function S({context:e,chainType:t,idempotencyKey:r}){return{wallet:await (0,I.U)(e,{request:{chain_type:t,owner_id:void 0},headers:r?{"privy-idempotency-key":r}:void 0})}}var A=r(56934);class k{enqueue(e,t){this.callbacks[e]=t}dequeue(e,t){let r=this.callbacks[t];if(!r)throw Error(`cannot dequeue ${e} event: no event found for id ${t}`);switch(delete this.callbacks[t],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return r;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}}async function T(e,t,r,n,i=!1,s,a){let o=i,l=async s=>{if(o){s===(i?0:1)?n():r.current?.reject(new x.AY("missing_or_invalid_mfa","MFA verification failed, retry."));let o=await new Promise((e,n)=>{t.current={resolve:e,reject:n},setTimeout(()=>{let e=new x.AY("mfa_timeout","Timed out waiting for MFA code");r.current?.reject(e),n(e)},a)});return await e(o)}return await e()},c=null;for(let e=0;e<s;e++)try{c=await l(e),r.current?.resolve(void 0);break}catch(e){if("missing_or_invalid_mfa"!==e.type)throw r.current?.resolve(void 0),e;o=!0}if(null===c){let e=new x.AY("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw r.current?.reject(e),e}return c}let C=(X=0,()=>"id-"+X++),O=(e,t)=>"bigint"==typeof t?t.toString():t,P=async(e,{ms:t,msg:r})=>{let n,i=new Promise((e,i)=>{n=setTimeout(()=>{i(Error(r))},t??15e3)});try{return await Promise.race([e,i])}finally{void 0!==n&&clearTimeout(n)}},R=new k;class D{invokeWithMfa(e,t){return P(T(r=>P(this.waitForReady().then(()=>e(r)),{msg:t.timeoutMsg,ms:t.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),t.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return P(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return P(this.waitForReady().then(()=>this.invoke("privy:wallet:create",e)),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa(t=>this.invoke("privy:wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return P(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",e)),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa(t=>this.invoke("privy:delegated-actions:consent",{...t,...e}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:verify",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:init-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:submit-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:unenroll",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return P(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",e)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa(t=>this.invoke("privy:user-signer:sign",{...t,...e}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return P(this.waitForReady().then(()=>this.invoke("privy:wallets:add",e)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:set-recovery",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return P(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",e)),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:recover",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){if(!e.event.startsWith("privy:"))return void console.warn(`Unsupported event type: ${e.event}`);let{reject:t,resolve:r}=R.dequeue(e.event,e.id);return void 0!==e.error?t(new x.AY(e.error.type,e.error.message)):r(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(e,t)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,e()}).catch(t),await new Promise(e=>{setTimeout(()=>{e()},150)})})}invoke(e,t){let r=`${e}${JSON.stringify(t,O)}`;if("privy:wallet:create"===e||"privy:solana-wallet:create"===e){let e=this.cache.get(r);if(e)return e}let n=new Promise((r,n)=>{let i=C();R.enqueue(i,{resolve:r,reject:n}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:i,event:e,data:t}),"*")}).finally(()=>{this.cache.delete(r)});return this.cache.set(r,n),n}constructor(e,t){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=t}}var N=r(45152),U=r(59455),B=r(59615),L=r(82957).lW;let j=e=>/^0x[0-9a-fA-F]*$/.test(e),M=e=>L.from(e,"utf8"),z=e=>`0x${e.toString("hex")}`;var $=r(70320),F=r(82957).lW;function q(e){return"number"==typeof e||"bigint"==typeof e?`0x${BigInt(e).toString(16)}`:"string"==typeof e?j(e)?e:z(M(e)):void 0}async function W({context:e,account:t,rpcRequest:r}){switch(r.chainType){case"ethereum":return async function({context:e,account:t,rpcRequest:r}){var n;switch(r.method){case"personal_sign":{let[n]=r.params,i=await (0,$.f)(e,e.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:t.id,params:n.startsWith("0x")?{message:n.slice(2),encoding:"hex"}:{message:n,encoding:"utf-8"}});if("personal_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"eth_signTransaction":{let[n]=r.params,i=await (0,$.f)(e,e.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:t.id,params:{transaction:{from:n.from,to:n.to??void 0,nonce:q(n.nonce),chain_id:q(n.chainId),data:function(e){if(void 0!==e)return"string"==typeof e?j(e)?e:z(M(e)):z(F.from(Uint8Array.from(e)))}(n.data),value:q(n.value),type:n.type,gas_limit:q(n.gasLimit),gas_price:q(n.gasPrice),max_fee_per_gas:q(n.maxFeePerGas),max_priority_fee_per_gas:q(n.maxPriorityFeePerGas)}}});if("eth_signTransaction"!==i.method)throw Error("Unable to sign transaction");return{data:i.data.signed_transaction}}case"eth_signTypedData_v4":{let[,i]=r.params,s=await (0,$.f)(e,e.signRequest,{chain_type:"ethereum",method:r.method,wallet_id:t.id,params:{typed_data:("string"==typeof(n=i)&&(n=JSON.parse(n)),{types:n.types,primary_type:String(n.primaryType),domain:n.domain,message:n.message})}});if("eth_signTypedData_v4"!==s.method)throw Error("Unable to sign typed data");return{data:s.data.signature}}case"eth_sign":{let[,n]=r.params,i=await (0,$.f)(e,e.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:t.id,params:{hash:j(n)?n:z(M(n))}});if("secp256k1_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"secp256k1_sign":{let[n]=r.params,i=await (0,$.f)(e,e.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:t.id,params:{hash:j(n)?n:z(M(n))}});if("secp256k1_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${r.method}`)}}({context:e,account:t,rpcRequest:r.request});case"solana":return async function({context:e,account:t,rpcRequest:r}){if("signMessage"===r.method){let{message:n}=r.params,i=await (0,$.f)(e,e.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:t.id,params:{message:n,encoding:"base64"}});if("signMessage"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}}({context:e,account:t,rpcRequest:r.request})}}r(3096);let V=new Set(["eth_sign","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"]);class H extends N{async request(e){if(V.has(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_signTransaction":{let t=e.params?.[0];return this.handleSignTransaction(t)}case"eth_sendTransaction":{let t=e.params?.[0];return this.handleSendTransaction(t)}case"eth_populateTransactionRequest":{let t=e.params?.[0];return this.handlePopulateTransaction(t)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let t={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(t.chainId),t}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._client=(0,A.uV)(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let t=this.ensureChainId(e),r=(0,B.b)(t),{type:n,...i}=await this._client.prepareTransactionRequest({account:t.from??this._account.address,...r});return{...i,type:B.g[n]}}async handleSignTransaction(e){let t={...e};for(let e of Object.keys(t)){let r=t[e];r&&"bigint"==typeof r&&(t[e]=(0,U.NC)(r))}return await this.handleIFrameRpc({method:"eth_signTransaction",params:[t]})}async handleSendTransaction(e){let t=await this.handlePopulateTransaction(e),r=await this.handleSignTransaction(t);return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[r]})}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");let t=e.params?.[0],r=this.ensureChainId(t),n=(0,B.b)(r);return await this._client.estimateGas({account:r.from??this._account.address,...n})}handleSwitchEthereumChain(e){let t;if(!e.params||!Array.isArray(e.params))throw new x.C5(`Invalid params for ${e.method}`,4200);if("string"==typeof e.params[0])t=e.params[0];else{if(!("chainId"in e.params[0])||"string"!=typeof e.params[0].chainId)throw new x.C5(`Invalid params for ${e.method}`,4200);t=e.params[0].chainId}this.internalSwitchEthereumChain(t)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let r=this._account;if(_(r)){let{data:n}=await W({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e),signRequest:({message:e})=>this._walletProxy.signWithUserSigner({accessToken:t,message:e})},account:r,rpcRequest:{chainType:"ethereum",request:e}});return n}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t})}catch(r){let e=(0,x.YS)(r);if(e&&"privy"===this._account.recovery_method)await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t});else{if(!e||!this._onNeedsRecovery)throw r;{let e;await new Promise(async(t,r)=>{e=setTimeout(()=>r(new w.dx({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>t(!0)})}).finally(()=>clearTimeout(e))}}}return(await this._walletProxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new w.dx({code:"embedded_wallet_request_error",error:t})}}async handleJsonRpc(e){return this._client.request(e)}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i,chains:s,onNeedsRecovery:a,chainId:o=s[0].id,appApi:l}){super(),this._walletProxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i,this._chainId=o,this._chains=s,this._onNeedsRecovery=a,this._client=(0,A.uV)(o,s,{rpcUrls:[]},{appId:l.appId}),this._appApi=l}}function K(e){return"version"in e}function G(e,t){let r=(K(e)?e.message:e.compileMessage()).staticAccountKeys.find(e=>e.toBase58()===t);if(!r)throw Error(`Transaction does not contain public key ${t}`);return r}var Z=r(82957).lW;class J{async request(e){if(!await this._privyInternal.getAccessTokenInternal())throw new w.dx({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if("privy-v2"!==this._account.recovery_method)try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(r){let t=(0,x.YS)(r);if(t&&"privy"===this._account.recovery_method)await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!t||!this._onNeedsRecovery)throw r;{let e;await new Promise(async(t,r)=>{e=setTimeout(()=>r(new w.dx({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>t(!0)})}).finally(()=>clearTimeout(e))}}}}async signMessageRpc(e,t){let r=this._account;if(!_(r))return(await this._proxy.rpcWallet({accessToken:t,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:n}=await W({context:{app:this._app,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e),signRequest:({message:e})=>this._proxy.signWithUserSigner({accessToken:t,message:e})},account:r,rpcRequest:{chainType:"solana",request:e}});return{signature:n}}}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t),await this.signMessageRpc(e,t)}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new w.dx({code:"embedded_wallet_request_error",error:t})}}async handleSignAndSendTransaction(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:r,connection:n,options:i}=e.params,s=G(r,this._account.address),a=K(r)?Z.from(r.message.serialize()):r.serializeMessage(),{signature:o}=await this.signMessageRpc({method:"signMessage",params:{message:a.toString("base64")}},t);return r.addSignature(s,Z.from(o,"base64")),{signature:await n.sendRawTransaction(r.serialize(),i)}}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new w.dx({code:"embedded_wallet_request_error",error:t})}}async handleSignTransaction(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:r}=e.params,n=G(r,this._account.address),i=K(r)?Z.from(r.message.serialize()):r.serializeMessage(),{signature:s}=await this.signMessageRpc({method:"signMessage",params:{message:i.toString("base64")}},t);return r.addSignature(n,Z.from(s,"base64")),{signedTransaction:r}}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:t}),new w.dx({code:"embedded_wallet_request_error",error:t})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i,onNeedsRecovery:s,app:a}){this._proxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i,this._onNeedsRecovery=s,this._app=a}}class Y{setMessagePoster(e){this._proxy=new D(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new w.dx({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:r}=await this._proxy.signWithUserSigner({accessToken:t,message:e.message});return{signature:r}}async add(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await S({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:e.chainType});else{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new w.dx({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:t,...e})}let{user:t}=await this._privyInternal.refreshSession();return{user:t}}async getBitcoinProvider({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:s}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return _(e)||await this._load({entropyId:t,entropyIdVerifier:r,wallet:e,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:s}),new E({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:r})}async create({password:e,recoveryMethod:t,recoveryToken:r,recoveryKey:n,recoverySecretOverride:i,iCloudRecordNameOverride:s,solanaAccount:a,skipCallbacks:o,idempotencyKey:l}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode){if(t&&!t.startsWith("privy"))throw new w.dx({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await S({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:"ethereum",idempotencyKey:l})}else{let o;if(o=t||(e?"user-passcode":"privy"),e&&"string"!=typeof e)throw Error("Invalid recovery password, must be a string");if("privy"===o&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let l=await this._privyInternal.getAccessTokenInternal();if(!l)throw Error("User must be logged in to create an embedded wallet");let{address:c}=await this._proxy.create({accessToken:l,recoveryMethod:o,recoveryKey:n,recoveryPassword:e,recoveryAccessToken:r,recoverySecretOverride:i,iCloudRecordNameOverride:s,solanaAddress:a?.address});if(!c)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(o)}async createSolana(e){if(!this._proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await S({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:"solana",idempotencyKey:e?.idempotencyKey});else{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new w.dx({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e?.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:r}=await this._proxy.createSolana({accessToken:t,ethereumAddress:e?.ethereumAccount?.address});if(!r)throw new w.dx({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:t}){if(!this._proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let r=await this._privyInternal.getAccessTokenInternal();if(!r)throw new w.dx({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:r,delegatedWallets:e,rootWallet:t})}async getProvider(e,t,r,n,i){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return _(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:t,recoveryKey:i,recoveryAccessToken:r,recoverySecretOverride:n}),new H({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:s,recoveryKey:a,onNeedsRecovery:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return _(e)||(!o||n||i||s||a)&&await this._load({entropyId:t,entropyIdVerifier:r,wallet:e,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:s,recoveryKey:a}),new H({account:e,entropyId:t,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:o,appApi:this._appApi})}async getSolanaProvider(e,t,r,n,i,s,a){if(!this._proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return _(e)||(!a||n||i||s)&&await this._load({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:s}),new J({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:r,onNeedsRecovery:a,app:this._appApi})}async setRecovery(e){let{wallet:t,...r}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(_(t))throw new w.dx({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});(0,A.Gv)({currentRecoveryMethod:t.recovery_method,upgradeToRecoveryMethod:"icloud-native"===r.recoveryMethod?"icloud":r.recoveryMethod}),await this._load("solana"===t.chain_type?{wallet:t,entropyId:t.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier"});let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("User must be logged in to interact with embedded wallets");let i=t.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:t.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});try{let e;if("user-passcode"===r.recoveryMethod)e={recoveryMethod:"user-passcode",recoveryPassword:r.password};else if("google-drive"===r.recoveryMethod)e={recoveryMethod:"google-drive",recoveryAccessToken:r.recoveryAccessToken};else if("icloud"===r.recoveryMethod)e={recoveryMethod:"icloud",recoveryAccessToken:r.recoveryAccessToken};else if("icloud-native"===r.recoveryMethod)e={recoveryMethod:"icloud-native",iCloudRecordNameOverride:r.iCloudRecordNameOverride,recoverySecretOverride:r.recoverySecretOverride};else if("recovery-encryption-key"===r.recoveryMethod)e={recoveryMethod:"recovery-encryption-key",recoveryKey:r.recoveryKey};else{if("privy"!==r.recoveryMethod)throw Error(`Unknown recovery method: ${r.recoveryMethod}`);e={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:n,entropyId:t.address,entropyIdVerifier:"solana"===t.chain_type?"solana-address-verifier":"ethereum-address-verifier",...e}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:t.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});let{user:s}=await this._privyInternal.refreshSession();return{user:s,provider:"ethereum"!==t.chain_type?null:new H({account:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(e){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:t.address,recovery_method:t.recovery_method,error:e instanceof Error?e.message:"Unable to recover wallet"}),e}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(e){return console.error(e),!1}}async _load({entropyId:e,entropyIdVerifier:t,wallet:r,recoveryPassword:n,recoveryKey:i,recoveryAccessToken:s,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let o=await this._privyInternal.getAccessTokenInternal();if(!o)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:o,entropyId:e,entropyIdVerifier:t}),e}catch(l){if((0,x.YS)(l))try{if("privy"===r.recovery_method){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}if("user-passcode"===r.recovery_method&&n){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let i=await this._proxy.recover({accessToken:o,recoveryPassword:n,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),i.entropyId}if(["google-drive","icloud"].includes(r.recovery_method)&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,recoveryAccessToken:s,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}if("icloud"===r.recovery_method&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:"icloud-native"});let n=await this._proxy.recover({accessToken:o,recoverySecretOverride:a,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:"icloud-native"}),n.entropyId}if("recovery-encryption-key"===r.recovery_method&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,recoveryKey:i,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}}catch(t){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:r.address,recovery_method:r.recovery_method,error:t instanceof Error?t.message:`Unable to recover wallet: ${e}`}),t}throw l}}constructor(e,t,r,n,i,s){if(this._chains=Array.from(b.B),this._privyInternal=e,t&&(this._proxy=new D(t,i),n.setProxy(this._proxy)),r){let e=(0,v.G)(r);this._chains=e}this._mfa=n,this._mfaPromises=i,this._appApi=s}}class Q extends N{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}}var X,ee,et=r(90548),er=r(9315),en=((ee={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",ee.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",ee.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",ee.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",ee.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",ee.MISSING_MFA_ENROLLMENT="missing_mfa_enrollment",ee.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",ee.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",ee.INVALID_DATA="invalid_data",ee.INVALID_CREDENTIALS="invalid_credentials",ee.INVALID_CAPTCHA="invalid_captcha",ee.LINKED_TO_ANOTHER_USER="linked_to_another_user",ee.ALLOWLIST_REJECTED="allowlist_rejected",ee.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",ee.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",ee.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",ee.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",ee.TOO_MANY_REQUESTS="too_many_requests",ee.RESOURCE_CONFLICT="resource_conflict",ee.INVALID_ORIGIN="invalid_origin",ee.MISSING_ORIGIN="missing_origin",ee.INVALID_NATIVE_APP_ID="invalid_native_app_id",ee.TOKEN_ALREADY_USED="token_already_used",ee.ALREADY_LOGGED_OUT="already_logged_out",ee.NOT_SUPPORTED="not_supported",ee.USER_UNSUBSCRIBED="user_unsubscribed",ee.MAX_APPS_REACHED="max_apps_reached",ee.USER_LIMIT_REACHED="max_accounts_reached",ee.DEVICE_REVOKED="device_revoked",ee.WALLET_PASSWORD_EXISTS="wallet_password_exists",ee.OAUTH_STATE_MISMATCH="oauth_state_mismatch",ee.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",ee.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",ee.DISALLOWED_LOGIN_METHOD="disallowed_login_method",ee.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",ee.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",ee.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",ee.CANNOT_SET_PASSWORD="cannot_set_password",ee.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",ee.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",ee.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",ee.USER_DOES_NOT_EXIST="user_does_not_exist",ee.ALREADY_EXISTS="resource_already_exists",ee.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",ee.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",ee.FEATURE_NOT_ENABLED="feature_not_enabled",ee.INSUFFICIENT_FUNDS="insufficient_funds",ee.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",ee.TRANSACTION_EXECUTION_FAILURE="transaction_execution_failure",ee.INVALID_SOLANA_TRANSACTION="invalid_solana_transaction",ee.INVALID_POLICY_FORMAT="invalid_policy_format",ee.INVALID_AGGREGATION_FORMAT="invalid_aggregation_format",ee.POLICY_VIOLATION="policy_violation",ee.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",ee.INVALID_REQUEST="invalid_request",ee.SIGNUP_DISABLED="signup_disabled",ee);let ei=(e,t)=>t?Object.entries(t).reduce((e,[t,r])=>e.replace(`:${t}`,`${r}`),e):e,es={path:"/api/v1/apps/:app_id",method:"GET"},ea={path:"/api/v1/analytics_events",method:"POST"},eo={path:"/api/v1/sessions",method:"POST"},el={path:"/api/v1/sessions/logout",method:"POST"};var ec=r(64131);let eu=Promise.allSettled.bind(Promise)??(e=>Promise.all(e.map(e=>e.then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e}))))),ed="privy:token",eh="privy-token",ef="privy:pat",ep="privy:refresh_token",ey="privy-refresh-token",eg="privy:id-token",em="privy-id-token",eb="privy-session";class ev extends N{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getCustomerAccessToken(){let e=await this._storage.get(ed);try{return"string"==typeof e?new p(e).value:null}catch(e){return console.error(e),await this.destroyLocalState({reason:"getToken_error"}),null}}async getPrivyAccessToken(){let e=await this._storage.get(ef);try{return"string"==typeof e?new p(e).value:null}catch(e){return console.error(e),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(ep);return"string"==typeof e?e:null}async getIdentityToken(){let e=await this._storage.get(eg);return"string"==typeof e?e:null}get mightHaveServerCookies(){try{let e=ec.Z.get(eb);return void 0!==e&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,t){return this.mightHaveServerCookies||"string"==typeof e&&"string"==typeof t}tokenIsActive(e){if(!e)return!1;let t=p.parse(e);return null!==t&&!t.isExpired(30)}async destroyLocalState(e){await eu([this._storage.del(ed),this._storage.del(ep),this._storage.del(eg),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),ec.Z.remove(eh),ec.Z.remove(ey),ec.Z.remove(em),ec.Z.remove(eb),e?.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeCustomerAccessToken(e){if("string"==typeof e){let t=await this._storage.get(ed);if(await this._storage.put(ed,e),!this._isUsingServerCookies){let t=p.parse(e)?.expiration;ec.Z.set(eh,e,{sameSite:"Strict",secure:!0,expires:t?new Date(1e3*t):void 0})}t!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let e=await this._storage.get(ed);await this._storage.del(ed),ec.Z.remove(eh),null!==e&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storePrivyAccessToken(e){"string"==typeof e?await this._storage.put(ef,e):await this._storage.del(ef)}async storeRefreshToken(e){"string"==typeof e?(await this._storage.put(ep,e),this._isUsingServerCookies||(ec.Z.set(eb,"t",{sameSite:"Strict",secure:!0,expires:30}),ec.Z.set(ey,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(ep),ec.Z.remove(ey),ec.Z.remove(eb),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let t=(await eu([this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter(e=>"rejected"===e.status);t.length>0&&this.emit("error_storing_tokens",t.map(e=>String(e.reason)).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){if("string"==typeof e){let t=await this._storage.get(eg);if(await this._storage.put(eg,e),!this._isUsingServerCookies){let t=p.parse(e)?.expiration;ec.Z.set(em,e,{sameSite:"Strict",secure:!0,expires:t?new Date(1e3*t):void 0})}t!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let e=await this._storage.get(eg);await this._storage.del(eg),ec.Z.remove(em),null!==e&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&"string"==typeof e)return e;let t=u(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,t),t}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}}ev.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];var ew=e=>{let t=new AbortController;return setTimeout(()=>t.abort(),e),t.signal};let e_=()=>{},eE={NONE:Number.NEGATIVE_INFINITY,ERROR:1,WARN:2,INFO:3,DEBUG:Number.POSITIVE_INFINITY},ex=({level:e}={level:"ERROR"})=>({get level(){return e},error:eE[e]>=eE.ERROR?console.error:e_,warn:eE[e]>=eE.WARN?console.warn:e_,info:eE[e]>=eE.INFO?console.info:e_,debug:eE[e]>=eE.DEBUG?console.debug:e_}),eI="privy:caid";class eS{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new w.dx({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:t,query:r}){return`${this.baseUrl}${ei(e.path,t)}${function(e){let t=new URLSearchParams;for(let r in e)null!=e[r]&&t.append(r,String(e[r]));return Array.from(t).length?"?"+t.toString():""}(r)}`}async fetch(e,{body:t,params:r,query:n,headers:i,onRequest:s=this._beforeRequest.bind(this)}){let a=new Request(this.getPath(e,{params:r,query:n}),{method:e.method,body:JSON.stringify(t),headers:i}),o=await s(a),l=await this._fetch(a,o),c=await l.json();if(l.status>299)throw new w.fP({...c,status:l.status});return c}async _beforeRequestWithoutInitialize(e){let t=await this.session.getPrivyAccessToken()??await this.session.getCustomerAccessToken(),r=new Headers(e.headers);r.set("privy-app-id",this.appId),this.appClientId&&r.set("privy-client-id",this.appClientId),r.set("privy-client",this._sdkVersion),t&&r.set("Authorization",`Bearer ${t}`),r.set("Content-Type","application/json"),r.set("Accept","application/json");let n=await this._getOrGenerateClientAnalyticsId();return n&&r.set("privy-ca-id",n),this.nativeAppIdentifier&&r.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:ew(2e4),headers:r,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessTokenInternal(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch(es,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(eI);if("string"==typeof e&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=(0,er.Z)()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(this._analyticsId){try{await this._storage.put(eI,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}}async destroyClientAnalyticsId(){try{return await this._storage.del(eI)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,t){try{await this.fetch(ea,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:t},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch(e){}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new w.dx({code:"storage_error",error:"Unable to access storage"});let t=await this.session.getRefreshToken()??void 0,r=t??"key",n=this._cache.get(r);if(n)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await n;let i=this._refreshSession(t,e);this._cache.set(r,i);try{return await i}finally{this._cache.delete(r)}}async _refreshSession(e,t){let r=await this.session.getCustomerAccessToken();if(!this.session.hasRefreshCredentials(r,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new w.fP({code:en.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage",status:401});try{this.logger.debug(`[privy:refresh] fetching: ${eo.path}`);let r=await this.fetch(eo,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),n=r.session_update_action;return this.logger.debug(`[privy:refresh] response: ${n}`),"set"===n&&(await this.session.updateWithTokensResponse(r),this.logger.debug("[privy:refresh] tokens stored")),"clear"===n&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),t||this.callbacks?.setUser?.(null)),"ignore"===n&&(r.token&&(await this.session.storeCustomerAccessToken(r.token),this.logger.debug("[privy:refresh] token stored (CAT)")),r.privy_access_token&&(await this.session.storePrivyAccessToken(r.privy_access_token),this.logger.debug("[privy:refresh] token stored (PAT)")),r.identity_token&&(this.logger.debug("[privy:refresh] token stored (IDT)"),await this.session.storeIdentityToken(r.identity_token))),this.logger.debug("[privy:refresh] returning response"),t||this.callbacks?.setUser?.(r.user),r}catch(e){throw this.logger.debug(`[privy:refresh] error: ${e.message??"unknown error"}`),e instanceof w.fP&&e.code===en.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),t||this.callbacks?.setUser?.(null)),e}}async getAccessToken(){let[e,t]=await Promise.all([this.session.getCustomerAccessToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,t)){let t=await this.refreshSession(),r=await this.session.getCustomerAccessToken();return t.token||this.logger.debug("[privy:getAccessToken] expected token received null"),t.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),r===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),t.token??r}return e}async getAccessTokenInternal(){let e=await this.getAccessToken();return await this.session.getPrivyAccessToken()??e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${(0,er.Z)()}`,t="blobby";await this._storage.put(e,t);let r=await this._storage.get(e);return await this._storage.del(e),r===t}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.60.2",this._cache=new Map,this.logger=ex({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new ev({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=et(globalThis.fetch,{retries:3,retryDelay:e=>3**e*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",e=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:e})})}}let eA={path:"/api/v1/users/me/accept_terms",method:"POST"};class ek{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(eA,{})}}constructor(e){this._privyInternal=e}}let eT={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},eC={path:"/api/v1/custom_jwt_account/link",method:"POST"},eO=e=>"wallet"===e.type&&"privy"===e.wallet_client_type&&"embedded"===e.connector_type,eP=e=>e?e.linked_accounts.filter(eO).filter(e=>"ethereum"===e.chain_type).sort((e,t)=>e.wallet_index-t.wallet_index):[],eR=e=>eP(e).find(e=>0===e.wallet_index)??null,eD=e=>e?e.linked_accounts.filter(eO).filter(e=>"solana"===e.chain_type).sort((e,t)=>e.wallet_index-t.wallet_index):[],eN=e=>eD(e).find(e=>0===e.wallet_index)??null,eU=(e,t)=>!("off"===t||eP(e).length>0||e.linked_accounts.filter(e=>"wallet"===e.type&&"ethereum"===e.chain_type).length>0&&"all-users"!==t),eB=(e,t)=>!("off"===t||eD(e).length>0||e.linked_accounts.filter(e=>"wallet"===e.type&&"solana"===e.chain_type).length>0&&"all-users"!==t),eL=async(e,t,r)=>{let n=eU(t.user,r?.ethereum?.createOnLogin??"off"),i=eB(t.user,r?.solana?.createOnLogin??"off");if(n&&i){let r=await e.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await e.createSolana({ethereumAccount:eR(r.user)??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}}return n?{...await e.create({recoveryMethod:"privy",solanaAccount:eN(t.user)??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}:i?{...await e.createSolana({ethereumAccount:eR(t.user)??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}:t};class ej{async syncWithToken(e,t,r){let n=await this._privyInternal.fetch(eT,{body:{token:e,mode:r}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await eL(this._embedded,n,t?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async linkWithToken(e){await this._privyInternal.fetch(eC,{body:{token:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eM={path:"/api/v1/passwordless/authenticate",method:"POST"},ez={path:"/api/v1/passwordless/init",method:"POST"},e$={path:"/api/v1/passwordless/link",method:"POST"},eF={path:"/api/v1/passwordless/unlink",method:"POST"},eq={path:"/api/v1/passwordless/update",method:"POST"};class eW{async sendCode(e,t){return this._privyInternal.fetch(ez,{body:{email:e,token:t}})}async loginWithCode(e,t,r,n){let i=await this._privyInternal.fetch(eM,{body:{email:e,code:t,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await eL(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}async linkWithCode(e,t){await this._privyInternal.fetch(e$,{body:{email:e,code:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:t,code:r}){await this._privyInternal.fetch(eq,{body:{oldAddress:e,newAddress:t,code:r}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async unlink(e){await this._privyInternal.fetch(eF,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eV={path:"/api/v1/farcaster/init",method:"POST"},eH={path:"/api/v1/farcaster/authenticate",method:"POST"},eK={path:"/api/v1/farcaster/link",method:"POST"},eG={path:"/api/v1/farcaster/unlink",method:"POST"},eZ={path:"/api/v1/farcaster/status",method:"GET"},eJ={path:"/api/v2/farcaster/init",method:"POST"},eY={path:"/api/v2/farcaster/authenticate",method:"POST"};class eQ{async initializeAuth({relyingParty:e,redirectUrl:t,token:r}){return await this._privyInternal.fetch(eV,{body:{relying_party:e,redirect_url:t,token:r}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(eZ,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:t,signature:r,fid:n,mode:i},s){let a=await this._privyInternal.fetch(eH,{body:{channel_token:e,message:t,signature:r,fid:n,mode:i}});await this._privyInternal.session.updateWithTokensResponse(a);let o=await eL(this._embedded,a,s?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async link({channel_token:e,message:t,signature:r,fid:n}){await this._privyInternal.fetch(eK,{body:{channel_token:e,message:t,signature:r,fid:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(eG,{body:{fid:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}class eX{async initializeAuth(){return await this._privyInternal.fetch(eJ,{body:{}})}async authenticate({message:e,signature:t,fid:r},n){let i=await this._privyInternal.fetch(eY,{body:{message:e,signature:t,fid:r}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await eL(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}constructor(e,t){this._privyInternal=e,this._embedded=t}}let e0={path:"/api/v1/guest/authenticate",method:"POST"};class e1{async create(e){let t=await this._privyInternal.session.getOrCreateGuestCredential(),r=await this._privyInternal.fetch(e0,{body:{guest_credential:t}});await this._privyInternal.session.updateWithTokensResponse(r);let n=await eL(this._embedded,r,e?.embedded);return this._privyInternal.callbacks?.setUser?.(n.user),n}constructor(e,t){this._privyInternal=e,this._embedded=t}}let e2={path:"/api/v1/oauth/authenticate",method:"POST"},e3={path:"/api/v1/oauth/init",method:"POST"},e5={path:"/api/v1/oauth/link",method:"POST"},e8={path:"/api/v1/oauth/unlink",method:"POST"},e6="privy:state_code",e4="privy:code_verifier";async function e9(e,t){let r=(new TextEncoder).encode(e);return new Uint8Array(await t("SHA-256",r))}function e7(){return u(crypto.getRandomValues(new Uint8Array(36)))}async function te({codeVerifier:e,method:t="S256",digest:r=crypto.subtle.digest.bind(crypto.subtle)}){return"S256"!=t?e:u(await e9(e,r))}class tt{async generateURL(e,t){let r=e7(),n=e7(),i=await te({codeVerifier:r,digest:this._crypto?.digest});return await Promise.all([this._storage.put(e4,r),this._storage.put(e6,n)]),this._privyInternal.fetch(e3,{body:{redirect_to:t,provider:e,code_challenge:i,state_code:n}})}async loginWithCode(e,t,r,n,i,s){let[a,o]=await Promise.all([this._storage.get(e4),this._storage.get(e6)]);if(o!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:o??"",returnedStateCode:t??""}),new w.dx({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let l=await this._privyInternal.fetch(e2,{body:{authorization_code:e,code_type:n,state_code:o,code_verifier:a,mode:i}});await this._privyInternal.session.updateWithTokensResponse(l);let c=await eL(this._embedded,l,s?.embedded);return await Promise.all([this._storage.del(e4),this._storage.del(e6)]),this._privyInternal.callbacks?.setUser?.(c.user),c}async linkWithCode(e,t,r,n){let[i,s]=await Promise.all([this._storage.get(e4),this._storage.get(e6)]);if(s!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:s??"",returnedStateCode:t??""}),new w.dx({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let a=await this._privyInternal.fetch(e5,{body:{authorization_code:e,code_type:n,state_code:s,code_verifier:i}});await this._privyInternal.session.processOAuthTokens(a.oauth_tokens);let o=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(e4),this._storage.del(e6)]),{user:o.user,identity_token:o.identity_token}}async unlink(e,t){await this._privyInternal.fetch(e8,{body:{provider:e,subject:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}constructor(e,t,r,n){this._privyInternal=e,this._embedded=t,this._storage=r,this._crypto=n}}let tr={path:"/api/v1/passkeys/link",method:"POST"},tn={path:"/api/v1/passkeys/authenticate",method:"POST"},ti={path:"/api/v1/passkeys/register",method:"POST"},ts={path:"/api/v1/passkeys/authenticate/init",method:"POST"},ta={path:"/api/v1/passkeys/register/init",method:"POST"},to={path:"/api/v1/passkeys/link/init",method:"POST"};class tl{async generateRegistrationOptions(e){return await this._privyInternal.fetch(to,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(ts,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(ta,{body:{relying_party:e}})}async loginWithPasskey(e,t,r,n){let i=await this._privyInternal.fetch(tn,{body:{relying_party:r,challenge:t,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await eL(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}async signupWithPasskey(e,t,r){let n=await this._privyInternal.fetch(ti,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await eL(this._embedded,n,r?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async linkWithPasskey(e,t){await this._privyInternal.fetch(tr,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let tc={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},tu={path:"/api/v1/passwordless_sms/init",method:"POST"},td={path:"/api/v1/passwordless_sms/link",method:"POST"},th={path:"/api/v1/passwordless_sms/unlink",method:"POST"},tf={path:"/api/v1/passwordless_sms/update",method:"POST"};class tp{async sendCode(e,t){return this._privyInternal.fetch(tu,{body:{phoneNumber:e,token:t}})}async loginWithCode(e,t,r,n){let i=await this._privyInternal.fetch(tc,{body:{phoneNumber:e,code:t,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await eL(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}async linkWithCode(e,t){await this._privyInternal.fetch(td,{body:{phoneNumber:e,code:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:t,code:r}){await this._privyInternal.fetch(tf,{body:{old_phone_number:e,new_phone_number:t,code:r}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async unlink(e){await this._privyInternal.fetch(th,{body:{phoneNumber:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let ty={path:"/api/v1/siwe/init",method:"POST"},tg={path:"/api/v1/siwe/authenticate",method:"POST"},tm={path:"/api/v1/siwe/link",method:"POST"},tb={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},tv={path:"/api/v1/siwe/unlink",method:"POST"};class tw{async unlinkWallet(e){await this._privyInternal.fetch(tv,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async linkWithSiwe(e,t,r){let n=t||this._wallet,i=r||this._preparedMessage;if(!n)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!i)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(tm,{body:{message:i,signature:e,chainId:n.chainId,walletClientType:n.walletClientType??null,connectorType:n.connectorType??null}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async loginWithSiwe(e,t,r,n,i){let s=t||this._wallet,a=r||this._preparedMessage;if(!s)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!a)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let o=await this._privyInternal.fetch(tg,{body:{signature:e,message:a,chainId:s.chainId,walletClientType:s.walletClientType??null,connectorType:s.connectorType??null,mode:n}});await this._privyInternal.session.updateWithTokensResponse(o);let l=await eL(this._embedded,o,i?.embedded);return this._privyInternal.callbacks?.setUser?.(l.user),l}async init(e,t,r){var n;this._wallet=e;let{nonce:i}=await this._privyInternal.fetch(ty,{body:{address:e.address}}),s=`${(n={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:t,nonce:i,uri:r}).domain} wants you to sign in with your Ethereum account:
${n.address}

${n.statement}

URI: ${n.uri}
Version: 1
Chain ID: ${n.chainId}
Nonce: ${n.nonce}
Issued At: ${n.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=s,{nonce:i,message:s}}constructor(e,t){this._wallet=void 0,this._privyInternal=e,this._embedded=t}}let t_={path:"/api/v1/siws/init",method:"POST"},tE={path:"/api/v1/siws/authenticate",method:"POST"},tx={path:"/api/v1/siws/link",method:"POST"},tI={path:"/api/v1/siws/unlink",method:"POST"};class tS{async unlink({address:e}){await this._privyInternal.fetch(tI,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async link({message:e,signature:t,walletClientType:r,connectorType:n}){await this._privyInternal.fetch(tx,{body:{message:e,signature:t,walletClientType:r??null,connectorType:n??null}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async login({mode:e,message:t,signature:r,walletClientType:n,connectorType:i,opts:s}){let a=await this._privyInternal.fetch(tE,{body:{signature:r,message:t,walletClientType:n??null,connectorType:i??null,mode:e}});await this._privyInternal.session.updateWithTokensResponse(a);let o=await eL(this._embedded,a,s?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async fetchNonce({address:e}){let{nonce:t}=await this._privyInternal.fetch(t_,{body:{address:e}});return{nonce:t}}constructor(e,t){this._privyInternal=e,this._embedded=t}}class tA{async link(e,t,r,n){await this._privyInternal.fetch(tb,{body:{message:e,signature:t,smart_wallet_type:r,smart_wallet_version:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var t;let{nonce:r}=await this._privyInternal.fetch(ty,{body:{address:e.address}});return{nonce:r,message:`${(t={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:r}).domain} wants you to sign in with your Ethereum account:
${t.address}

${t.statement}

URI: ${t.uri}
Version: 1
Chain ID: ${t.chainId}
Nonce: ${t.nonce}
Issued At: ${t.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}}class tk{async logout(e){try{let e=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(el,{body:{refresh_token:e}})}catch(e){console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId(),e?.userId&&this._mfa.clearMfa({userId:e.userId})]),this._privyInternal.callbacks?.setUser?.(null)}constructor(e,t,r,n,i){this._privyInternal=e,this._mfa=i,this.customProvider=new ej(this._privyInternal,t),this.phone=new tp(this._privyInternal,t),this.email=new eW(this._privyInternal,t),this.oauth=new tt(this._privyInternal,t,r,n),this.guest=new e1(this._privyInternal,t),this.siwe=new tw(this._privyInternal,t),this.siws=new tS(this._privyInternal,t),this.smartWallet=new tA(this._privyInternal),this.passkey=new tl(this._privyInternal,t),this.farcaster=new eQ(this._privyInternal,t),this.farcasterV2=new eX(this._privyInternal,t)}}let tT={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},tC={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"};class tO{async initOnRampSession(e){return await this._privyInternal.fetch(tT,{body:e})}async getStatus(e){return await this._privyInternal.fetch(tC,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}}let tP={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"};var tR=r(55620);class tD{async sign(e){return await this._privyInternal.fetch(tP,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:t}){let{url:r,key:n}=tR.no[t?"sandbox":"prod"],i=await et(fetch,{retries:3,retryDelay:500})(`${r}/transactions/ext/${e}?apiKey=${n}`);if(!i.ok)throw new w.Wh({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:i});let s=await i.json();return Array.isArray(s)?s.at(0):void 0}constructor(e){this._privyInternal=e}}class tN{constructor(e){this.moonpay=new tD(e),this.coinbase=new tO(e)}}let tU={path:"/api/v1/mfa/passkeys/init",method:"POST"};class tB{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(tU,{body:e})}constructor(e){this._privyInternal=e}}let tL={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"};class tj{async sendCode(e){return await this._privyInternal.fetch(tL,{body:e})}constructor(e){this._privyInternal=e}}class tM{setProxy(e){this.proxy=e}async getAccessTokenInternal(){let e=await this.privyInternal.getAccessTokenInternal();if(!e)throw new w.dx({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessTokenInternal()})}async initEnrollMfa(e){if(!this.proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()})}async submitEnrollMfa(e){if(!this.proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),t}async unenrollMfa(e){if(!this.proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),t}async clearMfa(e){if(!this.proxy)throw new w.dx({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,t){this.proxy=t,this.privyInternal=e,this.sms=new tj(e),this.passkey=new tB(e)}}let tz={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},t$={path:"/api/v1/recovery/oauth/init",method:"POST"},tF={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},tq={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},tW={path:"/api/v1/recovery/configuration_icloud",method:"POST"},tV=class{async init(e){return this._privyInternal.fetch(tq,{body:{client_type:e}})}async getICloudConfiguration(e){return this._privyInternal.fetch(tW,{body:{client_type:e}})}constructor(e){this._privyInternal=e}};class tH{async generateURL(e){let t=e7(),r=e7(),n=await te({codeVerifier:t,digest:this._crypto?.digest});return await Promise.all([this._storage.put(e4,t),this._storage.put(e6,r)]),this._privyInternal.fetch(t$,{body:{redirect_to:e,code_challenge:n,state_code:r}})}async authorize(e,t){let[r,n]=await Promise.all([this._storage.get(e4),this._storage.get(e6)]);if(n!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:n??"",returnedStateCode:t??""}),new w.dx({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let i=await this._privyInternal.fetch(tF,{body:{authorization_code:e,state_code:n,code_verifier:r}});return await Promise.all([this._storage.del(e4),this._storage.del(e6)]),i}constructor(e,t,r){this._privyInternal=e,this._storage=t,this._crypto=r}}class tK{async getRecoveryKeyMaterial(e,t){return this._privyInternal.fetch(tz,{body:{chain_type:t},params:{address:e}})}constructor(e,t,r){this._privyInternal=e,this.auth=new tH(this._privyInternal,t,r),this.icloudAuth=new tV(this._privyInternal)}}class tG{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,t){return this._privyInternal.getPath(e,t)}async fetchPrivyRoute(e,t){return this._privyInternal.fetch(e,t)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...t}){this._privyInternal=new eS({...t,appClientId:e}),this.mfa=new tM(this._privyInternal),this.mfaPromises=new Q,this.app=new i(this._privyInternal),this.embeddedWallet=new Y(this._privyInternal,t.embeddedWalletMessagePoster,t.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new ek(this._privyInternal),this.auth=new tk(this._privyInternal,this.embeddedWallet,t.storage,t.crypto,this.mfa),this.recovery=new tK(this._privyInternal,t.storage,t.crypto),this.funding=new tN(this._privyInternal),this.delegated=new m(this._privyInternal),this.crossApp=new y(this._privyInternal,t.storage)}}},56934:function(e,t,r){"use strict";r.d(t,{Gv:function(){return l},MQ:function(){return o},uV:function(){return a}});var n=r(70751),i=r(79516),s=r(18377);let a=(e,t,r,a)=>{let l=Number(e),c=t.find(e=>e.id===l);if(!c)throw new s.M9(`Unsupported chainId ${e}`,4901);return(0,n.v)({transport:(0,i.d)(o(c,r,a.appId)),chain:c})},o=(e,t,r)=>{let n,i=e.id,a=Number(e.id);if(e.rpcUrls.privyWalletOverride&&e.rpcUrls.privyWalletOverride.http[0])n=e.rpcUrls.privyWalletOverride.http[0];else if(t.rpcUrls&&t.rpcUrls[a])n=t.rpcUrls[a];else if(e.rpcUrls.privy?.http[0]){let t=new URL(e.rpcUrls.privy.http[0]);t.searchParams.append("privyAppId",r),n=t.toString()}else n=e.rpcUrls.public?.http[0]?e.rpcUrls.public.http[0]:e.rpcUrls.default?.http[0];if(!n)throw new s.M9(`No RPC url found for ${i}`);return n};function l({currentRecoveryMethod:e,upgradeToRecoveryMethod:t}){switch(e){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(e===t)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}},55620:function(e,t,r){"use strict";r.d(t,{Fy:function(){return y},OF:function(){return p},no:function(){return d}});var n=r(73799),i=r(64209),s=r(12425),a=r(91381),o=r(51434),l=r(56435),c=r(6475),u=r(48352);let d={prod:{url:"https://api.moonpay.com/v1",key:"pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL"},sandbox:{url:"https://api.moonpay.com/v1",key:"pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI"}},h=new Set([n.R.id,i.y.id,s.u.id,a.y.id,o.p.id,l.D.id,c.m.id]),f=new Set([n.R.id,i.y.id,u.v.id,s.u.id,a.y.id,o.p.id]);function p(e,t){switch(t){case"native-currency":return h.has(e);case"USDC":return f.has(e);default:return console.warn("Unknown asset passed to MoonPay Onramp"),!1}}function y(e,t){switch(e){case i.y.id:return"native-currency"===t?"ETH_ARBITRUM":"USDC_ARBITRUM";case o.p.id:return"native-currency"===t?"AVAX_CCHAIN":"USDC_CCHAIN";case s.u.id:return"native-currency"===t?"ETH_BASE":"USDC_BASE";case l.D.id:return"CELO_CELO";case a.y.id:return"native-currency"===t?"MATIC_POLYGON":"USDC_POLYGON";case c.m.id:return"MON_MON";case n.R.id:return"native-currency"===t?"ETH_ETHEREUM":"USDC_ETHEREUM";default:return console.warn(`Chain ${e} not supported by Moonpay, defaulting to Ethereum mainnet`),"ETH_ETHEREUM"}}},70320:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(2903),i=r(3096),s=r(35213),a=r(82957).lW;async function o(e,t){let r=i(t);if(void 0===r)throw new s.dx({error:"Failed to prepare the payload for signing",code:"invalid_input"});let n=a.from(r).toString("base64"),{signature:o}=await e({message:n});return{signature:o}}async function l(e,t,{wallet_id:r,...i}){let s={version:1,url:e.getCompiledPath(n.dQ,{params:{wallet_id:r}}),method:n.dQ.method,headers:{"privy-app-id":e.app.appId},body:{...i}},{signature:a}=await o(t,s);return await e.fetchPrivyRoute(n.dQ,{body:i,params:{wallet_id:r},headers:{"privy-authorization-signature":a}})}},68879:function(e,t,r){"use strict";r.d(t,{X:function(){return i}});let n=({w:e,h:t})=>{let r=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return`toolbar=0,location=0,menubar=0,height=${t},width=${e},popup=1,left=${(i-e)/2/(i/window.screen.availWidth)+r},top=${(s-t)/2/(s/window.screen.availHeight)+n}`},i=e=>window.open(e?.location,void 0,n({w:440,h:680}))},1342:function(e,t,r){"use strict";r.d(t,{P:function(){return a},u:function(){return o}});var n=r(57437),i=r(2265);let s=(0,i.createContext)({plugins:{current:{}}}),a=({children:e,configPlugins:t})=>{let r=(0,i.useRef)({});return(0,i.useEffect)(()=>{if(t&&0!==t.length){for(let e of t)r.current[e.id]=e;return()=>{for(let e of t)delete r.current[e.id]}}},[t]),(0,n.jsx)(s.Provider,{value:{plugins:r},children:e})},o=()=>{let{plugins:e}=(0,i.useContext)(s);return(0,i.useCallback)(t=>e.current[t],[e])}},81793:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});let n=Symbol("data-suffix-plugin")},96821:function(e,t,r){"use strict";r.d(t,{a:function(){return o},g:function(){return a}});var n=r(70751),i=r(79516),s=r(71554);let a=(e,t,r,a)=>{let l=Number(e),c=t.find(e=>e.id===l);if(!c)throw new s.P(`Unsupported chainId ${e}`,4901);return(0,n.v)({transport:(0,i.d)(o(c,r,a.appId)),chain:c})},o=(e,t,r)=>{let n,i=e.id,a=Number(e.id);if(e.rpcUrls.privyWalletOverride&&e.rpcUrls.privyWalletOverride.http[0])n=e.rpcUrls.privyWalletOverride.http[0];else if(t.rpcUrls&&t.rpcUrls[a])n=t.rpcUrls[a];else if(e.rpcUrls.privy?.http[0]){let t=new URL(e.rpcUrls.privy.http[0]);t.searchParams.append("privyAppId",r),n=t.toString()}else n=e.rpcUrls.public?.http[0]?e.rpcUrls.public.http[0]:e.rpcUrls.default?.http[0];if(!n)throw new s.P(`No RPC url found for ${i}`);return n}},12086:function(e,t,r){"use strict";r.d(t,{$:function(){return u},A:function(){return i},B:function(){return et},C:function(){return ei},D:function(){return Q},E:function(){return X},F:function(){return ee},G:function(){return S},H:function(){return O},I:function(){return c},J:function(){return p},K:function(){return L},L:function(){return w},M:function(){return J},N:function(){return el},O:function(){return es},P:function(){return ea},Q:function(){return eo},R:function(){return s},S:function(){return a},T:function(){return o},U:function(){return l},V:function(){return d},W:function(){return h},X:function(){return j},Y:function(){return y},Z:function(){return Y},_:function(){return _},a:function(){return I},a0:function(){return D},a1:function(){return k},a2:function(){return f},a3:function(){return ec},a4:function(){return eu},a8:function(){return $},a9:function(){return z},aa:function(){return M},b:function(){return E},c:function(){return b},d:function(){return g},e:function(){return v},f:function(){return m},g:function(){return B},h:function(){return N},i:function(){return K},j:function(){return H},k:function(){return V},l:function(){return W},m:function(){return q},n:function(){return F},o:function(){return U},p:function(){return x},q:function(){return P},r:function(){return C},s:function(){return T},t:function(){return R},u:function(){return A},v:function(){return G},w:function(){return Z},x:function(){return er},y:function(){return en},z:function(){return n}});let n="/api/v1/sessions",i="/api/v1/sessions/logout",s="/api/v1/siwe/init",a="/api/v1/siwe/authenticate",o="/api/v1/siwe/link",l="/api/v1/siwe/link_smart_wallet",c="/api/v1/siwe/unlink",u="/api/v1/siwe/transfer",d="/api/v1/siws/init",h="/api/v1/siws/authenticate",f="/api/v1/siws/link",p="/api/v1/siws/unlink",y="/api/v1/siws/transfer",g="/api/v1/farcaster/init",m="/api/v1/farcaster/authenticate",b="/api/v1/farcaster/link",v="/api/v1/farcaster/status",w="/api/v1/farcaster/unlink",_="/api/v1/farcaster/transfer",E="/api/v1/passwordless/init",x="/api/v1/passwordless/authenticate",I="/api/v1/passwordless/link",S="/api/v1/passwordless/unlink",A="/api/v1/passwordless/update",k="/api/v1/passwordless/transfer",T="/api/v1/passwordless_sms/init",C="/api/v1/passwordless_sms/link",O="/api/v1/passwordless_sms/unlink",P="/api/v1/passwordless_sms/authenticate",R="/api/v1/passwordless_sms/update",D="/api/v1/passwordless_sms/transfer",N="/api/v1/oauth/init",U="/api/v1/oauth/authenticate",B="/api/v1/oauth/link",L="/api/v1/oauth/unlink",j="/api/v1/oauth/transfer",M="/api/v1/recovery/oauth/init",z="/api/v1/recovery/oauth/init_icloud",$="/api/v1/recovery/oauth/authenticate",F="/api/v1/passkeys/link/init",q="/api/v1/passkeys/authenticate/init",W="/api/v1/passkeys/register/init",V="/api/v1/passkeys/link",H="/api/v1/passkeys/authenticate",K="/api/v1/passkeys/register",G="/api/v1/telegram/authenticate",Z="/api/v1/telegram/link",J="/api/v1/telegram/unlink",Y="/api/v1/telegram/transfer",Q="/api/v1/mfa/passwordless_sms/init",X="/api/v1/mfa/passkeys/init",ee="/api/v1/users/me/accept_terms",et="/api/v1/analytics_events",er="/api/v1/custom_jwt_account/authenticate",en="/api/v1/custom_jwt_account/link",ei="/api/v1/guest/authenticate",es="/api/v1/plugins/moonpay_on_ramp/sign",ea="/api/v1/funding/coinbase_on_ramp/init",eo="/api/v1/funding/coinbase_on_ramp/status",el="/api/v1/wallets/revoke",ec="/api/v1/users/me",eu="/api/v1/scan/transaction"},3781:function(e,t,r){"use strict";r.d(t,{$:function(){return er},A:function(){return eR},D:function(){return P},E:function(){return G},F:function(){return ek},G:function(){return ef},H:function(){return es},K:function(){return eN},L:function(){return ed},M:function(){return eC},P:function(){return Z},Q:function(){return E},R:function(){return ex},S:function(){return ev},T:function(){return k},U:function(){return en},V:function(){return ei},W:function(){return ea},X:function(){return eo},Y:function(){return Y},Z:function(){return ee},_:function(){return T},a:function(){return z},a0:function(){return Q},a1:function(){return C},a2:function(){return q},a3:function(){return O},a4:function(){return el},a5:function(){return $},a6:function(){return R},a7:function(){return eh},a8:function(){return X},b:function(){return v},c:function(){return H},d:function(){return _},e:function(){return I},f:function(){return W},g:function(){return w},h:function(){return V},i:function(){return U},j:function(){return F},k:function(){return D},l:function(){return M},m:function(){return em},n:function(){return e_},o:function(){return j},p:function(){return N},q:function(){return eg},r:function(){return K},s:function(){return B},t:function(){return L},u:function(){return J},v:function(){return ew},w:function(){return eT},y:function(){return eO},z:function(){return eP}});var n=r(2265),i=r(26976),s=r(54990),a=r(1801),o=r(57437),l=r(97048),c=r(98802),u=r(30777),d=r(4012),h=r(31669),f=r(59455),p=r(71554),y=r(96821),g=r(87759);let m=(0,i.U)(()=>({listings:[],loading:!1})),b=m.setState,v=e=>m.getState().listings.find(({slug:t})=>x(t)===x(e)),w=e=>{let t;try{t=new URL(e).hostname}catch(e){return}return m.getState().listings.find(({homepage:e})=>{let r;try{r=new URL(e).hostname}catch(e){return!1}return t.includes(r)})},_=(e=!0)=>{let t=(0,s.u)(),r=m(e=>e.listings),i=m(e=>e.loading),a=!!r.length;return(0,n.useEffect)(()=>{e&&!a&&(b({listings:[],loading:!0}),(async e=>{let t=new URL("v3/wallets","https://explorer-api.walletconnect.com");t.searchParams.append("projectId",e);let r=await fetch(t);return r.ok?Object.values((await r.json()).listings).sort(({slug:e},{slug:t})=>"rainbow"===e&&"metamask"===t?1:"metamask"===e||"rainbow"===e?-1:1):(console.debug(`Failed to fetch WalletConnect listings: ${await r.text().catch(()=>"No response.")}`),[])})(t.walletConnectCloudProjectId).then(e=>b({listings:e,loading:!1})).catch(e=>{console.error(e),b({listings:[],loading:!1})}))},[e,a,t.walletConnectCloudProjectId]),{listings:r,loading:i}},E=e=>{let{listings:t}=_();return t.find(({slug:t})=>x(t)===x(e))};function x(e){return"cryptocom"===e?"cryptocom-defi":"binance"===e?"binance-defi":e.replace(/[-_]wallet$/,"")}function I(e){return["wallet_connect","backpack","binance","binanceus","bitget_wallet","bybit_wallet","cryptocom","haha_wallet","jupiter","metamask","okx_wallet","phantom","rabby_wallet","rainbow","ronin_wallet","safe","solflare","uniswap","zerion","kraken_wallet"].some(t=>e?.includes(t))}let S=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isClover?"Clover":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOneKey?"OneKey Wallet":e.isOpera?"Opera":e.isPhantom||"isPhantom"in e?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isSafePal?"SafePal Wallet":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally||e.isTaho?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0,A=(e,t)=>{if(!e.isMetaMask)return!1;if(e.isMetaMask&&!t)return!0;if(e.isBraveWallet&&!e._events&&!e._state||"MetaMask"!==S(e))return!1;if(e.providers){for(let t of e.providers)if(!A(t))return!1}return!0},k=()=>{let e=window;if(!e.ethereum)return!1;if(e.ethereum.isCoinbaseWallet)return!0;if(e.ethereum.providers){for(let t of e.ethereum.providers)if(t&&t.isCoinbaseWallet)return!0}return!1},T=(e,t)=>{let r=[],n=[];for(let[i,s]of e.entries())i<t?r.push(s):n.push(s);return[r,n]},C=e=>!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),O=(e,t)=>{let r=e.slice(0),n=[];for(;r.length;)n.push(r.splice(0,t));return n},P=(e,t=3,r=4,n="ethereum")=>{if(!e)return"";let i="ethereum"===n?2:0;return t+r+i+3>=e.length?e:`${e.slice(0,i+t)}...${e.slice(e.length-r,e.length)}`},R=(e,t=3,r=4)=>P(e,t,r,"solana"),D=e=>new Promise(t=>setTimeout(t,e));function N(e,{interval:t=100,timeout:r=5e3}={}){return new Promise((n,i)=>{let s,a=0,o=()=>{a>=r?i("Max attempts reached without result"):(s=e(),a+=t,null==s?setTimeout(o,t):n(s))};o()})}let U=(e,t={})=>{let r=t.delayMs||150,n=t.maxAttempts||270;return new Promise(async(i,s)=>{let a=!1,o=0;for(;!a&&o<n;){if(t.abortSignal?.aborted)return;e().then(e=>{a=!0,i(e)},(...e)=>{a=!0,s(...e)}),o+=1,await D(r)}a||s(Error("Exceeded max attempts before resolving function"))})},B=e=>e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,""),L=e=>"string"==typeof e?e:"0x"+e.toString(16);async function j({store:e,walletList:t,externalWalletConfig:r,walletChainType:n,timeout:i=3e3}){let s=!1,a=window;return new Promise(o=>{function l(){if(s)return;s=!0,window.removeEventListener("ethereum#initialized",l);let i=e.getProviders();console.debug("Detected injected providers:",i.map(e=>e.info));let a=[];for(let e of i)t.includes("coinbase_wallet")&&"com.coinbase.wallet"===e.info.rdns||"solana-only"===n&&"app.phantom"===e.info.rdns||a.push({type:e.info.name.toLowerCase().replace(/\s/g,"_"),eip6963InjectedProvider:e});if("solana-only"!==n)for(let e of function(){let e=window,t=e.ethereum;if(!t)return[];let r=[];if(t.providers?.length)for(let e of t.providers)e&&r.push(e);return r.push(e.ethereum),r}()){let t=S(e);if(!i.some(e=>e.info.name===t)){if(A(e,!0)&&!a.find(e=>"metamask"===e.type)){a.push({type:"metamask",legacyInjectedProvider:e});continue}if("Phantom"===t&&!a.find(e=>"phantom"===e.type)){a.push({type:"phantom",legacyInjectedProvider:e});continue}if("Coinbase Wallet"===t&&!a.find(e=>"coinbase_wallet"===e.type&&"smartWalletOnly"!==r.coinbaseWallet?.config?.preference?.options)){a.push({type:"coinbase_wallet",legacyInjectedProvider:e});continue}a.find(e=>"unknown_browser_extension"===e.type)||a.push({type:"unknown_browser_extension",legacyInjectedProvider:e})}}o(a)}a.ethereum?l():(window.addEventListener("ethereum#initialized",l,{once:!0}),setTimeout(()=>{l()},i))})}function M(e){return`eip155:${String(Number(e))}`}let z=(e,t,r,n)=>{let i=Number(e),s=t.find(e=>e.id===i);if(!s)throw new p.P(`Unsupported chainId ${e}`,4901);return(0,y.a)(s,r,n)},$=(e,t)=>{let r=Number(e),n=t.find(e=>e.id===r);if(!n)throw new p.P(`Unsupported chainId ${e}`,4901);return n.blockExplorers?.default.url},F=e=>{let t={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},r=e.types.EIP712Domain??Object.entries(e.domain).map(([e,r])=>{if(null!=r&&"string"==typeof e&&e in t)return{name:e,type:t[e]}}).filter(e=>void 0!==e);return{...e,types:{...e.types,EIP712Domain:r}}};function q(e,{min:t,max:r}){return Math.min(Math.max(e,t),r)}function W(e){return"ethereum"===e.type}function V(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n?.address!==i?.address||n&&i&&W(n)&&W(i)&&n?.chainId!==i?.chainId||n?.connectorType!==i?.connectorType||n?.connectedAt!==i?.connectedAt||n?.walletClientType!==i?.walletClientType||n?.isConnected!==i?.isConnected||n?.linked!==i?.linked)return!1}return!0}let H=(e,t)=>e.rpcTimeouts&&e.rpcTimeouts[t]||s.n;function K(e){return"ethereum"===e.chainType}class G extends c.c{buildConnectedWallet(e,t,r,n){let i=async()=>!!this.wallets.find(t=>(0,h.K)(t.address)===(0,h.K)(e));return{type:"ethereum",address:(0,h.K)(e),chainId:t,meta:r,imported:n,switchChain:async r=>{let n,s;if(!i)throw new p.P("Wallet is not currently connected.");let a=this.wallets.find(t=>h.K(t.address)===h.K(e))?.chainId;if(!a)throw new p.P("Unable to determine current chainId.");if("number"==typeof r?(n=`0x${r.toString(16)}`,s=r):(n=r,s=Number(r)),a===M(n))return;let o=this.chains.find(e=>e.id===s);if(!o)throw new p.P(`Unsupported chainId: ${r}`);let l=async()=>{await this.proxyProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]})};try{return await l()}catch(e){if(((e,t)=>{switch(t){case"coinbase_wallet":case"base_account":return e.message.includes("addEthereumChain");case"rabby_wallet":return e.message.includes("Unrecognized chain ID");default:return 4902===e.code||e.message?.includes("4902")}})(e,this.walletClientType))return"rabby_wallet"===this.walletClientType&&await D(300),await this.proxyProvider.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:o.name,nativeCurrency:o.nativeCurrency,rpcUrls:[o.rpcUrls.default?.http[0]??""],blockExplorerUrls:[o.blockExplorers?.default.url??""]}]}),l();if("rainbow"===this.walletClientType&&e.message?.includes("wallet_switchEthereumChain"))throw new p.P(`Rainbow does not support the chainId ${t}`);throw e}},connectedAt:Date.now(),walletClientType:this.walletClientType,connectorType:this.connectorType,isConnected:i,getEthereumProvider:async()=>{if(!await i())throw new p.P("Wallet is not currently connected.");return this.proxyProvider},sign:async e=>{if(!await i())throw new p.P("Wallet is not currently connected.");return await this.sign(e)},disconnect:()=>{this.disconnect()}}}async syncAccounts(e){let t,r=e;try{if(void 0===r){let e=await U(()=>this.proxyProvider.request({method:"eth_accounts"}),{maxAttempts:10,delayMs:500});console.debug(`eth_accounts for ${this.walletClientType}:`,e),Array.isArray(e)&&(r=e)}}catch(e){console.debug("Wallet did not respond to eth_accounts. Defaulting to prefetched accounts.",e)}if(!r||!Array.isArray(r)||r.length<=0||!r[0])return;let n=r[0];if(!(0,d.U)(n))return void console.warn(`Invalid ethereum address reported by ${this.walletClientType}: ${n}`);let i=(0,h.K)(n),a=[];if("privy"===this.walletClientType){let e=c.s.get((0,s.o)(i));this.chains.find(t=>t.id===Number(e))||(c.s.del((0,s.o)(i)),e=null),t=e||`0x${this.defaultChain.id.toString(16)}`;try{await this.proxyProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(e){console.warn(`Unable to switch embedded wallet to chain ID ${t} on initialization`)}}else try{let e=await U(()=>this.proxyProvider.request({method:"eth_chainId"}),{maxAttempts:10,delayMs:500});if(console.debug(`eth_chainId for ${this.walletClientType}:`,e),"string"==typeof e)t=e;else{if("number"!=typeof e)throw Error("Invalid chainId returned from provider");t=`0x${e.toString(16)}`}}catch(e){console.warn(`Failed to get chainId from provider, defaulting to ${s.p}`,e),t=s.p}let o=M(t);if(!a.find(e=>(0,h.K)(e.address)===i)){let e={name:this.walletBranding.name,icon:"string"==typeof this.walletBranding.icon?this.walletBranding.icon:void 0,id:this.walletBranding.id};a.push(this.buildConnectedWallet((0,h.K)(n),o,e,"embedded_imported"===this.connectorType))}V(a,this.wallets)||(this.wallets=a,this.emit("walletsUpdated"))}async getConnectedWallet(){let e=await this.proxyProvider.request({method:"eth_accounts"});return this.wallets.sort((e,t)=>t.connectedAt-e.connectedAt).find(t=>e.find(e=>(0,h.K)(e)===(0,h.K)(t.address)))||null}async isConnected(){let e=await this.proxyProvider.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0}async sign(e){return await this.connect({showPrompt:!1}),this.proxyProvider.request({method:"personal_sign",params:[(0,f.NC)(e),this.wallets[0]?.address]})}subscribeListeners(){this.proxyProvider.on("accountsChanged",this.onAccountsChanged),this.proxyProvider.on("chainChanged",this.onChainChanged),this.proxyProvider.on("disconnect",this.onDisconnect),this.proxyProvider.on("connect",this.onConnect)}unsubscribeListeners(){this.proxyProvider.removeListener("accountsChanged",this.onAccountsChanged),this.proxyProvider.removeListener("chainChanged",this.onChainChanged),this.proxyProvider.removeListener("disconnect",this.onDisconnect),this.proxyProvider.removeListener("connect",this.onConnect)}constructor(e,t,r,n){super(e),this.chainType="ethereum",this.onAccountsChanged=e=>{0===e.length?this.onDisconnect():this.syncAccounts(e)},this.onChainChanged=e=>{this.wallets.forEach(t=>{t.chainId=M(e),"privy"===this.walletClientType&&c.s.put((0,s.o)(t.address),e)}),this.emit("walletsUpdated")},this.onDisconnect=()=>{this.connected=!1,this.wallets=[],this.emit("walletsUpdated")},this.onConnect=async()=>{"base_account"===this.connectorType&&this.connected||(this.connected=!0,"coinbase_wallet"===this.connectorType&&await D(500),this.syncAccounts())},this.wallets=[],this.walletClientType=e,this.chains=t,this.defaultChain=r,this.rpcConfig=n,this.rpcTimeoutDuration=H(n,e),this.connected=!1,this.initialized=!1}}class Z{on(e,t){if(this.walletProvider)return this.walletProvider.on(e,t);this._subscriptions.push({eventName:e,listener:t})}async request(e){if(!this.walletProvider)throw new p.P(`A wallet request of type ${e.method} was made before setting a wallet provider.`);return Promise.race([this.walletProvider.request(e),this.walletTimeout()]).catch(e=>{throw(0,c.f)(e)})}constructor(e,t){this.removeListener=(e,t)=>{if(this.walletProvider)try{return this.walletProvider.removeListener(e,t)}catch(e){console.warn("Unable to remove wallet provider listener")}},this.walletTimeout=(e=new c.d,t=this.rpcTimeoutDuration)=>new Promise((r,n)=>setTimeout(()=>{n(e)},t)),this.setWalletProvider=e=>{this.walletProvider&&this._subscriptions.forEach(e=>{this.removeListener(e.eventName,e.listener)}),this.walletProvider=e,this._subscriptions.forEach(e=>{this.walletProvider?.on(e.eventName,e.listener)})},this.walletProvider=e,this.rpcTimeoutDuration=t||s.n,this._subscriptions=[]}}let J=e=>{let[t,r]=(0,n.useState)("auto");return(0,n.useEffect)(()=>{let t=new ResizeObserver(e=>{r(e[0]?.contentRect.height??"auto")});return e.current&&t.observe(e.current),()=>{e.current&&t.unobserve(e.current)}},[e.current]),t},Y=a.zo.div`
  text-align: left;
  flex-grow: 1;
`,Q=a.zo.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  flex-grow: 1;
`,X=a.zo.div`
  display: flex;
  flex-direction: column;
  gap: 8px;

  /* for Internet Explorer, Edge */
  -ms-overflow-style: none;

  /* for Firefox */
  scrollbar-width: none;

  /* for Chrome, Safari, and Opera */
  &::-webkit-scrollbar {
    display: none;
  }
`,ee=(0,a.zo)(X)`
  ${e=>"light"===e.$colorScheme?"background: linear-gradient(var(--privy-color-background), var(--privy-color-background) 70%) bottom, linear-gradient(rgba(0, 0, 0, 0) 20%, rgba(0, 0, 0, 0.06)) bottom;":"dark"===e.$colorScheme?"background: linear-gradient(var(--privy-color-background), var(--privy-color-background) 70%) bottom, linear-gradient(rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.06)) bottom;":void 0}

  background-repeat: no-repeat;
  background-size:
    100% 32px,
    100% 16px;
  background-attachment: local, scroll;
  max-height: 400px;
  overflow-y: auto;
  scrollbar-width: none;
  padding: 3px;
`,et=(0,a.iv)`
  && {
    width: 100%;
    font-size: 16px;
    line-height: 24px;
    min-height: 56px;

    /* Tablet and Up */
    @media (min-width: 440px) {
      font-size: 14px;
    }

    display: flex;
    gap: 12px;
    align-items: center;
    color: var(--privy-color-foreground);

    padding: 10px 12px;
    border: 1px solid var(--privy-color-foreground-4) !important;
    border-radius: var(--privy-border-radius-md);
    transition: background-color 200ms ease;

    cursor: pointer;

    &:hover {
      background-color: var(--privy-color-background-2);
    }

    &:disabled {
      cursor: pointer;
      background-color: var(--privy-color-background-2);
    }
  }
`,er=a.zo.div`
  text-align: center;
  font-size: 14px;
  margin-bottom: 24px;
`,en=a.zo.button.attrs({className:"login-method-button"})`
  ${et}
`;a.zo.a`
  ${et}
`;let ei=a.zo.div`
  width: 32px;
  height: 32px;
  border-radius: ${e=>e.$fullSize?"0":"4px"};
  background: ${e=>e.$fullSize?"transparent":"var(--privy-color-background-2)"};
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;

  svg {
    width: ${e=>e.$fullSize?"32px":"18px"};
    height: ${e=>e.$fullSize?"32px":"18px"};
    color: ${e=>e.$fullSize?"inherit":"var(--privy-color-icon-muted)"};
  }
`,es=a.zo.div`
  width: 100%;
  height: 100%;
  min-height: inherit;
  display: flex;
  flex-direction: column;
  ${e=>e.$if?"display: none;":""}
`,ea=a.zo.div`
  width: 100%;
  height: 100%;
  padding: ${e=>e.$withPadding?"64px 0px":"0px"};
`,eo=a.zo.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-bottom: 32px;
  gap: 12px;
  & h3 {
    font-size: 18px;
    font-style: normal;
    font-weight: 600;
    line-height: 24px;
  }
  & p {
    max-width: 300px;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
  }
`,el=({success:e,fail:t})=>(0,o.jsxs)(eu,{children:[(0,o.jsx)(ec,{children:(0,o.jsx)(eh,{className:e?"success":t?"fail":""})}),(0,o.jsx)(ec,{children:(0,o.jsx)(ed,{className:e?"success":t?"fail":""})})]}),ec=a.zo.span`
  && {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
  }
`,eu=a.zo.span`
  position: relative;
  width: 82px;
  height: 82px;
  display: inline-block;
`,ed=a.zo.span`
  && {
    width: 82px;
    height: 82px;
    border-width: 4px;
    border-style: solid;
    border-color: ${e=>e.color??"var(--privy-color-icon-subtle)"};
    border-bottom-color: transparent;
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1.2s linear infinite;
    transition: border-color 800ms;
  }

  @keyframes rotation {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  &&&.success {
    border-color: var(--privy-color-icon-success);
    border-bottom-color: var(--privy-color-icon-success);
  }

  &&&.fail {
    border-color: var(--privy-color-icon-error);
    border-bottom-color: var(--privy-color-icon-error);
  }
`,eh=(0,a.zo)(ed)`
  && {
    border-bottom-color: ${e=>e.color??"var(--privy-color-border-default)"};
    border-color: ${e=>e.color??"var(--privy-color-border-default)"};
    animation: none;
    opacity: 0.5;
  }
`,ef=e=>(0,o.jsx)(ep,{color:e.color||"var(--privy-color-foreground-3)"}),ep=(0,a.zo)(ed)`
  && {
    height: 1rem;
    width: 1rem;
    margin: 2px 0;
    border-width: 1.5px;

    /* Override default Loader to match button transitions */
    transition: border-color 200ms ease;
  }
`,ey=["metamask","phantom","brave_wallet","rainbow","uniswap_wallet_extension","uniswap_extension","rabby_wallet","bybit_wallet","ronin_wallet","haha_wallet","crypto.com_wallet_extension","crypto.com_onchain","binance","bitget_wallet","coinbase_wallet","coinbase_smart_wallet","base_account","metamask","trust","safe","rainbow","uniswap","zerion","argent","spot","omni","cryptocom","blockchain","safepal","bitget_wallet","zengo","1inch","binance","exodus","mew_wallet","alphawallet","keyring_pro","mathwallet","unstoppable","obvious","ambire","internet_money_wallet","coin98","abc_wallet","arculus_wallet","haha","cling_wallet","broearn","copiosa","burrito_wallet","enjin_wallet","plasma_wallet","avacus","bee","pitaka","pltwallet","minerva","kryptogo","prema","slingshot","kriptonio","timeless","secux","bitizen","blocto","okx_wallet","safemoon","rabby_wallet","bybit_wallet","ronin_wallet","haha_wallet","privy","unknown","phantom","solflare","glow","backpack","jupiter","mobile_wallet_adapter"],eg=Object.freeze({phantom:{client:"phantom",name:"Phantom",installLink:l.vU?"https://addons.mozilla.org/en-US/firefox/addon/phantom-app/":"https://chrome.google.com/webstore/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa?hl=en",chainTypes:["ethereum","solana"],get isInstalled(){if("phantom"in window){let e=window;if(e?.phantom?.ethereum?.isPhantom&&e?.phantom?.ethereum?.chainId||e?.phantom?.solana?.isPhantom)return!0}return!1},getMobileRedirect({useUniversalLink:e,isSolana:t,connectOnly:r}){let n=eb({client:this.client,isSolana:t,connectOnly:r});return`${e?"phantom://":"https://phantom.app/ul/"}browse/${n}?ref=${n}`}},solflare:{client:"solflare",name:"Solflare",installLink:l.vU?"https://addons.mozilla.org/es/firefox/addon/solflare-wallet/":"https://chromewebstore.google.com/detail/solflare-wallet/bhhhlbepdkbapadjdnnojkbgioiodbic",chainTypes:["solana"],get isInstalled(){return"solflare"in window&&!!window?.solflare?.isSolflare},getMobileRedirect({useUniversalLink:e,isSolana:t,connectOnly:r}){let n=eb({client:this.client,isSolana:t,connectOnly:r});return`${e?"solflare://ul/v1/":"https://solflare.com/ul/v1/"}browse/${n}?ref=${n}`}},jupiter:{client:"jupiter",name:"Jupiter Wallet",installLink:"https://chromewebstore.google.com/detail/jupiter-wallet/iledlaeogohbilgbfhmbgkgmpplbfboh",chainTypes:["solana"],get isInstalled(){return"jupiter"in window&&!!window?.jupiter?.isJupiter},getMobileRedirect({isSolana:e,connectOnly:t}){let r=eb({client:this.client,isSolana:e,connectOnly:t});return`jupjupjup://jup.ag/browse/${r}?ref=${r}`}},backpack:{client:"backpack",name:"Backpack",installLink:"https://chromewebstore.google.com/detail/backpack/aflkmfhebedbjioipglgcbcmnbpgliof",chainTypes:["ethereum","solana"],get isInstalled(){return!(!("backpack"in window)||!window?.backpack?.ethereum?.isBackpack&&!window?.backpack?.solana?.isBackpack)},getMobileRedirect({useUniversalLink:e,isSolana:t,connectOnly:r}){let n=eb({client:this.client,isSolana:t,connectOnly:r});return`${e?"backpack://ul/v1/":"https://backpack.app/ul/v1/"}browse/${n}?ref=${n}`}},okx_wallet:{client:"okx_wallet",name:"OKX Wallet",installLink:"https://chromewebstore.google.com/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",chainTypes:["ethereum","solana"],get isInstalled(){return"okxwallet"in window&&!!window?.okxwallet?.isOkxWallet},getMobileRedirect({isSolana:e,connectOnly:t}){return`okx://wallet/dapp/url?dappUrl=${eb({client:this.client,isSolana:e,connectOnly:t})}`}}});function em({connectorType:e,walletClientType:t}){for(let r of ey)if(e===r||t===r)return eg[r]}function eb({client:e,isSolana:t,connectOnly:r}){let n=new URL(window.location.href);return n.searchParams.set("privy_connector",t?"solana_adapter":"injected"),n.searchParams.set("privy_wallet_client",e),n.searchParams.set("privy_connect_only",String(r)),encodeURIComponent(n.href.replace(/\/$/g,""))}class ev extends c.S{get walletBranding(){return{id:this.id,name:this.name,icon:this.icon}}async initialize(){this.initialized=!0,this.emit("initialized")}async connect(){throw Error("connect called for an uninstalled wallet via the SolanaNullConnector")}constructor({id:e,name:t,icon:r}){super({name:t},!1),this.connectorType="null",this.proxyProvider=new Z(void 0,s.n),this.disconnect=async()=>{throw Error("disconnect called for an uninstalled wallet via the SolanaNullConnector")},this.promptConnection=async()=>{throw Error("promptConnection called for an uninstalled wallet via the SolanaNullConnector")},this.id=e,this.name=t,this.icon=r}}function ew(e){return"solana"===e.chainType}function e_(e){return"solana"===e.type}let eE=(0,n.createContext)({}),ex=({children:e})=>{let t=(0,s.u)(),[r,i]=(0,n.useState)({});return(0,u.u)("login",{onComplete:({loginAccount:e})=>{e&&"passkey"!==e.type&&"cross_app"!==e.type&&("wallet"!==e.type||"privy"!==e.walletClientType)&&(c.s.put(eI(t.id),e.type),"wallet"===e.type?(c.s.put(eS(t.id),e.walletClientType),c.s.put(eA(t.id),e.chainType),i({accountType:e.type,walletClientType:e.walletClientType,chainType:e.chainType})):(c.s.del(eS(t.id)),c.s.del(eA(t.id)),i({accountType:e.type})))}}),(0,n.useEffect)(()=>{if(!t.id)return;let e=c.s.get(eI(t.id)),r=c.s.get(eS(t.id)),n=c.s.get(eA(t.id));e&&i("wallet"===e?{accountType:e,walletClientType:r,chainType:n}:{accountType:e})},[t.id]),(0,o.jsx)(eE.Provider,{value:r,children:e})},eI=e=>`privy:${e}:recent-login-method`,eS=e=>`privy:${e}:recent-login-wallet-client`,eA=e=>`privy:${e}:recent-login-chain-type`,ek=()=>(0,n.useContext)(eE);class eT extends G{get walletBranding(){return{id:this.id,name:this.name,icon:this.icon}}async initialize(){this.initialized=!0,this.emit("initialized")}async connect(){throw Error("connect called for an uninstalled wallet via the EthereumNullConnector")}disconnect(){throw Error("disconnect called for an uninstalled wallet via the EthereumNullConnector")}promptConnection(e){throw Error(`promptConnection called for an uninstalled wallet via the EthereumNullConnector for ${e}`)}constructor({id:e,name:t,icon:r,walletClientType:n,defaultChain:i}){super(n,[],i,{}),this.connectorType="null",this.proxyProvider=new Z(void 0,s.n),this.id=e,this.name=t,this.icon=r}}let eC=({...e})=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",...e,children:[(0,o.jsx)("rect",{width:"32",height:"32",rx:"6",fill:"#121314"}),(0,o.jsx)("g",{transform:"translate(4, 4)",children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 318.6 318.6",children:[(0,o.jsx)("style",{children:".s1{stroke-linecap:round;stroke-linejoin:round}.s2{fill:#e4761b;stroke:#e4761b}.s3{fill:#f6851b;stroke:#f6851b}"}),(0,o.jsx)("path",{fill:"#e2761b",stroke:"#e2761b",className:"s1",d:"m274.1 35.5-99.5 73.9L193 65.8z"}),(0,o.jsx)("path",{d:"m44.4 35.5 98.7 74.6-17.5-44.3zm193.9 171.3-26.5 40.6 56.7 15.6 16.3-55.3zm-204.4.9L50.1 263l56.7-15.6-26.5-40.6z",className:"s1 s2"}),(0,o.jsx)("path",{d:"m103.6 138.2-15.8 23.9 56.3 2.5-2-60.5zm111.3 0-39-34.8-1.3 61.2 56.2-2.5zM106.8 247.4l33.8-16.5-29.2-22.8zm71.1-16.5 33.9 16.5-4.7-39.3z",className:"s1 s2"}),(0,o.jsx)("path",{fill:"#d7c1b3",stroke:"#d7c1b3",className:"s1",d:"m211.8 247.4-33.9-16.5 2.7 22.1-.3 9.3zm-105 0 31.5 14.9-.2-9.3 2.5-22.1z"}),(0,o.jsx)("path",{fill:"#233447",stroke:"#233447",className:"s1",d:"m138.8 193.5-28.2-8.3 19.9-9.1zm40.9 0 8.3-17.4 20 9.1z"}),(0,o.jsx)("path",{fill:"#cd6116",stroke:"#cd6116",className:"s1",d:"m106.8 247.4 4.8-40.6-31.3.9zM207 206.8l4.8 40.6 26.5-39.7zm23.8-44.7-56.2 2.5 5.2 28.9 8.3-17.4 20 9.1zm-120.2 23.1 20-9.1 8.2 17.4 5.3-28.9-56.3-2.5z"}),(0,o.jsx)("path",{fill:"#e4751f",stroke:"#e4751f",className:"s1",d:"m87.8 162.1 23.6 46-.8-22.9zm120.3 23.1-1 22.9 23.7-46zm-64-20.6-5.3 28.9 6.6 34.1 1.5-44.9zm30.5 0-2.7 18 1.2 45 6.7-34.1z"}),(0,o.jsx)("path",{d:"m179.8 193.5-6.7 34.1 4.8 3.3 29.2-22.8 1-22.9zm-69.2-8.3.8 22.9 29.2 22.8 4.8-3.3-6.6-34.1z",className:"s3"}),(0,o.jsx)("path",{fill:"#c0ad9e",stroke:"#c0ad9e",className:"s1",d:"m180.3 262.3.3-9.3-2.5-2.2h-37.7l-2.3 2.2.2 9.3-31.5-14.9 11 9 22.3 15.5h38.3l22.4-15.5 11-9z"}),(0,o.jsx)("path",{fill:"#161616",stroke:"#161616",className:"s1",d:"m177.9 230.9-4.8-3.3h-27.7l-4.8 3.3-2.5 22.1 2.3-2.2h37.7l2.5 2.2z"}),(0,o.jsx)("path",{fill:"#763d16",stroke:"#763d16",className:"s1",d:"m278.3 114.2 8.5-40.8-12.7-37.9-96.2 71.4 37 31.3 52.3 15.3 11.6-13.5-5-3.6 8-7.3-6.2-4.8 8-6.1zM31.8 73.4l8.5 40.8-5.4 4 8 6.1-6.1 4.8 8 7.3-5 3.6 11.5 13.5 52.3-15.3 37-31.3-96.2-71.4z"}),(0,o.jsx)("path",{d:"m267.2 153.5-52.3-15.3 15.9 23.9-23.7 46 31.2-.4h46.5zm-163.6-15.3-52.3 15.3-17.4 54.2h46.4l31.1.4-23.6-46zm71 26.4 3.3-57.7 15.2-41.1h-67.5l15 41.1 3.5 57.7 1.2 18.2.1 44.8h27.7l.2-44.8z",className:"s3"})]})})]});function eO(e){let{login:t}=(0,n.useContext)(g.P);return(0,u.u)("login",e),{login:t}}function eP(e){let{logout:t}=(0,n.useContext)(g.P);return(0,u.u)("logout",e),{logout:t}}function eR(e){let{connectWallet:t}=(0,n.useContext)(g.P);return(0,u.u)("connectWallet",e),{connectWallet:t}}let eD=(0,i.U)(()=>({isModalOpen:!1,resolvers:null}));(0,i.U)(()=>({}));let eN=({address:e,client:t,appId:r})=>{let n=`${t}:${e}`;r&&c.s.put(eU(r),n),eD.setState({wallet:n})},eU=e=>`privy:${e}:active-wallet-connection`},53926:function(e,t,r){"use strict";let n;r.d(t,{N:function(){return to}});class i{constructor(e,t){this.scope=e,this.module=t}storeObject(e,t){this.setItem(e,JSON.stringify(t))}loadObject(e){let t=this.getItem(e);return t?JSON.parse(t):void 0}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){let e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){let n=localStorage.key(r);"string"==typeof n&&n.startsWith(e)&&t.push(n)}t.forEach(e=>localStorage.removeItem(e))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new i("CBWSDK").clear(),new i("walletlink").clear()}}let s={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},a={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},o="Unspecified error message.";function l(e,t=o){if(e&&Number.isInteger(e)){let t=e.toString();if(u(a,t))return a[t].message;if(e>=-32099&&e<=-32e3)return"Unspecified server error."}return t}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}let h={rpc:{parse:e=>f(s.rpc.parse,e),invalidRequest:e=>f(s.rpc.invalidRequest,e),invalidParams:e=>f(s.rpc.invalidParams,e),methodNotFound:e=>f(s.rpc.methodNotFound,e),internal:e=>f(s.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return f(t,e)},invalidInput:e=>f(s.rpc.invalidInput,e),resourceNotFound:e=>f(s.rpc.resourceNotFound,e),resourceUnavailable:e=>f(s.rpc.resourceUnavailable,e),transactionRejected:e=>f(s.rpc.transactionRejected,e),methodNotSupported:e=>f(s.rpc.methodNotSupported,e),limitExceeded:e=>f(s.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>p(s.provider.userRejectedRequest,e),unauthorized:e=>p(s.provider.unauthorized,e),unsupportedMethod:e=>p(s.provider.unsupportedMethod,e),disconnected:e=>p(s.provider.disconnected,e),chainDisconnected:e=>p(s.provider.chainDisconnected,e),unsupportedChain:e=>p(s.provider.unsupportedChain,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new m(t,r,n)}}};function f(e,t){let[r,n]=y(t);return new g(e,r||l(e),n)}function p(e,t){let[r,n]=y(t);return new m(e,r||l(e),n)}function y(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}class g extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}class m extends g{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}let b=e=>e,v=e=>e,w=e=>e;function _(e){return Math.floor(e)}var E,x,I=r(82957).lW;let S=/^[0-9]*$/,A=/^[a-f0-9]*$/;function k(e){return T(crypto.getRandomValues(new Uint8Array(e)))}function T(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}function C(e){return new Uint8Array(e.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function O(e,t=!1){let r=e.toString("hex");return b(t?`0x${r}`:r)}function P(e){return O(z(e),!0)}function R(e){return w(e.toString(10))}function D(e){return b(`0x${BigInt(e).toString(16)}`)}function N(e){return e.startsWith("0x")||e.startsWith("0X")}function U(e){return N(e)?e.slice(2):e}function B(e){return N(e)?`0x${e.slice(2)}`:`0x${e}`}function L(e){if("string"!=typeof e)return!1;let t=U(e).toLowerCase();return A.test(t)}function j(e,t=!1){let r=function(e,t=!1){if("string"==typeof e){let r=U(e).toLowerCase();if(A.test(r))return b(t?`0x${r}`:r)}throw h.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}(e,!1);return r.length%2==1&&(r=b(`0${r}`)),t?b(`0x${r}`):r}function M(e){if("string"==typeof e){let t=U(e).toLowerCase();if(L(t)&&40===t.length)return v(B(t))}throw h.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}function z(e){if(I.isBuffer(e))return e;if("string"==typeof e){if(L(e)){let t=j(e,!1);return I.from(t,"hex")}return I.from(e,"utf8")}throw h.rpc.invalidParams(`Not binary data: ${String(e)}`)}function $(e){if("number"==typeof e&&Number.isInteger(e))return _(e);if("string"==typeof e){if(S.test(e))return _(Number(e));if(L(e))return _(Number(BigInt(j(e,!0))))}throw h.rpc.invalidParams(`Not an integer: ${String(e)}`)}function F(e){if(null!==e&&("bigint"==typeof e||function(e){if(null==e||"function"!=typeof e.constructor)return!1;let{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"==typeof e)return BigInt($(e));if("string"==typeof e){if(S.test(e))return BigInt(e);if(L(e))return BigInt(j(e,!0))}throw h.rpc.invalidParams(`Not an integer: ${String(e)}`)}async function q(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function W(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function V(e,t){let r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,new TextEncoder().encode(t));return{iv:r,cipherText:n}}async function H(e,{iv:t,cipherText:r}){let n=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r);return new TextDecoder().decode(n)}function K(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function G(e,t){let r=K(e);return T(new Uint8Array(await crypto.subtle.exportKey(r,t)))}async function Z(e,t){let r=K(e),n=C(t).buffer;return await crypto.subtle.importKey(r,new Uint8Array(n),{name:"ECDH",namedCurve:"P-256"},!0,"private"===e?["deriveKey"]:[])}async function J(e,t){return V(t,JSON.stringify(e,(e,t)=>t instanceof Error?Object.assign(Object.assign({},t.code?{code:t.code}:{}),{message:t.message}):t))}async function Y(e,t){return JSON.parse(await H(t,e))}let Q={storageKey:"ownPrivateKey",keyType:"private"},X={storageKey:"ownPublicKey",keyType:"public"},ee={storageKey:"peerPublicKey",keyType:"public"};class et{constructor(){this.storage=new i("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(ee,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(X.storageKey),this.storage.removeItem(Q.storageKey),this.storage.removeItem(ee.storageKey)}async generateKeyPair(){let e=await q();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(Q,e.privateKey),await this.storeKey(X,e.publicKey)}async loadKeysIfNeeded(){null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(Q)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(X)),(null===this.ownPrivateKey||null===this.ownPublicKey)&&await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(ee)),null===this.sharedSecret&&null!==this.ownPrivateKey&&null!==this.peerPublicKey&&(this.sharedSecret=await W(this.ownPrivateKey,this.peerPublicKey))}async loadKey(e){let t=this.storage.getItem(e.storageKey);return t?Z(e.keyType,t):null}async storeKey(e,t){let r=await G(e.keyType,t);this.storage.setItem(e.storageKey,r)}}let er="4.3.2",en="@coinbase/wallet-sdk";async function ei(e,t){let r=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),n=await window.fetch(t,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":er,"X-Cbw-Sdk-Platform":en}}),{result:i,error:s}=await n.json();if(s)throw s;return i}let es="accounts",ea="activeChain",eo="availableChains",el="walletCapabilities";class ec{constructor(e){var t,r,n;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new et,this.storage=new i("CBWSDK","SCWStateManager"),this.accounts=null!==(t=this.storage.loadObject(es))&&void 0!==t?t:[],this.chain=this.storage.loadObject(ea)||{id:null!==(n=null===(r=e.metadata.appChainIds)||void 0===r?void 0:r[0])&&void 0!==n?n:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var t,r,n,i;await (null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t));let s=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,null!==(n=e.params)&&void 0!==n?n:{})}}),a=await this.communicator.postRequestAndWaitForResponse(s);if("failure"in a.content)throw a.content.failure;let o=await Z("public",a.sender);await this.keyManager.setPeerPublicKey(o);let l=(await this.decryptResponseMessage(a)).result;if("error"in l)throw l.error;if("eth_requestAccounts"===e.method){let e=l.value;this.accounts=e,this.storage.storeObject(es,e),null===(i=this.callback)||void 0===i||i.call(this,"accountsChanged",e)}}async request(e){var t;if(0===this.accounts.length){if("wallet_sendCalls"===e.method)return this.sendRequestToPopup(e);throw h.provider.unauthorized()}switch(e.method){case"eth_requestAccounts":return null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:D(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return D(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(el);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw h.rpc.internal("No RPC URL set for chain");return ei(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var t,r;await (null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t));let n=await this.sendEncryptedRequest(e),i=(await this.decryptResponseMessage(n)).result;if("error"in i)throw i.error;return i.value}async cleanup(){var e,t;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:null!==(t=null===(e=this.metadata.appChainIds)||void 0===e?void 0:e[0])&&void 0!==t?t:1}}async handleSwitchChainRequest(e){var t;let r=e.params;if(!r||!(null===(t=r[0])||void 0===t?void 0:t.chainId))throw h.rpc.invalidParams();let n=$(r[0].chainId);if(this.updateChain(n))return null;let i=await this.sendRequestToPopup(e);return null===i&&this.updateChain(n),i}async sendEncryptedRequest(e){let t=await this.keyManager.getSharedSecret();if(!t)throw h.provider.unauthorized("No valid session found, try requestAccounts before other methods");let r=await J({action:e,chainId:this.chain.id},t),n=await this.createRequestMessage({encrypted:r});return this.communicator.postRequestAndWaitForResponse(n)}async createRequestMessage(e){let t=await G("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:t,content:e,timestamp:new Date}}async decryptResponseMessage(e){var t,r;let n=e.content;if("failure"in n)throw n.failure;let i=await this.keyManager.getSharedSecret();if(!i)throw h.provider.unauthorized("Invalid session");let s=await Y(n.encrypted,i),a=null===(t=s.data)||void 0===t?void 0:t.chains;if(a){let e=Object.entries(a).map(([e,t])=>({id:Number(e),rpcUrl:t}));this.storage.storeObject(eo,e),this.updateChain(this.chain.id,e)}let o=null===(r=s.data)||void 0===r?void 0:r.capabilities;return o&&this.storage.storeObject(el,o),s}updateChain(e,t){var r;let n=null!=t?t:this.storage.loadObject(eo),i=null==n?void 0:n.find(t=>t.id===e);return!!i&&(i!==this.chain&&(this.chain=i,this.storage.storeObject(ea,i),null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",D(i.id))),!0)}}var eu=r(14688);let ed="Addresses";function eh(e){return void 0!==e.errorMessage}class ef{constructor(e){this.secret=e}async encrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");let r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",C(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i.encode(e)),a=s.slice(s.byteLength-16),o=s.slice(0,s.byteLength-16),l=new Uint8Array(a),c=new Uint8Array(o);return T(new Uint8Array([...r,...l,...c]))}async decrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise((r,n)=>{!async function(){let i=await crypto.subtle.importKey("raw",C(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=C(e),a=s.slice(0,12),o=s.slice(12,28),l=new Uint8Array([...s.slice(28),...o]),c={name:"AES-GCM",iv:new Uint8Array(a)};try{let e=await window.crypto.subtle.decrypt(c,i,l),t=new TextDecoder;r(t.decode(e))}catch(e){n(e)}}()})}}class ep{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;let n=`${t}:${r}`;this.auth=`Basic ${btoa(n)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(e=>console.error("Unabled to mark event as failed:",e))}async fetchUnseenEvents(){var e;let t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){let{events:r,error:n}=await t.json();if(n)throw Error(`Check unseen events failed: ${n}`);let i=null!==(e=null==r?void 0:r.filter(e=>"Web3Response"===e.event).map(e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data})))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(i),i}throw Error(`Check unseen events failed: ${t.status}`)}}(E=x||(x={}))[E.DISCONNECTED=0]="DISCONNECTED",E[E.CONNECTING=1]="CONNECTING",E[E.CONNECTED=2]="CONNECTED";class ey{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw Error("webSocket object is not null");return new Promise((e,t)=>{var r;let n;try{this.webSocket=n=new this.WebSocketClass(this.url)}catch(e){t(e);return}null===(r=this.connectionStateListener)||void 0===r||r.call(this,x.CONNECTING),n.onclose=e=>{var r;this.clearWebSocket(),t(Error(`websocket error ${e.code}: ${e.reason}`)),null===(r=this.connectionStateListener)||void 0===r||r.call(this,x.DISCONNECTED)},n.onopen=t=>{var r;e(),null===(r=this.connectionStateListener)||void 0===r||r.call(this,x.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(e=>this.sendData(e)),this.pendingData=[])},n.onmessage=e=>{var t,r;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{let t=JSON.parse(e.data);null===(r=this.incomingDataListener)||void 0===r||r.call(this,t)}catch(e){}}})}disconnect(){var e;let{webSocket:t}=this;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,x.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){let{webSocket:t}=this;if(!t){this.pendingData.push(e),this.connect();return}t.send(e)}clearWebSocket(){let{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}class eg{constructor({session:e,linkAPIUrl:t,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=_(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{e&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]).forEach((t,r)=>{let n=e[r];void 0!==n&&t(n)})},this.handleDestroyed=e=>{var t;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=async e=>{var t;let r=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(r)},this.handleMetadataUpdated=async(e,t)=>{var r;let n=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.metadataUpdated(e,n)},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated("walletUsername",e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated("AppVersion",e)},this.handleChainUpdated=async(e,t)=>{var r;let n=await this.cipher.decrypt(e),i=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.chainUpdated(n,i)},this.session=e,this.cipher=new ef(e.secret),this.listener=r;let n=new ey(`${t}/rpc`,WebSocket);n.setConnectionStateListener(async e=>{let t=!1;switch(e){case x.DISCONNECTED:if(!this.destroyed){let e=async()=>{await new Promise(e=>setTimeout(e,5e3)),this.destroyed||n.connect().catch(()=>{e()})};e()}break;case x.CONNECTED:t=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case x.CONNECTING:}this.connected!==t&&(this.connected=t)}),n.setIncomingDataListener(e=>{var t;switch(e.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let t="IsLinkedOK"===e.type?e.linked:void 0;this.linked=t||e.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(e.metadata);break;case"Event":this.handleIncomingEvent(e)}void 0!==e.id&&(null===(t=this.requestResolutions.get(e.id))||void 0===t||t(e))}),this.ws=n,this.http=new ep(t,e.id,e.key)}connect(){if(this.destroyed)throw Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:_(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}async handleIncomingEvent(e){var t;if("Event"!==e.type||"Web3Response"!==e.event)return;let r=JSON.parse(await this.cipher.decrypt(e.data));if("WEB3_RESPONSE"!==r.type)return;let{id:n,response:i}=r;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(n,i)}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(e=>this.handleIncomingEvent(e))}async publishEvent(e,t,r=!1){let n=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),i={type:"PublishEvent",id:_(this.nextReqId++),sessionId:this.session.id,event:e,data:n,callWebhook:r};return this.setOnceLinked(async()=>{let e=await this.makeRequest(i);if("Fail"===e.type)throw Error(e.error||"failed to publish event");return e.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4){this.ws.disconnect();return}try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t={timeout:6e4}){let r;let n=e.id;return this.sendData(e),Promise.race([new Promise((e,i)=>{r=window.setTimeout(()=>{i(Error(`request ${n} timed out`))},t.timeout)}),new Promise(e=>{this.requestResolutions.set(n,t=>{clearTimeout(r),e(t),this.requestResolutions.delete(n)})})])}async handleConnected(){return"Fail"!==(await this.makeRequest({type:"HostSession",id:_(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type&&(this.sendData({type:"IsLinked",id:_(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:_(this.nextReqId++),sessionId:this.session.id}),!0)}}class em{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;let e=this._nextRequestId,t=B(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}function eb(e,...t){if(!(e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function ev(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let ew=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e_=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];let eE=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ex(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),eb(e),e}class eI{clone(){return this._cloneInto()}}let eS=(e,t,r)=>e&t^~e&r,eA=(e,t,r)=>e&t^e&r^t&r;class ek extends eI{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ew(this.buffer)}update(e){ev(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=ex(e)).length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let t=ew(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ev(this),function(e,t){eb(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let a=ew(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}let eT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),eC=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),eO=new Uint32Array(64);class eP extends ek{constructor(){super(64,32,8,!1),this.A=0|eC[0],this.B=0|eC[1],this.C=0|eC[2],this.D=0|eC[3],this.E=0|eC[4],this.F=0|eC[5],this.G=0|eC[6],this.H=0|eC[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)eO[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=eO[e-15],r=eO[e-2],n=e_(t,7)^e_(t,18)^t>>>3,i=e_(r,17)^e_(r,19)^r>>>10;eO[e]=i+eO[e-7]+n+eO[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(e_(a,6)^e_(a,11)^e_(a,25))+eS(a,o,l)+eT[e]+eO[e]|0,u=(e_(r,2)^e_(r,13)^e_(r,22))+eA(r,n,i)|0;c=l,l=o,o=a,a=s+t|0,s=i,i=n,n=r,r=t+u|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,s,a,o,l,c)}roundClean(){eO.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let eR=function(e){let t=t=>e().update(ex(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new eP),eD="session:id",eN="session:secret",eU="session:linked";class eB{constructor(e,t,r,n=!1){this.storage=e,this.id=t,this.secret=r,this.key=function(e){eb(e);let t="";for(let r=0;r<e.length;r++)t+=eE[e[r]];return t}(eR(`${t}, ${r} WalletLink`)),this._linked=!!n}static create(e){return new eB(e,k(16),k(32)).save()}static load(e){let t=e.getItem(eD),r=e.getItem(eU),n=e.getItem(eN);return t&&n?new eB(e,t,n,"1"===r):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(eD,this.id),this.storage.setItem(eN,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(eU,this._linked?"1":"0")}}function eL(){var e,t;return null!==(t=null===(e=null==window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}function ej(){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(e)}var eM=r(98452),ez=r(79080),e$=r(99799);class eF{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=eL()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){let t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,ez.sY)((0,ez.h)("div",null,(0,ez.h)(eq,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,t])=>(0,ez.h)(eW,Object.assign({},t,{key:e}))))),this.root)}}let eq=e=>(0,ez.h)("div",{class:(0,eM.W)("-cbwsdk-snackbar-container")},(0,ez.h)("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),(0,ez.h)("div",{class:"-cbwsdk-snackbar"},e.children)),eW=({autoExpand:e,message:t,menuItems:r})=>{let[n,i]=(0,e$.eJ)(!0),[s,a]=(0,e$.eJ)(null!=e&&e);return(0,e$.d4)(()=>{let e=[window.setTimeout(()=>{i(!1)},1),window.setTimeout(()=>{a(!0)},1e4)];return()=>{e.forEach(window.clearTimeout)}}),(0,ez.h)("div",{class:(0,eM.W)("-cbwsdk-snackbar-instance",n&&"-cbwsdk-snackbar-instance-hidden",s&&"-cbwsdk-snackbar-instance-expanded")},(0,ez.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{a(!s)}},(0,ez.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,ez.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),(0,ez.h)("div",{class:"-gear-container"},!s&&(0,ez.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,ez.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,ez.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&(0,ez.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((e,t)=>(0,ez.h)("div",{class:(0,eM.W)("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,ez.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,ez.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,ez.h)("span",{class:(0,eM.W)("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info)))))},eV="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class eH{constructor(){this.attached=!1,this.snackbar=new eF}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");let e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,ej()}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:eV,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}class eK{constructor(){this.root=null,this.darkMode=eL()}attach(){let e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),ej()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,ez.sY)(null,this.root),e&&(0,ez.sY)((0,ez.h)(eG,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}let eG=({title:e,buttonText:t,darkMode:r,onButtonClick:n,onDismiss:i})=>(0,ez.h)(eq,{darkMode:r},(0,ez.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,ez.h)("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),(0,ez.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),(0,ez.h)("div",{class:(0,eM.W)("-cbwsdk-redirect-dialog-box",r?"dark":"light")},(0,ez.h)("p",null,e),(0,ez.h)("button",{onClick:n},t)))),eZ="https://www.walletlink.org";class eJ{constructor(){this.attached=!1,this.redirectDialog=new eK}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){let t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",function(){try{if(function(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top)return window.top.location;return window.location}catch(e){return window.location}}().href),e&&t.searchParams.append("wl_url",e);let r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class eY{constructor(e){var t;this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(t=null==window?void 0:window.navigator)||void 0===t?void 0:t.userAgent),this.linkedUpdated=e=>{this.isLinked=e;let t=this.storage.getItem(ed);if(e&&(this._session.linked=e),this.isUnlinkedErrorState=!1,t){let r=t.split(" "),n="true"===this.storage.getItem("IsStandaloneSigning");""===r[0]||e||!this._session.linked||n||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{(this.chainCallbackParams.chainId!==e||this.chainCallbackParams.jsonRpcUrl!==t)&&(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(t,Number.parseInt(e,10)))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),eY.accountRequestCallbackIds.size>0&&(Array.from(eY.accountRequestCallbackIds.values()).forEach(t=>{this.invokeCallback(t,{method:"requestEthereumAccounts",result:[e]})}),eY.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;let{session:r,ui:n,connection:i}=this.subscribe();this._session=r,this.connection=i,this.relayEventManager=new em,this.ui=n,this.ui.attach()}subscribe(){let e=eB.load(this.storage)||eB.create(this.storage),{linkAPIUrl:t}=this,r=new eg({session:e,linkAPIUrl:t,listener:this}),n=this.isMobileWeb?new eJ:new eH;return r.connect(),{session:e,ui:n,connection:r}}resetAndReload(){this.connection.destroy().then(()=>{let e=eB.load(this.storage);(null==e?void 0:e.id)===this._session.id&&i.clearAll(),document.location.reload()}).catch(e=>{})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:R(e.weiValue),data:O(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?R(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?R(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?R(e.gasPriceInWei):null,gasLimit:e.gasLimit?R(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:R(e.weiValue),data:O(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?R(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?R(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?R(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?R(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:O(e,!0),chainId:t}})}getWalletLinkSession(){return this._session}sendRequest(e){let t=null,r=k(8),n=n=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,n),null==t||t()};return new Promise((i,s)=>{t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:n,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,e=>{if(null==t||t(),eh(e))return s(Error(e.errorMessage));i(e)}),this.publishWeb3RequestEvent(r,e)})}publishWeb3RequestEvent(e,t){let r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then(e=>{}).catch(e=>{this.handleWeb3ResponseMessage(r.id,{method:t.method,errorMessage:e.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof eJ)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(e){this.publishEvent("Web3RequestCanceled",{type:"WEB3_REQUEST_CANCELED",id:e},!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e,t){if("requestEthereumAccounts"===t.method){eY.accountRequestCallbackIds.forEach(e=>this.invokeCallback(e,t)),eY.accountRequestCallbackIds.clear();return}this.invokeCallback(e,t)}handleErrorResponse(e,t,r){var n;let i=null!==(n=null==r?void 0:r.message)&&void 0!==n?n:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:t,errorMessage:i})}invokeCallback(e,t){let r=this.relayEventManager.callbacks.get(e);r&&(r(t),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){let{appName:e,appLogoUrl:t}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:t}},n=k(8);return new Promise((e,t)=>{this.relayEventManager.callbacks.set(n,r=>{if(eh(r))return t(Error(r.errorMessage));e(r)}),eY.accountRequestCallbackIds.add(n),this.publishWeb3RequestEvent(n,r)})}watchAsset(e,t,r,n,i,s){let a={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:n,image:i},chainId:s}},o=null,l=k(8);return o=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,e),null==o||o()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(l,r=>{if(null==o||o(),eh(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(l,a)})}addEthereumChain(e,t,r,n,i,s){let a={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:n,chainName:i,iconUrls:r,nativeCurrency:s}},o=null,l=k(8);return o=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,e),null==o||o()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(l,r=>{if(null==o||o(),eh(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(l,a)})}switchEthereumChain(e,t){let r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},n=null,i=k(8);return n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,e),null==n||n()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(i,r=>(null==n||n(),eh(r)&&r.errorCode)?t(h.provider.custom({code:r.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):eh(r)?t(Error(r.errorMessage)):void e(r)),this.publishWeb3RequestEvent(i,r)})}}eY.accountRequestCallbackIds=new Set;var eQ=r(82957).lW;let eX="DefaultChainId",e0="DefaultJsonRpcUrl";class e1{constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new i("walletlink",eZ),this.callback=e.callback||null;let t=this._storage.getItem(ed);if(t){let e=t.split(" ");""!==e[0]&&(this._addresses=e.map(e=>M(e)))}this.initializeRelay()}getSession(){let{id:e,secret:t}=this.initializeRelay().getWalletLinkSession();return{id:e,secret:t}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(e0))&&void 0!==e?e:void 0}set jsonRpcUrl(e){this._storage.setItem(e0,e)}updateProviderInfo(e,t){var r;this.jsonRpcUrl=e;let n=this.getChainId();this._storage.setItem(eX,t.toString(10)),$(t)!==n&&(null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",D(t)))}async watchAsset(e){let t=Array.isArray(e)?e[0]:e;if(!t.type)throw h.rpc.invalidParams("Type is required");if((null==t?void 0:t.type)!=="ERC20")throw h.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw h.rpc.invalidParams("Options are required");if(!(null==t?void 0:t.options.address))throw h.rpc.invalidParams("Address is required");let r=this.getChainId(),{address:n,symbol:i,image:s,decimals:a}=t.options,o=this.initializeRelay(),l=await o.watchAsset(t.type,n,i,a,s,null==r?void 0:r.toString());return!eh(l)&&!!l.result}async addEthereumChain(e){var t,r;let n=e[0];if((null===(t=n.rpcUrls)||void 0===t?void 0:t.length)===0)throw h.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!n.chainName||""===n.chainName.trim())throw h.rpc.invalidParams("chainName is a required field");if(!n.nativeCurrency)throw h.rpc.invalidParams("nativeCurrency is a required field");let i=Number.parseInt(n.chainId,16);if(i===this.getChainId())return!1;let s=this.initializeRelay(),{rpcUrls:a=[],blockExplorerUrls:o=[],chainName:l,iconUrls:c=[],nativeCurrency:u}=n,d=await s.addEthereumChain(i.toString(),a,c,o,l,u);if(eh(d))return!1;if((null===(r=d.result)||void 0===r?void 0:r.isApproved)===!0)return this.updateProviderInfo(a[0],i),null;throw h.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(e){let t=Number.parseInt(e[0].chainId,16),r=this.initializeRelay(),n=await r.switchEthereumChain(t.toString(10),this.selectedAddress||void 0);if(eh(n))throw n;let i=n.result;return i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,t),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,t){var r;if(!Array.isArray(e))throw Error("addresses is not an array");let n=e.map(e=>M(e));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",n),this._storage.setItem(ed,n.join(" ")))}async request(e){let t=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return D(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(t);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(t);case"eth_sendTransaction":return this._eth_sendTransaction(t);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(t);case"wallet_switchEthereumChain":return this.switchEthereumChain(t);case"wallet_watchAsset":return this.watchAsset(t);default:if(!this.jsonRpcUrl)throw h.rpc.internal("No RPC URL set for chain");return ei(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){let t=M(e);if(!this._addresses.map(e=>M(e)).includes(t))throw Error("Unknown Ethereum address")}_prepareTransactionParams(e){let t=e.from?M(e.from):this.selectedAddress;if(!t)throw Error("Ethereum address is unavailable");this._ensureKnownAddress(t);let r=e.to?M(e.to):null,n=null!=e.value?F(e.value):BigInt(0),i=e.data?z(e.data):eQ.alloc(0),s=null!=e.nonce?$(e.nonce):null,a=null!=e.gasPrice?F(e.gasPrice):null,o=null!=e.maxFeePerGas?F(e.maxFeePerGas):null;return{fromAddress:t,toAddress:r,weiValue:n,data:i,nonce:s,gasPriceInWei:a,maxFeePerGas:o,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?F(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?F(e.gas):null,chainId:e.chainId?$(e.chainId):this.getChainId()}}async ecRecover(e){let{method:t,params:r}=e;if(!Array.isArray(r))throw h.rpc.invalidParams();let n=this.initializeRelay(),i=await n.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:P(r[0]),signature:P(r[1]),addPrefix:"personal_ecRecover"===t}});if(eh(i))throw i;return i.result}getChainId(){var e;return Number.parseInt(null!==(e=this._storage.getItem(eX))&&void 0!==e?e:"1",10)}async _eth_requestAccounts(){var e,t;if(this._addresses.length>0)return null===(e=this.callback)||void 0===e||e.call(this,"connect",{chainId:D(this.getChainId())}),this._addresses;let r=this.initializeRelay(),n=await r.requestEthereumAccounts();if(eh(n))throw n;if(!n.result)throw Error("accounts received is empty");return this._setAddresses(n.result),null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:D(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw h.rpc.invalidParams();let t=e[1],r=e[0];this._ensureKnownAddress(t);let n=this.initializeRelay(),i=await n.sendRequest({method:"signEthereumMessage",params:{address:M(t),message:P(r),addPrefix:!0,typedDataJson:null}});if(eh(i))throw i;return i.result}async _eth_signTransaction(e){let t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),n=await r.signEthereumTransaction(t);if(eh(n))throw n;return n.result}async _eth_sendRawTransaction(e){let t=z(e[0]),r=this.initializeRelay(),n=await r.submitEthereumTransaction(t,this.getChainId());if(eh(n))throw n;return n.result}async _eth_sendTransaction(e){let t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),n=await r.signAndSubmitEthereumTransaction(t);if(eh(n))throw n;return n.result}async signTypedData(e){let{method:t,params:r}=e;if(!Array.isArray(r))throw h.rpc.invalidParams();let n=r["eth_signTypedData_v1"===t?1:0],i=r["eth_signTypedData_v1"===t?0:1];this._ensureKnownAddress(n);let s=this.initializeRelay(),a=await s.sendRequest({method:"signEthereumMessage",params:{address:M(n),message:O(({eth_signTypedData_v1:eu.hashForSignTypedDataLegacy,eth_signTypedData_v3:eu.hashForSignTypedData_v3,eth_signTypedData_v4:eu.hashForSignTypedData_v4,eth_signTypedData:eu.hashForSignTypedData_v4})[t]({data:function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw h.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}(i)}),!0),typedDataJson:JSON.stringify(i,null,2),addPrefix:!1}});if(eh(a))throw a;return a.result}initializeRelay(){return this._relay||(this._relay=new eY({linkAPIUrl:eZ,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}let e2="SignerType",e3=new i("CBWSDK","SignerConfigurator");async function e5(e){let{communicator:t,metadata:r,handshakeRequest:n,callback:i}=e;e8(t,r,i).catch(()=>{});let s={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},e.preference),{handshakeRequest:n})},{data:a}=await t.postRequestAndWaitForResponse(s);return a}async function e8(e,t,r){await e.onMessage(({event:e})=>"WalletLinkSessionRequest"===e);let n=new e1({metadata:t,callback:r});e.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}}),await n.handshake(),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}let e6=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,{checkCrossOriginOpenerPolicy:e4,getCrossOriginOpenerPolicy:e9}={getCrossOriginOpenerPolicy:()=>void 0===n?"undefined":n,checkCrossOriginOpenerPolicy:async()=>{if("undefined"==typeof window){n="non-browser-env";return}try{let e=`${window.location.origin}${window.location.pathname}`,t=await fetch(e,{method:"HEAD"});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let r=t.headers.get("Cross-Origin-Opener-Policy");n=null!=r?r:"null","same-origin"===n&&console.error(e6)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),n="error"}}},e7={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:eV,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},te=null;class tt{constructor({url:e="https://keys.coinbase.com/connect",metadata:t,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async e=>{(await this.waitForPopupLoaded()).postMessage(e,this.url.origin)},this.postRequestAndWaitForResponse=async e=>{let t=this.onMessage(({requestId:t})=>t===e.id);return this.postMessage(e),await t},this.onMessage=async e=>new Promise((t,r)=>{let n=r=>{if(r.origin!==this.url.origin)return;let i=r.data;e(i)&&(t(i),window.removeEventListener("message",n),this.listeners.delete(n))};window.addEventListener("message",n),this.listeners.set(n,{reject:r})}),this.disconnect=()=>{var e;(e=this.popup)&&!e.closed&&e.close(),this.popup=null,this.listeners.forEach(({reject:e},t)=>{e(h.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",t)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=await function(e){let t=(window.innerWidth-420)/2+window.screenX,r=(window.innerHeight-540)/2+window.screenY;function n(){let n=`wallet_${crypto.randomUUID()}`,i=window.open(e,n,`width=420, height=540, left=${t}, top=${r}`);return(null==i||i.focus(),i)?i:null}(function(e){for(let[t,r]of Object.entries({sdkName:en,sdkVersion:er,origin:window.location.origin,coop:e9()}))e.searchParams.append(t,r.toString())})(e);let i=n();if(!i){let e=function(){if(!te){let e=document.createElement("div");e.className="-cbwsdk-css-reset",document.body.appendChild(e),(te=new eF).attach(e)}return te}();return new Promise((t,r)=>{e.presentItem({autoExpand:!0,message:"Popup was blocked. Try again.",menuItems:[Object.assign(Object.assign({},e7),{onClick:()=>{(i=n())?t(i):r(h.rpc.internal("Popup window was blocked")),e.clear()}})]})})}return Promise.resolve(i)}(this.url),this.onMessage(({event:e})=>"PopupUnload"===e).then(this.disconnect).catch(()=>{}),this.onMessage(({event:e})=>"PopupLoaded"===e).then(e=>{this.postMessage({requestId:e.id,data:{version:er,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw h.rpc.internal();return this.popup})),this.url=new URL(e),this.metadata=t,this.preference=r}}var tr=r(1470);class tn extends tr.v{}var ti=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class ts extends tn{constructor(e){var{metadata:t}=e,r=e.preference,{keysUrl:n}=r,i=ti(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=t,this.preference=i,this.communicator=new tt({url:n,metadata:t,preference:i});let s=e3.getItem(e2);s&&(this.signer=this.initSigner(s))}async request(e){try{if(!function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw h.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw h.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw h.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw h.provider.unsupportedMethod()}}(e),!this.signer)switch(e.method){case"eth_requestAccounts":{let t=await this.requestSignerSelection(e),r=this.initSigner(t);await r.handshake(e),this.signer=r,e3.setItem(e2,t);break}case"wallet_sendCalls":{let t=this.initSigner("scw");await t.handshake({method:"handshake"});let r=await t.request(e);return await t.cleanup(),r}case"wallet_getCallsStatus":return ei(e,"https://rpc.wallet.coinbase.com");case"net_version":return 1;case"eth_chainId":return D(1);default:throw h.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(e)}catch(t){let{code:e}=t;return e===s.provider.unauthorized&&this.disconnect(),Promise.reject(function(e){let t=function(e,{shouldIncludeStack:t=!1}={}){var r,n;let i={};return e&&"object"==typeof e&&!Array.isArray(e)&&u(e,"code")&&Number.isInteger(r=e.code)&&(a[r.toString()]||(n=r)>=-32099&&n<=-32e3)?(i.code=e.code,e.message&&"string"==typeof e.message?(i.message=e.message,u(e,"data")&&(i.data=e.data)):(i.message=l(i.code),i.data={originalError:c(e)})):(i.code=s.rpc.internal,i.message=d(e,"message")?e.message:o,i.data={originalError:c(e)}),t&&(i.stack=d(e,"stack")?e.stack:void 0),i}(function(e){var t;if("string"==typeof e)return{message:e,code:s.rpc.internal};if(eh(e)){let r=e.errorMessage,n=null!==(t=e.errorCode)&&void 0!==t?t:r.match(/(denied|rejected)/i)?s.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:r,code:n,data:{method:e.method}})}return e}(e),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return r.searchParams.set("version",er),r.searchParams.set("code",t.code.toString()),r.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:r.href})}(t))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await (null===(e=this.signer)||void 0===e?void 0:e.cleanup()),this.signer=null,i.clearAll(),this.emit("disconnect",h.provider.disconnected("User initiated disconnection"))}requestSignerSelection(e){return e5({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}initSigner(e){return function(e){let{signerType:t,metadata:r,communicator:n,callback:i}=e;switch(t){case"scw":return new ec({metadata:r,callback:i,communicator:n});case"walletlink":return new e1({metadata:r,callback:i})}}({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}let ta={options:"all"};function to(e){var t;new i("CBWSDK").setItem("VERSION",er),e4();let r={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(ta,null!==(t=e.preference)&&void 0!==t?t:{})};!function(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw Error(`Invalid options: ${e.options}`);if(e.attribution&&void 0!==e.attribution.auto&&void 0!==e.attribution.dataSuffix)throw Error("Attribution cannot contain both auto and dataSuffix properties")}}(r.preference);let n=null;return{getProvider:()=>(n||(n=function(e){var t;let r={metadata:e.metadata,preference:e.preference};return null!==(t=function({metadata:e,preference:t}){var r,n;let{appName:i,appLogoUrl:s,appChainIds:a}=e;if("smartWalletOnly"!==t.options){let e=globalThis.coinbaseWalletExtension;if(e)return null===(r=e.setAppInfo)||void 0===r||r.call(e,i,s,a,t),e}let o=function(){var e,t;try{let r=globalThis;return null!==(e=r.ethereum)&&void 0!==e?e:null===(t=r.top)||void 0===t?void 0:t.ethereum}catch(e){return}}();if(null==o?void 0:o.isCoinbaseBrowser)return null===(n=o.setAppInfo)||void 0===n||n.call(o,i,s,a,t),o}(r))&&void 0!==t?t:new ts(r)}(r)),n)}}},8404:function(e,t,r){"use strict";let n;r.d(t,{Gn:function(){return fK},gy:function(){return fR},lI:function(){return fO}});var i=r(55445),s=r(65383),a=r(40537),o=r(76454),l=r(3897);class c extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof c){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&"string"==typeof t.cause.details?t.cause.details:t.cause?.message?t.cause.message:t.details})(),n=t.cause instanceof c&&t.cause.docsPath||t.docsPath,i=`https://oxlib.sh${n??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||n?["",r?`Details: ${r}`:void 0,n?`See: ${i}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=r,this.docs=i,this.docsPath=n,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,r):r?null:t}(this,e)}}function u(e,t){if(v(e)>t)throw new x({givenSize:v(e),maxSize:t})}function d(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;let i=e.replace("0x","");if(i.length>2*n)throw new S({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i["right"===r?"padEnd":"padStart"](2*n,"0")}`}function h(e,t,r){return JSON.stringify(e,(e,r)=>"function"==typeof t?t(e,r):"bigint"==typeof r?r.toString()+"#__bigint":r,r)}let f=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function p(e){return e instanceof Uint8Array?y(e):Array.isArray(e)?y(new Uint8Array(e)):e}function y(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=f[e[t]];let n=`0x${r}`;return"number"==typeof t.size?(u(n,t.size),m(n,t.size)):n}function g(e,t={}){let r;let{signed:n,size:i}=t,s=BigInt(e);i?r=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let a="bigint"==typeof r&&n?-r-1n:0;if(r&&s>r||s<a){let t="bigint"==typeof e?"n":"";throw new w({max:r?`${r}${t}`:void 0,min:`${a}${t}`,signed:n,size:i,value:`${e}${t}`})}let o=(n&&s<0?(1n<<BigInt(8*i))+BigInt(s):s).toString(16),l=`0x${o}`;return i?d(l,{dir:"left",size:i}):l}function m(e,t){return d(e,{dir:"right",size:t})}function b(e,t,r,n={}){let{strict:i}=n;!function(e,t){if("number"==typeof t&&t>0&&t>v(e)-1)throw new I({offset:t,position:"start",size:v(e)})}(e,t);let s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return i&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&v(e)!==r-t)throw new I({offset:r,position:"end",size:v(e)})}(s,t,r),s}function v(e){return Math.ceil((e.length-2)/2)}class w extends c{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number \`${i}\` is not in safe${n?` ${8*n}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class _ extends c{constructor(e){super(`Value \`${"object"==typeof e?h(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class E extends c{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class x extends c{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class I extends c{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class S extends c{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}class A extends c{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${v(p(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class k extends c{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class T extends c{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}let C="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function O(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function P(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function R(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function D(e,t){P(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function N(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function U(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function B(e,t){return e<<32-t|e>>>t}let L=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}return e};function j(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),P(e),e}class M{}function z(e){let t=t=>e().update(j(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function $(e=32){if(C&&"function"==typeof C.getRandomValues)return C.getRandomValues(new Uint8Array(e));if(C&&"function"==typeof C.randomBytes)return Uint8Array.from(C.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}class F extends M{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=U(this.buffer)}update(e){R(this),P(e=j(e));let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let t=U(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){R(this),D(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;t[s++]=128,N(this.buffer.subarray(s)),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let a=U(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let q=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),W=BigInt(4294967296-1),V=BigInt(32);function H(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:a}=function(e,t=!1){return t?{h:Number(e&W),l:Number(e>>V&W)}:{h:0|Number(e>>V&W),l:0|Number(e&W)}}(e[s],t);[n[s],i[s]]=[r,a]}return[n,i]}let K=(e,t,r)=>e<<r|t>>>32-r,G=(e,t,r)=>t<<r|e>>>32-r,Z=(e,t,r)=>t<<r-32|e>>>64-r,J=(e,t,r)=>e<<r-32|t>>>64-r,Y=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Q=new Uint32Array(64);class X extends F{constructor(e=32){super(64,e,8,!1),this.A=0|q[0],this.B=0|q[1],this.C=0|q[2],this.D=0|q[3],this.E=0|q[4],this.F=0|q[5],this.G=0|q[6],this.H=0|q[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)Q[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=Q[e-15],r=Q[e-2],n=B(t,7)^B(t,18)^t>>>3,i=B(r,17)^B(r,19)^r>>>10;Q[e]=i+Q[e-7]+n+Q[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){var u,d,h,f;let t=c+(B(a,6)^B(a,11)^B(a,25))+((u=a)&o^~u&l)+Y[e]+Q[e]|0,p=(B(r,2)^B(r,13)^B(r,22))+((d=r)&(h=n)^d&(f=i)^h&f)|0;c=l,l=o,o=a,a=s+t|0,s=i,i=n,n=r,r=t+p|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,s,a,o,l,c)}roundClean(){N(Q)}destroy(){this.set(0,0,0,0,0,0,0,0),N(this.buffer)}}let ee=H(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e)));ee[0],ee[1];let et=z(()=>new X);class er extends M{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");O(e.outputLen),O(e.blockLen)}(e);let r=j(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),N(i)}update(e){return R(this),this.iHash.update(e),this}digestInto(e){R(this),P(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let en=(e,t,r)=>new er(e,t).update(r).digest();en.create=(e,t)=>new er(e,t);let ei=BigInt(0),es=BigInt(1);function ea(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function eo(e){if(!ea(e))throw Error("Uint8Array expected")}function el(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}function ec(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function eu(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?ei:BigInt("0x"+e)}let ed="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,eh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ef(e){if(eo(e),ed)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=eh[e[r]];return t}let ep={_0:48,_9:57,A:65,F:70,a:97,f:102};function ey(e){return e>=ep._0&&e<=ep._9?e-ep._0:e>=ep.A&&e<=ep.F?e-(ep.A-10):e>=ep.a&&e<=ep.f?e-(ep.a-10):void 0}function eg(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(ed)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=ey(e.charCodeAt(i)),s=ey(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n}function em(e){return eu(ef(e))}function eb(e){return eo(e),eu(ef(Uint8Array.from(e).reverse()))}function ev(e,t){return eg(e.toString(16).padStart(2*t,"0"))}function ew(e,t){return ev(e,t).reverse()}function e_(e,t,r){let n;if("string"==typeof t)try{n=eg(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(ea(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function eE(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];eo(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let ex=e=>"bigint"==typeof e&&ei<=e;function eI(e,t,r){return ex(e)&&ex(t)&&ex(r)&&t<=e&&e<r}function eS(e,t,r,n){if(!eI(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let eA=e=>(es<<BigInt(e))-es,ek=e=>new Uint8Array(e),eT=e=>Uint8Array.from(e),eC={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ea(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function eO(e,t,r={}){let n=(t,r,n)=>{let i=eC[r];if("function"!=typeof i)throw Error("invalid validator function");let s=e[t];if((!n||void 0!==s)&&!i(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function eP(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}let eR=BigInt(0),eD=BigInt(1),eN=BigInt(2),eU=BigInt(3),eB=BigInt(4),eL=BigInt(5),ej=BigInt(8);function eM(e,t){let r=e%t;return r>=eR?r:t+r}function ez(e,t,r){let n=e;for(;t-- >eR;)n*=n,n%=r;return n}function e$(e,t){if(e===eR)throw Error("invert: expected non-zero number");if(t<=eR)throw Error("invert: expected positive modulus, got "+t);let r=eM(e,t),n=t,i=eR,s=eD,a=eD,o=eR;for(;r!==eR;){let e=n/r,t=n%r,l=i-a*e,c=s-o*e;n=r,r=t,i=a,s=o,a=l,o=c}if(n!==eD)throw Error("invert: does not exist");return eM(i,t)}function eF(e,t){let r=(e.ORDER+eD)/eB,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw Error("Cannot find square root");return n}function eq(e,t){let r=(e.ORDER-eL)/ej,n=e.mul(t,eN),i=e.pow(n,r),s=e.mul(t,i),a=e.mul(e.mul(s,eN),i),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),t))throw Error("Cannot find square root");return o}let eW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eV(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),s=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),s),n}function eH(e,t){let r=(e.ORDER-eD)/eN,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),a=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!a)throw Error("invalid Legendre symbol result");return i?1:s?0:-1}function eK(e,t){void 0!==t&&O(t);let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function eG(e,t,r=!1,n={}){let i;if(e<=eR)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:a}=eK(e,t);if(a>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:a,MASK:eA(s),ZERO:eR,ONE:eD,create:t=>eM(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return eR<=t&&t<e},is0:e=>e===eR,isOdd:e=>(e&eD)===eD,neg:t=>eM(-t,e),eql:(e,t)=>e===t,sqr:t=>eM(t*t,e),add:(t,r)=>eM(t+r,e),sub:(t,r)=>eM(t-r,e),mul:(t,r)=>eM(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<eR)throw Error("invalid exponent, negatives unsupported");if(r===eR)return e.ONE;if(r===eD)return t;let n=e.ONE,i=t;for(;r>eR;)r&eD&&(n=e.mul(n,i)),i=e.sqr(i),r>>=eD;return n})(o,e,t),div:(t,r)=>eM(t*e$(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>e$(t,e),sqrt:n.sqrt||(t=>(!i&&(i=e%eB===eU?eF:e%ej===eL?eq:function(e){if(e<BigInt(3))throw Error("sqrt is not defined for small field");let t=e-eD,r=0;for(;t%eN===eR;)t/=eN,r++;let n=eN,i=eG(e);for(;1===eH(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return eF;let s=i.pow(n,t),a=(t+eD)/eN;return function(e,n){if(e.is0(n))return n;if(1!==eH(e,n))throw Error("Cannot find square root");let i=r,o=e.mul(e.ONE,s),l=e.pow(n,t),c=e.pow(n,a);for(;!e.eql(l,e.ONE);){if(e.is0(l))return e.ZERO;let t=1,r=e.sqr(l);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=eD<<BigInt(i-t-1),s=e.pow(o,n);i=t,o=e.sqr(s),l=e.mul(l,o),c=e.mul(c,s)}return c}}(e)),i(o,t))),toBytes:e=>r?ew(e,a):ev(e,a),fromBytes:e=>{if(e.length!==a)throw Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);return r?eb(e):em(e)},invertBatch:e=>eV(o,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(o)}function eZ(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function eJ(e){let t=eZ(e);return t+Math.ceil(t/2)}let eY=BigInt(0),eQ=BigInt(1);function eX(e,t){let r=t.negate();return e?r:t}function e0(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function e1(e,t){e0(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:eA(e),maxNumber:i,shiftBy:BigInt(e)}}function e2(e,t,r){let{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=r,o=Number(e&i),l=e>>a;o>n&&(o-=s,l+=eQ);let c=t*n,u=c+Math.abs(o)-1;return{nextN:l,offset:u,isZero:0===o,isNeg:o<0,isNegF:t%2!=0,offsetF:c}}let e3=new WeakMap,e5=new WeakMap;function e8(e){return e5.get(e)||1}function e6(e){return eO(e.Fp,eW.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),eO(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eK(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function e4(e){void 0!==e.lowS&&el("lowS",e.lowS),void 0!==e.prehash&&el("prehash",e.prehash)}class e9 extends Error{constructor(e=""){super(e)}}let e7={Err:e9,_tlv:{encode:(e,t)=>{let{Err:r}=e7;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=ec(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?ec(i.length/2|128):"";return ec(e)+s+i+t},decode(e,t){let{Err:r}=e7,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],s=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let a=t.subarray(n,n+e);if(a.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===a[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of a)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;let a=t.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=e7;if(e<te)throw new t("integer: negative integers are not allowed");let r=ec(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=e7;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return em(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=e7,i=e_("signature",e),{v:s,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=e7,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},te=BigInt(0),tt=BigInt(1),tr=(BigInt(2),BigInt(3)),tn=BigInt(4),ti=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ts=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ta=BigInt(0),to=BigInt(1),tl=BigInt(2),tc=(e,t)=>(e+t/tl)/t,tu=eG(ti,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),l=e*e*e%ti,c=l*l*e%ti,u=ez(c,t,ti)*c%ti,d=ez(u,t,ti)*c%ti,h=ez(d,tl,ti)*l%ti,f=ez(h,n,ti)*h%ti,p=ez(f,i,ti)*f%ti,y=ez(p,a,ti)*p%ti,g=ez(y,o,ti)*y%ti,m=ez(g,a,ti)*p%ti,b=ez(m,t,ti)*c%ti,v=ez(b,s,ti)*f%ti,w=ez(v,r,ti)*l%ti,_=ez(w,tl,ti);if(!tu.eql(tu.sqr(_),e))throw Error("Cannot find square root");return _}}),td=function(e,t){let r=t=>(function(e){let t=function(e){let t=e6(e);return eO(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n,nByteLength:i,nBitLength:s}=t,a=r.BYTES+1,o=2*r.BYTES+1;function l(e){return eM(e,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=function(e){var t;let r=function(e){let t=e6(e);eO(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endo: CURVE.a must be 0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:n}=r,i=eG(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let i=t.toAffine();return eE(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),a=r.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:t,b:i}=r,s=n.sqr(e),a=n.mul(s,e);return n.add(n.add(a,n.mul(e,t)),i)}function l(e,t){let r=n.sqr(t),i=o(e);return n.eql(r,i)}if(!l(r.Gx,r.Gy))throw Error("bad curve params: generator point");let c=n.mul(n.pow(r.a,tr),tn),u=n.mul(n.sqr(r.b),BigInt(27));if(n.is0(n.add(c,u)))throw Error("bad curve params: a or b");function d(e){let t;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:a}=r;if(n&&"bigint"!=typeof e){if(ea(e)&&(e=ef(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{t="bigint"==typeof e?e:em(e_("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return s&&(t=eM(t,a)),eS("private key",t,tt,a),t}function h(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}let f=eP((e,t)=>{let{px:r,py:i,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};let a=e.is0();null==t&&(t=a?n.ONE:n.inv(s));let o=n.mul(r,t),l=n.mul(i,t),c=n.mul(s,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),p=eP(e=>{if(e.is0()){if(r.allowInfinityPoint&&!n.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:i}=e.toAffine();if(!n.isValid(t)||!n.isValid(i))throw Error("bad point: x or y not FE");if(!l(t,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class y{constructor(e,t,r){if(null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?y.ZERO:new y(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=eV(n,e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(a(e_("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(d(e))}static msm(e,t){return function(e,t,r,n){!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t);let i=r.length,s=n.length;if(i!==s)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,o=function(e){let t;for(t=0;e>ei;e>>=es,t+=1);return t}(BigInt(i)),l=1;o>12?l=o-3:o>4?l=o-2:o>0&&(l=2);let c=eA(l),u=Array(Number(c)+1).fill(a),d=Math.floor((t.BITS-1)/l)*l,h=a;for(let e=d;e>=0;e-=l){u.fill(a);for(let t=0;t<s;t++){let i=Number(n[t]>>BigInt(e)&c);u[i]=u[i].add(r[t])}let t=a;for(let e=u.length-1,r=a;e>0;e--)r=r.add(u[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<l;e++)h=h.double()}return h}(y,i,e,t)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){p(this)}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){h(e);let{px:t,py:r,pz:i}=this,{px:s,py:a,pz:o}=e,l=n.eql(n.mul(t,o),n.mul(s,i)),c=n.eql(n.mul(r,o),n.mul(a,i));return l&&c}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,i=n.mul(t,tr),{px:s,py:a,pz:o}=this,l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(s,s),h=n.mul(a,a),f=n.mul(o,o),p=n.mul(s,a);return p=n.add(p,p),u=n.mul(s,o),u=n.add(u,u),l=n.mul(e,u),c=n.mul(i,f),c=n.add(l,c),l=n.sub(h,c),c=n.add(h,c),c=n.mul(l,c),l=n.mul(p,l),u=n.mul(i,u),f=n.mul(e,f),p=n.sub(d,f),p=n.mul(e,p),p=n.add(p,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,f),d=n.mul(d,p),c=n.add(c,d),f=n.mul(a,o),f=n.add(f,f),d=n.mul(f,p),l=n.sub(l,d),u=n.mul(f,h),u=n.add(u,u),new y(l,c,u=n.add(u,u))}add(e){h(e);let{px:t,py:i,pz:s}=this,{px:a,py:o,pz:l}=e,c=n.ZERO,u=n.ZERO,d=n.ZERO,f=r.a,p=n.mul(r.b,tr),g=n.mul(t,a),m=n.mul(i,o),b=n.mul(s,l),v=n.add(t,i),w=n.add(a,o);v=n.mul(v,w),w=n.add(g,m),v=n.sub(v,w),w=n.add(t,s);let _=n.add(a,l);return w=n.mul(w,_),_=n.add(g,b),w=n.sub(w,_),_=n.add(i,s),c=n.add(o,l),_=n.mul(_,c),c=n.add(m,b),_=n.sub(_,c),d=n.mul(f,w),c=n.mul(p,b),d=n.add(c,d),c=n.sub(m,d),d=n.add(m,d),u=n.mul(c,d),m=n.add(g,g),m=n.add(m,g),b=n.mul(f,b),w=n.mul(p,w),m=n.add(m,b),b=n.sub(g,b),b=n.mul(f,b),w=n.add(w,b),g=n.mul(m,w),u=n.add(u,g),g=n.mul(_,w),c=n.mul(v,c),c=n.sub(c,g),g=n.mul(v,m),d=n.mul(_,d),new y(c,u,d=n.add(d,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return b.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:i}=r;eS("scalar",e,te,i);let s=y.ZERO;if(e===te)return s;if(this.is0()||e===tt)return this;if(!t||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,e,y.normalizeZ);let{k1neg:a,k1:o,k2neg:l,k2:c}=t.splitScalar(e),u=s,d=s,h=this;for(;o>te||c>te;)o&tt&&(u=u.add(h)),c&tt&&(d=d.add(h)),h=h.double(),o>>=tt,c>>=tt;return a&&(u=u.negate()),l&&(d=d.negate()),d=new y(n.mul(d.px,t.beta),d.py,d.pz),u.add(d)}multiply(e){let t,i;let{endo:s,n:a}=r;if(eS("scalar",e,tt,a),s){let{k1neg:r,k1:a,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(a),{p:d,f:h}=this.wNAF(l);c=b.constTimeNegate(r,c),d=b.constTimeNegate(o,d),d=new y(n.mul(d.px,s.beta),d.py,d.pz),t=c.add(d),i=u.add(h)}else{let{p:r,f:n}=this.wNAF(e);t=r,i=n}return y.normalizeZ([t,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=y.BASE,i=(e,t)=>t!==te&&t!==tt&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return f(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===tt)return!0;if(t)return t(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===tt?this:t?t(y,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return el("isCompressed",e),this.assertValidity(),s(y,this,e)}toHex(e=!0){return el("isCompressed",e),ef(this.toRawBytes(e))}}y.BASE=new y(r.Gx,r.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);let{endo:g,nBitLength:m}=r,b=(t=g?Math.ceil(m/2):m,{constTimeNegate:eX,hasPrecomputes:e=>1!==e8(e),unsafeLadder(e,t,r=y.ZERO){let n=e;for(;t>eY;)t&eQ&&(r=r.add(n)),n=n.double(),t>>=eQ;return r},precomputeWindow(e,r){let{windows:n,windowSize:i}=e1(r,t),s=[],a=e,o=a;for(let e=0;e<n;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(e,r,n){let i=y.ZERO,s=y.BASE,a=e1(e,t);for(let e=0;e<a.windows;e++){let{nextN:t,offset:o,isZero:l,isNeg:c,isNegF:u,offsetF:d}=e2(n,e,a);n=t,l?s=s.add(eX(u,r[d])):i=i.add(eX(c,r[o]))}return{p:i,f:s}},wNAFUnsafe(e,r,n,i=y.ZERO){let s=e1(e,t);for(let e=0;e<s.windows&&n!==eY;e++){let{nextN:t,offset:a,isZero:o,isNeg:l}=e2(n,e,s);if(n=t,!o){let e=r[a];i=i.add(l?e.negate():e)}}return i},getPrecomputes(e,t,r){let n=e3.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&e3.set(t,r(n))),n},wNAFCached(e,t,r){let n=e8(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=e8(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){e0(r,t),e5.set(e,r),e3.delete(e)}});return{CURVE:r,ProjectivePoint:y,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:function(e){return eI(e,tt,r.n)}}}({...t,toBytes(e,t,n){let i=t.toAffine(),s=r.toBytes(i.x);return(el("isCompressed",n),n)?eE(Uint8Array.from([t.hasEvenY()?2:3]),s):eE(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],i=e.subarray(1);if(t===a&&(2===n||3===n)){let e;let t=em(i);if(!eI(t,tt,r.ORDER))throw Error("Point is not on curve");let s=d(t);try{e=r.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&tt)===tt)&&(e=r.neg(e)),{x:t,y:e}}if(t===o&&4===n)return{x:r.fromBytes(i.subarray(0,r.BYTES)),y:r.fromBytes(i.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+a+", or uncompressed "+o+", got "+t)}}),f=(e,t,r)=>em(e.slice(t,r));class p{constructor(e,t,r){eS("r",e,tt,n),eS("s",t,tt,n),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){return new p(f(e=e_("compactSignature",e,2*i),0,i),f(e,i,2*i))}static fromDER(e){let{r:t,s:r}=e7.toSig(e_("DER",e));return new p(t,r)}assertValidity(){}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s,recovery:a}=this,o=m(e_("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw Error("recovery id invalid");let u=2===a||3===a?i+t.n:i;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&a)==0?"02":"03",h=c.fromHex(d+ef(ev(u,r.BYTES))),f=e$(u,n),p=l(-o*f),y=l(s*f),g=c.BASE.multiplyAndAddUnsafe(h,p,y);if(!g)throw Error("point at infinify");return g.assertValidity(),g}hasHighS(){return this.s>n>>tt}normalizeS(){return this.hasHighS()?new p(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return eg(this.toDERHex())}toDERHex(){return e7.hexFromSig(this)}toCompactRawBytes(){return eg(this.toCompactHex())}toCompactHex(){return ef(ev(this.r,i))+ef(ev(this.s,i))}}function y(e){if("bigint"==typeof e)return!1;if(e instanceof c)return!0;let n=e_("key",e).length,s=r.BYTES,a=s+1;if(!t.allowedPrivateKeyLengths&&i!==a)return n===a||n===2*s+1}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=em(e),r=8*e.length-s;return r>0?t>>BigInt(r):t},m=t.bits2int_modN||function(e){return l(g(e))},b=eA(s);function v(e){return eS("num < 2^"+s,e,te,b),ev(e,i)}let w={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(!0===y(e))throw Error("first arg must be private key");if(!1===y(t))throw Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,i,s=w){let{seed:a,k2sig:o}=function(e,i,s=w){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:o}=t,{lowS:d,prehash:f,extraEntropy:y}=s;null==d&&(d=!0),e=e_("msgHash",e),e4(s),f&&(e=e_("prehashed msgHash",a(e)));let b=m(e),_=u(i),E=[v(_),v(b)];if(null!=y&&!1!==y){let e=!0===y?o(r.BYTES):y;E.push(e_("extraEntropy",e))}return{seed:eE(...E),k2sig:function(e){let t=g(e);if(!h(t))return;let r=e$(t,n),i=c.BASE.multiply(t).toAffine(),s=l(i.x);if(s===te)return;let a=l(r*l(b+s*_));if(a===te)return;let o=(i.x===s?0:2)|Number(i.y&tt),u=a;if(d&&a>n>>tt)u=a>n>>tt?l(-a):a,o^=1;return new p(s,u,o)}}}(e,i,s);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=ek(e),i=ek(e),s=0,a=()=>{n.fill(1),i.fill(0),s=0},o=(...e)=>r(i,n,...e),l=(e=ek(0))=>{i=o(eT([0]),e),n=o(),0!==e.length&&(i=o(eT([1]),e),n=o())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return eE(...r)};return(e,t)=>{let r;for(a(),l(e);!(r=t(c()));)l();return a(),r}})(t.hash.outputLen,t.nByteLength,t.hmac)(a,o)},verify:function(e,r,i,s=_){let a,o;r=e_("msgHash",r),i=e_("publicKey",i);let{lowS:u,prehash:d,format:h}=s;if(e4(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw Error("format must be compact or der");let f="string"==typeof e||ea(e),y=!f&&!h&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(o=new p(e.r,e.s)),f){try{"compact"!==h&&(o=p.fromDER(e))}catch(e){if(!(e instanceof e7.Err))throw e}o||"der"===h||(o=p.fromCompact(e))}a=c.fromHex(i)}catch(e){return!1}if(!o||u&&o.hasHighS())return!1;d&&(r=t.hash(r));let{r:g,s:b}=o,v=m(r),w=e$(b,n),E=l(v*w),x=l(g*w),I=c.BASE.multiplyAndAddUnsafe(a,E,x)?.toAffine();return!!I&&l(I.x)===g},ProjectivePoint:c,Signature:p,utils:{isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=eJ(t.n);return function(e,t,r=!1){let n=e.length,i=eZ(t),s=eJ(t);if(n<16||n<s||n>1024)throw Error("expected "+s+"-1024 bytes of input, got "+n);let a=eM(r?eb(e):em(e),t-eD)+eD;return r?ew(a,i):ev(a,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>en(t,e,function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];P(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:$});return{...r(t),create:r}}({a:ta,b:BigInt(7),Fp:tu,n:ts,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-to*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=tc(t*e,ts),a=tc(-r*e,ts),o=eM(e-s*t-a*n,ts),l=eM(-s*r-a*t,ts),c=o>i,u=l>i;if(c&&(o=ts-o),u&&(l=ts-l),o>i||l>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:u,k2:l}}}},et),th={zero:48,nine:57,A:65,F:70,a:97,f:102};function tf(e){return e>=th.zero&&e<=th.nine?e-th.zero:e>=th.A&&e<=th.F?e-(th.A-10):e>=th.a&&e<=th.f?e-(th.a-10):void 0}let tp=new TextEncoder;class ty extends c{constructor(e){super(`Value \`${"object"==typeof e?h(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class tg extends c{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class tm extends c{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}class tb extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let tv={checksum:new tb(8192)}.checksum,tw=BigInt(0),t_=BigInt(1),tE=BigInt(2),tx=BigInt(7),tI=BigInt(256),tS=BigInt(113),tA=[],tk=[],tT=[];for(let e=0,t=t_,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],tA.push(2*(5*n+r)),tk.push((e+1)*(e+2)/2%64);let i=tw;for(let e=0;e<7;e++)(t=(t<<t_^(t>>tx)*tS)%tI)&tE&&(i^=t_<<(t_<<BigInt(e))-t_);tT.push(i)}let tC=H(tT,!0),tO=tC[0],tP=tC[1],tR=(e,t,r)=>r>32?Z(e,t,r):K(e,t,r),tD=(e,t,r)=>r>32?J(e,t,r):G(e,t,r);class tN extends M{constructor(e,t,r,n=!1,i=24){var s;if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,O(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=new Uint32Array((s=this.state).buffer,s.byteOffset,Math.floor(s.byteLength/4))}clone(){return this._cloneInto()}keccak(){L(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=tR(s,a,1)^r[n],l=tD(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=tk[r],s=tR(t,i,n),a=tD(t,i,n),o=tA[r];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=tO[n],e[1]^=tP[n]}N(r)}(this.state32,this.rounds),L(this.state32),this.posOut=0,this.pos=0}update(e){R(this),P(e=j(e));let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){R(this,!1),P(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return O(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(D(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,N(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new tN(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let tU=z(()=>new tN(136,1,32));function tB(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,n=tU(e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){let{size:r}=t,n=e;r&&(u(e,r),n=m(e,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);let s=i.length/2,a=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let r=tf(i.charCodeAt(t++)),n=tf(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new c(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);a[e]=16*r+n}return a}(e):e instanceof Uint8Array?e:new Uint8Array(e));return"Bytes"===r?n:y(n)}function tL(e,t={}){let{compressed:r}=t,{prefix:n,x:i,y:s}=e;if(!1===r||"bigint"==typeof i&&"bigint"==typeof s){if(4!==n)throw new tz({prefix:n,cause:new tF});return}if(!0===r||"bigint"==typeof i&&void 0===s){if(3!==n&&2!==n)throw new tz({prefix:n,cause:new t$});return}throw new tM({publicKey:e})}function tj(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new tq({publicKey:e});return 130===e.length?{prefix:4,x:BigInt(b(e,0,32)),y:BigInt(b(e,32,64))}:132===e.length?{prefix:Number(b(e,0,1)),x:BigInt(b(e,1,33)),y:BigInt(b(e,33,65))}:{prefix:Number(b(e,0,1)),x:BigInt(b(e,1,33))}}class tM extends c{constructor({publicKey:e}){super(`Value \`${h(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class tz extends c{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class t$ extends c{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class tF extends c{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class tq extends c{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${v(p(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}let tW=/^0x[a-fA-F0-9]{40}$/;function tV(e,t={}){let{strict:r=!0}=t;if(!tW.test(e))throw new tK({address:e,cause:new tG});if(r){if(e.toLowerCase()===e)return;if(tH(e)!==e)throw new tK({address:e,cause:new tZ})}}function tH(e){if(tv.has(e))return tv.get(e);tV(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=tB(function(e,t={}){let{size:r}=t,n=tp.encode(e);return"number"==typeof r?(!function(e,t){if(e.length>t)throw new tg({givenSize:e.length,maxSize:t})}(n,r),function(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new tm({size:e.length,targetSize:n,type:"Bytes"});let i=new Uint8Array(n);for(let t=0;t<n;t++){let s="right"===r;i[s?t:n-t-1]=e[s?t:e.length-t-1]}return i}(n,{dir:"right",size:r})):n}(t),{as:"Bytes"}),n=t.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&r[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let i=`0x${n.join("")}`;return tv.set(e,i),i}class tK extends c{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tG extends c{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class tZ extends c{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}var tJ=r(85205),tY=r(74772),tQ=r(57978),tX=r(21664),t0=r(46633),t1=r(13273),t2=r(21086),t3=r(84041),t5=r(27208),t8=r.n(t5),t6=r(80577);let t4={level:"info"},t9="custom_context";var t7=Object.defineProperty,re=(e,t,r)=>t in e?t7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rt=(e,t,r)=>re(e,"symbol"!=typeof t?t+"":t,r);class rr{constructor(e){rt(this,"nodeValue"),rt(this,"sizeInBytes"),rt(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class rn{constructor(e){rt(this,"lengthInNodes"),rt(this,"sizeInBytes"),rt(this,"head"),rt(this,"tail"),rt(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new rr(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}var ri=Object.defineProperty,rs=(e,t,r)=>t in e?ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ra=(e,t,r)=>rs(e,"symbol"!=typeof t?t+"":t,r);class ro{constructor(e,t=1024e3){ra(this,"logs"),ra(this,"level"),ra(this,"levelValue"),ra(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=t5.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new rn(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===t5.levels.values.error?console.error(e):t===t5.levels.values.warn?console.warn(e):t===t5.levels.values.debug?console.debug(e):t===t5.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,t6.u)({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new rn(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push((0,t6.u)({extraMetadata:e})),new Blob(t,{type:"application/json"})}}var rl=Object.defineProperty,rc=(e,t,r)=>t in e?rl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ru=(e,t,r)=>rc(e,"symbol"!=typeof t?t+"":t,r);class rd{constructor(e,t=1024e3){ru(this,"baseChunkLogger"),this.baseChunkLogger=new ro(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}var rh=Object.defineProperty,rf=(e,t,r)=>t in e?rh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rp=(e,t,r)=>rf(e,"symbol"!=typeof t?t+"":t,r);class ry{constructor(e,t=1024e3){rp(this,"baseChunkLogger"),this.baseChunkLogger=new ro(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var rg=Object.defineProperty,rm=Object.defineProperties,rb=Object.getOwnPropertyDescriptors,rv=Object.getOwnPropertySymbols,rw=Object.prototype.hasOwnProperty,r_=Object.prototype.propertyIsEnumerable,rE=(e,t,r)=>t in e?rg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rx=(e,t)=>{for(var r in t||(t={}))rw.call(t,r)&&rE(e,r,t[r]);if(rv)for(var r of rv(t))r_.call(t,r)&&rE(e,r,t[r]);return e},rI=(e,t)=>rm(e,rb(t));function rS(e,t=t9){return e[t]||""}function rA(e,t,r=t9){let n=function(e,t,r=t9){let n=rS(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=t9){return e[r]=t,e}(e.child({context:n}),n,r)}function rk(e){return"u">typeof e.loggerOverride&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,r;let n=new rd(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:t8()(rI(rx({},e.opts),{level:"trace",browser:rI(rx({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;let r=new ry(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:t8()(rI(rx({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}var rT=r(25566),rC=r(82957).lW;function rO(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function rP(e,t=[]){let r=[];return Object.keys(e).forEach(n=>{if(t.length&&!t.includes(n))return;let i=e[n];r.push(...i.accounts)}),r}function rR(e,t){return e.includes(":")?[e]:t.chains||[]}var rD=Object.defineProperty,rN=Object.defineProperties,rU=Object.getOwnPropertyDescriptors,rB=Object.getOwnPropertySymbols,rL=Object.prototype.hasOwnProperty,rj=Object.prototype.propertyIsEnumerable,rM=(e,t,r)=>t in e?rD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rz=(e,t)=>{for(var r in t||(t={}))rL.call(t,r)&&rM(e,r,t[r]);if(rB)for(var r of rB(t))rj.call(t,r)&&rM(e,r,t[r]);return e},r$=(e,t)=>rN(e,rU(t)),rF=(e,t,r)=>rM(e,"symbol"!=typeof t?t+"":t,r);let rq={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function rW(){return"u">typeof rT&&"u">typeof rT.versions&&"u">typeof rT.versions.node}function rV(){return!(0,o.getDocument)()&&!!(0,o.getNavigator)()&&"ReactNative"===navigator.product}function rH(){return!rW()&&!!(0,o.getNavigator)()&&!!(0,o.getDocument)()}function rK(){return rV()?rq.reactNative:rW()?rq.node:rH()?rq.browser:rq.unknown}function rG(){var e;try{return rV()&&"u">typeof global&&"u">typeof(null==global?void 0:global.Application)?null==(e=global.Application)?void 0:e.applicationId:void 0}catch{return}}function rZ(){return(0,l.D)()||{name:"",description:"",url:"",icons:[""]}}function rJ(e,t,r){let n=function(){if(rK()===rq.reactNative&&"u">typeof global&&"u">typeof(null==global?void 0:global.Platform)){let{OS:e,Version:t}=global.Platform;return[e,t].join("-")}let e=(0,s.qY)();if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;let t=rK();return t===rq.browser?[t,(null==(e=(0,o.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",r].join("-"),n,i].join("/")}function rY(e,t){return e.filter(e=>t.includes(e)).length===e.length}function rQ(e){return Object.fromEntries(e.entries())}function rX(e){return new Map(Object.entries(e))}function r0(e=a.FIVE_MINUTES,t){let r,n,i,s;let o=(0,a.toMiliseconds)(e||a.FIVE_MINUTES);return{resolve:e=>{i&&r&&(clearTimeout(i),r(e),s=Promise.resolve(e))},reject:e=>{i&&n&&(clearTimeout(i),n(e))},done:()=>new Promise((e,a)=>{if(s)return e(s);i=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),a(e)},o),r=e,n=a})}}function r1(e,t,r){return new Promise(async(n,i)=>{let s=setTimeout(()=>i(Error(r)),t);try{let t=await e;n(t)}catch(e){i(e)}clearTimeout(s)})}function r2(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function r3(e){let[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else if("id"===t&&Number.isInteger(Number(r)))n.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function r5(e,t){return(0,a.fromMiliseconds)((t||Date.now())+(0,a.toMiliseconds)(e))}function r8(e){return Date.now()>=(0,a.toMiliseconds)(e)}function r6(e,t){return`${e}${t?`:${t}`:""}`}function r4(e=[],t=[]){return[...new Set([...e,...t])]}async function r9({id:e,topic:t,wcDeepLink:r}){var n;try{if(!r)return;let i="string"==typeof r?JSON.parse(r):r,s=i?.href;if("string"!=typeof s)return;let a=function(e,t,r){let n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${t}${function(e,t=!1){let r=rC.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`}else i=`${i}/wc?${n}`;return i}(s,e,t),l=rK();if(l===rq.browser){let e;if(!(null!=(n=(0,o.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||a.startsWith("https://")||a.startsWith("http://"))&&(e="_blank"),window.open(a,e,"noreferrer noopener")}else l===rq.reactNative&&"u">typeof(null==global?void 0:global.Linking)&&await global.Linking.openURL(a)}catch(e){console.error(e)}}async function r7(e,t){let r="";try{if(rH()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function ne(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function nt(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function nr(){return"u">typeof rT&&"true"===rT.env.IS_VITEST}function nn(e){return rC.from(e,"base64").toString("utf-8")}class ni{constructor({limit:e}){rF(this,"limit"),rF(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){let e=this.set.values().next().value;e&&this.set.delete(e)}this.set.add(e)}}has(e){return this.set.has(e)}}let ns=BigInt(4294967296-1),na=BigInt(32);function no(e,t=!1){return t?{h:Number(e&ns),l:Number(e>>na&ns)}:{h:0|Number(e>>na&ns),l:0|Number(e&ns)}}function nl(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:a}=no(e[s],t);[n[s],i[s]]=[r,a]}return[n,i]}let nc=(e,t,r)=>e>>>r,nu=(e,t,r)=>e<<32-r|t>>>r,nd=(e,t,r)=>e>>>r|t<<32-r,nh=(e,t,r)=>e<<32-r|t>>>r,nf=(e,t,r)=>e<<64-r|t>>>r-32,np=(e,t,r)=>e>>>r-32|t<<64-r,ny=(e,t)=>t,ng=(e,t)=>e,nm=(e,t,r)=>e<<r|t>>>32-r,nb=(e,t,r)=>t<<r|e>>>32-r,nv=(e,t,r)=>t<<r-32|e>>>64-r,nw=(e,t,r)=>e<<r-32|t>>>64-r;function n_(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}}let nE=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),nx=(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,nI=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),nS=(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,nA=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),nk=(e,t,r,n,i,s)=>t+r+n+i+s+(e/4294967296|0)|0,nT="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function nC(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function nO(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function nP(e,...t){if(!nC(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function nR(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");nO(e.outputLen),nO(e.blockLen)}function nD(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function nN(e,t){nP(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function nU(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function nB(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function nL(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function nj(e,t){return e<<32-t|e>>>t}let nM=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function nz(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}let n$=nM?e=>e:e=>nz(e),nF=nM?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=nz(e[t]);return e},nq="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,nW=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nV(e){if(nP(e),nq)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=nW[e[r]];return t}let nH={_0:48,_9:57,A:65,F:70,a:97,f:102};function nK(e){return e>=nH._0&&e<=nH._9?e-nH._0:e>=nH.A&&e<=nH.F?e-(nH.A-10):e>=nH.a&&e<=nH.f?e-(nH.a-10):void 0}function nG(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(nq)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=nK(e.charCodeAt(i)),s=nK(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n}function nZ(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function nJ(e){return"string"==typeof e&&(e=nZ(e)),nP(e),e}function nY(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];nP(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class nQ{}function nX(e){let t=t=>e().update(nJ(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function n0(e=32){if(nT&&"function"==typeof nT.getRandomValues)return nT.getRandomValues(new Uint8Array(e));if(nT&&"function"==typeof nT.randomBytes)return Uint8Array.from(nT.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}let n1=BigInt(0),n2=BigInt(1),n3=BigInt(2),n5=BigInt(7),n8=BigInt(256),n6=BigInt(113),n4=[],n9=[],n7=[];for(let e=0,t=n2,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],n4.push(2*(5*n+r)),n9.push((e+1)*(e+2)/2%64);let i=n1;for(let e=0;e<7;e++)(t=(t<<n2^(t>>n5)*n6)%n8)&n3&&(i^=n2<<(n2<<BigInt(e))-n2);n7.push(i)}let ie=nl(n7,!0),it=ie[0],ir=ie[1],ii=(e,t,r)=>r>32?nv(e,t,r):nm(e,t,r),is=(e,t,r)=>r>32?nw(e,t,r):nb(e,t,r);class ia extends nQ{constructor(e,t,r,n=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,nO(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nU(this.state)}clone(){return this._cloneInto()}keccak(){nF(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=ii(s,a,1)^r[n],l=is(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=n9[r],s=ii(t,i,n),a=is(t,i,n),o=n4[r];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=it[n],e[1]^=ir[n]}nB(r)}(this.state32,this.rounds),nF(this.state32),this.posOut=0,this.pos=0}update(e){nD(this),nP(e=nJ(e));let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){nD(this,!1),nP(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nO(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nN(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,nB(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new ia(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let io=nX(()=>new ia(136,1,32));class il extends nQ{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=nL(this.buffer)}update(e){nD(this),nP(e=nJ(e));let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let t=nL(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nD(this),nN(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;t[s++]=128,nB(this.buffer.subarray(s)),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);let a=nL(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let ic=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),iu=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),id=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ih=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ip=new Uint32Array(64);class iy extends il{constructor(e=32){super(64,e,8,!1),this.A=0|ic[0],this.B=0|ic[1],this.C=0|ic[2],this.D=0|ic[3],this.E=0|ic[4],this.F=0|ic[5],this.G=0|ic[6],this.H=0|ic[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)ip[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=ip[e-15],r=ip[e-2],n=nj(t,7)^nj(t,18)^t>>>3,i=nj(r,17)^nj(r,19)^r>>>10;ip[e]=i+ip[e-7]+n+ip[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){var u,d,h,f;let t=c+(nj(a,6)^nj(a,11)^nj(a,25))+((u=a)&o^~u&l)+ih[e]+ip[e]|0,p=(nj(r,2)^nj(r,13)^nj(r,22))+((d=r)&(h=n)^d&(f=i)^h&f)|0;c=l,l=o,o=a,a=s+t|0,s=i,i=n,n=r,r=t+p|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,s,a,o,l,c)}roundClean(){nB(ip)}destroy(){this.set(0,0,0,0,0,0,0,0),nB(this.buffer)}}let ig=nl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),im=ig[0],ib=ig[1],iv=new Uint32Array(80),iw=new Uint32Array(80);class i_ extends il{constructor(e=64){super(128,e,16,!1),this.Ah=0|id[0],this.Al=0|id[1],this.Bh=0|id[2],this.Bl=0|id[3],this.Ch=0|id[4],this.Cl=0|id[5],this.Dh=0|id[6],this.Dl=0|id[7],this.Eh=0|id[8],this.El=0|id[9],this.Fh=0|id[10],this.Fl=0|id[11],this.Gh=0|id[12],this.Gl=0|id[13],this.Hh=0|id[14],this.Hl=0|id[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:y}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)iv[r]=e.getUint32(t),iw[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|iv[e-15],r=0|iw[e-15],n=nd(t,r,1)^nd(t,r,8)^nc(t,r,7),i=nh(t,r,1)^nh(t,r,8)^nu(t,r,7),s=0|iv[e-2],a=0|iw[e-2],o=nd(s,a,19)^nf(s,a,61)^nc(s,a,6),l=nI(i,nh(s,a,19)^np(s,a,61)^nu(s,a,6),iw[e-7],iw[e-16]),c=nS(l,n,o,iv[e-7],iv[e-16]);iv[e]=0|c,iw[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:o,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:y,Hh:g,Hl:m}=this;for(let e=0;e<80;e++){let t=nd(u,d,14)^nd(u,d,18)^nf(u,d,41),b=nh(u,d,14)^nh(u,d,18)^np(u,d,41),v=u&h^~u&p,w=nA(m,b,d&f^~d&y,ib[e],iw[e]),_=nk(w,g,t,v,im[e],iv[e]),E=0|w,x=nd(r,n,28)^nf(r,n,34)^nf(r,n,39),I=nh(r,n,28)^np(r,n,34)^np(r,n,39),S=r&i^r&a^i&a,A=n&s^n&o^s&o;g=0|p,m=0|y,p=0|h,y=0|f,h=0|u,f=0|d,({h:u,l:d}=n_(0|l,0|c,0|_,0|E)),l=0|a,c=0|o,a=0|i,o=0|s,i=0|r,s=0|n;let k=nE(E,I,A);r=nx(k,_,x,S),n=0|k}({h:r,l:n}=n_(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=n_(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:o}=n_(0|this.Ch,0|this.Cl,0|a,0|o)),({h:l,l:c}=n_(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:d}=n_(0|this.Eh,0|this.El,0|u,0|d)),({h,l:f}=n_(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:y}=n_(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:m}=n_(0|this.Hh,0|this.Hl,0|g,0|m)),this.set(r,n,i,s,a,o,l,c,u,d,h,f,p,y,g,m)}roundClean(){nB(iv,iw)}destroy(){nB(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class iE extends i_{constructor(){super(48),this.Ah=0|iu[0],this.Al=0|iu[1],this.Bh=0|iu[2],this.Bl=0|iu[3],this.Ch=0|iu[4],this.Cl=0|iu[5],this.Dh=0|iu[6],this.Dl=0|iu[7],this.Eh=0|iu[8],this.El=0|iu[9],this.Fh=0|iu[10],this.Fl=0|iu[11],this.Gh=0|iu[12],this.Gl=0|iu[13],this.Hh=0|iu[14],this.Hl=0|iu[15]}}let ix=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class iI extends i_{constructor(){super(32),this.Ah=0|ix[0],this.Al=0|ix[1],this.Bh=0|ix[2],this.Bl=0|ix[3],this.Ch=0|ix[4],this.Cl=0|ix[5],this.Dh=0|ix[6],this.Dl=0|ix[7],this.Eh=0|ix[8],this.El=0|ix[9],this.Fh=0|ix[10],this.Fl=0|ix[11],this.Gh=0|ix[12],this.Gl=0|ix[13],this.Hh=0|ix[14],this.Hl=0|ix[15]}}let iS=nX(()=>new iy),iA=nX(()=>new i_),ik=nX(()=>new iE),iT=nX(()=>new iI),iC=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),iO=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),iP=new Uint32Array(32);function iR(e,t,r,n,i,s){let a=i[s],o=i[s+1],l=iP[2*e],c=iP[2*e+1],u=iP[2*t],d=iP[2*t+1],h=iP[2*r],f=iP[2*r+1],p=iP[2*n],y=iP[2*n+1],g=nE(l,u,a);c=nx(g,c,d,o),l=0|g,({Dh:y,Dl:p}={Dh:y^c,Dl:p^l}),({Dh:y,Dl:p}={Dh:ny(y,p),Dl:ng(y)}),({h:f,l:h}=n_(f,h,y,p)),({Bh:d,Bl:u}={Bh:d^f,Bl:u^h}),({Bh:d,Bl:u}={Bh:nd(d,u,24),Bl:nh(d,u,24)}),iP[2*e]=l,iP[2*e+1]=c,iP[2*t]=u,iP[2*t+1]=d,iP[2*r]=h,iP[2*r+1]=f,iP[2*n]=p,iP[2*n+1]=y}function iD(e,t,r,n,i,s){let a=i[s],o=i[s+1],l=iP[2*e],c=iP[2*e+1],u=iP[2*t],d=iP[2*t+1],h=iP[2*r],f=iP[2*r+1],p=iP[2*n],y=iP[2*n+1],g=nE(l,u,a);c=nx(g,c,d,o),l=0|g,({Dh:y,Dl:p}={Dh:y^c,Dl:p^l}),({Dh:y,Dl:p}={Dh:nd(y,p,16),Dl:nh(y,p,16)}),({h:f,l:h}=n_(f,h,y,p)),({Bh:d,Bl:u}={Bh:d^f,Bl:u^h}),({Bh:d,Bl:u}={Bh:nf(d,u,63),Bl:np(d,u,63)}),iP[2*e]=l,iP[2*e+1]=c,iP[2*t]=u,iP[2*t+1]=d,iP[2*r]=h,iP[2*r+1]=f,iP[2*n]=p,iP[2*n+1]=y}class iN extends nQ{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,nO(e),nO(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=nU(this.buffer)}update(e){nD(this),nP(e=nJ(e));let{blockLen:t,buffer:r,buffer32:n}=this,i=e.length,s=e.byteOffset,a=e.buffer;for(let o=0;o<i;){this.pos===t&&(nF(n),this.compress(n,0,!1),nF(n),this.pos=0);let l=Math.min(t-this.pos,i-o),c=s+o;if(l===t&&!(c%4)&&o+l<i){let e=new Uint32Array(a,c,Math.floor((i-o)/4));nF(e);for(let r=0;o+t<i;r+=n.length,o+=t)this.length+=t,this.compress(e,r,!1);nF(e);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,this.length+=l,o+=l}return this}digestInto(e){nD(this),nN(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,nB(this.buffer.subarray(t)),nF(r),this.compress(r,0,!0),nF(r);let n=nU(e);this.get().forEach((e,t)=>n[t]=n$(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:n,destroyed:i,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=n,e.length=r,e.pos=a,e.outputLen=s,e}clone(){return this._cloneInto()}}class iU extends iN{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|iO[0],this.v0h=0|iO[1],this.v1l=0|iO[2],this.v1h=0|iO[3],this.v2l=0|iO[4],this.v2h=0|iO[5],this.v3l=0|iO[6],this.v3h=0|iO[7],this.v4l=0|iO[8],this.v4h=0|iO[9],this.v5l=0|iO[10],this.v5h=0|iO[11],this.v6l=0|iO[12],this.v6h=0|iO[13],this.v7l=0|iO[14],this.v7h=0|iO[15],function(e,t={},r,n,i){if(nO(64),e<0||e>64)throw Error("outputLen bigger than keyLen");let{key:s,salt:a,personalization:o}=t;if(void 0!==s&&(s.length<1||s.length>64))throw Error("key length must be undefined or 1.."+r);if(void 0!==a&&16!==a.length)throw Error("salt must be undefined or 16");if(void 0!==o&&16!==o.length)throw Error("personalization must be undefined or 16")}(t,e,64,0,0);let{key:r,personalization:n,salt:i}=e,s=0;if(void 0!==r&&(s=(r=nJ(r)).length),this.v0l^=this.outputLen|s<<8|16842752,void 0!==i){let e=nU(i=nJ(i));this.v4l^=n$(e[0]),this.v4h^=n$(e[1]),this.v5l^=n$(e[2]),this.v5h^=n$(e[3])}if(void 0!==n){let e=nU(n=nJ(n));this.v6l^=n$(e[0]),this.v6h^=n$(e[1]),this.v7l^=n$(e[2]),this.v7h^=n$(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:n,v2l:i,v2h:s,v3l:a,v3h:o,v4l:l,v4h:c,v5l:u,v5h:d,v6l:h,v6h:f,v7l:p,v7h:y}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,y){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|l,this.v4h=0|c,this.v5l=0|u,this.v5h=0|d,this.v6l=0|h,this.v6h=0|f,this.v7l=0|p,this.v7h=0|y}compress(e,t,r){this.get().forEach((e,t)=>iP[t]=e),iP.set(iO,16);let{h:n,l:i}=no(BigInt(this.length));iP[24]=iO[8]^i,iP[25]=iO[9]^n,r&&(iP[28]=~iP[28],iP[29]=~iP[29]);let s=0;for(let r=0;r<12;r++)iR(0,4,8,12,e,t+2*iC[s++]),iD(0,4,8,12,e,t+2*iC[s++]),iR(1,5,9,13,e,t+2*iC[s++]),iD(1,5,9,13,e,t+2*iC[s++]),iR(2,6,10,14,e,t+2*iC[s++]),iD(2,6,10,14,e,t+2*iC[s++]),iR(3,7,11,15,e,t+2*iC[s++]),iD(3,7,11,15,e,t+2*iC[s++]),iR(0,5,10,15,e,t+2*iC[s++]),iD(0,5,10,15,e,t+2*iC[s++]),iR(1,6,11,12,e,t+2*iC[s++]),iD(1,6,11,12,e,t+2*iC[s++]),iR(2,7,8,13,e,t+2*iC[s++]),iD(2,7,8,13,e,t+2*iC[s++]),iR(3,4,9,14,e,t+2*iC[s++]),iD(3,4,9,14,e,t+2*iC[s++]);this.v0l^=iP[0]^iP[16],this.v0h^=iP[1]^iP[17],this.v1l^=iP[2]^iP[18],this.v1h^=iP[3]^iP[19],this.v2l^=iP[4]^iP[20],this.v2h^=iP[5]^iP[21],this.v3l^=iP[6]^iP[22],this.v3h^=iP[7]^iP[23],this.v4l^=iP[8]^iP[24],this.v4h^=iP[9]^iP[25],this.v5l^=iP[10]^iP[26],this.v5h^=iP[11]^iP[27],this.v6l^=iP[12]^iP[28],this.v6h^=iP[13]^iP[29],this.v7l^=iP[14]^iP[30],this.v7h^=iP[15]^iP[31],nB(iP)}destroy(){this.destroyed=!0,nB(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let iB=function(e){let t=(t,r)=>e(r).update(nJ(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new iU(e));function iL(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+rC.from(io(r)).toString("hex")}async function ij(e,t,r,n,i,s){switch(r.t){case"eip191":return await function(e,t,r){let n=function(e){if(130!==e.length&&132!==e.length)throw new A({signature:e});let t=BigInt(b(e,0,32)),r=BigInt(b(e,32,64)),n=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return function(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return e%2==0?1:0;throw new T({value:e})}(t)}catch{throw new k({value:t})}})();return void 0===n?{r:t,s:r}:{r:t,s:r,yParity:n}}(r);return(function(e,t={}){let r=tB(`0x${(function(e,t={}){tL(e);let{prefix:r,x:n,y:i}=e,{includePrefix:s=!0}=t;return function(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}(s?g(r,{size:1}):"0x",g(n,{size:32}),"bigint"==typeof i?g(i,{size:32}):"0x")})(e).slice(4)}`).substring(26);return function(e,t={}){let{checksum:r=!1}=t;return(tV(e),r)?tH(e):e}(`0x${r}`,t)})(function(e){let{payload:t,signature:r}=e,{r:n,s:i,yParity:s}=r;return function(e){let t=(()=>{if(function(e,t={}){let{strict:r=!1}=t;try{return!function(e,t={}){let{strict:r=!1}=t;if(!e||"string"!=typeof e)throw new _(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new E(e)}(e,{strict:r}),!0}catch{return!1}}(e))return tj(e);if(function(e){try{return!function(e){if(!(e instanceof Uint8Array)&&(!e||"object"!=typeof e||!("BYTES_PER_ELEMENT"in e)||1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name))throw new ty(e)}(e),!0}catch{return!1}}(e))return tj(y(e));let{prefix:t,x:r,y:n}=e;return"bigint"==typeof r&&"bigint"==typeof n?{prefix:t??4,x:r,y:n}:{prefix:t,x:r}})();return tL(t),t}(new td.Signature(BigInt(n),BigInt(i)).addRecoveryBit(s).recoverPublicKey(p(t).substring(2)))}({payload:iL(t),signature:n})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await iM(e,t,r.s,n,i,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function iM(e,t,r,n,i,s){let a=rO(n);if(!a.namespace||!a.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{let a="0x1626ba7e",o=r.substring(2),l=(o.length/2).toString(16).padStart(64,"0"),c=(t.startsWith("0x")?t:iL(t)).substring(2),u=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:a+c+"0000000000000000000000000000000000000000000000000000000000000040"+l+o},"latest"]})}),{result:d}=await u.json();return!!d&&d.slice(0,a.length).toLowerCase()===a.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}function iz(e){let t=new Uint8Array(iS(function(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if("object"==typeof e&&null!=e&&e.data)return new Uint8Array(Object.values(e.data));if("object"==typeof e&&e)return new Uint8Array(Object.values(e));throw Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}(e)));return tJ.Z.encode(t)}function i$(e){let t=rC.from(e,"base64"),r=(0,tY.J)(t).txn;if(!r)throw Error("Invalid signed transaction: missing 'txn' field");let n=(0,tQ.c)(r),i=rC.from("TX"),s=iT(rC.concat([i,rC.from(n)]));return tX.pJ.encode(s).replace(/=+$/,"")}function iF(e){let t=[],r=BigInt(e);for(;r>=BigInt(128);)t.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return t.push(Number(r)),rC.from(t)}var iq=Object.defineProperty,iW=Object.defineProperties,iV=Object.getOwnPropertyDescriptors,iH=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,iG=Object.prototype.propertyIsEnumerable,iZ=(e,t,r)=>t in e?iq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iJ=(e,t)=>{for(var r in t||(t={}))iK.call(t,r)&&iZ(e,r,t[r]);if(iH)for(var r of iH(t))iG.call(t,r)&&iZ(e,r,t[r]);return e},iY=(e,t)=>iW(e,iV(t));let iQ=e=>e?.split(":"),iX=e=>{let t=e&&iQ(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},i0=e=>{let t=e&&iQ(e);if(t)return t[2]+":"+t[3]},i1=e=>{let t=e&&iQ(e);if(t)return t.pop()};async function i2(e){let{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=i3(i,i.iss),a=i1(i.iss);return await ij(a,s,n,i0(i.iss),r)}let i3=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,n=i1(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,o=`Chain ID: ${iX(t)}`,l=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,p=i7(e.resources);return p&&(i=function(e="",t){i5(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let n=[],i=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let a=Object.keys(s).map(t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`));n.push(a.join(", ").replace(".,","."))});let s=n.join(" "),a=`${r}${s}`;return`${e?e+" ":""}${a}`}(i,i6(p))),[r,n,"",i,"",s,a,o,l,c,u,d,h,f].filter(e=>null!=e).join(`
`)};function i5(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function i8(e){return i5(e),`urn:recap:${rC.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function i6(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(rC.from(t,"base64").toString("utf-8")));return i5(r),r}function i4(e){var t;let r=i6(e);i5(r);let n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map(e=>e.split("/")[1]):[]}function i9(e){let t=i6(e);i5(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function i7(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function se(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function st(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function sr(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function sn(e,...t){if(!se(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function si(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function ss(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function sa(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let so=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function sl(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(se(e))e=sd(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function sc(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function su(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}function sd(e){return Uint8Array.from(e)}let sh=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),sf=sh("expand 16-byte k"),sp=sh("expand 32-byte k"),sy=ss(sf),sg=ss(sp);function sm(e,t){return e<<t|e>>>32-t}function sb(e){return e.byteOffset%4==0}let sv=4294967296-1,sw=new Uint32Array,s_=(e,t)=>255&e[t++]|(255&e[t++])<<8;class sE{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,sn(e=sl(e),32);let t=s_(e,0),r=s_(e,2),n=s_(e,4),i=s_(e,6),s=s_(e,8),a=s_(e,10),o=s_(e,12),l=s_(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|n<<6)&7939,this.r[3]=(n>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|o<<5)&8065,this.r[8]=(o>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=s_(e,16+2*t)}process(e,t,r=!1){let{h:n,r:i}=this,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],y=s_(e,t+0),g=s_(e,t+2),m=s_(e,t+4),b=s_(e,t+6),v=s_(e,t+8),w=s_(e,t+10),_=s_(e,t+12),E=s_(e,t+14),x=n[0]+(8191&y),I=n[1]+((y>>>13|g<<3)&8191),S=n[2]+((g>>>10|m<<6)&8191),A=n[3]+((m>>>7|b<<9)&8191),k=n[4]+((b>>>4|v<<12)&8191),T=n[5]+(v>>>1&8191),C=n[6]+((v>>>14|w<<2)&8191),O=n[7]+((w>>>11|_<<5)&8191),P=n[8]+((_>>>8|E<<8)&8191),R=n[9]+(E>>>5|(r?0:2048)),D=0,N=0+x*s+5*p*I+5*f*S+5*h*A+5*d*k;D=N>>>13,N&=8191,N+=5*u*T+5*c*C+5*l*O+5*o*P+5*a*R,D+=N>>>13,N&=8191;let U=D+x*a+I*s+5*p*S+5*f*A+5*h*k;D=U>>>13,U&=8191,U+=5*d*T+5*u*C+5*c*O+5*l*P+5*o*R,D+=U>>>13,U&=8191;let B=D+x*o+I*a+S*s+5*p*A+5*f*k;D=B>>>13,B&=8191,B+=5*h*T+5*d*C+5*u*O+5*c*P+5*l*R,D+=B>>>13,B&=8191;let L=D+x*l+I*o+S*a+A*s+5*p*k;D=L>>>13,L&=8191,L+=5*f*T+5*h*C+5*d*O+5*u*P+5*c*R,D+=L>>>13,L&=8191;let j=D+x*c+I*l+S*o+A*a+k*s;D=j>>>13,j&=8191,j+=5*p*T+5*f*C+5*h*O+5*d*P+5*u*R,D+=j>>>13,j&=8191;let M=D+x*u+I*c+S*l+A*o+k*a;D=M>>>13,M&=8191,M+=T*s+5*p*C+5*f*O+5*h*P+5*d*R,D+=M>>>13,M&=8191;let z=D+x*d+I*u+S*c+A*l+k*o;D=z>>>13,z&=8191,z+=T*a+C*s+5*p*O+5*f*P+5*h*R,D+=z>>>13,z&=8191;let $=D+x*h+I*d+S*u+A*c+k*l;D=$>>>13,$&=8191,$+=T*o+C*a+O*s+5*p*P+5*f*R,D+=$>>>13,$&=8191;let F=D+x*f+I*h+S*d+A*u+k*c;D=F>>>13,F&=8191,F+=T*l+C*o+O*a+P*s+5*p*R,D+=F>>>13,F&=8191;let q=D+x*p+I*f+S*h+A*d+k*u;D=q>>>13,q&=8191,q+=T*c+C*l+O*o+P*a+R*s,D+=q>>>13,q&=8191,N=8191&(D=(D=(D<<2)+D|0)+N|0),D>>>=13,U+=D,n[0]=N,n[1]=U,n[2]=B,n[3]=L,n[4]=j,n[5]=M,n[6]=z,n[7]=$,n[8]=F,n[9]=q}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;sa(r)}update(e){si(this),sn(e=sl(e));let{buffer:t,blockLen:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(r-this.pos,n-i);if(s===r){for(;r<=n-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){sa(this.h,this.r,this.buffer,this.pad)}digestInto(e){si(this),function(e,t){sn(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let sx=function(e){let t=(t,r)=>e(r).update(sl(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new sE(e)),sI=function(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:a}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return sr(i),sr(a),st(s),st(r),(t,o,l,c,u=0)=>{sn(t),sn(o),sn(l);let d=l.length;if(void 0===c&&(c=new Uint8Array(d)),sn(c),sr(u),u<0||u>=sv)throw Error("arx: counter overflow");if(c.length<d)throw Error(`arx: output (${c.length}) is shorter than data (${d})`);let h=[],f=t.length,p,y;if(32===f)h.push(p=sd(t)),y=sg;else if(16===f&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),y=sy,h.push(p);else throw Error(`arx: invalid 32-byte key, got length=${f}`);sb(o)||h.push(o=sd(o));let g=ss(p);if(n){if(24!==o.length)throw Error("arx: extended nonce must be 24 bytes");n(y,g,ss(o.subarray(0,16)),g),o=o.subarray(16)}let m=16-i;if(m!==o.length)throw Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){let e=new Uint8Array(12);e.set(o,s?0:12-o.length),o=e,h.push(o)}return function(e,t,r,n,i,s,a,o){let l=i.length,c=new Uint8Array(64),u=ss(c),d=sb(i)&&sb(s),h=d?ss(i):sw,f=d?ss(s):sw;for(let p=0;p<l;a++){if(e(t,r,n,u,a,o),a>=sv)throw Error("arx: counter overflow");let y=Math.min(64,l-p);if(d&&64===y){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=h[r]^u[t];p+=64;continue}for(let e=0,t;e<y;e++)s[t=p+e]=i[t]^c[e];p+=y}}(e,y,g,ss(o),l,c,u,a),sa(...h),c}}(function(e,t,r,n,i,s=20){let a=e[0],o=e[1],l=e[2],c=e[3],u=t[0],d=t[1],h=t[2],f=t[3],p=t[4],y=t[5],g=t[6],m=t[7],b=r[0],v=r[1],w=r[2],_=a,E=o,x=l,I=c,S=u,A=d,k=h,T=f,C=p,O=y,P=g,R=m,D=i,N=b,U=v,B=w;for(let e=0;e<s;e+=2)C=C+(D=sm(D^(_=_+S|0),16))|0,_=_+(S=sm(S^C,12))|0,C=C+(D=sm(D^_,8))|0,S=sm(S^C,7),O=O+(N=sm(N^(E=E+A|0),16))|0,E=E+(A=sm(A^O,12))|0,O=O+(N=sm(N^E,8))|0,A=sm(A^O,7),P=P+(U=sm(U^(x=x+k|0),16))|0,x=x+(k=sm(k^P,12))|0,P=P+(U=sm(U^x,8))|0,k=sm(k^P,7),R=R+(B=sm(B^(I=I+T|0),16))|0,I=I+(T=sm(T^R,12))|0,R=R+(B=sm(B^I,8))|0,T=sm(T^R,7),P=P+(B=sm(B^(_=_+A|0),16))|0,_=_+(A=sm(A^P,12))|0,P=P+(B=sm(B^_,8))|0,A=sm(A^P,7),R=R+(D=sm(D^(E=E+k|0),16))|0,E=E+(k=sm(k^R,12))|0,R=R+(D=sm(D^E,8))|0,k=sm(k^R,7),C=C+(N=sm(N^(x=x+T|0),16))|0,x=x+(T=sm(T^C,12))|0,C=C+(N=sm(N^x,8))|0,T=sm(T^C,7),O=O+(U=sm(U^(I=I+S|0),16))|0,I=I+(S=sm(S^O,12))|0,O=O+(U=sm(U^I,8))|0,S=sm(S^O,7);let L=0;n[L++]=a+_|0,n[L++]=o+E|0,n[L++]=l+x|0,n[L++]=c+I|0,n[L++]=u+S|0,n[L++]=d+A|0,n[L++]=h+k|0,n[L++]=f+T|0,n[L++]=p+C|0,n[L++]=y+O|0,n[L++]=g+P|0,n[L++]=m+R|0,n[L++]=i+D|0,n[L++]=b+N|0,n[L++]=v+U|0,n[L++]=w+B|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),sS=new Uint8Array(16),sA=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(sS.subarray(r))},sk=new Uint8Array(32);function sT(e,t,r,n,i){let s=e(t,r,sk),a=sx.create(s);i&&sA(a,i),sA(a,n);let o=function(e,t,r){st(r);let n=new Uint8Array(16),i=new DataView(n.buffer,n.byteOffset,n.byteLength);return su(i,0,BigInt(t),r),su(i,8,BigInt(e),r),n}(n.length,i?i.length:0,!0);a.update(o);let l=a.digest();return sa(s,o),l}let sC=((e,t)=>{function r(n,...i){if(sn(n),!so)throw Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){let t=i[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?sn(t):sn(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==i[1]&&sn(i[1]);let a=t(n,...i),o=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");sn(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,sn(e),o(a.encrypt.length,t),a.encrypt(e,t)},decrypt(e,t){if(sn(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return o(a.decrypt.length,t),a.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(n,i){let s=n.length;(i=sc(s+16,i,!1)).set(n);let a=i.subarray(0,-16);sI(e,t,a,a,1);let o=sT(sI,e,t,a,r);return i.set(o,s),sa(o),i},decrypt(n,i){i=sc(n.length-16,i,!1);let s=n.subarray(0,-16),a=n.subarray(-16),o=sT(sI,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(a,o))throw Error("invalid tag");return i.set(n.subarray(0,-16)),sI(e,t,i,i,1),sa(o),i}}));class sO extends nQ{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,nR(e);let r=nJ(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),nB(i)}update(e){return nD(this),this.iHash.update(e),this}digestInto(e){nD(this),nP(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let sP=(e,t,r)=>new sO(e,t).update(r).digest();sP.create=(e,t)=>new sO(e,t);let sR=Uint8Array.from([0]),sD=Uint8Array.of(),sN=(e,t,r,n,i)=>{var s;return function(e,t,r,n=32){nR(e),nO(n);let i=e.outputLen;if(n>255*i)throw Error("Length should be <= 255*HashLen");let s=Math.ceil(n/i);void 0===r&&(r=sD);let a=new Uint8Array(s*i),o=sP.create(e,t),l=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let e=0;e<s;e++)sR[0]=e+1,l.update(0===e?sD:c).update(r).update(sR).digestInto(c),a.set(c,i*e),o._cloneInto(l);return o.destroy(),l.destroy(),nB(c,sR),a.slice(0,n)}(e,(s=r,nR(e),void 0===s&&(s=new Uint8Array(e.outputLen)),sP(e,nJ(s),nJ(t))),n,i)},sU=BigInt(0),sB=BigInt(1);function sL(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function sj(e,t,r=""){let n=nC(e),i=e?.length,s=void 0!==t;if(!n||s&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(s?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function sM(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function sz(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?sU:BigInt("0x"+e)}function s$(e){return nP(e),sz(nV(Uint8Array.from(e).reverse()))}function sF(e,t){return nG(e.toString(16).padStart(2*t,"0"))}function sq(e,t){return sF(e,t).reverse()}function sW(e,t,r){let n;if("string"==typeof t)try{n=nG(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(nC(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}let sV=e=>"bigint"==typeof e&&sU<=e;function sH(e,t,r,n){if(!(sV(t)&&sV(r)&&sV(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function sK(e){let t;for(t=0;e>sU;e>>=sB,t+=1);return t}let sG=e=>(sB<<BigInt(e))-sB;function sZ(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let i=e[t];if(n&&void 0===i)return;let s=typeof i;if(s!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function sJ(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}let sY=BigInt(0),sQ=BigInt(1),sX=BigInt(2),s0=BigInt(3),s1=BigInt(4),s2=BigInt(5),s3=BigInt(7),s5=BigInt(8),s8=BigInt(9),s6=BigInt(16);function s4(e,t){let r=e%t;return r>=sY?r:t+r}function s9(e,t,r){let n=e;for(;t-- >sY;)n*=n,n%=r;return n}function s7(e,t){if(e===sY)throw Error("invert: expected non-zero number");if(t<=sY)throw Error("invert: expected positive modulus, got "+t);let r=s4(e,t),n=t,i=sY,s=sQ;for(;r!==sY;){let e=n/r,t=n%r,a=i-s*e;n=r,r=t,i=s,s=a}if(n!==sQ)throw Error("invert: does not exist");return s4(i,t)}function ae(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function at(e,t){let r=(e.ORDER+sQ)/s1,n=e.pow(t,r);return ae(e,n,t),n}function ar(e,t){let r=(e.ORDER-s2)/s5,n=e.mul(t,sX),i=e.pow(n,r),s=e.mul(t,i),a=e.mul(e.mul(s,sX),i),o=e.mul(s,e.sub(a,e.ONE));return ae(e,o,t),o}function an(e){if(e<s0)throw Error("sqrt is not defined for small field");let t=e-sQ,r=0;for(;t%sX===sY;)t/=sX,r++;let n=sX,i=al(e);for(;1===aa(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return at;let s=i.pow(n,t),a=(t+sQ)/sX;return function(e,n){if(e.is0(n))return n;if(1!==aa(e,n))throw Error("Cannot find square root");let i=r,o=e.mul(e.ONE,s),l=e.pow(n,t),c=e.pow(n,a);for(;!e.eql(l,e.ONE);){if(e.is0(l))return e.ZERO;let t=1,r=e.sqr(l);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=sQ<<BigInt(i-t-1),s=e.pow(o,n);i=t,o=e.sqr(s),l=e.mul(l,o),c=e.mul(c,s)}return c}}let ai=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function as(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),s=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),s),n}function aa(e,t){let r=(e.ORDER-sQ)/sX,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),a=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!a)throw Error("invalid Legendre symbol result");return i?1:s?0:-1}function ao(e,t){void 0!==t&&nO(t);let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function al(e,t,r=!1,n={}){let i;if(e<=sY)throw Error("invalid field: expected ORDER > 0, got "+e);let s,a,o=!1,l;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(s=t.BITS),t.sqrt&&(a=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(o=t.modFromBytes),l=t.allowedLengths}else"number"==typeof t&&(s=t),n.sqrt&&(a=n.sqrt);let{nBitLength:c,nByteLength:u}=ao(e,s);if(u>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let d=Object.freeze({ORDER:e,isLE:r,BITS:c,BYTES:u,MASK:sG(c),ZERO:sY,ONE:sQ,allowedLengths:l,create:t=>s4(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return sY<=t&&t<e},is0:e=>e===sY,isValidNot0:e=>!d.is0(e)&&d.isValid(e),isOdd:e=>(e&sQ)===sQ,neg:t=>s4(-t,e),eql:(e,t)=>e===t,sqr:t=>s4(t*t,e),add:(t,r)=>s4(t+r,e),sub:(t,r)=>s4(t-r,e),mul:(t,r)=>s4(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<sY)throw Error("invalid exponent, negatives unsupported");if(r===sY)return e.ONE;if(r===sQ)return t;let n=e.ONE,i=t;for(;r>sY;)r&sQ&&(n=e.mul(n,i)),i=e.sqr(i),r>>=sQ;return n})(d,e,t),div:(t,r)=>s4(t*s7(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>s7(t,e),sqrt:a||(t=>(i||(i=e%s1===s0?at:e%s5===s2?ar:e%s6===s8?function(e){let t=al(e),r=an(e),n=r(t,t.neg(t.ONE)),i=r(t,n),s=r(t,t.neg(n)),a=(e+s3)/s6;return(e,t)=>{let r=e.pow(t,a),o=e.mul(r,n),l=e.mul(r,i),c=e.mul(r,s),u=e.eql(e.sqr(o),t),d=e.eql(e.sqr(l),t);r=e.cmov(r,o,u),o=e.cmov(c,l,d);let h=e.eql(e.sqr(o),t),f=e.cmov(r,o,h);return ae(e,f,t),f}}(e):an(e)),i(d,t))),toBytes:e=>r?sq(e,u):sF(e,u),fromBytes:(t,n=!0)=>{if(l){if(!l.includes(t.length)||t.length>u)throw Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);let e=new Uint8Array(u);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==u)throw Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);let i=r?s$(t):sz(nV(t));if(o&&(i=s4(i,e)),!n&&!d.isValid(i))throw Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:e=>as(d,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(d)}function ac(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function au(e){let t=ac(e);return t+Math.ceil(t/2)}let ad=BigInt(0),ah=BigInt(1);function af(e,t){let r=t.negate();return e?r:t}function ap(e,t){let r=as(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function ay(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ag(e,t){ay(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:sG(e),maxNumber:i,shiftBy:BigInt(e)}}function am(e,t,r){let{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=r,o=Number(e&i),l=e>>a;o>n&&(o-=s,l+=ah);let c=t*n;return{nextN:l,offset:c+Math.abs(o)-1,isZero:0===o,isNeg:o<0,isNegF:t%2!=0,offsetF:c}}let ab=new WeakMap,av=new WeakMap;function aw(e){return av.get(e)||1}function a_(e){if(e!==ad)throw Error("invalid wNAF")}class aE{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>ad;)t&ah&&(r=r.add(n)),n=n.double(),t>>=ah;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=ag(t,this.bits),i=[],s=e,a=s;for(let e=0;e<r;e++){a=s,i.push(a);for(let e=1;e<n;e++)a=a.add(s),i.push(a);s=a.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,i=this.BASE,s=ag(e,this.bits);for(let e=0;e<s.windows;e++){let{nextN:a,offset:o,isZero:l,isNeg:c,isNegF:u,offsetF:d}=am(r,e,s);r=a,l?i=i.add(af(u,t[d])):n=n.add(af(c,t[o]))}return a_(r),{p:n,f:i}}wNAFUnsafe(e,t,r,n=this.ZERO){let i=ag(e,this.bits);for(let e=0;e<i.windows&&r!==ad;e++){let{nextN:s,offset:a,isZero:o,isNeg:l}=am(r,e,i);if(r=s,!o){let e=t[a];n=n.add(l?e.negate():e)}}return a_(r),n}getPrecomputes(e,t,r){let n=ab.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),ab.set(t,n))),n}cached(e,t,r){let n=aw(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let i=aw(e);return 1===i?this._unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)}createCache(e,t){ay(t,this.bits),av.set(e,t),ab.delete(e)}hasCache(e){return 1!==aw(e)}}function ax(e,t,r){if(!t)return al(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return sZ(t,ai.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}BigInt(0),BigInt(1),BigInt(2),BigInt(8),nZ("HashToScalar-");let aI=BigInt(0),aS=BigInt(1),aA=BigInt(2),ak=BigInt(1),aT=BigInt(2),aC=BigInt(3),aO=BigInt(5),aP=BigInt(8),aR=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed");function aD(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}let aN=al({p:aR,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:aP,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}.p,{isLE:!0}),aU=(()=>{let e=aN.ORDER;return function(e){let{P:t,type:r,adjustScalarBytes:n,powPminus2:i,randomBytes:s}=(sZ(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})),a="x25519"===r;if(!a&&"x448"!==r)throw Error("invalid type");let o=s||n0,l=a?255:448,c=a?32:56,u=BigInt(a?9:5),d=BigInt(a?121665:39081),h=a?aA**BigInt(254):aA**BigInt(447),f=h+(a?BigInt(8)*aA**BigInt(251)-aS:BigInt(4)*aA**BigInt(445)-aS)+aS,p=e=>s4(e,t),y=sq(p(u),c);function g(e,r){let s=function(e,r){sH("u",e,aI,t),sH("scalar",r,h,f);let n=aS,s=aI,a=e,o=aS,c=aI;for(let t=BigInt(l-1);t>=aI;t--){let i=r>>t&aS;c^=i,({x_2:n,x_3:a}=b(c,n,a)),({x_2:s,x_3:o}=b(c,s,o)),c=i;let l=n+s,u=p(l*l),h=n-s,f=p(h*h),y=u-f,g=a+o,m=p((a-o)*l),v=p(g*h),w=m+v,_=m-v;a=p(w*w),o=p(e*p(_*_)),n=p(u*f),s=p(y*(u+p(d*y)))}return{x_2:n,x_3:a}=b(c,n,a),{x_2:s,x_3:o}=b(c,s,o),p(n*i(s))}(function(e){let t=sW("u coordinate",e,c);return a&&(t[31]&=127),p(s$(t))}(r),s$(n(sW("scalar",e,c))));if(s===aI)throw Error("invalid private or public key received");return sq(p(s),c)}function m(e){return g(e,y)}function b(e,t,r){let n=p(e*(t-r));return{x_2:t=p(t-n),x_3:r=p(r+n)}}let v={secretKey:c,publicKey:c,seed:c},w=(e=o(c))=>(nP(e,v.seed),e);return{keygen:function(e){let t=w(e);return{secretKey:t,publicKey:m(t)}},getSharedSecret:(e,t)=>g(e,t),getPublicKey:e=>m(e),scalarMult:g,scalarMultBase:m,utils:{randomSecretKey:w,randomPrivateKey:w},GuBytes:y.slice(),lengths:v}}({P:e,type:"x25519",powPminus2:t=>{let{pow_p_5_8:r,b2:n}=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=e*e%aR*e%aR,a=s9(s,aT,aR)*s%aR,o=s9(a,ak,aR)*e%aR,l=s9(o,aO,aR)*o%aR,c=s9(l,t,aR)*l%aR,u=s9(c,r,aR)*c%aR,d=s9(u,n,aR)*u%aR,h=s9(d,i,aR)*d%aR,f=s9(h,i,aR)*d%aR,p=s9(f,t,aR)*l%aR;return{pow_p_5_8:s9(p,aT,aR)*e%aR,b2:s}}(t);return s4(s9(r,aC,e)*n,e)},adjustScalarBytes:aD})})(),aB=(e,t)=>(e+(e>=0?t:-t)/aq)/t;function aL(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function aj(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return sL(r.lowS,"lowS"),sL(r.prehash,"prehash"),void 0!==r.format&&aL(r.format),r}class aM extends Error{constructor(e=""){super(e)}}let az={Err:aM,_tlv:{encode:(e,t)=>{let{Err:r}=az;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=sM(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?sM(i.length/2|128):"";return sM(e)+s+i+t},decode(e,t){let{Err:r}=az,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],s=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let a=t.subarray(n,n+e);if(a.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===a[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of a)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;let a=t.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=az;if(e<a$)throw new t("integer: negative integers are not allowed");let r=sM(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=az;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return sz(nV(e))}},toSig(e){let{Err:t,_int:r,_tlv:n}=az,i=sW("signature",e),{v:s,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=az,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},a$=BigInt(0),aF=BigInt(1),aq=BigInt(2),aW=BigInt(3),aV=BigInt(4);function aH(e,t){let r;let{BYTES:n}=e;if("bigint"==typeof t)r=t;else{let i=sW("private key",t);try{r=e.fromBytes(i)}catch{throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function aK(e){return Uint8Array.of(e?2:3)}function aG(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function aZ(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,hash:n,ecdsaOpts:i}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,i={Fp:r,Fn:al(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}(e);return function(e,t){let r=t.Point;return Object.assign({},t,{ProjectivePoint:r,CURVE:Object.assign({},e,ao(r.Fn.ORDER,r.Fn.BITS))})}(e,function(e,t,r={}){nR(t),sZ(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||n0,i=r.hmac||((e,...r)=>sP(t,e,nY(...r))),{Fp:s,Fn:a}=e,{ORDER:o,BITS:l}=a,{keygen:c,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=function(e,t={}){let{Fn:r}=e,n=t.randomBytes||n0,i=Object.assign(aG(e.Fp,r),{seed:au(r.ORDER)});function s(e){try{return!!aH(r,e)}catch{return!1}}function a(e=n(i.seed)){return function(e,t,r=!1){let n=e.length,i=ac(t),s=au(t);if(n<16||n<s||n>1024)throw Error("expected "+s+"-1024 bytes of input, got "+n);let a=s4(r?s$(e):sz(nV(e)),t-sQ)+sQ;return r?sq(a,i):sF(a,i)}(sj(e,i.seed,"seed"),r.ORDER)}function o(t,n=!0){return e.BASE.multiply(aH(r,t)).toBytes(n)}function l(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:n,publicKey:s,publicKeyUncompressed:a}=i;if(r.allowedLengths||n===s)return;let o=sW("key",t).length;return o===s||o===a}return Object.freeze({getPublicKey:o,getSharedSecret:function(t,n,i=!0){if(!0===l(t))throw Error("first arg must be private key");if(!1===l(n))throw Error("second arg must be public key");let s=aH(r,t);return e.fromHex(n).multiply(s).toBytes(i)},keygen:function(e){let t=a(e);return{secretKey:t,publicKey:o(t)}},Point:e,utils:{isValidSecretKey:s,isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:s}=i;try{let i=t.length;return(!0!==r||i===n)&&(!1!==r||i===s)&&!!e.fromBytes(t)}catch{return!1}},randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:e=>aH(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:i})}(e,r),p={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},y="compact";function g(e,t){if(!a.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class m{constructor(e,t,r){this.r=g("r",e),this.s=g("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=y){let r;if(!function(e,t){aL(t);let r=f.signature;sj(e,"compact"===t?r:"recovered"===t?r+1:void 0,`${t} signature`)}(e,t),"der"===t){let{r:t,s:r}=az.toSig(sj(e));return new m(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));let n=a.BYTES,i=e.subarray(0,n),s=e.subarray(n,2*n);return new m(a.fromBytes(i),a.fromBytes(s),r)}static fromHex(e,t){return this.fromBytes(nG(e),t)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(t){let r=s.ORDER,{r:n,s:i,recovery:l}=this;if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");if(o*aq<r&&l>1)throw Error("recovery id is ambiguous for h>1 curve");let c=2===l||3===l?n+o:n;if(!s.isValid(c))throw Error("recovery id 2 or 3 invalid");let u=s.toBytes(c),d=e.fromBytes(nY(aK((1&l)==0),u)),h=a.inv(c),f=v(sW("msgHash",t)),p=a.create(-f*h),y=a.create(i*h),g=e.BASE.multiplyUnsafe(p).add(d.multiplyUnsafe(y));if(g.is0())throw Error("point at infinify");return g.assertValidity(),g}hasHighS(){return this.s>o>>aF}toBytes(e=y){if(aL(e),"der"===e)return nG(az.hexFromSig(this));let t=a.toBytes(this.r),r=a.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return nY(Uint8Array.of(this.recovery),t,r)}return nY(t,r)}toHex(e){return nV(this.toBytes(e))}assertValidity(){}static fromCompact(e){return m.fromBytes(sW("sig",e),"compact")}static fromDER(e){return m.fromBytes(sW("sig",e),"der")}normalizeS(){return this.hasHighS()?new m(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return nV(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return nV(this.toBytes("compact"))}}let b=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=sz(nV(e)),r=8*e.length-l;return r>0?t>>BigInt(r):t},v=r.bits2int_modN||function(e){return a.create(b(e))},w=sG(l);function _(e){return sH("num < 2^"+l,e,a$,w),a.toBytes(e)}function E(e,r){return sj(e,void 0,"message"),r?sj(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:e,sign:function(r,s,l={}){let{seed:c,k2sig:u}=function(t,r,i){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{lowS:s,prehash:l,extraEntropy:c}=aj(i,p),u=v(t=E(t,l)),d=aH(a,r),h=[_(d),_(u)];if(null!=c&&!1!==c){let e=!0===c?n(f.secretKey):c;h.push(sW("extraEntropy",e))}return{seed:nY(...h),k2sig:function(t){let r=b(t);if(!a.isValidNot0(r))return;let n=a.inv(r),i=e.BASE.multiply(r).toAffine(),l=a.create(i.x);if(l===a$)return;let c=a.create(n*a.create(u+l*d));if(c===a$)return;let h=(i.x===l?0:2)|Number(i.y&aF),f=c;return s&&c>o>>aF&&(f=a.neg(c),h^=1),new m(l,f,h)}}}(r=sW("message",r),s,l);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),i=e=>Uint8Array.of(e),s=n(e),a=n(e),o=0,l=()=>{s.fill(1),a.fill(0),o=0},c=(...e)=>r(a,s,...e),u=(e=n(0))=>{a=c(i(0),e),s=c(),0!==e.length&&(a=c(i(1),e),s=c())},d=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(s=c()).slice();r.push(t),e+=s.length}return nY(...r)};return(e,t)=>{let r;for(l(),u(e);!(r=t(d()));)u();return l(),r}})(t.outputLen,a.BYTES,i)(c,u)},verify:function(t,r,n,i={}){let{lowS:s,prehash:o,format:l}=aj(i,p);if(n=sW("publicKey",n),r=E(sW("message",r),o),"strict"in i)throw Error("options.strict was renamed to lowS");let c=void 0===l?function(e){let t;let r="string"==typeof e||nC(e),n=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!n)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)t=new m(e.r,e.s);else if(r){try{t=m.fromBytes(sW("sig",e),"der")}catch(e){if(!(e instanceof az.Err))throw e}if(!t)try{t=m.fromBytes(sW("sig",e),"compact")}catch{return!1}}return t||!1}(t):m.fromBytes(sW("sig",t),l);if(!1===c)return!1;try{let t=e.fromBytes(n);if(s&&c.hasHighS())return!1;let{r:i,s:o}=c,l=v(r),u=a.inv(o),d=a.create(l*u),h=a.create(i*u),f=e.BASE.multiplyUnsafe(d).add(t.multiplyUnsafe(h));return!f.is0()&&a.create(f.x)===i}catch{return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=aj(r,p);return t=E(t,n),m.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:m,hash:t})}(function(e,t={}){let r=function(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>ad))throw Error(`CURVE.${e} must be positive bigint`)}let i=ax(t.p,r.Fp,n),s=ax(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!i.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:i,Fn:s}}("weierstrass",e,t),{Fp:n,Fn:i}=r,s=r.CURVE,{h:a,n:o}=s;sZ(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:l}=t;if(l&&(!n.is0(s.a)||"bigint"!=typeof l.beta||!Array.isArray(l.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let c=aG(n,i);function u(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let d=t.toBytes||function(e,t,r){let{x:i,y:s}=t.toAffine(),a=n.toBytes(i);return(sL(r,"isCompressed"),r)?(u(),nY(aK(!n.isOdd(s)),a)):nY(Uint8Array.of(4),a,n.toBytes(s))},h=t.fromBytes||function(e){sj(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=c,i=e.length,s=e[0],a=e.subarray(1);if(i===t&&(2===s||3===s)){let e;let t=n.fromBytes(a);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=f(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return u(),(1&s)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(i===r&&4===s){let e=n.BYTES,t=n.fromBytes(a.subarray(0,e)),r=n.fromBytes(a.subarray(e,2*e));if(!p(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${i}, expected compressed=${t} or uncompressed=${r}`)};function f(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,s.a)),s.b)}function p(e,t){let r=n.sqr(t),i=f(e);return n.eql(r,i)}if(!p(s.Gx,s.Gy))throw Error("bad curve params: generator point");let y=n.mul(n.pow(s.a,aW),aV),g=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(y,g)))throw Error("bad curve params: a or b");function m(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function b(e){if(!(e instanceof x))throw Error("ProjectivePoint expected")}function v(e){if(!l||!l.basises)throw Error("no endo");return function(e,t,r){let[[n,i],[s,a]]=t,o=aB(a*e,r),l=aB(-i*e,r),c=e-o*n-l*s,u=-o*i-l*a,d=c<a$,h=u<a$;d&&(c=-c),h&&(u=-u);let f=sG(Math.ceil(sK(r)/2))+aF;if(c<a$||c>=f||u<a$||u>=f)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:c,k2neg:h,k2:u}}(e,l.basises,i.ORDER)}let w=sJ((e,t)=>{let{X:r,Y:i,Z:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};let a=e.is0();null==t&&(t=a?n.ONE:n.inv(s));let o=n.mul(r,t),l=n.mul(i,t),c=n.mul(s,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),_=sJ(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw Error("bad point: x or y not field elements");if(!p(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function E(e,t,r,i,s){return r=new x(n.mul(r.X,e),r.Y,r.Z),t=af(i,t),r=af(s,r),t.add(r)}class x{constructor(e,t,r){this.X=m("x",e),this.Y=m("y",t,!0),this.Z=m("z",r),Object.freeze(this)}static CURVE(){return s}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof x)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?x.ZERO:new x(t,r,n.ONE)}static fromBytes(e){let t=x.fromAffine(h(sj(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return x.fromBytes(sW("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return S.createCache(this,e),t||this.multiply(aW),this}assertValidity(){_(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){b(e);let{X:t,Y:r,Z:i}=this,{X:s,Y:a,Z:o}=e,l=n.eql(n.mul(t,o),n.mul(s,i)),c=n.eql(n.mul(r,o),n.mul(a,i));return l&&c}negate(){return new x(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=s,r=n.mul(t,aW),{X:i,Y:a,Z:o}=this,l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(i,i),h=n.mul(a,a),f=n.mul(o,o),p=n.mul(i,a);return p=n.add(p,p),u=n.mul(i,o),u=n.add(u,u),l=n.mul(e,u),c=n.mul(r,f),c=n.add(l,c),l=n.sub(h,c),c=n.add(h,c),c=n.mul(l,c),l=n.mul(p,l),u=n.mul(r,u),f=n.mul(e,f),p=n.sub(d,f),p=n.mul(e,p),p=n.add(p,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,f),d=n.mul(d,p),c=n.add(c,d),f=n.mul(a,o),f=n.add(f,f),d=n.mul(f,p),l=n.sub(l,d),u=n.mul(f,h),u=n.add(u,u),new x(l,c,u=n.add(u,u))}add(e){b(e);let{X:t,Y:r,Z:i}=this,{X:a,Y:o,Z:l}=e,c=n.ZERO,u=n.ZERO,d=n.ZERO,h=s.a,f=n.mul(s.b,aW),p=n.mul(t,a),y=n.mul(r,o),g=n.mul(i,l),m=n.add(t,r),v=n.add(a,o);m=n.mul(m,v),v=n.add(p,y),m=n.sub(m,v),v=n.add(t,i);let w=n.add(a,l);return v=n.mul(v,w),w=n.add(p,g),v=n.sub(v,w),w=n.add(r,i),c=n.add(o,l),w=n.mul(w,c),c=n.add(y,g),w=n.sub(w,c),d=n.mul(h,v),c=n.mul(f,g),d=n.add(c,d),c=n.sub(y,d),d=n.add(y,d),u=n.mul(c,d),y=n.add(p,p),y=n.add(y,p),g=n.mul(h,g),v=n.mul(f,v),y=n.add(y,g),g=n.sub(p,g),g=n.mul(h,g),v=n.add(v,g),p=n.mul(y,v),u=n.add(u,p),p=n.mul(w,v),c=n.mul(m,c),c=n.sub(c,p),p=n.mul(m,y),d=n.mul(w,d),new x(c,u,d=n.add(d,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(x.ZERO)}multiply(e){let r,n;let{endo:s}=t;if(!i.isValidNot0(e))throw Error("invalid scalar: out of range");let a=e=>S.cached(this,e,e=>ap(x,e));if(s){let{k1neg:t,k1:i,k2neg:o,k2:l}=v(e),{p:c,f:u}=a(i),{p:d,f:h}=a(l);n=u.add(h),r=E(s.beta,c,d,t,o)}else{let{p:t,f:i}=a(e);r=t,n=i}return ap(x,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!i.isValid(e))throw Error("invalid scalar: out of range");if(e===a$||this.is0())return x.ZERO;if(e===aF)return this;if(S.hasCache(this))return this.multiply(e);if(!r)return S.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:i,k2:s}=v(e),{p1:a,p2:o}=function(e,t,r,n){let i=t,s=e.ZERO,a=e.ZERO;for(;r>ad||n>ad;)r&ah&&(s=s.add(i)),n&ah&&(a=a.add(i)),i=i.double(),r>>=ah,n>>=ah;return{p1:s,p2:a}}(x,this,n,s);return E(r.beta,a,o,t,i)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return w(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return a===aF||(e?e(x,this):S.unsafe(this,o).is0())}clearCofactor(){let{clearCofactor:e}=t;return a===aF?this:e?e(x,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(e=!0){return sL(e,"isCompressed"),this.assertValidity(),d(x,this,e)}toHex(e=!0){return nV(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return ap(x,e)}static msm(e,t){return function(e,t,r,n){(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})})(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t);let i=r.length,s=n.length;if(i!==s)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,o=sK(BigInt(i)),l=1;o>12?l=o-3:o>4?l=o-2:o>0&&(l=2);let c=sG(l),u=Array(Number(c)+1).fill(a),d=Math.floor((t.BITS-1)/l)*l,h=a;for(let e=d;e>=0;e-=l){u.fill(a);for(let t=0;t<s;t++){let i=Number(n[t]>>BigInt(e)&c);u[i]=u[i].add(r[t])}let t=a;for(let e=u.length-1,r=a;e>0;e--)r=r.add(u[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<l;e++)h=h.double()}return h}(x,i,e,t)}static fromPrivateKey(e){return x.BASE.multiply(aH(i,e))}}x.BASE=new x(s.Gx,s.Gy,n.ONE),x.ZERO=new x(n.ZERO,n.ONE,n.ZERO),x.Fp=n,x.Fn=i;let I=i.BITS,S=new aE(x,t.endo?Math.ceil(I/2):I);return x.BASE.precompute(8),x}(t,r),n,i))})({...e,hash:t});return{...r(t),create:r}}let aJ={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},aY={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},aQ={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},aX=al(aJ.p),a0=al(aY.p),a1=al(aQ.p),a2=aZ({...aJ,Fp:aX,lowS:!1},iS);aZ({...aY,Fp:a0,lowS:!1},ik),aZ({...aQ,Fp:a1,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},iA);let a3="base10",a5="base16",a8="base64pad",a6="base64url",a4="utf8";function a9(){let e=n0(32);return(0,t1.BB)(e,a5)}function a7(e){let t=iS((0,t1.mL)(e,a5));return(0,t1.BB)(t,a5)}function oe(e){let t=iS((0,t1.mL)(e,a4));return(0,t1.BB)(t,a5)}function ot(e){return(0,t1.mL)(`${e}`,a3)}function or(e){return Number((0,t1.BB)(e,a3))}function on(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function oi(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function os(e){if(2===or(e.type))return(0,t1.BB)((0,t1.zo)([e.type,e.sealed]),a8);if(1===or(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,t1.BB)((0,t1.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),a8)}return(0,t1.BB)((0,t1.zo)([e.type,e.iv,e.sealed]),a8)}function oa(e){let t=(e.encoding||a8)===a6?oi(e.encoded):e.encoded,r=(0,t1.mL)(t,a8),n=r.slice(0,1);if(1===or(n)){let e=r.slice(1,33),t=r.slice(33,45);return{type:n,sealed:r.slice(45),iv:t,senderPublicKey:e}}if(2===or(n))return{type:n,sealed:r.slice(1),iv:n0(12)};let i=r.slice(1,13);return{type:n,sealed:r.slice(13),iv:i}}function oo(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ol(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function oc(e){return e?.relay||{protocol:"irn"}}function ou(e){let t=t2.iO[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var od=Object.defineProperty,oh=Object.defineProperties,of=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertySymbols,oy=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,om=(e,t,r)=>t in e?od(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ob=(e,t)=>{for(var r in t||(t={}))oy.call(t,r)&&om(e,r,t[r]);if(op)for(var r of op(t))og.call(t,r)&&om(e,r,t[r]);return e},ov=(e,t)=>oh(e,of(t));function ow(e){var t;if(!e.includes("wc:")){let t=nn(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,r),s=e.substring(r+1,n).split("@"),a=Object.fromEntries(new URLSearchParams("u">typeof n?e.substring(n):"").entries()),o="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:i,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:a.symKey,relay:function(e,t="-"){let r={},n="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(n)){let i=t.replace(n,""),s=e[t];r[i]=s}}),r}(a),methods:o,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function o_(e){let t=new URLSearchParams;return Object.entries(ob(ob(ov(ob({},function(e,t="-"){let r={};return Object.keys(e).forEach(n=>{e[n]&&(r["relay"+t+n]=e[n])}),r}(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")})).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,r])=>{void 0!==r&&t.append(e,String(r))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function oE(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}var ox=Object.defineProperty,oI=Object.defineProperties,oS=Object.getOwnPropertyDescriptors,oA=Object.getOwnPropertySymbols,ok=Object.prototype.hasOwnProperty,oT=Object.prototype.propertyIsEnumerable,oC=(e,t,r)=>t in e?ox(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oO=(e,t)=>{for(var r in t||(t={}))ok.call(t,r)&&oC(e,r,t[r]);if(oA)for(var r of oA(t))oT.call(t,r)&&oC(e,r,t[r]);return e},oP=(e,t)=>oI(e,oS(t));function oR(e){let t=[];return e.forEach(e=>{let[r,n]=e.split(":");t.push(`${r}:${n}`)}),t}function oD(e){return e.includes(":")}function oN(e){return oD(e)?e.split(":")[0]:e}function oU(e){var t,r,n;let i={};if(!oF(e))return i;for(let[s,a]of Object.entries(e)){let e=oD(s)?[s]:a.chains,o=a.methods||[],l=a.events||[],c=oN(s);i[c]=oP(oO({},i[c]),{chains:r4(e,null==(t=i[c])?void 0:t.chains),methods:r4(o,null==(r=i[c])?void 0:r.methods),events:r4(l,null==(n=i[c])?void 0:n.events)})}return i}function oB(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,n]of Object.entries(r))n.methods?n.methods=r4(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}let oL={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},oj={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function oM(e,t){let{message:r,code:n}=oj[e];return{message:t?`${r} ${t}`:r,code:n}}function oz(e,t){let{message:r,code:n}=oL[e];return{message:t?`${r} ${t}`:r,code:n}}function o$(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function oF(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function oq(e){return typeof e>"u"}function oW(e,t){return!!(t&&oq(e))||"string"==typeof e&&!!e.trim().length}function oV(e,t){return!!(t&&oq(e))||"number"==typeof e&&!isNaN(e)}function oH(e){return!!(oW(e,!1)&&e.includes(":"))&&2===e.split(":").length}function oK(e){let t=!0;return o$(e)?e.length&&(t=e.every(e=>oW(e,!1))):t=!1,t}function oG(e,t){let r=null;return Object.values(e).forEach(e=>{var n;let i;if(r)return;let s=(n=`${t}, namespace`,i=null,oK(e?.methods)?oK(e?.events)||(i=oz("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):i=oz("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),i);s&&(r=s)}),r}function oZ(e,t){let r=null;if(e&&oF(e)){let n;let i=oG(e,t);i&&(r=i);let s=(n=null,Object.values(e).forEach(e=>{var r,i;let s;if(n)return;let a=(r=e?.accounts,i=`${t} namespace`,s=null,o$(r)?r.forEach(e=>{s||function(e){if(oW(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&oH(e)}}return!1}(e)||(s=oz("UNSUPPORTED_ACCOUNTS",`${i}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=oz("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);a&&(n=a)}),n);s&&(r=s)}else r=oM("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function oJ(e){return oW(e.protocol,!0)}function oY(e){return"u">typeof e}function oQ(e,t){return!(!oH(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...oR(e.accounts))}),t})(e).includes(t))}function oX(e,t,r){let n=null,i=function(e){let t={};return Object.keys(e).forEach(r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach(n=>{t[n]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let n=oR(e[r].accounts);n?.forEach(n=>{t[n]={accounts:e[r].accounts.filter(e=>e.includes(`${n}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),a=Object.keys(i),o=Object.keys(s),l=o0(Object.keys(e)),c=o0(Object.keys(t)),u=l.filter(e=>!c.includes(e));return u.length&&(n=oM("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),rY(a,o)||(n=oM("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||n)return;let i=oR(t[e].accounts);i.includes(e)||(n=oM("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${i.toString()}`))}),a.forEach(e=>{n||(rY(i[e].methods,s[e].methods)?rY(i[e].events,s[e].events)||(n=oM("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=oM("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),n}function o0(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function o1(){let e=rK();return new Promise(t=>{switch(e){case rq.browser:t(rH()&&navigator?.onLine);break;case rq.reactNative:t(o2());break;case rq.node:default:t(!0)}})}async function o2(){if(rV()&&"u">typeof global&&null!=global&&global.NetInfo){let e=await (null==global?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}let o3={};class o5{static get(e){return o3[e]}static set(e,t){o3[e]=t}static delete(e){delete o3[e]}}function o8(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function o6({logger:e,name:t}){let r="string"==typeof e?rk({opts:{level:e,name:t}}).logger:e;return r.level="string"==typeof e?e:e.level,r}var o4=r(96756),o9=r(11075),o7=r(93514),le=Object.defineProperty,lt=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lr=(e,t,r)=>lt(e,"symbol"!=typeof t?t+"":t,r);class ln extends o7.q{constructor(e){super(),this.opts=e,lr(this,"protocol","wc"),lr(this,"version",2)}}var li=Object.defineProperty,ls=(e,t,r)=>t in e?li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,la=(e,t,r)=>ls(e,"symbol"!=typeof t?t+"":t,r);class lo extends o7.q{constructor(e,t){super(),this.core=e,this.logger=t,la(this,"records",new Map)}}class ll{constructor(e,t){this.logger=e,this.core=t}}class lc extends o7.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class lu extends o7.q{constructor(e){super()}}class ld{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}class lh extends o7.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class lf extends o7.q{constructor(e,t){super(),this.core=e,this.logger=t}}class lp{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class ly{constructor(e,t){this.projectId=e,this.logger=t}}class lg{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var lm=Object.defineProperty,lb=(e,t,r)=>t in e?lm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lv=(e,t,r)=>lb(e,"symbol"!=typeof t?t+"":t,r);class lw{constructor(e){this.opts=e,lv(this,"protocol","wc"),lv(this,"version",2)}}class l_{constructor(e){this.client=e}}var lE=r(38979),lx=r(5276),lI=r(75646),lS=r(82957).lW,lA=r(25566);let lk="core",lT=`wc@2:${lk}:`,lC={logger:"error"},lO={database:":memory:"},lP="client_ed25519_seed",lR=a.ONE_DAY,lD=a.SIX_HOURS,lN="wss://relay.walletconnect.org",lU={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},lB={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},lL="2.22.4",lj={link_mode:"link_mode",relay:"relay"},lM={inbound:"inbound",outbound:"outbound"},lz="WALLETCONNECT_LINK_MODE_APPS",l$={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},lF=(a.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:a.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:a.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:a.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:a.ONE_DAY,prompt:!1,tag:0},res:{ttl:a.ONE_DAY,prompt:!1,tag:0}}}),lq={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},lW={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lV={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},lH="https://verify.walletconnect.org",lK=`${lH}/v3`,lG=["https://verify.walletconnect.com",lH],lZ={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},lJ={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},lY={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},lQ={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},lX={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},l0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var l1=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=o*a[h]>>>0,a[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===a[f];)f++;for(var p=new Uint8Array(n+(s-f)),y=n;f!==s;)p[y++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],h=0,f=a-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*c[f]>>>0,c[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=h,i++}for(var p=a-n;p!==a&&0===c[p];)p++;for(var y=l.repeat(r);p<a;++p)y+=e.charAt(c[p]);return y},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};let l2=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},l3=e=>new TextEncoder().encode(e),l5=e=>new TextDecoder().decode(e);class l8{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class l6{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return l9(this,e)}}class l4{constructor(e){this.decoders=e}or(e){return l9(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let l9=(e,t)=>new l4({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class l7{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new l8(e,t,r),this.decoder=new l6(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let ce=({name:e,prefix:t,encode:r,decode:n})=>new l7(e,t,r,n),ct=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=l1(r,t);return ce({prefix:e,name:t,encode:n,decode:e=>l2(i(e))})},cr=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let a=new Uint8Array(s*r/8|0),o=0,l=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);l=l<<r|s,(o+=r)>=8&&(o-=8,a[c++]=255&l>>o)}if(o>=r||255&l<<8-o)throw SyntaxError("Unexpected end of data");return a},cn=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let n=0;n<e.length;++n)for(o=o<<8|e[n],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},ci=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ce({prefix:t,name:e,encode:e=>cn(e,n,r),decode:t=>cr(t,n,r,e)});var cs=Object.freeze({__proto__:null,identity:ce({prefix:"\0",name:"identity",encode:e=>l5(e),decode:e=>l3(e)})}),ca=Object.freeze({__proto__:null,base2:ci({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),co=Object.freeze({__proto__:null,base8:ci({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),cl=Object.freeze({__proto__:null,base10:ct({prefix:"9",name:"base10",alphabet:"0123456789"})}),cc=Object.freeze({__proto__:null,base16:ci({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:ci({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let cu=ci({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cd=ci({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ch=ci({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cf=ci({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cp=ci({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cy=ci({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var cg=Object.freeze({__proto__:null,base32:cu,base32upper:cd,base32pad:ch,base32padupper:cf,base32hex:cp,base32hexupper:cy,base32hexpad:ci({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:ci({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:ci({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),cm=Object.freeze({__proto__:null,base36:ct({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:ct({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),cb=Object.freeze({__proto__:null,base58btc:ct({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:ct({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let cv=ci({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var cw=Object.freeze({__proto__:null,base64:cv,base64pad:ci({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:ci({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:ci({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let c_=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),cE=c_.reduce((e,t,r)=>(e[r]=t,e),[]),cx=c_.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var cI=Object.freeze({__proto__:null,base256emoji:ce({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=cE[t],"")},decode:function(e){let t=[];for(let r of e){let e=cx[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function cS(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw cS.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return cS.bytes=s-t,n}var cA=function e(t,r,n){r=r||[],n=n||0;for(var i=n;t>=2147483648;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r};let ck=(e,t,r=0)=>(cA(e,t,r),t),cT=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,cC=(e,t)=>{let r=t.byteLength,n=cT(e),i=n+cT(r),s=new Uint8Array(i+r);return ck(e,s,0),ck(r,s,n),s.set(t,i),new cO(e,r,t,s)};class cO{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let cP=({name:e,code:t,encode:r})=>new cR(e,t,r);class cR{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?cC(this.code,t):t.then(e=>cC(this.code,e))}throw Error("Unknown type, must be binary type")}}let cD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var cN=Object.freeze({__proto__:null,sha256:cP({name:"sha2-256",code:18,encode:cD("SHA-256")}),sha512:cP({name:"sha2-512",code:19,encode:cD("SHA-512")})}),cU=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:l2,digest:e=>cC(0,l2(e))}});new TextEncoder,new TextDecoder;let cB={...cs,...ca,...co,...cl,...cc,...cg,...cm,...cb,...cw,...cI};function cL(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function cj(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...cN,...cU});let cM=cj("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),cz=cj("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?cL(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),c$={utf8:cM,"utf-8":cM,hex:cB.base16,latin1:cz,ascii:cz,binary:cz,...cB};var cF=Object.defineProperty,cq=(e,t,r)=>t in e?cF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cW=(e,t,r)=>cq(e,"symbol"!=typeof t?t+"":t,r);class cV{constructor(e,t){this.core=e,this.logger=t,cW(this,"keychain",new Map),cW(this,"name","keychain"),cW(this,"version","0.3"),cW(this,"initialized",!1),cW(this,"storagePrefix",lT),cW(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),cW(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),cW(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),cW(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=oM("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),cW(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=rA(t,this.name)}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rQ(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?rX(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var cH=Object.defineProperty,cK=(e,t,r)=>t in e?cH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cG=(e,t,r)=>cK(e,"symbol"!=typeof t?t+"":t,r);class cZ{constructor(e,t,r){this.core=e,this.logger=t,cG(this,"name","crypto"),cG(this,"keychain"),cG(this,"randomSessionIdentifier",a9()),cG(this,"initialized",!1),cG(this,"clientId"),cG(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),cG(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),cG(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;let e=await this.getClientSeed(),t=t0.Au(e),r=t0.bG(t.publicKey);return this.clientId=r,r}),cG(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=aU.utils.randomPrivateKey(),t=aU.getPublicKey(e);return{privateKey:(0,t1.BB)(e,a5),publicKey:(0,t1.BB)(t,a5)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),cG(this,"signJWT",async e=>{this.isInitialized();let t=await this.getClientSeed(),r=t0.Au(t),n=this.randomSessionIdentifier;return await t0.vf(n,e,lR,r)}),cG(this,"generateSharedKey",(e,t,r)=>{this.isInitialized();let n=function(e,t){let r=sN(iS,aU.getSharedSecret((0,t1.mL)(e,a5),(0,t1.mL)(t,a5)),void 0,void 0,32);return(0,t1.BB)(r,a5)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)}),cG(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||a7(e);return await this.keychain.set(r,e),r}),cG(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),cG(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),cG(this,"encode",async(e,t,r)=>{this.isInitialized();let n=oo(r),i=(0,t6.u)(t);if(2===n.type)return function(e,t){let r=ot(2),n=n0(12),i=os({type:r,sealed:(0,t1.mL)(e,a4),iv:n});return t===a6?on(i):i}(i,r?.encoding);if(ol(n)){let t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:a,senderPublicKey:o}=n;return function(e){let t=ot("u">typeof e.type?e.type:0);if(1===or(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?(0,t1.mL)(e.senderPublicKey,a5):void 0,n="u">typeof e.iv?(0,t1.mL)(e.iv,a5):n0(12),i=os({type:t,sealed:sC((0,t1.mL)(e.symKey,a5),n).encrypt((0,t1.mL)(e.message,a4)),iv:n,senderPublicKey:r});return e.encoding===a6?on(i):i}({type:a,symKey:s,message:i,senderPublicKey:o,encoding:r?.encoding})}),cG(this,"decode",async(e,t,r)=>{this.isInitialized();let n=function(e,t){let r=oa({encoded:e,encoding:t?.encoding});return oo({type:or(r.type),senderPublicKey:"u">typeof r.senderPublicKey?(0,t1.BB)(r.senderPublicKey,a5):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===n.type){let e=function(e,t){let{sealed:r}=oa({encoded:e,encoding:t});return(0,t1.BB)(r,a4)}(t,r?.encoding);return(0,t6.D)(e)}if(ol(n)){let t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let n=this.getSymKey(e),i=function(e){let t=(0,t1.mL)(e.symKey,a5),{sealed:r,iv:n}=oa({encoded:e.encoded,encoding:e.encoding}),i=sC(t,n).decrypt(r);if(null===i)throw Error("Failed to decrypt");return(0,t1.BB)(i,a4)}({symKey:n,encoded:t,encoding:r?.encoding});return(0,t6.D)(i)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),cG(this,"getPayloadType",(e,t=a8)=>or(oa({encoded:e,encoding:t}).type)),cG(this,"getPayloadSenderPublicKey",(e,t=a8)=>{let r=oa({encoded:e,encoding:t});return r.senderPublicKey?(0,t1.BB)(r.senderPublicKey,a5):void 0}),this.core=e,this.logger=rA(t,this.name),this.keychain=r||new cV(this.core,this.logger)}get context(){return rS(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(lP)}catch{e=a9(),await this.keychain.set(lP,e)}return function(e,t="utf8"){let r=c$[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?cL(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var cJ=Object.defineProperty,cY=Object.defineProperties,cQ=Object.getOwnPropertyDescriptors,cX=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,c1=Object.prototype.propertyIsEnumerable,c2=(e,t,r)=>t in e?cJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c3=(e,t)=>{for(var r in t||(t={}))c0.call(t,r)&&c2(e,r,t[r]);if(cX)for(var r of cX(t))c1.call(t,r)&&c2(e,r,t[r]);return e},c5=(e,t)=>cY(e,cQ(t)),c8=(e,t,r)=>c2(e,"symbol"!=typeof t?t+"":t,r);class c6 extends ll{constructor(e,t){super(e,t),this.logger=e,this.core=t,c8(this,"messages",new Map),c8(this,"messagesWithoutClientAck",new Map),c8(this,"name","messages"),c8(this,"version","0.3"),c8(this,"initialized",!1),c8(this,"storagePrefix",lT),c8(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),c8(this,"set",async(e,t,r)=>{this.isInitialized();let n=oe(t),i=this.messages.get(e);if(typeof i>"u"&&(i={}),"u">typeof i[n])return n;if(i[n]=t,this.messages.set(e,i),r===lM.inbound){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,c5(c3({},r),{[n]:t}))}return await this.persist(),n}),c8(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),c8(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),c8(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[oe(t)])),c8(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let n=oe(t);delete r[n],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),c8(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=rA(e,this.name),this.core=t}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rQ(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,rQ(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?rX(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?rX(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var c4=Object.defineProperty,c9=Object.defineProperties,c7=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,un=(e,t,r)=>t in e?c4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ui=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&un(e,r,t[r]);if(ue)for(var r of ue(t))ur.call(t,r)&&un(e,r,t[r]);return e},us=(e,t)=>c9(e,c7(t)),ua=(e,t,r)=>un(e,"symbol"!=typeof t?t+"":t,r);class uo extends lc{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ua(this,"events",new i.EventEmitter),ua(this,"name","publisher"),ua(this,"queue",new Map),ua(this,"publishTimeout",(0,a.toMiliseconds)(a.ONE_MINUTE)),ua(this,"initialPublishTimeout",(0,a.toMiliseconds)(15*a.ONE_SECOND)),ua(this,"needsTransportRestart",!1),ua(this,"publish",async(e,t,r)=>{var n,i,s,a,o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let l=r?.ttl||lD,c=r?.prompt||!1,u=r?.tag||0,d=r?.id||(0,lx.getBigIntRpcId)().toString(),h=ou(oc().protocol),f={id:d,method:r?.publishMethod||h.publish,params:ui({topic:e,message:t,ttl:l,prompt:c,tag:u,attestation:r?.attestation},r?.tvf)},p=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{oq(null==(n=f.params)?void 0:n.prompt)&&(null==(i=f.params)||delete i.prompt),oq(null==(s=f.params)?void 0:s.tag)&&(null==(a=f.params)||delete a.tag);let o=new Promise(async e=>{let t=({id:r})=>{var n;(null==(n=f.id)?void 0:n.toString())===r.toString()&&(this.removeRequestFromQueue(r),this.relayer.events.removeListener(lU.publish,t),e())};this.relayer.events.on(lU.publish,t);let n=r1(new Promise((e,t)=>{this.rpcPublish(f,r).then(e).catch(e=>{this.logger.warn(e,e?.message),t(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await n,this.events.removeListener(lU.publish,t)}catch(e){this.queue.set(d,{request:f,opts:r,attempt:1}),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:e,message:t,opts:r}}),await r1(o,this.publishTimeout,p)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(o=r?.internal)&&o.throwOnFailedPublish)throw e}finally{this.queue.delete(d)}}),ua(this,"publishCustom",async e=>{var t,r,n,i,s;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:e});let{payload:o,opts:l={}}=e,{attestation:c,tvf:u,publishMethod:d,prompt:h,tag:f,ttl:p=a.FIVE_MINUTES}=l,y=l.id||(0,lx.getBigIntRpcId)().toString(),g=ou(oc().protocol),m=d||g.publish,b={id:y,method:m,params:ui(us(ui({},o),{ttl:p,prompt:h,tag:f,attestation:c}),u)},v=`Failed to publish custom payload, please try again. id:${y} tag:${f}`;try{oq(null==(t=b.params)?void 0:t.prompt)&&(null==(r=b.params)||delete r.prompt),oq(null==(n=b.params)?void 0:n.tag)&&(null==(i=b.params)||delete i.tag);let e=new Promise(async e=>{let t=({id:r})=>{var n;(null==(n=b.id)?void 0:n.toString())===r.toString()&&(this.removeRequestFromQueue(r),this.relayer.events.removeListener(lU.publish,t),e())};this.relayer.events.on(lU.publish,t);let r=r1(new Promise((e,t)=>{this.rpcPublish(b,l).then(e).catch(e=>{this.logger.warn(e,e?.message),t(e)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${m} id:${y} tag:${f}`);try{await r,this.events.removeListener(lU.publish,t)}catch(e){this.queue.set(y,{request:b,opts:l,attempt:1}),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:y,payload:o,opts:l}}),await r1(e,this.publishTimeout,v)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(s=l?.internal)&&s.throwOnFailedPublish)throw e}finally{this.queue.delete(y)}}),ua(this,"on",(e,t)=>{this.events.on(e,t)}),ua(this,"once",(e,t)=>{this.events.once(e,t)}),ua(this,"off",(e,t)=>{this.events.off(e,t)}),ua(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=rA(t,this.name),this.registerEventListeners()}get context(){return rS(this.logger)}async rpcPublish(e,t){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});let r=await this.relayer.request(e);return this.relayer.events.emit(lU.publish,ui(ui({},e),t)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{var r;let n=e.attempt+1;this.queue.set(t,us(ui({},e),{attempt:n})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${null==(r=e.request.params)?void 0:r.tag}, attempt: ${n}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(o4.Lx.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(lU.connection_stalled);return}this.checkQueue()}),this.relayer.on(lU.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ul=Object.defineProperty,uc=(e,t,r)=>t in e?ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uu=(e,t,r)=>uc(e,"symbol"!=typeof t?t+"":t,r);class ud{constructor(){uu(this,"map",new Map),uu(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),uu(this,"get",e=>this.map.get(e)||[]),uu(this,"exists",(e,t)=>this.get(e).includes(t)),uu(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let n=r.filter(e=>e!==t);if(!n.length){this.map.delete(e);return}this.map.set(e,n)}),uu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var uh=Object.defineProperty,uf=Object.defineProperties,up=Object.getOwnPropertyDescriptors,uy=Object.getOwnPropertySymbols,ug=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,ub=(e,t,r)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uv=(e,t)=>{for(var r in t||(t={}))ug.call(t,r)&&ub(e,r,t[r]);if(uy)for(var r of uy(t))um.call(t,r)&&ub(e,r,t[r]);return e},uw=(e,t)=>uf(e,up(t)),u_=(e,t,r)=>ub(e,"symbol"!=typeof t?t+"":t,r);class uE extends lh{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,u_(this,"subscriptions",new Map),u_(this,"topicMap",new ud),u_(this,"events",new i.EventEmitter),u_(this,"name","subscription"),u_(this,"version","0.3"),u_(this,"pending",new Map),u_(this,"cached",[]),u_(this,"initialized",!1),u_(this,"storagePrefix",lT),u_(this,"subscribeTimeout",(0,a.toMiliseconds)(a.ONE_MINUTE)),u_(this,"initialSubscribeTimeout",(0,a.toMiliseconds)(15*a.ONE_SECOND)),u_(this,"clientId"),u_(this,"batchSubscribeTopicsLimit",500),u_(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),u_(this,"subscribe",async(e,t)=>{var r;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let n=oc(t),i={topic:e,relay:n,transportType:t?.transportType};null!=(r=t?.internal)&&r.skipSubscribe||this.pending.set(e,i);let s=await this.rpcSubscribe(e,n,t);return"string"==typeof s&&(this.onSubscribe(s,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),s}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),u_(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),u_(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),u_(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),u_(this,"on",(e,t)=>{this.events.on(e,t)}),u_(this,"once",(e,t)=>{this.events.once(e,t)}),u_(this,"off",(e,t)=>{this.events.off(e,t)}),u_(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),u_(this,"start",async()=>{await this.onConnect()}),u_(this,"stop",async()=>{await this.onDisconnect()}),u_(this,"restart",async()=>{await this.restore(),await this.onRestart()}),u_(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),u_(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(o4.Lx.pulse,async()=>{await this.checkPending()}),this.events.on(l$.created,async e=>{let t=l$.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(l$.deleted,async e=>{let t=l$.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=rA(t,this.name),this.clientId=""}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let n=oc(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);let i=oz("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n,i;let s=await this.getSubscriptionId(e);if(null!=(n=r?.internal)&&n.skipSubscribe)return s;r&&r?.transportType!==lj.relay||await this.restartToComplete({topic:e,id:e,relay:t});let o={method:ou(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});let l=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{if(r?.transportType===lj.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(o).catch(e=>this.logger.warn(e))},(0,a.toMiliseconds)(a.ONE_SECOND)),s;let t=new Promise(async t=>{let r=n=>{n.topic===e&&(this.events.removeListener(l$.created,r),t(n.id))};this.events.on(l$.created,r);try{let n=await r1(new Promise((e,t)=>{this.relayer.request(o).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(l$.created,r),t(n)}catch{}}),n=await r1(t,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!n&&l)throw Error(`Subscribing to ${e} failed, please try again`);return n?s:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lU.connection_stalled),l)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:ou(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await r1(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(lU.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:ou(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await r1(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(lU.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let n={method:ou(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,uw(uv({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,uv({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,uv({},t)),this.topicMap.set(t.topic,e),this.events.emit(l$.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=oM("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(l$.deleted,uw(uv({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(l$.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(l$.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(e=>{var t;return e.topic===(null==(t=this.subscriptions.get(e.id))?void 0:t.topic)})){let{message:e}=oM("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>uw(uv({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,a.toMiliseconds)(a.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return oe(e+await this.getClientId())}}var ux=Object.defineProperty,uI=Object.getOwnPropertySymbols,uS=Object.prototype.hasOwnProperty,uA=Object.prototype.propertyIsEnumerable,uk=(e,t,r)=>t in e?ux(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uT=(e,t)=>{for(var r in t||(t={}))uS.call(t,r)&&uk(e,r,t[r]);if(uI)for(var r of uI(t))uA.call(t,r)&&uk(e,r,t[r]);return e},uC=(e,t,r)=>uk(e,"symbol"!=typeof t?t+"":t,r);class uO extends lu{constructor(e){var t;super(e),uC(this,"protocol","wc"),uC(this,"version",2),uC(this,"core"),uC(this,"logger"),uC(this,"events",new i.EventEmitter),uC(this,"provider"),uC(this,"messages"),uC(this,"subscriber"),uC(this,"publisher"),uC(this,"name","relayer"),uC(this,"transportExplicitlyClosed",!1),uC(this,"initialized",!1),uC(this,"connectionAttemptInProgress",!1),uC(this,"relayUrl"),uC(this,"projectId"),uC(this,"packageName"),uC(this,"bundleId"),uC(this,"hasExperiencedNetworkDisruption",!1),uC(this,"pingTimeout"),uC(this,"heartBeatTimeout",(0,a.toMiliseconds)(a.THIRTY_SECONDS+a.FIVE_SECONDS)),uC(this,"reconnectTimeout"),uC(this,"connectPromise"),uC(this,"reconnectInProgress",!1),uC(this,"requestsInFlight",[]),uC(this,"connectTimeout",(0,a.toMiliseconds)(15*a.ONE_SECOND)),uC(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let n=e.id||(0,lx.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==i),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}}),uC(this,"resetPingTimeout",()=>{rW()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(e){this.logger.warn(e,e?.message)}},this.heartBeatTimeout))}),uC(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),uC(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(lU.connect)}),uC(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),uC(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(lU.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),uC(this,"registerProviderListeners",()=>{this.provider.on(lB.payload,this.onPayloadHandler),this.provider.on(lB.connect,this.onConnectHandler),this.provider.on(lB.disconnect,this.onDisconnectHandler),this.provider.on(lB.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=o6({logger:null!=(t=e.logger)?t:"error",name:this.name}),this.messages=new c6(this.logger,e.core),this.subscriber=new uE(this,this.logger),this.publisher=new uo(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||lN,rV()&&"u">typeof global&&"u">typeof(null==global?void 0:global.Platform)&&(null==global?void 0:global.Platform.OS)==="android"?this.packageName=rG():rV()&&"u">typeof global&&"u">typeof(null==global?void 0:global.Platform)&&(null==global?void 0:global.Platform.OS)==="ios"&&(this.bundleId=rG()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return rS(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:lj.relay},lM.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,t){var r,n,i;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish),a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"",o,l=t=>{t.topic===e&&(this.subscriber.off(l$.created,l),o())};return await Promise.all([new Promise(e=>{o=e,this.subscriber.on(l$.created,l)}),new Promise(async(r,n)=>{a=await this.subscriber.subscribe(e,uT({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&n(e)})||a,r()})]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await r1(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await o1())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=r5(a.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(lU.message,e),await this.recordMessageEvent(e,lM.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to connect"))};this.provider.once(lB.disconnect,r),await r1(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(lB.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,r)=>{let n=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(lB.disconnect,n),await this.subscriber.start().then(e).catch(r).finally(()=>{this.provider.off(lB.disconnect,n)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,a.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,n,i;if(rW())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new lE.r(new lI.Z(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:a,bundleId:o,packageName:l}){let c=r.split("?"),u=rJ(e,t,n),d=function(e,t){let r=new URLSearchParams(e);return Object.entries(t).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,t])=>{null!=t&&r.set(e,String(t))}),r.toString()}(c[1]||"",{auth:i,ua:u,projectId:s,useOnCloseEvent:a||void 0,packageName:l||void 0,bundleId:o||void 0});return c[0]+"?"+d}({sdkVersion:lL,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,lx.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,a={topic:r,message:n,publishedAt:i,transportType:lj.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(uT({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else(0,lx.isJsonRpcResponse)(e)&&this.events.emit(lU.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,lM.inbound),this.events.emit(lU.message,e))}async acknowledgePayload(e){let t=(0,lx.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(lB.payload,this.onPayloadHandler),this.provider.off(lB.connect,this.onConnectHandler),this.provider.off(lB.disconnect,this.onDisconnectHandler),this.provider.off(lB.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await o1();(function(e){switch(rK()){case rq.browser:!rV()&&rH()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case rq.reactNative:rV()&&"u">typeof global&&null!=global&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected));case rq.node:}})(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(o4.Lx.pulse,async()=>{var e;if(!this.transportExplicitlyClosed&&!this.connected&&(!(rH()&&(0,o.getDocument)())||(null==(e=(0,o.getDocument)())?void 0:e.visibilityState)==="visible"))try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(lU.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,a.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function uP(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function uR(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let uD="[object Arguments]",uN="[object Object]";function uU(){}function uB(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}var uL=Object.defineProperty,uj=Object.getOwnPropertySymbols,uM=Object.prototype.hasOwnProperty,uz=Object.prototype.propertyIsEnumerable,u$=(e,t,r)=>t in e?uL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uF=(e,t)=>{for(var r in t||(t={}))uM.call(t,r)&&u$(e,r,t[r]);if(uj)for(var r of uj(t))uz.call(t,r)&&u$(e,r,t[r]);return e},uq=(e,t,r)=>u$(e,"symbol"!=typeof t?t+"":t,r);class uW extends ld{constructor(e,t,r,n=lT,i){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,uq(this,"map",new Map),uq(this,"version","0.3"),uq(this,"cached",[]),uq(this,"initialized",!1),uq(this,"getKey"),uq(this,"storagePrefix",lT),uq(this,"recentlyDeleted",[]),uq(this,"recentlyDeletedLimit",200),uq(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!oq(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),uq(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),uq(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),uq(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>(function e(t,r,n,i,s,a,o){let l=o(t,r,n,i,s,a);if(void 0!==l)return l;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,n,i,s){if(Object.is(r,n))return!0;let a=uR(r),o=uR(n);if(a===uD&&(a=uN),o===uD&&(o=uN),a!==o)return!1;switch(a){case"[object String]":return r.toString()===n.toString();case"[object Number]":{let e=r.valueOf(),t=n.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),n.valueOf());case"[object RegExp]":return r.source===n.source&&r.flags===n.flags;case"[object Function]":return r===n}let l=(i=i??new Map).get(r),c=i.get(n);if(null!=l&&null!=c)return l===n;i.set(r,n),i.set(n,r);try{switch(a){case"[object Map]":if(r.size!==n.size)return!1;for(let[t,a]of r.entries())if(!n.has(t)||!e(a,n.get(t),t,r,n,i,s))return!1;return!0;case"[object Set]":{if(r.size!==n.size)return!1;let t=Array.from(r.values()),a=Array.from(n.values());for(let o=0;o<t.length;o++){let l=t[o],c=a.findIndex(t=>e(l,t,void 0,r,n,i,s));if(-1===c)return!1;a.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof lS&&lS.isBuffer(r)!==lS.isBuffer(n)||r.length!==n.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],n[t],t,r,n,i,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===n.byteLength&&t(new Uint8Array(r),new Uint8Array(n),i,s);case"[object DataView]":return r.byteLength===n.byteLength&&r.byteOffset===n.byteOffset&&t(new Uint8Array(r),new Uint8Array(n),i,s);case"[object Error]":return r.name===n.name&&r.message===n.message;case uN:{if(!(t(r.constructor,n.constructor,i,s)||uB(r)&&uB(n)))return!1;let a=[...Object.keys(r),...uP(r)],o=[...Object.keys(n),...uP(n)];if(a.length!==o.length)return!1;for(let t=0;t<a.length;t++){let o=a[t],l=r[o];if(!Object.hasOwn(n,o))return!1;let c=n[o];if(!e(l,c,o,r,n,i,s))return!1}return!0}default:return!1}}finally{i.delete(r),i.delete(n)}}(t,r,a,o)})(t[r],e[r],void 0,void 0,void 0,void 0,uU))):this.values)),uq(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=uF(uF({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),uq(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=rA(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=oM("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=oM("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=oM("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var uV=Object.defineProperty,uH=(e,t,r)=>t in e?uV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uK=(e,t,r)=>uH(e,"symbol"!=typeof t?t+"":t,r);class uG{constructor(e,t){this.core=e,this.logger=t,uK(this,"name","pairing"),uK(this,"version","0.3"),uK(this,"events",new i),uK(this,"pairings"),uK(this,"initialized",!1),uK(this,"storagePrefix",lT),uK(this,"ignoredPayloadTypes",[1]),uK(this,"registeredMethods",[]),uK(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),uK(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),uK(this,"create",async e=>{this.isInitialized();let t=a9(),r=await this.core.crypto.setSymKey(t),n=r5(a.FIVE_MINUTES),i={protocol:"irn"},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=o_({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(lq.create,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType,internal:e?.internal}),{topic:r,uri:o}}),uK(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[lZ.pairing_started]}});this.isValidPair(e,r);let{topic:n,symKey:i,relay:s,expiryTimestamp:o,methods:l}=ow(e.uri);if(r.props.properties.topic=n,r.addTrace(lZ.pairing_uri_validation_success),r.addTrace(lZ.pairing_uri_not_expired),this.pairings.keys.includes(n)){if(t=this.pairings.get(n),r.addTrace(lZ.existing_pairing),t.active)throw r.setError(lJ.active_pairing_already_exists),Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);r.addTrace(lZ.pairing_not_expired)}let c=o||r5(a.FIVE_MINUTES),u={topic:n,relay:s,expiry:c,active:!1,methods:l};this.core.expirer.set(n,c),await this.pairings.set(n,u),r.addTrace(lZ.store_new_pairing),e.activatePairing&&await this.activate({topic:n}),this.events.emit(lq.create,u),r.addTrace(lZ.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(i,n),r.addTrace(lZ.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(lJ.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:s})}catch(e){throw r.setError(lJ.subscribe_pairing_topic_failure),e}return r.addTrace(lZ.subscribe_pairing_topic_success),u}),uK(this,"activate",async({topic:e})=>{this.isInitialized();let t=r5(a.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),uK(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=r0();this.events.once(r6("pairing_ping",e),({error:e})=>{e?i(e):n()}),await r()}}),uK(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),uK(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),uK(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),uK(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",oz("USER_DISCONNECTED")),await this.deletePairing(t))}),uK(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return o_({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})}),uK(this,"sendRequest",async(e,t,r)=>{let n=(0,lx.formatJsonRpcRequest)(t,r),i=await this.core.crypto.encode(e,n),s=lF[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id}),uK(this,"sendResult",async(e,t,r)=>{let n=(0,lx.formatJsonRpcResult)(e,r),i=await this.core.crypto.encode(t,n),s=lF[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,i,s),await this.core.history.resolve(n)}),uK(this,"sendError",async(e,t,r)=>{let n=(0,lx.formatJsonRpcError)(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,a=lF[s]?lF[s].res:lF.unregistered_method.res;await this.core.relayer.publish(t,i,a),await this.core.history.resolve(n)}),uK(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,oz("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),uK(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>r8(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),uK(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),uK(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)}),uK(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(lq.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),uK(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("pairing_ping",r),{}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("pairing_ping",r),{error:t.error})},500)}),uK(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(lq.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),uK(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;let t=oz("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),uK(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(oz("WC_METHOD_UNSUPPORTED",e))}),uK(this,"isValidPair",(e,t)=>{var r;if(!oY(e)){let{message:r}=oM("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(lJ.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(oW(e,!1)){if(t(e))return!0;let r=nn(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=oM("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(lJ.malformed_pairing_uri),Error(r)}let n=ow(e?.uri);if(!(null!=(r=n?.relay)&&r.protocol)){let{message:e}=oM("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(lJ.malformed_pairing_uri),Error(e)}if(!(null!=n&&n.symKey)){let{message:e}=oM("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(lJ.malformed_pairing_uri),Error(e)}if(null!=n&&n.expiryTimestamp&&(0,a.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError(lJ.pairing_expired);let{message:e}=oM("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),uK(this,"isValidPing",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),uK(this,"isValidDisconnect",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),uK(this,"isValidPairingTopic",async e=>{if(!oW(e,!1)){let{message:t}=oM("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=oM("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(r8(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=oM("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=rA(t,this.name),this.pairings=new uW(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rS(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(lU.message,async e=>{let{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==lj.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);(0,lx.isJsonRpcRequest)(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):(0,lx.isJsonRpcResponse)(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(lV.expired,async e=>{let{topic:t}=r3(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(lq.expire,{topic:t}))})}}var uZ=Object.defineProperty,uJ=(e,t,r)=>t in e?uZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uY=(e,t,r)=>uJ(e,"symbol"!=typeof t?t+"":t,r);class uQ extends lo{constructor(e,t){super(e,t),this.core=e,this.logger=t,uY(this,"records",new Map),uY(this,"events",new i.EventEmitter),uY(this,"name","history"),uY(this,"version","0.3"),uY(this,"cached",[]),uY(this,"initialized",!1),uY(this,"storagePrefix",lT),uY(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),uY(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:r5(a.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(lW.created,n)}),uY(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,lx.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(lW.updated,t))}),uY(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),uY(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(lW.deleted,r))}),this.persist()}),uY(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),uY(this,"on",(e,t)=>{this.events.on(e,t)}),uY(this,"once",(e,t)=>{this.events.once(e,t)}),uY(this,"off",(e,t)=>{this.events.off(e,t)}),uY(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=rA(t,this.name)}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,lx.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=oM("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(lW.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=oM("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(lW.created,e=>{let t=lW.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(lW.updated,e=>{let t=lW.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(lW.deleted,e=>{let t=lW.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(o4.Lx.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,a.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(lW.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var uX=Object.defineProperty,u0=(e,t,r)=>t in e?uX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u1=(e,t,r)=>u0(e,"symbol"!=typeof t?t+"":t,r);class u2 extends lf{constructor(e,t){super(e,t),this.core=e,this.logger=t,u1(this,"expirations",new Map),u1(this,"events",new i.EventEmitter),u1(this,"name","expirer"),u1(this,"version","0.3"),u1(this,"cached",[]),u1(this,"initialized",!1),u1(this,"storagePrefix",lT),u1(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),u1(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),u1(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(lV.created,{target:r,expiration:n})}),u1(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),u1(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(lV.deleted,{target:t,expiration:r})}}),u1(this,"on",(e,t)=>{this.events.on(e,t)}),u1(this,"once",(e,t)=>{this.events.once(e,t)}),u1(this,"off",(e,t)=>{this.events.off(e,t)}),u1(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=rA(t,this.name)}get context(){return rS(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return r2("topic",e);if("number"==typeof e)return r2("id",e);let{message:t}=oM("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(lV.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=oM("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=oM("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,a.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(lV.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(o4.Lx.pulse,()=>this.checkExpirations()),this.events.on(lV.created,e=>{let t=lV.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(lV.expired,e=>{let t=lV.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(lV.deleted,e=>{let t=lV.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}}var u3=Object.defineProperty,u5=(e,t,r)=>t in e?u3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u8=(e,t,r)=>u5(e,"symbol"!=typeof t?t+"":t,r);class u6 extends lp{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,u8(this,"name","verify-api"),u8(this,"abortController"),u8(this,"isDevEnv"),u8(this,"verifyUrlV3",lK),u8(this,"storagePrefix",lT),u8(this,"version",2),u8(this,"publicKey"),u8(this,"fetchPromise"),u8(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,a.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),u8(this,"register",async e=>{if(!rH()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{let e=(0,o.getDocument)(),t=this.startAbortTimer(5*a.ONE_SECOND),n=await new Promise((n,s)=>{let a=()=>{window.removeEventListener("message",l),e.body.removeChild(o),s("attestation aborted")};this.abortController.signal.addEventListener("abort",a);let o=e.createElement("iframe");o.src=i,o.style.display="none",o.addEventListener("error",a,{signal:this.abortController.signal});let l=i=>{if(i.data&&"string"==typeof i.data)try{let s=JSON.parse(i.data);if("verify_attestation"===s.type){if((0,t0.xp)(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(o),this.abortController.signal.removeEventListener("abort",a),window.removeEventListener("message",l),n(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(o),window.addEventListener("message",l,{signal:this.abortController.signal})});return this.logger.debug(n,"jwt attestation"),n}catch(e){this.logger.warn(e)}return""}),u8(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:n}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if((0,t0.xp)(t).payload.id!==n)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)}),u8(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*a.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0}),u8(this,"getVerifyUrl",e=>{let t=e||lH;return lG.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${lH}`),t=lH),t}),u8(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(a.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),u8(this,"persistPublicKey",async e=>{this.logger.debug(e,"persisting public key to local storage"),await this.store.setItem(this.storeKey,e),this.publicKey=e}),u8(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),u8(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),u8(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),u8(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),u8(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,n,i]=e.split("."),s=rC.from(oi(i),"base64");if(64!==s.length)throw Error("Invalid signature length");let a=s.slice(0,32),o=s.slice(32,64),l=iS(`${r}.${n}`),c=function(e){let t=rC.from(e.x,"base64"),r=rC.from(e.y,"base64");return(0,t1.zo)([new Uint8Array([4]),t,r])}(t);if(!a2.verify((0,t1.zo)([a,o]),l,c))throw Error("Invalid signature");return(0,t0.xp)(e).payload}(e,t.publicKey),n={hasExpired:(0,a.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}}),this.logger=rA(t,this.name),this.abortController=new AbortController,this.isDevEnv=nr(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rS(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,a.toMiliseconds)(e))}}var u4=Object.defineProperty,u9=(e,t,r)=>t in e?u4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u7=(e,t,r)=>u9(e,"symbol"!=typeof t?t+"":t,r);class de extends ly{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,u7(this,"context","echo"),u7(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})}),this.logger=rA(t,this.context)}}var dt=Object.defineProperty,dr=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,ds=(e,t,r)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,da=(e,t)=>{for(var r in t||(t={}))dn.call(t,r)&&ds(e,r,t[r]);if(dr)for(var r of dr(t))di.call(t,r)&&ds(e,r,t[r]);return e},dl=(e,t,r)=>ds(e,"symbol"!=typeof t?t+"":t,r);class dc extends lg{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,dl(this,"context","event-client"),dl(this,"storagePrefix",lT),dl(this,"storageVersion",.1),dl(this,"events",new Map),dl(this,"shouldPersist",!1),dl(this,"init",async()=>{if(!nr())try{let e={eventId:nt(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:rJ(this.core.relayer.protocol,this.core.relayer.version,lL)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),dl(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=nt(),a=this.core.projectId||"",o=da({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:a,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,o),this.shouldPersist=!0),o}),dl(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let n=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(n)return da(da({},n),this.setMethods(n.eventId))}),dl(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),dl(this,"setEventListeners",()=>{this.core.heartbeat.on(o4.Lx.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,a.fromMiliseconds)(Date.now())-(0,a.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),dl(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),dl(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),dl(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),dl(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),dl(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,da(da({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),dl(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),dl(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${lL}${t}`,{method:"POST",body:JSON.stringify(e)})}),dl(this,"getAppDomain",()=>rZ().url),this.logger=rA(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var du=Object.defineProperty,dd=Object.getOwnPropertySymbols,dh=Object.prototype.hasOwnProperty,df=Object.prototype.propertyIsEnumerable,dp=(e,t,r)=>t in e?du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dy=(e,t)=>{for(var r in t||(t={}))dh.call(t,r)&&dp(e,r,t[r]);if(dd)for(var r of dd(t))df.call(t,r)&&dp(e,r,t[r]);return e},dg=(e,t,r)=>dp(e,"symbol"!=typeof t?t+"":t,r);class dm extends ln{constructor(e){var t,r;super(e),dg(this,"protocol","wc"),dg(this,"version",2),dg(this,"name",lk),dg(this,"relayUrl"),dg(this,"projectId"),dg(this,"customStoragePrefix"),dg(this,"events",new i.EventEmitter),dg(this,"logger"),dg(this,"heartbeat"),dg(this,"relayer"),dg(this,"crypto"),dg(this,"storage"),dg(this,"history"),dg(this,"expirer"),dg(this,"pairing"),dg(this,"verify"),dg(this,"echoClient"),dg(this,"linkModeSupportedApps"),dg(this,"eventClient"),dg(this,"initialized",!1),dg(this,"logChunkController"),dg(this,"on",(e,t)=>this.events.on(e,t)),dg(this,"once",(e,t)=>this.events.once(e,t)),dg(this,"off",(e,t)=>this.events.off(e,t)),dg(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),dg(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let n={topic:e,message:t,publishedAt:Date.now(),transportType:lj.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})});let n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||lN,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let{logger:s,chunkLoggerController:a}=rk({opts:rI(rx({},r={level:"string"==typeof e?.logger&&e.logger?e.logger:lC.logger,name:lk}),{level:r?.level||t4.level}),maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=rA(s,this.name),this.heartbeat=new o4.C$,this.crypto=new cZ(this,this.logger,e?.keychain),this.history=new uQ(this,this.logger),this.expirer=new u2(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new o9.Z(dy(dy({},lO),e?.storageOptions)),this.relayer=new uO({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new uG(this,this.logger),this.verify=new u6(this,this.logger,this.storage),this.echoClient=new de(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new dc(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){let t=new dm(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return rS(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(lz,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(lz)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;let t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){console.warn("Failed to get global WalletConnect core",e);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;let r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return"u">typeof lA&&"true"===lA.env.DISABLE_GLOBAL_CORE}catch{return!0}}}let db="client",dv=`wc@2:${db}:`,dw={name:db,logger:"error"},d_="WALLETCONNECT_DEEPLINK_CHOICE",dE="Proposal expired",dx=a.SEVEN_DAYS,dI={wc_sessionPropose:{req:{ttl:a.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1104},res:{ttl:a.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1106},res:{ttl:a.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:a.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:a.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1112},res:{ttl:a.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1114},res:{ttl:a.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:a.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:a.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:a.FIVE_MINUTES,prompt:!1,tag:1119}}},dS={min:a.FIVE_MINUTES,max:a.SEVEN_DAYS},dA={idle:"IDLE",active:"ACTIVE"},dk={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},dT=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],dC="wc@1.5:auth:",dO=`${dC}:PUB_KEY`;var dP=Object.defineProperty,dR=Object.defineProperties,dD=Object.getOwnPropertyDescriptors,dN=Object.getOwnPropertySymbols,dU=Object.prototype.hasOwnProperty,dB=Object.prototype.propertyIsEnumerable,dL=(e,t,r)=>t in e?dP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dj=(e,t)=>{for(var r in t||(t={}))dU.call(t,r)&&dL(e,r,t[r]);if(dN)for(var r of dN(t))dB.call(t,r)&&dL(e,r,t[r]);return e},dM=(e,t)=>dR(e,dD(t)),dz=(e,t,r)=>dL(e,"symbol"!=typeof t?t+"":t,r);class d$ extends l_{constructor(e){super(e),dz(this,"name","engine"),dz(this,"events",new i),dz(this,"initialized",!1),dz(this,"requestQueue",{state:dA.idle,queue:[]}),dz(this,"sessionRequestQueue",{state:dA.idle,queue:[]}),dz(this,"emittedSessionRequests",new ni({limit:500})),dz(this,"requestQueueDelay",a.ONE_SECOND),dz(this,"expectedPairingMethodMap",new Map),dz(this,"recentlyDeletedMap",new Map),dz(this,"recentlyDeletedLimit",200),dz(this,"relayMessageCache",[]),dz(this,"pendingSessions",new Map),dz(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(dI)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,a.toMiliseconds)(this.requestQueueDelay)))}),dz(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=dM(dj({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t),t.optionalNamespaces=function(e,t){var r,n,i,s,a,o;let l=oU(e),c=oU(t),u={};for(let e of Object.keys(l).concat(Object.keys(c)))u[e]={chains:r4(null==(r=l[e])?void 0:r.chains,null==(n=c[e])?void 0:n.chains),methods:r4(null==(i=l[e])?void 0:i.methods,null==(s=c[e])?void 0:s.methods),events:r4(null==(a=l[e])?void 0:a.events,null==(o=c[e])?void 0:o.events)};return u}(t.requiredNamespaces,t.optionalNamespaces),t.requiredNamespaces={};let{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:l}=t,c=r,u,d=!1;try{if(c){let e=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),e}if(!c||!d){let{topic:e,uri:t}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});c=e,u=t}if(!c){let{message:e}=oM("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),f=dI.wc_sessionPropose.req.ttl||a.FIVE_MINUTES,p=r5(f),y=dM(dj(dj({requiredNamespaces:n,optionalNamespaces:i,relays:l??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:c},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:(0,lx.payloadId)()}),g=r6("session_connect",y.id),{reject:m,resolve:b,done:v}=r0(f,dE),w=({id:e})=>{e===y.id&&(this.client.events.off("proposal_expire",w),this.pendingSessions.delete(y.id),this.events.emit(g,{error:{message:dE,code:0}}))};return this.client.events.on("proposal_expire",w),this.events.once(g,({error:e,session:t})=>{this.client.events.off("proposal_expire",w),e?m(e):t&&b(t)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:u,approval:v}}),dz(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),dz(this,"approve",async e=>{var t,r,n;let i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[lY.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError(lQ.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError(lQ.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError(lQ.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:a,namespaces:o,sessionProperties:l,scopedProperties:c,sessionConfig:u}=e,d=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});let{pairingTopic:h,proposer:f,requiredNamespaces:p,optionalNamespaces:y}=d,g=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:h});g||(g=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:lY.session_approve_started,properties:{topic:h,trace:[lY.session_approve_started,lY.session_namespaces_validation_success]}}));let m=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,v=await this.client.core.crypto.generateSharedKey(m,b),w=dj(dj(dj({relay:{protocol:a??"irn"},namespaces:o,controller:{publicKey:m,metadata:this.client.metadata},expiry:r5(dx)},l&&{sessionProperties:l}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),_=lj.relay;g.addTrace(lY.subscribing_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:_,internal:{skipSubscribe:!0}})}catch(e){throw g.setError(lQ.subscribe_session_topic_failure),e}g.addTrace(lY.subscribe_session_topic_success);let E=dM(dj({},w),{topic:v,requiredNamespaces:p,optionalNamespaces:y,pairingTopic:h,acknowledged:!1,self:w.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:m,transportType:lj.relay});await this.client.session.set(v,E),g.addTrace(lY.store_session);try{await this.sendApproveSession({sessionTopic:v,proposal:d,pairingProposalResponse:{relay:{protocol:a??"irn"},responderPublicKey:m},sessionSettleRequest:w,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:s}}}),g.addTrace(lY.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(v,oz("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(v),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:f.metadata}),await this.deleteProposal(s),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(v,r5(dx)),{topic:v,acknowledged:()=>Promise.resolve(this.client.session.get(v))}}),dz(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:n}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&await this.sendError({id:r,topic:t,error:n,rpcOpts:dI.wc_sessionPropose.reject}),await this.deleteProposal(r)}),dz(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=r0(),a=(0,lx.payloadId)(),o=(0,lx.getBigIntRpcId)().toString(),l=this.client.session.get(t).namespaces;return this.events.once(r6("session_update",a),({error:e})=>{e?s(e):i()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:o}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:l}),s(e)}),{acknowledged:n}}),dz(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=(0,lx.payloadId)(),{done:n,resolve:i,reject:s}=r0();return this.events.once(r6("session_extend",r),({error:e})=>{e?s(e):i()}),await this.setExpiry(t,r5(dx)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:n}}),dz(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:n,expiry:i=dI.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(n);s?.transportType===lj.relay&&await this.confirmOnlineStateOrThrow();let a=(0,lx.payloadId)(),o=(0,lx.getBigIntRpcId)().toString(),{done:l,resolve:c,reject:u}=r0(i,"Request expired. Please try again.");this.events.once(r6("session_request",a),({error:e,result:t})=>{e?u(e):c(t)});let d="wc_sessionRequest",h=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(h)return await this.sendRequest({clientRpcId:a,relayRpcId:o,topic:n,method:d,params:{request:dM(dj({},r),{expiryTimestamp:r5(i)}),chainId:t},expiry:i,throwOnFailedPublish:!0,appLink:h}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),await l();let f={request:dM(dj({},r),{expiryTimestamp:r5(i)}),chainId:t};return await Promise.all([new Promise(async e=>{await this.sendRequest({clientRpcId:a,relayRpcId:o,topic:n,method:d,params:f,expiry:i,throwOnFailedPublish:!0,tvf:this.getTVFParams(a,f)}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await r7(this.client.core.storage,d_);await r9({id:a,topic:n,wcDeepLink:e})}e()}),l()]).then(e=>e[2])}),dz(this,"respond",async e=>{var t,r;this.isInitialized();let n=this.client.core.eventClient.createEvent({properties:{topic:e?.topic||(null==(r=null==(t=e?.response)?void 0:t.id)?void 0:r.toString()),trace:[lY.session_request_response_started]}});try{await this.isValidRespond(e)}catch(e){throw n.addTrace(e?.message),n.setError(lQ.session_request_response_validation_failure),e}n.addTrace(lY.session_request_response_validation_success);let{topic:i,response:s}=e,{id:a}=s,o=this.client.session.get(i);o.transportType===lj.relay&&await this.confirmOnlineStateOrThrow();let l=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);try{n.addTrace(lY.session_request_response_publish_started),(0,lx.isJsonRpcResult)(s)?await this.sendResult({id:a,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:l}):(0,lx.isJsonRpcError)(s)&&await this.sendError({id:a,topic:i,error:s.error,appLink:l}),this.cleanupAfterResponse(e)}catch(e){throw n.addTrace(e?.message),n.setError(lQ.session_request_response_publish_failure),e}}),dz(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,lx.payloadId)(),r=(0,lx.getBigIntRpcId)().toString(),{done:n,resolve:i,reject:s}=r0();this.events.once(r6("session_ping",e),({error:e})=>{e?s(e):i()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),dz(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:n}=e,i=(0,lx.getBigIntRpcId)().toString(),s=(0,lx.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})}),dz(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:oz("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=oM("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),dz(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r),s=!0;return!!rY(i,n)&&(n.forEach(t=>{let{accounts:n,methods:i,events:a}=e.namespaces[t],o=oR(n),l=r[t];rY(rR(t,l),o)&&rY(l.methods,i)&&rY(l.events,a)||(s=!1)}),s)})(t,e)))),dz(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),dz(this,"authenticate",async(e,t)=>{var r,n,i;let s;this.isInitialized(),this.isValidAuthenticate(e);let a=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),o=a?lj.link_mode:lj.relay;o===lj.relay&&await this.confirmOnlineStateOrThrow();let{chains:l,statement:c="",uri:u,domain:d,nonce:h,type:f,exp:p,nbf:y,methods:g=[],expiry:m}=e,b=[...e.resources||[]],{topic:v,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:w}});let _=await this.client.core.crypto.generateKeyPair(),E=a7(_);if(await Promise.all([this.client.auth.authKeys.set(dO,{responseTopic:E,publicKey:_}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:v})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){let{namespace:e}=rO(l[0]),t=i8(function(e,t,r,n={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,n)}}}(e,"request",g));i7(b)&&(n=t,i=b.pop(),t=i8(function(e,t){i5(e),i5(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),n={att:{}};return r.forEach(r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(i=>{var s,a;n.att[r]=iY(iJ({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(a=t.att[r])?void 0:a[i])})})}),n}(i6(n),i6(i)))),b.push(t)}let x=m&&m>dI.wc_sessionAuthenticate.req.ttl?m:dI.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:f??"caip122",chains:l,statement:c,aud:u,domain:d,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:y,resources:b},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:r5(x)},S={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:l,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:r5(dI.wc_sessionPropose.req.ttl),id:(0,lx.payloadId)()},{done:A,resolve:k,reject:T}=r0(x,"Request expired"),C=(0,lx.payloadId)(),O=r6("session_connect",S.id),P=r6("session_request",C),R=async({error:e,session:t})=>{this.events.off(P,D),e?T(e):t&&k({session:t})},D=async e=>{var r,n,i;let s;if(await this.deletePendingAuthRequest(C,{message:"fulfilled",code:0}),e.error){let t=oz("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(O,R),T(e.error.message))}await this.deleteProposal(S.id),this.events.off(O,R);let{cacaos:a,responder:l}=e.result,c=[],u=[];for(let e of a){await i2({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),T(oz("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=i7(t.resources),n=[i0(t.iss)],i=i1(t.iss);if(r){let e=i4(r),t=i9(r);c.push(...e),n.push(...t)}for(let e of n)u.push(`${e}:${i}`)}let d=await this.client.core.crypto.generateSharedKey(_,l.publicKey);c.length>0&&(s={topic:d,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:l,controller:l.publicKey,expiry:r5(dx),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:oB([...new Set(c)],[...new Set(u)]),transportType:o},await this.client.core.relayer.subscribe(d,{transportType:o}),await this.client.session.set(d,s),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:l.metadata}),s=this.client.session.get(d)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=l.metadata.redirect)&&n.linkMode&&null!=(i=l.metadata.redirect)&&i.universal&&t&&(this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.session.update(d,{transportType:lj.link_mode})),k({auths:a,session:s})};this.events.once(O,R),this.events.once(P,D);try{if(a){let e=(0,lx.formatJsonRpcRequest)("wc_sessionAuthenticate",I,C);this.client.core.history.set(v,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:a6});s=oE(t,v,r)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:I,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:C}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:S,expiry:dI.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(e){throw this.events.off(O,R),this.events.off(P,D),e}return await this.setProposal(S.id,S),await this.setAuthRequest(C,{request:dM(dj({},I),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:s??w,response:A}}),dz(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:n}=e,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[lX.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw i.setError(l0.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw i.setError(l0.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let a=s.transportType||lj.relay;a===lj.relay&&await this.confirmOnlineStateOrThrow();let o=s.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),c=a7(o),u={type:1,receiverPublicKey:o,senderPublicKey:l},d=[],h=[];for(let e of n){if(!await i2({cacao:e,projectId:this.client.core.projectId})){i.setError(l0.invalid_cacao);let e=oz("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:c,error:e,encodeOpts:u}),Error(e.message)}i.addTrace(lX.cacaos_verified);let{p:t}=e,n=i7(t.resources),s=[i0(t.iss)],a=i1(t.iss);if(n){let e=i4(n),t=i9(n);d.push(...e),s.push(...t)}for(let e of s)h.push(`${e}:${a}`)}let f=await this.client.core.crypto.generateSharedKey(l,o);if(i.addTrace(lX.create_authenticated_session_topic),d?.length>0){t={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:o,metadata:s.requester.metadata},controller:o,expiry:r5(dx),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:oB([...new Set(d)],[...new Set(h)]),transportType:a},i.addTrace(lX.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(e){throw i.setError(l0.subscribe_authenticated_session_topic_failure),e}i.addTrace(lX.subscribe_authenticated_session_topic_success),await this.client.session.set(f,t),i.addTrace(lX.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}i.addTrace(lX.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:r,result:{cacaos:n,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,a)})}catch(e){throw i.setError(l0.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:t}}),dz(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw Error(`Could not find pending auth request with id ${t}`);n.transportType===lj.relay&&await this.confirmOnlineStateOrThrow();let i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),a=a7(i);await this.sendError({id:t,topic:a,error:r,encodeOpts:{type:1,receiverPublicKey:i,senderPublicKey:s},rpcOpts:dI.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.deleteProposal(t)}),dz(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return i3(t,r)}),dz(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),dz(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),dz(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,oz("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(d_).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,oz("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=dA.idle),i&&this.client.events.emit("session_delete",{id:s,topic:r})}),dz(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(lQ.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,oz("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),dz(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=dA.idle,this.client.events.emit("session_request_expire",{id:e}))}),dz(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),dz(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),dz(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,r5(dI.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),dz(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:n,transportType:i=lj.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})}),dz(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||r5(dI.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})}),dz(this,"sendRequest",async e=>{let t,r;let{topic:n,method:i,params:s,expiry:a,relayRpcId:o,clientRpcId:l,throwOnFailedPublish:c,appLink:u,tvf:d,publishOpts:h={}}=e,f=(0,lx.formatJsonRpcRequest)(i,s,l),p=!!u;try{let e=p?a6:a8;t=await this.client.core.crypto.encode(n,f,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(dT.includes(i)){let e=oe(JSON.stringify(f)),n=oe(t);r=await this.client.core.verify.register({id:n,decryptedId:e})}let y=dj(dj({},dI[i].req),h);if(y.attestation=r,a&&(y.ttl=a),o&&(y.id=o),this.client.core.history.set(n,f),p){let e=oE(u,n,t);await global.Linking.openURL(e,this.client.name)}else y.tvf=dM(dj({},d),{correlationId:f.id}),c?(y.internal=dM(dj({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,y)):this.client.core.relayer.publish(n,t,y).catch(e=>this.client.logger.error(e));return f.id}),dz(this,"sendProposeSession",async e=>{let{proposal:t,publishOpts:r}=e,n=(0,lx.formatJsonRpcRequest)("wc_sessionPropose",t,t.id);this.client.core.history.set(t.pairingTopic,n);let i=await this.client.core.crypto.encode(t.pairingTopic,n,{encoding:a8}),s=oe(JSON.stringify(n)),a=oe(i),o=await this.client.core.verify.register({id:a,decryptedId:s});await this.client.core.relayer.publishCustom({payload:{pairingTopic:t.pairingTopic,sessionProposal:i},opts:dM(dj({},r),{publishMethod:"wc_proposeSession",attestation:o})})}),dz(this,"sendApproveSession",async e=>{let{sessionTopic:t,pairingProposalResponse:r,proposal:n,sessionSettleRequest:i,publishOpts:s}=e,a=(0,lx.formatJsonRpcResult)(n.id,r),o=await this.client.core.crypto.encode(n.pairingTopic,a,{encoding:a8}),l=(0,lx.formatJsonRpcRequest)("wc_sessionSettle",i,s?.id),c=await this.client.core.crypto.encode(t,l,{encoding:a8});this.client.core.history.set(t,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:t,pairingTopic:n.pairingTopic,sessionProposalResponse:o,sessionSettlementRequest:c},opts:dM(dj({},s),{publishMethod:"wc_approveSession"})})}),dz(this,"sendResult",async e=>{let t,r,n;let{id:i,topic:s,result:a,throwOnFailedPublish:o,encodeOpts:l,appLink:c}=e,u=(0,lx.formatJsonRpcResult)(i,a),d=c&&"u">typeof(null==global?void 0:global.Linking);try{let e=d?a6:a8;t=await this.client.core.crypto.encode(s,u,dM(dj({},l||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),e}try{let e=(r=await this.client.core.history.get(s,i)).request;try{n=this.getTVFParams(i,e.params,a)}catch(e){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${e?.message}`)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),e}if(d){let e=oE(c,s,t);await global.Linking.openURL(e,this.client.name)}else{let e=dI[r.request.method].res;e.tvf=dM(dj({},n),{correlationId:i}),o?(e.internal=dM(dj({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,t,e)):this.client.core.relayer.publish(s,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(u)}),dz(this,"sendError",async e=>{let t,r;let{id:n,topic:i,error:s,encodeOpts:a,rpcOpts:o,appLink:l}=e,c=(0,lx.formatJsonRpcError)(n,s),u=l&&"u">typeof(null==global?void 0:global.Linking);try{let e=u?a6:a8;t=await this.client.core.crypto.encode(i,c,dM(dj({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),e}try{r=await this.client.core.history.get(i,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),e}if(u){let e=oE(l,i,t);await global.Linking.openURL(e,this.client.name)}else{let e=r.request.method,n=o||dI[e].res;this.client.core.relayer.publish(i,t,n)}await this.client.core.history.resolve(c)}),dz(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;r8(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{r8(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),dz(this,"onProviderMessageEvent",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),dz(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),dz(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===dA.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dA.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=dA.idle}),dz(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,a=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:a}))switch(a){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${a}`)}}),dz(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}}),dz(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=oM("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),dz(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r))&&!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),dz(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:a}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(lJ.proposal_listener_not_found)),this.isValidConnect(dj({},r.params));let o=s.expiryTimestamp||r5(dI.wc_sessionPropose.req.ttl),l=dj({id:a,pairingTopic:t,expiryTimestamp:o,attestation:n,encryptedId:i},s);await this.setProposal(a,l);let c=await this.getVerifyContext({attestationId:n,hash:oe(JSON.stringify(r)),encryptedId:i,metadata:l.proposer.metadata});e?.addTrace(lZ.emit_session_proposal),this.client.events.emit("session_proposal",{id:a,params:l,verifyContext:c})}catch(e){await this.sendError({id:a,topic:t,error:e,rpcOpts:dI.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),dz(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:n}=t;if((0,lx.isJsonRpcResult)(t)){let{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});let s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let a=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});let o=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});let l=await this.client.core.crypto.generateSharedKey(a,o);this.pendingSessions.set(n,{sessionTopic:l,pairingTopic:e,proposalId:n,publicKey:a});let c=await this.client.core.relayer.subscribe(l,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if((0,lx.isJsonRpcError)(t)){await this.deleteProposal(n);let e=r6("session_connect",n);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),dz(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);let{relay:r,controller:i,expiry:s,namespaces:a,sessionProperties:o,scopedProperties:l,sessionConfig:c}=t.params,u=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);let d=this.client.proposal.get(u.proposalId),h=dM(dj(dj(dj({topic:e,relay:r,expiry:s,namespaces:a,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces,controller:i.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},o&&{sessionProperties:o}),l&&{scopedProperties:l}),c&&{sessionConfig:c}),{transportType:lj.relay});await this.client.session.set(h.topic,h),await this.setExpiry(h.topic,h.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:h.peer.metadata}),this.client.events.emit("session_connect",{session:h}),this.events.emit(r6("session_connect",u.proposalId),{session:h}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(h),await this.sendResult({id:t.id,topic:e,result:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),dz(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;(0,lx.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(r6("session_approve",r),{})):(0,lx.isJsonRpcError)(t)&&(await this.client.session.delete(e,oz("USER_DISCONNECTED")),this.events.emit(r6("session_approve",r),{error:t.error}))}),dz(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:n}=t;try{let t=`${e}_session_update`,i=o5.get(t);if(i&&this.isRequestOutOfSync(i,n)){this.client.logger.warn(`Discarding out of sync request - ${n}`),this.sendError({id:n,topic:e,error:oz("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(dj({topic:e},r));try{o5.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0})}catch(e){throw o5.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}}),dz(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),dz(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,n=r6("session_update",r);if(0===this.events.listenerCount(n))throw Error(`emitting ${n} without any listeners`);(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("session_update",r),{}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("session_update",r),{error:t.error})}),dz(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,r5(dx)),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),dz(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,n=r6("session_extend",r);if(0===this.events.listenerCount(n))throw Error(`emitting ${n} without any listeners`);(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("session_extend",r),{}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("session_extend",r),{error:t.error})}),dz(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),dz(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,n=r6("session_ping",r);setTimeout(()=>{if(0===this.events.listenerCount(n))throw Error(`emitting ${n} without any listeners 2176`);(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("session_ping",r),{}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("session_ping",r),{error:t.error})},500)}),dz(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise(t=>{this.client.core.relayer.once(lU.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:oz("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),dz(this,"onSessionRequest",async e=>{var t,r,n;let{topic:i,payload:s,attestation:a,encryptedId:o,transportType:l}=e,{id:c,params:u}=s;try{await this.isValidRequest(dj({topic:i},u));let e=this.client.session.get(i),s=await this.getVerifyContext({attestationId:a,hash:oe(JSON.stringify((0,lx.formatJsonRpcRequest)("wc_sessionRequest",u,c))),encryptedId:o,metadata:e.peer.metadata,transportType:l}),d={id:c,topic:i,params:u,verifyContext:s};await this.setPendingSessionRequest(d),l===lj.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(d):(this.addSessionRequestToSessionRequestQueue(d),this.processSessionRequestQueue())}catch(e){await this.sendError({id:c,topic:i,error:e}),this.client.logger.error(e)}}),dz(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,n=r6("session_request",r);if(0===this.events.listenerCount(n))throw Error(`emitting ${n} without any listeners`);(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("session_request",r),{result:t.result}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("session_request",r),{error:t.error})}),dz(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:n}=t;try{let t=`${e}_session_event_${n.event.name}`,i=o5.get(t);if(i&&this.isRequestOutOfSync(i,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(dj({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),o5.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),dz(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,lx.isJsonRpcResult)(t)?this.events.emit(r6("session_request",r),{result:t.result}):(0,lx.isJsonRpcError)(t)&&this.events.emit(r6("session_request",r),{error:t.error})}),dz(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:n,attestation:i,encryptedId:s,transportType:a}=e;try{let{requester:e,authPayload:o,expiryTimestamp:l}=n.params,c=await this.getVerifyContext({attestationId:i,hash:oe(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:a}),u={requester:e,pairingTopic:r,id:n.id,authPayload:o,verifyContext:c,expiryTimestamp:l};await this.setAuthRequest(n.id,{request:u,pairingTopic:r,transportType:a}),a===lj.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:c})}catch(s){this.client.logger.error(s);let e=n.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),i=this.getAppLinkIfEnabled(n.params.requester.metadata,a);await this.sendError({id:n.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:dI.wc_sessionAuthenticate.autoReject,appLink:i})}}),dz(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),dz(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dA.idle,this.processSessionRequestQueue()},(0,a.toMiliseconds)(this.requestQueueDelay))}),dz(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=r6("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(r6("session_request",e.request.id),{error:t})})}),dz(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===dA.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),dz(this,"emitSessionRequest",e=>{if(this.emittedSessionRequests.has(e.id)){this.client.logger.warn({id:e.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${e.id}`);return}this.sessionRequestQueue.state=dA.active,this.emittedSessionRequests.add(e.id),this.client.events.emit("session_request",e)}),dz(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,lx.formatJsonRpcRequest)("wc_sessionPropose",dM(dj({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id),attestation:t.attestation,encryptedId:t.encryptedId})}),dz(this,"isValidConnect",async e=>{let t;if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:a,relays:o}=e;if(oq(r)||await this.isValidPairingTopic(r),t=!1,o?o&&o$(o)&&o.length&&o.forEach(e=>{t=oJ(e)}):t=!0,!t){let{message:e}=oM("MISSING_OR_INVALID",`connect() relays: ${o}`);throw Error(e)}if(n&&!oq(n)&&0!==oF(n)){let e="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(e):this.client.logger.warn(e),this.validateNamespaces(n,"requiredNamespaces")}if(i&&!oq(i)&&0!==oF(i)&&this.validateNamespaces(i,"optionalNamespaces"),s&&!oq(s)&&this.validateSessionProps(s,"sessionProperties"),a&&!oq(a)){this.validateSessionProps(a,"scopedProperties");let e=Object.keys(n||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(t=>e.includes(t.split(":")[0])))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(e)}`)}}),dz(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let n=null;if(e&&oF(e)){let i;let s=oG(e,t);s&&(n=s);let a=(i=null,Object.entries(e).forEach(([e,n])=>{var s,a;let o;if(i)return;let l=(s=rR(e,n),a=`${t} ${r}`,o=null,o$(s)&&s.length?s.forEach(e=>{o||oH(e)||(o=oz("UNSUPPORTED_CHAINS",`${a}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):oH(e)||(o=oz("UNSUPPORTED_CHAINS",`${a}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),o);l&&(i=l)}),i);a&&(n=a)}else n=oM("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw Error(r.message)}),dz(this,"isValidApprove",async e=>{if(!oY(e))throw Error(oM("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let a=this.client.proposal.get(t),o=oZ(r,"approve()");if(o)throw Error(o.message);let l=oX(a.requiredNamespaces,r,"approve()");if(l)throw Error(l.message);if(!oW(n,!0)){let{message:e}=oM("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw Error(e)}if(i&&!oq(i)&&this.validateSessionProps(i,"sessionProperties"),s&&!oq(s)){this.validateSessionProps(s,"scopedProperties");let e=new Set(Object.keys(r));if(!Object.keys(s).every(t=>e.has(t.split(":")[0])))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}}),dz(this,"isValidReject",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!oV(r.code,!1)||!r.message||!oW(r.message,!1)){let{message:e}=oM("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),dz(this,"isValidSessionSettleRequest",e=>{let t;if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:n,namespaces:i,expiry:s}=e;if(!oJ(r)){let{message:e}=oM("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let a=(t=null,oW(n?.publicKey,!1)||(t=oM("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(a)throw Error(a.message);let o=oZ(i,"onSessionSettleRequest()");if(o)throw Error(o.message);if(r8(s)){let{message:e}=oM("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),dz(this,"isValidUpdate",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let n=this.client.session.get(t),i=oZ(r,"update()");if(i)throw Error(i.message);let s=oX(n.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),dz(this,"isValidExtend",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),dz(this,"isValidRequest",async e=>{var t;if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:n,chainId:i,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:a}=this.client.session.get(r);if(!oQ(a,i)){let{message:e}=oM("MISSING_OR_INVALID",`request() chainId: ${i}`);throw Error(e)}if(oq(n)||!oW(n.method,!1)){let{message:e}=oM("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw Error(e)}if(!(oW(t=n.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{oR(e.accounts).includes(t)&&r.push(...e.methods)}),r})(a,i).includes(t))){let{message:e}=oM("MISSING_OR_INVALID",`request() method: ${n.method}`);throw Error(e)}if(s&&(!oV(s,!1)||!(s<=dS.max)||!(s>=dS.min))){let{message:e}=oM("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${dS.min} and ${dS.max}`);throw Error(e)}}),dz(this,"isValidRespond",async e=>{var t;if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(oq(n)||oq(n.result)&&oq(n.error)||!oV(n.id,!1)||!oW(n.jsonrpc,!1)){let{message:e}=oM("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw Error(e)}let i=this.client.pendingRequest.get(n.id);if(i.topic!==r){let{message:e}=oM("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${n.id}, expected topic: ${i.topic}, received topic: ${r}`);throw Error(e)}}),dz(this,"isValidPing",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),dz(this,"isValidEmit",async e=>{var t;if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:n,chainId:i}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!oQ(s,i)){let{message:e}=oM("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw Error(e)}if(oq(n)||!oW(n.name,!1)){let{message:e}=oM("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw Error(e)}if(!(oW(t=n.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{oR(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,i).includes(t))){let{message:e}=oM("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw Error(e)}}),dz(this,"isValidDisconnect",async e=>{if(!oY(e)){let{message:t}=oM("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),dz(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!oW(r,!1))throw Error("uri is required parameter");if(!oW(n,!1))throw Error("domain is required parameter");if(!oW(i,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>rO(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=rO(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),dz(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,a={verified:{verifyUrl:i.verifyUrl||lH,validation:"UNKNOWN",origin:i.url||""}};try{if(s===lj.link_mode){let e=this.getAppLinkIfEnabled(i,s);return a.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",a}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(a.verified.origin=e.origin,a.verified.isScam=e.isScam,a.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(a)}`),a}),dz(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((r,n)=>{if(null==r){let{message:i}=oM("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw Error(i)}})}),dz(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),dz(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),dz(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=oM("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),dz(this,"isLinkModeEnabled",(e,t)=>{var r,n,i,s,a,o,l,c,u;return!!e&&t===lj.link_mode&&(null==(n=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:n.linkMode)===!0&&(null==(s=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:s.universal)!==void 0&&(null==(o=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:o.universal)!==""&&(null==(l=e?.redirect)?void 0:l.universal)!==void 0&&(null==(c=e?.redirect)?void 0:c.universal)!==""&&(null==(u=e?.redirect)?void 0:u.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==global?void 0:global.Linking)}),dz(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),dz(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=ne(e,"topic")||"",r=decodeURIComponent(ne(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:lj.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})}),dz(this,"registerLinkModeListeners",async()=>{var e;if(nr()||rV()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==global?void 0:global.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),dz(this,"getTVFParams",(e,t,r)=>{var n,i,s;if(!(null!=(n=t.request)&&n.method))return{};let a={correlationId:e,rpcMethods:[t.request.method],chainId:t.chainId};try{let e=this.extractTxHashesFromResult(t.request,r);a.txHashes=e,a.contractAddresses=this.isValidContractData(t.request.params)?[null==(s=null==(i=t.request.params)?void 0:i[0])?void 0:s.to]:[]}catch(e){this.client.logger.warn(e,"Error getting TVF params")}return a}),dz(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1}),dz(this,"extractTxHashesFromResult",(e,t)=>{var r;try{if(!t)return[];let n=e.method,i=dk[n];if("sui_signTransaction"===n)return[function(e){let t=new Uint8Array(rC.from(e,"base64")),r=Array.from("TransactionData::").map(e=>e.charCodeAt(0)),n=new Uint8Array(r.length+t.length);n.set(r),n.set(t,r.length);let i=iB(n,{dkLen:32});return tJ.Z.encode(i)}(t.transactionBytes)];if("near_signTransaction"===n)return[iz(t)];if("near_signTransactions"===n)return t.map(e=>iz(e));if("xrpl_signTransactionFor"===n||"xrpl_signTransaction"===n)return[null==(r=t.tx_json)?void 0:r.hash];if("polkadot_signTransaction"===n)return[function(e){let t=Uint8Array.from(rC.from(e.signature,"hex")),r=function({publicKey:e,signature:t,payload:r}){var n,i;let s=o8(r.method),a=128|parseInt((null==(n=r.version)?void 0:n.toString())||"4"),o=function(e){let t=tJ.Z.decode(e)[0];return 42===t?0:60===t?2:1}(r.address),l="00"===r.era?new Uint8Array([0]):o8(r.era);if(1!==l.length&&2!==l.length)throw Error("Invalid era length");let c=parseInt(r.nonce,16),u=new Uint8Array([255&c,c>>8&255]),d=new Uint8Array([0,...e,o,...t,...l,...u,...function(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){let t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}if(e<BigInt(1)<<BigInt(30)){let t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}throw Error("BigInt compact encoding not supported > 2^30")}(BigInt(`0x${(i=r.tip).startsWith("0x")?i.slice(2):i}`)),...s]);return new Uint8Array([...function(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){let t=e<<2|1;return new Uint8Array([255&t,t>>8&255])}if(e<1073741824){let t=e<<2|2;return new Uint8Array([255&t,t>>8&255,t>>16&255,t>>24&255])}throw Error("Compact encoding > 2^30 not supported")}(d.length+1),a,...d])}({publicKey:function(e){let t=tJ.Z.decode(e);if(t.length<33)throw Error("Too short to contain a public key");return t.slice(1,33)}(e.transaction.address),signature:t,payload:e.transaction});return function(e){let t=o8(e),r=(0,t3.blake2b)(t,void 0,32);return"0x"+rC.from(r).toString("hex")}(rC.from(r).toString("hex"))}({transaction:e.params.transactionPayload,signature:t.signature})];if("algo_signTxn"===n)return o$(t)?t.map(e=>i$(e)):[i$(t)];if("cosmos_signDirect"===n)return[function(e){let t=rC.from(e.signed.bodyBytes,"base64"),r=rC.from(e.signed.authInfoBytes,"base64"),n=rC.from(e.signature.signature,"base64"),i=[];i.push(rC.from([10])),i.push(iF(t.length)),i.push(t),i.push(rC.from([18])),i.push(iF(r.length)),i.push(r),i.push(rC.from([26])),i.push(iF(n.length)),i.push(n);let s=iS(rC.concat(i));return rC.from(s).toString("hex").toUpperCase()}(t)];if("wallet_sendCalls"===n)return function(e){var t,r;let n=[];try{if("string"==typeof e)return n.push(e),n;if("object"!=typeof e)return n;null!=e&&e.id&&n.push(e.id);let i=null==(r=null==(t=e?.capabilities)?void 0:t.caip345)?void 0:r.transactionHashes;i&&n.push(...i)}catch(e){console.warn("getWalletSendCallsHashes failed: ",e)}return n}(t);if("string"==typeof t)return[t];let s=t[i.key];if(o$(s))return"solana_signAllTransactions"===n?s.map(e=>(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let n=r[0];if(0===n)throw Error("No signatures found");if(r.length<1+64*n)throw Error("Transaction data too short for claimed signature count");if(r.length<100)throw Error("Transaction too short");let i=rC.from(e,"base64").slice(1,65);return tJ.Z.encode(i)})(e)):s;if("string"==typeof s)return[s]}catch(e){this.client.logger.warn(e,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[e,r]of Object.entries(t))for(let t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){let{message:e}=oM("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lU.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(dO)?this.client.auth.authKeys.get(dO):{responseTopic:void 0,publicKey:void 0};try{let e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===lj.link_mode?a6:a8});(0,lx.isJsonRpcRequest)(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:oe(r)})):(0,lx.isJsonRpcResponse)(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(lV.expired,async e=>{let{topic:t,id:r}=r3(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,oM("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,oM("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(lq.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(lq.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!oW(e,!1)){let{message:t}=oM("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=oM("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(r8(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=oM("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!oW(e,!1)){let{message:t}=oM("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=oM("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(r8(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=oM("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=oM("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(oW(e,!1)){let{message:t}=oM("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=oM("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=oM("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=oM("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(r8(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=oM("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class dF extends uW{constructor(e,t){super(e,t,"proposal",dv),this.core=e,this.logger=t}}class dq extends uW{constructor(e,t){super(e,t,"session",dv),this.core=e,this.logger=t}}class dW extends uW{constructor(e,t){super(e,t,"request",dv,e=>e.id),this.core=e,this.logger=t}}class dV extends uW{constructor(e,t){super(e,t,"authKeys",dC,()=>dO),this.core=e,this.logger=t}}class dH extends uW{constructor(e,t){super(e,t,"pairingTopics",dC),this.core=e,this.logger=t}}class dK extends uW{constructor(e,t){super(e,t,"requests",dC,e=>e.id),this.core=e,this.logger=t}}var dG=Object.defineProperty,dZ=(e,t,r)=>t in e?dG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dJ=(e,t,r)=>dZ(e,"symbol"!=typeof t?t+"":t,r);class dY{constructor(e,t){this.core=e,this.logger=t,dJ(this,"authKeys"),dJ(this,"pairingTopics"),dJ(this,"requests"),this.authKeys=new dV(this.core,this.logger),this.pairingTopics=new dH(this.core,this.logger),this.requests=new dK(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var dQ=Object.defineProperty,dX=(e,t,r)=>t in e?dQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d0=(e,t,r)=>dX(e,"symbol"!=typeof t?t+"":t,r);class d1 extends lw{constructor(e){super(e),d0(this,"protocol","wc"),d0(this,"version",2),d0(this,"name",dw.name),d0(this,"metadata"),d0(this,"core"),d0(this,"logger"),d0(this,"events",new i.EventEmitter),d0(this,"engine"),d0(this,"session"),d0(this,"proposal"),d0(this,"pendingRequest"),d0(this,"auth"),d0(this,"signConfig"),d0(this,"on",(e,t)=>this.events.on(e,t)),d0(this,"once",(e,t)=>this.events.once(e,t)),d0(this,"off",(e,t)=>this.events.off(e,t)),d0(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),d0(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),d0(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),d0(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),d0(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||dw.name,this.metadata=function(e){var t,r;let n=rZ();try{return null!=e&&e.url&&n.url&&new URL(e.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(e=>""!==e)),r$(rz(rz({},n),e),{url:e?.url||n.url,name:e?.name||n.name,description:e?.description||n.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(t){return console.warn("Error populating app metadata",t),e||n}}(e?.metadata),this.signConfig=e?.signConfig;let t=o6({logger:e?.logger||dw.logger,name:this.name});this.logger=t,this.core=e?.core||new dm(e),this.session=new dq(this.core,this.logger),this.proposal=new dF(this.core,this.logger),this.pendingRequest=new dW(this.core,this.logger),this.engine=new d$(this),this.auth=new dY(this.core,this.logger)}static async init(e){let t=new d1(e);return await t.initialize(),t}get context(){return rS(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var d2=r(5071),d3=r(82957).lW;function d5(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function d8(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function d6(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let d4="[object String]",d9="[object Number]",d7="[object Boolean]",he="[object Arguments]";function ht(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hr(e,t,r,n=new Map,i){let s=i?.(e,t,r,n);if(null!=s)return s;if(d5(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){let t=Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=hr(e[s],s,r,n,i);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,a]of(n.set(e,t),e))t.set(s,hr(a,s,r,n,i));return t}if(e instanceof Set){let t=new Set;for(let s of(n.set(e,t),e))t.add(hr(s,void 0,r,n,i));return t}if("u">typeof d3&&d3.isBuffer(e))return e.subarray();if(ht(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=hr(e[s],s,r,n,i);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),hn(t,e,r,n,i),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return n.set(e,t),hn(t,e,r,n,i),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return n.set(e,t),hn(t,e,r,n,i),t}if(e instanceof Error){let t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,hn(t,e,r,n,i),t}if("object"==typeof e&&function(e){switch(d6(e)){case he:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case d7:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case d9:case"[object Object]":case"[object RegExp]":case"[object Set]":case d4:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),hn(t,e,r,n,i),t}return e}function hn(e,t,r=e,n,i){let s=[...Object.keys(t),...d8(t)];for(let a=0;a<s.length;a++){let o=s[a],l=Object.getOwnPropertyDescriptor(e,o);(null==l||l.writable)&&(e[o]=hr(t[o],o,r,n,i))}}function hi(e){var t;return t=(t,r,n,i)=>{let s=void 0;if(null!=s)return s;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case d9:case d4:case d7:{let t=new e.constructor(e?.valueOf());return hn(t,e),t}case he:{let t={};return hn(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}},hr(e,void 0,e,new Map,t)}function hs(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===d6(e)}function ha(e){return"object"==typeof e&&null!==e}function ho(){}let hl="error",hc="universal_provider",hu=`wc@2:${hc}:`,hd="https://rpc.walletconnect.org/v1/",hh="generic",hf=`${hd}bundler`,hp="call_status",hy="default_chain_changed";var hg=Object.defineProperty,hm=Object.defineProperties,hb=Object.getOwnPropertyDescriptors,hv=Object.getOwnPropertySymbols,hw=Object.prototype.hasOwnProperty,h_=Object.prototype.propertyIsEnumerable,hE=(e,t,r)=>t in e?hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hx=(e,t)=>{for(var r in t||(t={}))hw.call(t,r)&&hE(e,r,t[r]);if(hv)for(var r of hv(t))h_.call(t,r)&&hE(e,r,t[r]);return e},hI=(e,t)=>hm(e,hb(t));function hS(e,t,r){var n;let i=rO(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${hd}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function hA(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function hk(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>{var r,n;return(null==(r=t?.chains)?void 0:r.length)&&(null==(n=t?.chains)?void 0:n.length)>0}))}function hT(e={},t={}){return function(e,...t){return function(e,...t){let r=t.slice(0,-1),n=t[t.length-1],i=e;for(let e=0;e<r.length;e++)i=function e(t,r,n,i){if(d5(t)&&(t=Object(t)),null==r||"object"!=typeof r)return t;if(i.has(r))return function(e){if(d5(e))return e;if(Array.isArray(e)||ht(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){let t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){let t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new r([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(i.get(r));if(i.set(r,t),Array.isArray(r)){r=r.slice();for(let e=0;e<r.length;e++)r[e]=r[e]??void 0}let s=[...Object.keys(r),...d8(r)];for(let a=0;a<s.length;a++){let o=s[a],l=r[o],c=t[o];if(hs(l)&&(l={...l}),hs(c)&&(c={...c}),"u">typeof d3&&d3.isBuffer(l)&&(l=hi(l)),Array.isArray(l)){if("object"==typeof c&&null!=c){let e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){let n=t[r];e[n]=c[n]}c=e}else c=[]}let u=n(c,l,o,t,r,i);null!=u?t[o]=u:Array.isArray(l)||ha(c)&&ha(l)?t[o]=e(c,l,n,i):null==c&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return!!(null!=t&&Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(l)?t[o]=e({},l,n,i):null==c&&ht(l)?t[o]=hi(l):(void 0===c||void 0!==l)&&(t[o]=l)}return t}(i,r[e],n,new Map);return i}(e,...t,ho)}(hk(hC(e)),hk(hC(t)))}function hC(e){var t,r,n,i,s;let a={};if(!oF(e))return a;for(let[o,l]of Object.entries(e)){let e=oD(o)?[o]:l.chains,c=l.methods||[],u=l.events||[],d=l.rpcMap||{},h=oN(o);a[h]=hI(hx(hx({},a[h]),l),{chains:r4(e,null==(t=a[h])?void 0:t.chains),methods:r4(c,null==(r=a[h])?void 0:r.methods),events:r4(u,null==(n=a[h])?void 0:n.events)}),(oF(d)||oF((null==(i=a[h])?void 0:i.rpcMap)||{}))&&(a[h].rpcMap=hx(hx({},d),null==(s=a[h])?void 0:s.rpcMap))}return a}function hO(e){return e.includes(":")?e.split(":")[2]:e}function hP(e){let t={};for(let[r,n]of Object.entries(e)){let e=n.methods||[],i=n.events||[],s=n.accounts||[],a=oD(r)?[r]:n.chains?n.chains:hA(n.accounts);t[r]={chains:a,methods:e,events:i,accounts:s}}return t}function hR(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let hD={},hN=e=>hD[e],hU=(e,t)=>{hD[e]=t};var hB=Object.defineProperty,hL=Object.getOwnPropertySymbols,hj=Object.prototype.hasOwnProperty,hM=Object.prototype.propertyIsEnumerable,hz=(e,t,r)=>t in e?hB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h$=(e,t)=>{for(var r in t||(t={}))hj.call(t,r)&&hz(e,r,t[r]);if(hL)for(var r of hL(t))hM.call(t,r)&&hz(e,r,t[r]);return e};let hF="eip155",hq=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],hW=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,hV=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,hH=e=>Object.keys(e).filter(e=>hq.includes(e)).reduce((t,r)=>(t[r]=hK(e[r]),t),{}),hK=e=>"string"==typeof e&&function(e){try{let t=JSON.parse(e);return"object"==typeof t&&null!==t&&!Array.isArray(t)}catch{return!1}}(e)?JSON.parse(e):e,hG=(e,t,r)=>{let{sessionProperties:n={},scopedProperties:i={}}=e,s={};if(!oF(i)&&!oF(n))return;let a=hH(n);for(let e of r){let r=hW(e);if(!r)continue;s[hV(r)]=a;let n=i?.[`${hF}:${r}`];if(n){let e=n?.[`${hF}:${r}:${t}`];s[hV(r)]=h$(h$({},s[hV(r)]),hH(e||n))}}for(let[e,t]of Object.entries(s))0===Object.keys(t).length&&delete s[e];return Object.keys(s).length>0?s:void 0};var hZ=Object.defineProperty,hJ=(e,t,r)=>t in e?hZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hY=(e,t,r)=>hJ(e,"symbol"!=typeof t?t+"":t,r);class hQ{constructor(e){hY(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,t){return await this.storage.setItem(e,t)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return n||(n=new hQ(e)),n}}var hX=Object.defineProperty,h0=Object.defineProperties,h1=Object.getOwnPropertyDescriptors,h2=Object.getOwnPropertySymbols,h3=Object.prototype.hasOwnProperty,h5=Object.prototype.propertyIsEnumerable,h8=(e,t,r)=>t in e?hX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h6=(e,t)=>{for(var r in t||(t={}))h3.call(t,r)&&h8(e,r,t[r]);if(h2)for(var r of h2(t))h5.call(t,r)&&h8(e,r,t[r]);return e},h4=(e,t)=>h0(e,h1(t));async function h9(e,t){let r;let n=rO(e.result.capabilities.caip345.caip2),i=e.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(i.map(e=>h7(n.reference,e,t))),a=s.filter(e=>"fulfilled"===e.status).map(e=>e.value).filter(e=>e);s.filter(e=>"rejected"===e.status).forEach(e=>console.warn("Failed to fetch transaction receipt:",e.reason));let o=!a.length||a.some(e=>!e),l=a.every(e=>e?.status==="0x1"),c=a.every(e=>e?.status==="0x0"),u=a.some(e=>e?.status==="0x0");return o?r=100:l?r=200:c?r=500:u&&(r=600),{id:e.result.id,version:e.request.version,atomic:e.request.atomicRequired,chainId:e.request.chainId,capabilities:e.result.capabilities,receipts:a,status:r}}async function h7(e,t,r){return await r(parseInt(e)).request((0,lx.formatJsonRpcRequest)("eth_getTransactionReceipt",[t]))}async function fe({sendCalls:e,storage:t}){let r=await t.getItem(hp);await t.setItem(hp,h4(h6({},r),{[e.result.id]:{request:e.request,result:e.result,expiry:r5(86400)}}))}async function ft({resultId:e,storage:t}){let r=await t.getItem(hp);if(r){for(let n in delete r[e],await t.setItem(hp,r),r)r8(r[n].expiry)&&delete r[n];await t.setItem(hp,r)}}async function fr({resultId:e,storage:t}){let r=await t.getItem(hp),n=r?.[e];if(n&&!r8(n.expiry))return n;await ft({resultId:e,storage:t})}var fn=Object.defineProperty,fi=Object.defineProperties,fs=Object.getOwnPropertyDescriptors,fa=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,fc=(e,t,r)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fu=(e,t)=>{for(var r in t||(t={}))fo.call(t,r)&&fc(e,r,t[r]);if(fa)for(var r of fa(t))fl.call(t,r)&&fc(e,r,t[r]);return e},fd=(e,t)=>fi(e,fs(t)),fh=(e,t,r)=>fc(e,"symbol"!=typeof t?t+"":t,r);class ff{constructor(e){fh(this,"name","eip155"),fh(this,"client"),fh(this,"chainId"),fh(this,"namespace"),fh(this,"httpProviders"),fh(this,"events"),fh(this,"storage"),this.namespace=e.namespace,this.events=hN("events"),this.client=hN("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=hQ.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t);let r=this.chainId;this.chainId=parseInt(e),this.events.emit(hy,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||hS(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new lE.r(new d2.k(r,hN("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let n=parseInt(t.includes(":")?t.split(":")[1]:t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(e){let t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=fd(fu({},this.httpProviders),{[t]:this.createHttpProvider(t)}),this.httpProviders[t])}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",i=parseInt(n=n.startsWith("0x")?n:`0x${n}`,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n,i,s;let a;let o=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0],l=(null==(i=null==(n=e.request)?void 0:n.params)?void 0:i[1])||[];if(!o)throw Error("Missing address parameter in `wallet_getCapabilities` request");let c=this.client.session.get(e.topic),u=(null==(s=c?.sessionProperties)?void 0:s.capabilities)||{},d=`${o}${l.join(",")}`,h=u?.[d];if(h)return h;try{a=hG(c,o,l)}catch(e){console.warn("Failed to extract capabilities from session",e)}if(a)return a;let f=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:fd(fu({},c.sessionProperties||{}),{capabilities:fd(fu({},u||{}),{[d]:f})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return f}async getCallStatus(e){var t,r,n;let i=this.client.session.get(e.topic),s=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(s){let t=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let a=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,a)}let o=await fr({resultId:null==(n=e.request.params)?void 0:n[0],storage:this.storage});if(o)try{return await h9(o,this.getHttpProvider.bind(this))}catch(e){console.warn("Failed to fetch call status from stored send calls",e,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;let n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,lx.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${hf}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}async sendCalls(e){var t,r,n;let i=await this.client.request(e),s=null==(t=e.request.params)?void 0:t[0],a=i?.id,o=i?.capabilities||{},l=null==(r=o?.caip345)?void 0:r.caip2,c=null==(n=o?.caip345)?void 0:n.transactionHashes;return a&&l&&null!=c&&c.length&&await fe({sendCalls:{request:s,result:i},storage:this.storage}),i}}var fp=Object.defineProperty,fy=(e,t,r)=>t in e?fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fg=(e,t,r)=>fy(e,"symbol"!=typeof t?t+"":t,r);class fm{constructor(e){fg(this,"name",hh),fg(this,"client"),fg(this,"httpProviders"),fg(this,"events"),fg(this,"namespace"),fg(this,"chainId"),this.namespace=e.namespace,this.events=hN("events"),this.client=hN("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t);let r=this.chainId;this.chainId=e,this.events.emit(hy,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return rO(e).namespace}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{var t,n;let i=rO(e),s=null==(n=null==(t=this.namespace)?void 0:t.rpcMap)?void 0:n[`${i.namespace}:${i.reference}`];r[i.reference]=this.createHttpProvider(e,s)}),r}getHttpProvider(e){let t=rO(e).reference,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||hS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new lE.r(new d2.Z(r,hN("disableProviderPing")))}}var fb=Object.defineProperty,fv=Object.defineProperties,fw=Object.getOwnPropertyDescriptors,f_=Object.getOwnPropertySymbols,fE=Object.prototype.hasOwnProperty,fx=Object.prototype.propertyIsEnumerable,fI=(e,t,r)=>t in e?fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fS=(e,t)=>{for(var r in t||(t={}))fE.call(t,r)&&fI(e,r,t[r]);if(f_)for(var r of f_(t))fx.call(t,r)&&fI(e,r,t[r]);return e},fA=(e,t)=>fv(e,fw(t)),fk=(e,t,r)=>fI(e,"symbol"!=typeof t?t+"":t,r);class fT{constructor(e){var t,r;fk(this,"client"),fk(this,"namespaces"),fk(this,"optionalNamespaces"),fk(this,"sessionProperties"),fk(this,"scopedProperties"),fk(this,"events",new i),fk(this,"rpcProviders",{}),fk(this,"session"),fk(this,"providerOpts"),fk(this,"logger"),fk(this,"uri"),fk(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=o6({logger:null!=(t=e.logger)?t:hl,name:null!=(r=this.providerOpts.name)?r:hc}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new fT(e);return await t.initialize(),t}async request(e,t,r){let[n,i]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(n).request({request:fS({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){let i=new Date().getTime();this.request(e,r,n).then(e=>t(null,(0,lx.formatJsonRpcResult)(i,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:oz("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));let i=await n();if(this.session=i.session,this.session){let e=hP(this.session.namespaces);this.namespaces=hT(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let n=await r();this.session=n;let i=hP(n.namespaces);return this.namespaces=hT(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,n]=this.validateChain(e);this.getProvider(r).setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(!o$(t))return;for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}catch(e){this.logger.warn(e,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await d1.init({core:this.providerOpts.core,logger:this.providerOpts.logger||hl,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>oN(e)))];hU("client",this.client),hU("events",this.events),hU("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let n=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;n.push(...r)}),n}(e,this.session);if(t?.length===0)return;let r=hA(t),n=fA(fS({},hT(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});"eip155"===e?this.rpcProviders[e]=new ff({namespace:n}):this.rpcProviders[e]=new fm({namespace:n})})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:r,topic:n}=e;if(n!==(null==(t=this.session)?void 0:t.topic))return;let{event:i}=r;if("accountsChanged"===i.name){let e=i.data;e&&o$(e)&&this.events.emit("accountsChanged",e.map(hO))}else if("chainChanged"===i.name){let e=r.chainId,t=r.event.data,n=oN(e),i=hR(e)!==hR(t)?`${n}:${hR(t)}`:e;this.onChainChanged({currentCaipChainId:i})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,n;if(e!==(null==(r=this.session)?void 0:r.topic))return;let{namespaces:i}=t,s=null==(n=this.client)?void 0:n.session.get(e);this.session=fA(fS({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",fA(fS({},oz("USER_DISCONNECTED")),{data:e.topic})))}),this.on(hy,e=>{this.onChainChanged(fA(fS({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[hh]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t={},optionalNamespaces:r={},sessionProperties:n,scopedProperties:i}=e;this.optionalNamespaces=hT(t,r),this.sessionProperties=n,this.scopedProperties=i}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>oN(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let n=oN(Object.keys(this.namespaces)[0]),i=this.rpcProviders[n].getDefaultChain();return[n,i]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:t,internal:r=!1}){if(!this.namespaces)return;let[n,i]=this.validateChain(e);i&&(this.updateNamespaceChain(n,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:n,currentCaipChainId:e,previousCaipChainId:t})):this.getProvider(n).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:t,previousCaipChainId:r}){var n,i;try{if(r===t)return;let s=null==(i=null==(n=this.session)?void 0:n.namespaces[e])?void 0:i.accounts;if(!s)return;let a=s.filter(e=>e.includes(`${t}:`)).map(hO);if(!o$(a))return;this.events.emit("accountsChanged",a)}catch(e){this.logger.warn(e,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,t){if(!this.namespaces)return;let r=this.namespaces[e]?e:`${e}:${t}`;this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]={chains:[],methods:[],events:[],defaultChain:t}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;let n=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${hu}/${e}${n}`,t)}async getFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${hu}/${e}${r}`)}async deleteFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${hu}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(hu)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn(e,"Failed to cleanup storage")}}}let fC=["eth_sendTransaction","personal_sign"],fO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],fP=["chainChanged","accountsChanged"],fR=["chainChanged","accountsChanged","message","disconnect","connect"],fD=async()=>{let{createAppKit:e}=await r.e(2772).then(r.bind(r,82772));return e};var fN=Object.defineProperty,fU=Object.defineProperties,fB=Object.getOwnPropertyDescriptors,fL=Object.getOwnPropertySymbols,fj=Object.prototype.hasOwnProperty,fM=Object.prototype.propertyIsEnumerable,fz=(e,t,r)=>t in e?fN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f$=(e,t)=>{for(var r in t||(t={}))fj.call(t,r)&&fz(e,r,t[r]);if(fL)for(var r of fL(t))fM.call(t,r)&&fz(e,r,t[r]);return e},fF=(e,t)=>fU(e,fB(t)),fq=(e,t,r)=>fz(e,"symbol"!=typeof t?t+"":t,r);function fW(e){return Number(e[0].split(":")[1])}function fV(e){return`0x${e.toString(16)}`}class fH{constructor(){fq(this,"events",new i.EventEmitter),fq(this,"namespace","eip155"),fq(this,"accounts",[]),fq(this,"signer"),fq(this,"chainId",1),fq(this,"modal"),fq(this,"rpc"),fq(this,"STORAGE_KEY","wc@2:ethereum_provider:"),fq(this,"on",(e,t)=>(this.events.on(e,t),this)),fq(this,"once",(e,t)=>(this.events.once(e,t),this)),fq(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),fq(this,"off",(e,t)=>(this.events.off(e,t),this)),fq(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){let t=new fH;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var t;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:r,optional:n}=function(e){let{chains:t,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:a,rpcMap:o}=e;if(!o$(t))throw Error("Invalid chains");let l={chains:t,methods:n||fC,events:s||fP,rpcMap:f$({},t.length?{[fW(t)]:o[fW(t)]}:{})},c=s?.filter(e=>!fP.includes(e)),u=n?.filter(e=>!fC.includes(e));if(!r&&!a&&!i&&!(null!=c&&c.length)&&!(null!=u&&u.length))return{required:t.length?l:void 0};let d={chains:[...new Set(c?.length&&u?.length||!r?l.chains.concat(r||[]):r)],methods:[...new Set(l.methods.concat(null!=i&&i.length?i:fO))],events:[...new Set(l.events.concat(null!=a&&a.length?a:fR))],rpcMap:o};return{required:t.length?l:void 0,optional:r.length?d:void 0}}(this.rpc);try{let t=await new Promise(async(t,i)=>{var s,a;this.rpc.showQrModal&&(null==(s=this.modal)||s.open(),null==(a=this.modal)||a.subscribeState(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),i(Error("Connection request reset. Please try again.")))}));let o=null!=e&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(fF(f$({namespaces:f$({},r&&{[this.namespace]:r})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:e?.pairingTopic,scopedProperties:o})).then(e=>{t(e)}).catch(e=>{var t;null==(t=this.modal)||t.showErrorMessage("Unable to connect"),i(Error(e.message))})});if(!t)return;let i=rP(t.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:fV(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{null==(t=this.modal)||t.close()}}async authenticate(e,t){var r;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{let r=await new Promise(async(r,n)=>{var i,s;this.rpc.showQrModal&&(null==(i=this.modal)||i.open(),null==(s=this.modal)||s.subscribeState(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),n(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(fF(f$({},e),{chains:this.rpc.chains}),t).then(e=>{r(e)}).catch(e=>{var t;null==(t=this.modal)||t.showErrorMessage("Unable to connect"),n(Error(e.message))})}),n=r.session;if(n){let e=rP(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:fV(this.chainId)})}return r}catch(e){throw this.signer.logger.error(e),e}finally{null==(r=this.modal)||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",fV(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",fF(f$({},oz("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",fV(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,r,n]=e.split(":");return{chainId:`${t}:${r}`,address:n}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;let n=null!=(t=e?.chains)?t:[],i=null!=(r=e?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw Error("No chains specified in either `chains` or `optionalChains`");let a=n.length?e?.methods||fC:[],o=n.length?e?.events||fP:[],l=e?.optionalMethods||[],c=e?.optionalEvents||[],u=e?.rpcMap||this.buildRpcMap(s,e.projectId),d=e?.qrModalOptions||void 0;return{chains:n?.map(e=>this.formatChainId(e)),optionalChains:i.map(e=>this.formatChainId(e)),methods:a,events:o,optionalMethods:l,optionalEvents:c,rpcMap:u,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:d,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let r={};return e.forEach(e=>{r[e]=this.getRpcUrl(e,t)}),r}async initialize(e){var t;if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?fW(this.rpc.chains):fW(this.rpc.optionalChains),this.signer=await fT.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let r=await fD(),{convertWCMToAppKitOptions:n}=await Promise.resolve().then(function(){return f8}),i=n(fF(f$({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!i.networks.length)throw Error("No networks found for WalletConnect\xb7");e=r(fF(f$({},i),{universalProvider:this.signer,manualWCControl:!0,enableMobileFullScreen:(null==(t=this.rpc.qrModalOptions)?void 0:t.enableMobileFullScreen)===!0}))}catch(e){throw console.warn(e),Error("To use QR modal, please install @reown/appkit package")}if(e)try{this.modal=e}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:r,rpcMap:n}=e;t&&o$(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})),r&&o$(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(e=>this.formatChainId(e)),r.forEach(e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{let e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}}let fK=fH;var fG=Object.defineProperty,fZ=Object.defineProperties,fJ=Object.getOwnPropertyDescriptors,fY=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,fX=Object.prototype.propertyIsEnumerable,f0=(e,t,r)=>t in e?fG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f1=(e,t)=>{for(var r in t||(t={}))fQ.call(t,r)&&f0(e,r,t[r]);if(fY)for(var r of fY(t))fX.call(t,r)&&f0(e,r,t[r]);return e},f2=(e,t)=>fZ(e,fJ(t));let f3=e=>{let[t,r]=e.split(":");return f5({id:r,caipNetworkId:e,chainNamespace:t,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function f5(e){return f1({formatters:void 0,fees:void 0,serializers:void 0},e)}var f8=Object.freeze({__proto__:null,convertWCMToAppKitOptions:function(e){var t,r,n,i,s,a,o;let l=null==(t=e.chains)?void 0:t.map(f3).filter(Boolean);if(0===l.length)throw Error("At least one chain must be specified");let c=l.find(t=>{var r;return t.id===(null==(r=e.defaultChain)?void 0:r.id)}),u={projectId:e.projectId,networks:l,themeMode:e.themeMode,themeVariables:function(e){if(e)return{"--w3m-font-family":e["--wcm-font-family"],"--w3m-accent":e["--wcm-accent-color"],"--w3m-color-mix":e["--wcm-background-color"],"--w3m-z-index":e["--wcm-z-index"]?Number(e["--wcm-z-index"]):void 0,"--w3m-qr-color":e["--wcm-accent-color"],"--w3m-font-size-master":e["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":e["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}(e.themeVariables),chainImages:e.chainImages,connectorImages:e.walletImages,defaultNetwork:c,metadata:f2(f1({},e.metadata),{name:(null==(r=e.metadata)?void 0:r.name)||"WalletConnect",description:(null==(n=e.metadata)?void 0:n.description)||"Connect to WalletConnect-compatible wallets",url:(null==(i=e.metadata)?void 0:i.url)||"https://walletconnect.org",icons:(null==(s=e.metadata)?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:"NONE"===e.explorerRecommendedWalletIds?[]:Array.isArray(e.explorerRecommendedWalletIds)?e.explorerRecommendedWalletIds:[],excludeWalletIds:"ALL"===e.explorerExcludedWalletIds?[]:Array.isArray(e.explorerExcludedWalletIds)?e.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if(null!=(a=e.mobileWallets)&&a.length||null!=(o=e.desktopWallets)&&o.length){let t=[...(e.mobileWallets||[]).map(e=>({id:e.id,name:e.name,links:e.links})),...(e.desktopWallets||[]).map(e=>({id:e.id,name:e.name,links:{native:e.links.native,universal:e.links.universal}}))],r=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],n=t.filter(e=>!r.includes(e.id));n.length&&(u.customWallets=n)}return u},defineChain:f5})},85205:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw TypeError(n+" is ambiguous");t[i]=r}let r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function a(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,a=0,o=0;for(;e[s]===n;)a++,s++;let l=(e.length-s)*i+1>>>0,c=new Uint8Array(l);for(;s<e.length;){let n=e.charCodeAt(s);if(n>255)return;let i=t[n];if(255===i)return;let a=0;for(let e=l-1;(0!==i||a<o)&&-1!==e;e--,a++)i+=r*c[e]>>>0,c[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw Error("Non-zero carry");o=a,s++}let u=l-o;for(;u!==l&&0===c[u];)u++;let d=new Uint8Array(a+(l-u)),h=a;for(;u!==l;)d[h++]=c[u++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,a=0,o=0,l=t.length;for(;o!==l&&0===t[o];)o++,i++;let c=(l-o)*s+1>>>0,u=new Uint8Array(c);for(;o!==l;){let e=t[o],n=0;for(let t=c-1;(0!==e||n<a)&&-1!==t;t--,n++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");a=n,o++}let d=c-a;for(;d!==c&&0===u[d];)d++;let h=n.repeat(i);for(;d<c;++d)h+=e.charAt(u[d]);return h},decodeUnsafe:a,decode:function(e){let t=a(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},63400:function(e,t,r){"use strict";r.d(t,{g7:function(){return n},xv:function(){return i}});let n=new TextEncoder,i=new TextDecoder},35845:function(e,t,r){"use strict";r.d(t,{J:function(){return o},c:function(){return a}});var n=r(63400);let i=e=>{let t=e;"string"==typeof t&&(t=n.g7.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},s=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},a=e=>i(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),o=e=>{let t=e;t instanceof Uint8Array&&(t=n.xv.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return s(t)}catch(e){throw TypeError("The input to be decoded is not correctly encoded.")}}},6120:function(e,t,r){"use strict";r.d(t,{t:function(){return o}});var n=r(35845),i=r(63400);class s extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}class a extends s{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function o(e){let t,r;if("string"!=typeof e)throw new a("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:o}=e.split(".");if(5===o)throw new a("Only JWTs using Compact JWS serialization can be decoded");if(3!==o)throw new a("Invalid JWT");if(!s)throw new a("JWTs must contain a payload");try{t=(0,n.J)(s)}catch(e){throw new a("Failed to base64url decode the payload")}try{r=JSON.parse(i.xv.decode(t))}catch(e){throw new a("Failed to parse the decoded payload as JSON")}if(!function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(r))throw new a("Invalid JWT Claims Set");return r}},13273:function(e,t,r){"use strict";r.d(t,{zo:function(){return v},mL:function(){return eJ},BB:function(){return eY}});var n={};r.r(n),r.d(n,{identity:function(){return U}});var i={};r.r(i),r.d(i,{base2:function(){return B}});var s={};r.r(s),r.d(s,{base8:function(){return L}});var a={};r.r(a),r.d(a,{base10:function(){return j}});var o={};r.r(o),r.d(o,{base16:function(){return M},base16upper:function(){return z}});var l={};r.r(l),r.d(l,{base32:function(){return $},base32hex:function(){return V},base32hexpad:function(){return K},base32hexpadupper:function(){return G},base32hexupper:function(){return H},base32pad:function(){return q},base32padupper:function(){return W},base32upper:function(){return F},base32z:function(){return Z}});var c={};r.r(c),r.d(c,{base36:function(){return J},base36upper:function(){return Y}});var u={};r.r(u),r.d(u,{base58btc:function(){return Q},base58flickr:function(){return X}});var d={};r.r(d),r.d(d,{base64:function(){return ee},base64pad:function(){return et},base64url:function(){return er},base64urlpad:function(){return en}});var h={};r.r(h),r.d(h,{base256emoji:function(){return eo}});var f={};r.r(f),r.d(f,{sha256:function(){return ew},sha512:function(){return e_}});var p={};r.r(p),r.d(p,{identity:function(){return eE}});var y={};r.r(y),r.d(y,{code:function(){return eI},decode:function(){return eA},encode:function(){return eS},name:function(){return ex}});var g={};function m(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function b(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?m(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function v(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=b(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return m(r)}r.r(g),r.d(g,{code:function(){return eO},decode:function(){return eR},encode:function(){return eP},name:function(){return eC}});var w=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=o*a[h]>>>0,a[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===a[f];)f++;for(var p=new Uint8Array(n+(s-f)),y=n;f!==s;)p[y++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],h=0,f=a-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*c[f]>>>0,c[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=h,i++}for(var p=a-n;p!==a&&0===c[p];)p++;for(var y=l.repeat(r);p<a;++p)y+=e.charAt(c[p]);return y},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let _=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},E=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},x=e=>new TextEncoder().encode(e),I=e=>new TextDecoder().decode(e);class S{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return T(this,e)}}class k{constructor(e){this.decoders=e}or(e){return T(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let T=(e,t)=>new k({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class C{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new S(e,t,r),this.decoder=new A(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let O=({name:e,prefix:t,encode:r,decode:n})=>new C(e,t,r,n),P=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=w(r,t);return O({prefix:e,name:t,encode:n,decode:e=>E(i(e))})},R=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let a=new Uint8Array(s*r/8|0),o=0,l=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);l=l<<r|s,(o+=r)>=8&&(o-=8,a[c++]=255&l>>o)}if(o>=r||255&l<<8-o)throw SyntaxError("Unexpected end of data");return a},D=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let n=0;n<e.length;++n)for(o=o<<8|e[n],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},N=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>O({prefix:t,name:e,encode:e=>D(e,n,r),decode:t=>R(t,n,r,e)}),U=O({prefix:"\0",name:"identity",encode:e=>I(e),decode:e=>x(e)}),B=N({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),L=N({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),j=P({prefix:"9",name:"base10",alphabet:"0123456789"}),M=N({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),z=N({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),$=N({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),F=N({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),q=N({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),W=N({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),V=N({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),H=N({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),K=N({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),G=N({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Z=N({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),J=P({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y=P({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q=P({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X=P({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ee=N({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),et=N({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),er=N({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),en=N({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ei=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),es=ei.reduce((e,t,r)=>(e[r]=t,e),[]),ea=ei.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),eo=O({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=es[t],"")},decode:function(e){let t=[];for(let r of e){let e=ea[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var el=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=2147483648;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},ec=function e(t,r){var n,i=0,r=r||0,s=0,a=r,o=t.length;do{if(a>=o)throw e.bytes=0,RangeError("Could not decode varint");n=t[a++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return e.bytes=a-r,i};let eu=(e,t=0)=>[ec(e,t),ec.bytes],ed=(e,t,r=0)=>(el(e,t,r),t),eh=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,ef=(e,t)=>{let r=t.byteLength,n=eh(e),i=n+eh(r),s=new Uint8Array(i+r);return ed(e,s,0),ed(r,s,n),s.set(t,i),new eg(e,r,t,s)},ep=e=>{let t=E(e),[r,n]=eu(t),[i,s]=eu(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new eg(r,i,a,t)},ey=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&_(e.bytes,t.bytes);class eg{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let em=({name:e,code:t,encode:r})=>new eb(e,t,r);class eb{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ef(this.code,t):t.then(e=>ef(this.code,e))}throw Error("Unknown type, must be binary type")}}let ev=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ew=em({name:"sha2-256",code:18,encode:ev("SHA-256")}),e_=em({name:"sha2-512",code:19,encode:ev("SHA-512")}),eE={code:0,name:"identity",encode:E,digest:e=>ef(0,E(e))},ex="raw",eI=85,eS=e=>E(e),eA=e=>E(e),ek=new TextEncoder,eT=new TextDecoder,eC="json",eO=512,eP=e=>ek.encode(JSON.stringify(e)),eR=e=>JSON.parse(eT.decode(e));class eD{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:eF,byteLength:eF,code:e$,version:e$,multihash:e$,bytes:e$,_baseCache:eF,asCID:eF})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==eL)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ej)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return eD.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=ef(e,t);return eD.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ey(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;return 0===r?eU(t,n,e||Q.encoder):eB(t,n,e||$.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return eq(/^0\.0/,eW),!!(e&&(e[ez]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof eD)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new eD(t,r,n,i||eM(t,r,n.bytes))}if(null==e||!0!==e[ez])return null;{let{version:t,multihash:r,code:n}=e,i=ep(r);return eD.create(t,n,i)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===eL)return new eD(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eL}) block encoding`);case 1:{let n=eM(e,t,r.bytes);return new eD(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return eD.create(0,eL,e)}static createV1(e,t){return eD.create(1,e,t)}static decode(e){let[t,r]=eD.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=eD.inspectBytes(e),r=t.size-t.multihashSize,n=E(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new eg(t.multihashCode,t.digestSize,i,n);return[0===t.version?eD.createV0(s):eD.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=eu(e.subarray(t));return t+=n,r},n=r(),i=eL;if(18===n?(n=0,t=0):1===n&&(i=r()),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=eN(e,t),i=eD.decode(n);return i._baseCache.set(r,e),i}}let eN=(e,t)=>{switch(e[0]){case"Q":return[Q.prefix,(t||Q).decode(`${Q.prefix}${e}`)];case Q.prefix:return[Q.prefix,(t||Q).decode(e)];case $.prefix:return[$.prefix,(t||$).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eU=(e,t,r)=>{let{prefix:n}=r;if(n!==Q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let i=r.encode(e).slice(1);return t.set(n,i),i}},eB=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let i=r.encode(e);return t.set(n,i),i}},eL=112,ej=18,eM=(e,t,r)=>{let n=eh(e),i=n+eh(t),s=new Uint8Array(i+r.byteLength);return ed(e,s,0),ed(t,s,n),s.set(r,i),s},ez=Symbol.for("@ipld/js-cid/CID"),e$={writable:!1,configurable:!1,enumerable:!0},eF={writable:!1,enumerable:!1,configurable:!1},eq=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},eW=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,eV={...n,...i,...s,...a,...o,...l,...c,...u,...d,...h};function eH(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...f,...p});let eK=eH("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),eG=eH("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=b((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),eZ={utf8:eK,"utf-8":eK,hex:eV.base16,latin1:eG,ascii:eG,binary:eG,...eV};function eJ(e,t="utf8"){let r=eZ[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?m(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function eY(e,t="utf8"){let r=eZ[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}},26976:function(e,t,r){"use strict";r.d(t,{U:function(){return l}});var n=r(2265);let i=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,s);return s},s=e=>e?i(e):i,a=e=>e,o=e=>{let t=s(e),r=e=>(function(e,t=a){let r=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?o(e):o},30404:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});let n=({origin:e,path:t,query:r={},hash:n={}})=>{let i=new URL(t,e.endsWith("/")?e:`${e}/`);for(let[e,t]of Object.entries(r))void 0!==t&&i.searchParams.set(e,t);let s=Object.entries(n);if(s.length>0){let e=new URLSearchParams;for(let[t,r]of s)void 0!==r&&e.append(t,r);i.hash=e.toString()}return i.href}},50978:function(e,t,r){"use strict";r.d(t,{F:function(){return w}});var n=r(57437),i=r(78749),s=r(2265),a=r(12364),o=r(21770),l=r(54026),c=r(19726),u=r(63993),d=r(60716),h=r(3781),f=r(51156),p=r(90300);let y=({setActiveWalletForWagmi:e})=>{let{wallets:t,ready:r}=(0,u.u)(),{user:n}=(0,d.u)(),i=(0,a.Z)(),{reconnect:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:t}=e,r=(0,a.Z)(e),{mutate:n,mutateAsync:i,...s}=(0,o.D)({...t,mutationFn:e=>(0,l.G)(r,e),mutationKey:["reconnect"]});return{...s,connectors:r.connectors,reconnect:n,reconnectAsync:i}}();(0,h.A)({onSuccess:async({wallet:t})=>{let r=(0,p.R)(t);await i.storage?.removeItem(`${r}.disconnected`),e||(await i.storage?.setItem("recentConnectorId",r),c())}}),(0,f.a1)({onSuccess:async({wallet:t})=>{let r=(0,p.R)(t);await i.storage?.removeItem(`${r}.disconnected`),e||(await i.storage?.setItem("recentConnectorId",r),c())}}),(0,h.y)({onComplete:async({user:e,loginAccount:t})=>{if(!t||"wallet"===t.type)return;let r=e.linkedAccounts.filter(e=>"wallet"===e.type&&"privy"===e.walletClientType);0!==r.length&&(await i.storage?.removeItem("io.privy.wallet.disconnected"),await Promise.all(r.map(async e=>{let t=`io.privy.wallet.${e.address}`;await i.storage?.removeItem(`${t}.disconnected`)})),c())}}),(0,s.useEffect)(()=>{e&&(async()=>{let r=e({wallets:t,user:n});if(!r)return m(i),void c();let[s]=await g([r],i);s?(await b(r,s,i),c()):console.error(`Failed to setup connector for ${r.address}`)})()},[t,n,e]),(0,s.useEffect)(()=>{e||g(t,i).then(()=>{r&&c()})},[t,!e,r])},g=async(e,t)=>{let r=await Promise.all(e.map(async e=>{let r=await e.getEthereumProvider(),n=(0,p.R)(e),i=t.connectors.find(e=>e.id===n);if(i)return i;let s=(0,c.L)({target:{provider:r,id:n,name:e.meta.name,icon:e.meta.icon}});return t._internal.connectors.setup(s)}));return t._internal.connectors.setState(r),r},m=e=>{e._internal.connectors.setState([]),e.setState(e=>({chainId:e.chainId,connections:new Map,current:null,status:"disconnected"}))},b=async(e,t,r)=>{let n=t.id;await Promise.all([r.storage?.removeItem(`${n}.disconnected`),r.storage?.setItem("recentConnectorId",n)]);let i=Number(e.chainId.replace("eip155:",""));r.chains.find(e=>e.id===i)||(i=r.chains[0].id);let s=new Map([[t.uid,{accounts:[e.address],chainId:i,connector:t}]]);r.setState(e=>({...e,chainId:i,connections:s,current:t.uid,status:"connected"}))},v=({children:e,setActiveWalletForWagmi:t})=>(y({setActiveWalletForWagmi:t}),(0,n.jsx)(n.Fragment,{children:e})),w=({children:e,setActiveWalletForWagmi:t,...r})=>(0,n.jsx)(i.F,{reconnectOnMount:!1,...r,children:(0,n.jsx)(v,{setActiveWalletForWagmi:t,children:e})})},63727:function(e,t,r){"use strict";let n;r.d(t,{_:function(){return E}});var i=r(80206),s=r(82538);let a=e=>(t,r,n)=>{let i=n.subscribe;return n.subscribe=(e,t,r)=>{let s=e;if(t){let i=(null==r?void 0:r.equalityFn)||Object.is,a=e(n.getState());s=r=>{let n=e(r);if(!i(a,n)){let e=a;t(a=n,e)}},(null==r?void 0:r.fireImmediately)&&t(a,a)}return i(s)},e(t,r,n)},o=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>o(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}},l=(e,t)=>(r,n,i)=>{let s,a={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,c=new Set,u=new Set,d=a.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...e)},n,i);let h=()=>{let e=a.partialize({...n()});return d.setItem(a.name,{state:e,version:a.version})},f=i.setState;i.setState=(e,t)=>{f(e,t),h()};let p=e((...e)=>{r(...e),h()},n,i);i.getInitialState=()=>p;let y=()=>{var e,t;if(!d)return;l=!1,c.forEach(e=>{var t;return e(null!=(t=n())?t:p)});let i=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=n())?e:p))||void 0;return o(d.getItem.bind(d))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate)return[!0,a.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[i,o]=e;if(r(s=a.merge(o,null!=(t=n())?t:p),!0),i)return h()}).then(()=>{null==i||i(s,void 0),s=n(),l=!0,u.forEach(e=>e(s))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},a.skipHydration||y(),s||p},c=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,s);return s},u=e=>e?c(e):c;var d=r(19726),h=r(81310);class f{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new h})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){let r=t[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function p(e,t){return JSON.parse(e,(e,r)=>{let n=r;return n?.__type==="bigint"&&(n=BigInt(n.value)),n?.__type==="Map"&&(n=new Map(n.value)),t?.(e,n)??n})}function y(e,t){return e.slice(0,t).join(".")||"."}function g(e,t){let{length:r}=e;for(let n=0;n<r;++n)if(e[n]===t)return n+1;return 0}function m(e,t,r,n){return JSON.stringify(e,function(e,t){let r="function"==typeof e,n="function"==typeof t,i=[],s=[];return function(a,o){if("object"==typeof o){if(i.length){let e=g(i,this);0===e?i[i.length]=this:(i.splice(e),s.splice(e)),s[s.length]=a;let r=g(i,o);if(0!==r)return n?t.call(this,a,o,y(s,r)):`[ref=${y(s,r)}]`}else i[0]=o,s[0]=a}return r?e.call(this,a,o):o}}((e,r)=>{let n=r;return"bigint"==typeof n&&(n={__type:"bigint",value:r.toString()}),n instanceof Map&&(n={__type:"Map",value:Array.from(r.entries())}),t?.(e,n)??n},n),r??void 0)}let b={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};var v=r(13102);let w=256;var _=r(19676);let E=e=>(function(e){let t;let{multiInjectedProviderDiscovery:r=!0,storage:o=function(e){let{deserialize:t=p,key:r="wagmi",serialize:n=m,storage:i=b}=e;function s(e){return e instanceof Promise?e.then(e=>e).catch(()=>null):e}return{...i,key:r,async getItem(e,n){let a=i.getItem(`${r}.${e}`),o=await s(a);return o?t(o)??null:n??null},async setItem(e,t){let a=`${r}.${e}`;null===t?await s(i.removeItem(a)):await s(i.setItem(a,n(t)))},async removeItem(e){await s(i.removeItem(`${r}.${e}`))}}}({storage:function(){let e="undefined"!=typeof window&&window.localStorage?window.localStorage:b;return{getItem:t=>e.getItem(t),removeItem(t){e.removeItem(t)},setItem(t,r){try{e.setItem(t,r)}catch{}}}}()}),syncConnectedChain:c=!0,ssr:h=!1,...y}=e,g="undefined"!=typeof window&&r?(0,i.M)():void 0,E=u(()=>y.chains),x=u(()=>{let e=[],t=new Set;for(let r of y.connectors??[]){let n=I(r);if(e.push(n),!h&&n.rdns)for(let e of"string"==typeof n.rdns?[n.rdns]:n.rdns)t.add(e)}if(!h&&g)for(let r of g.getProviders())t.has(r.info.rdns)||e.push(I(S(r)));return e});function I(e){let t=new f(function(e=11){if(!n||w+e>512){n="",w=0;for(let e=0;e<256;e++)n+=(256+256*Math.random()|0).toString(16).substring(1)}return n.substring(w,w+++e)}()),r={...e({emitter:t,chains:E.getState(),storage:o,transports:y.transports}),emitter:t,uid:t.uid};return t.on("connect",R),r.setup?.(),r}function S(e){let{info:t}=e,r=e.provider;return(0,d.L)({target:{...t,id:t.rdns,provider:r}})}let A=new Map;function k(){return{chainId:E.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let T="0.0.0-canary-";t=_.i.startsWith(T)?Number.parseInt(_.i.replace(T,""),10):Number.parseInt(_.i.split(".")[0]??"0",10);let C=u(a(o?l(k,{migrate(e,r){if(r===t)return e;let n=k(),i=O(e,n.chainId);return{...n,chainId:i}},name:"store",partialize:e=>({connections:{__type:"Map",value:Array.from(e.connections.entries()).map(([e,t])=>{let{id:r,name:n,type:i,uid:s}=t.connector;return[e,{...t,connector:{id:r,name:n,type:i,uid:s}}]})},chainId:e.chainId,current:e.current}),merge(e,t){"object"==typeof e&&e&&"status"in e&&delete e.status;let r=O(e,t.chainId);return{...t,...e,chainId:r}},skipHydration:h,storage:o,version:t}):k));function O(e,t){return e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&E.getState().some(t=>t.id===e.chainId)?e.chainId:t}function P(e){C.setState(t=>{let r=t.connections.get(e.uid);return r?{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts??r.accounts,chainId:e.chainId??r.chainId,connector:r.connector})}:t})}function R(e){"connecting"!==C.getState().status&&"reconnecting"!==C.getState().status&&C.setState(t=>{let r=x.getState().find(t=>t.uid===e.uid);return r?(r.emitter.listenerCount("connect")&&r.emitter.off("connect",P),r.emitter.listenerCount("change")||r.emitter.on("change",P),r.emitter.listenerCount("disconnect")||r.emitter.on("disconnect",D),{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts,chainId:e.chainId,connector:r}),current:e.uid,status:"connected"}):t})}function D(e){C.setState(t=>{let r=t.connections.get(e.uid);if(r){let e=r.connector;e.emitter.listenerCount("change")&&r.connector.emitter.off("change",P),e.emitter.listenerCount("disconnect")&&r.connector.emitter.off("disconnect",D),e.emitter.listenerCount("connect")||r.connector.emitter.on("connect",R)}if(t.connections.delete(e.uid),0===t.connections.size)return{...t,connections:new Map,current:null,status:"disconnected"};let n=t.connections.values().next().value;return{...t,connections:new Map(t.connections),current:n.connector.uid}})}return C.setState(k()),c&&C.subscribe(({connections:e,current:t})=>t?e.get(t)?.chainId:void 0,e=>{if(E.getState().some(t=>t.id===e))return C.setState(t=>({...t,chainId:e??t.chainId}))}),g?.subscribe(e=>{let t=new Set,r=new Set;for(let e of x.getState())if(t.add(e.id),e.rdns)for(let t of"string"==typeof e.rdns?[e.rdns]:e.rdns)r.add(t);let n=[];for(let i of e){if(r.has(i.info.rdns))continue;let e=I(S(i));t.has(e.id)||n.push(e)}(!o||C.persist.hasHydrated())&&x.setState(e=>[...e,...n],!0)}),{get chains(){return E.getState()},get connectors(){return x.getState()},storage:o,getClient:function(e={}){let t;let r=e.chainId??C.getState().chainId,n=E.getState().find(e=>e.id===r);if(e.chainId&&!n)throw new v.X4;{let e=A.get(C.getState().chainId);if(e&&!n)return e;if(!n)throw new v.X4}{let e=A.get(r);if(e)return e}if(y.client)t=y.client({chain:n});else{let e=n.id,r=E.getState().map(e=>e.id),i={};for(let[t,n]of Object.entries(y))if("chains"!==t&&"client"!==t&&"connectors"!==t&&"transports"!==t){if("object"==typeof n){if(e in n)i[t]=n[e];else{if(r.some(e=>e in n))continue;i[t]=n}}else i[t]=n}t=(0,s.e)({...i,chain:n,batch:i.batch??{multicall:!0},transport:t=>y.transports[e]({...t,connectors:x})})}return A.set(r,t),t},get state(){return C.getState()},setState(e){let t;t="function"==typeof e?e(C.getState()):e;let r=k();"object"!=typeof t&&(t=r),Object.keys(r).some(e=>!(e in t))&&(t=r),C.setState(t,!0)},subscribe:(e,t,r)=>C.subscribe(e,t,r?{...r,fireImmediately:r.emitImmediately}:void 0),_internal:{mipd:g,async revalidate(){let e=C.getState(),t=e.connections,r=e.current;for(let[,e]of t){let n=e.connector;n.isAuthorized&&await n.isAuthorized()||(t.delete(n.uid),r!==n.uid||(r=null))}C.setState(e=>({...e,connections:t,current:r}))},store:C,ssr:!!h,syncConnectedChain:c,transports:y.transports,chains:{setState(e){let t="function"==typeof e?e(E.getState()):e;if(0!==t.length)return E.setState(t,!0)},subscribe:e=>E.subscribe(e)},connectors:{providerDetailToConnector:S,setup:I,setState:e=>x.setState("function"==typeof e?e(x.getState()):e,!0),subscribe:e=>x.subscribe(e)},events:{change:P,connect:R,disconnect:D}}}})({ssr:!0,...e,connectors:e.connectors?.filter(e=>"mock"===e.type),multiInjectedProviderDiscovery:!1})},90300:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});let n=e=>"privy"===e.walletClientType?`${e.meta.id}.${e.address}`:e.meta.id},20886:function(e,t,r){"use strict";r.d(t,{U:function(){return y}});var n=r(2265),i=r(21770),s=r(13102);async function a(e,t){let{connector:r}=t,n=e.state.connections.get(r.uid);if(!n)throw new s.aH;return await e.storage?.setItem("recentConnectorId",r.id),e.setState(e=>({...e,current:r.uid})),{accounts:n.accounts,chainId:n.chainId}}var o=r(12364),l=r(52123);let c=[];function u(e){let t=[...e.state.connections.values()];return"reconnecting"===e.state.status||(0,l.v)(c,t)?c:(c=t,t)}async function d(e,t){let r;if((r="function"==typeof t.connector?e._internal.connectors.setup(t.connector):t.connector).uid===e.state.current)throw new s.wi;try{e.setState(e=>({...e,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});let{connector:n,...i}=t,s=await r.connect(i);return r.emitter.off("connect",e._internal.events.connect),r.emitter.on("change",e._internal.events.change),r.emitter.on("disconnect",e._internal.events.disconnect),await e.storage?.setItem("recentConnectorId",r.id),e.setState(e=>({...e,connections:new Map(e.connections).set(r.uid,{accounts:i.withCapabilities?s.accounts.map(e=>"object"==typeof e?e.address:e):s.accounts,chainId:s.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:i.withCapabilities?s.accounts.map(e=>"object"==typeof e?e:{address:e,capabilities:{}}):s.accounts,chainId:s.chainId}}catch(t){throw e.setState(e=>({...e,status:e.current?"connected":"disconnected"})),t}}let h=[];function f(e){let t=e.connectors;return h.length===t.length&&h.every((e,r)=>e===t[r])?h:(h=t,t)}var p=r(90300);let y=()=>{let{switchAccount:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:t}=e,r=(0,o.Z)(e),{mutate:s,mutateAsync:c,...d}=(0,i.D)({...t,mutationFn:e=>a(r,e),mutationKey:["switchAccount"]});return{...d,connectors:(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)(e);return(0,n.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(()=>u(e),r,{equalityFn:l.v})})(t,{onChange:e}),()=>u(t),()=>u(t))})({config:r}).map(e=>e.connector),switchAccount:s,switchAccountAsync:c}}(),{connect:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:t}=e,r=(0,o.Z)(e),{mutate:s,mutateAsync:a,...l}=(0,i.D)({...t,mutationFn:e=>d(r,e),mutationKey:["connect"]});return(0,n.useEffect)(()=>r.subscribe(e=>{let{status:t}=e;return t},(e,t)=>{"connected"===t&&"disconnected"===e&&l.reset()}),[r,l.reset]),{...l,connect:s,connectAsync:a,connectors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)(e);return(0,n.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e._internal.connectors.subscribe((e,t)=>{r(Object.values(e),t)})})(t,{onChange:e}),()=>f(t),()=>f(t))}({config:r})}}(),r=(0,o.Z)();return{setActiveWallet:(0,n.useCallback)(async n=>{let i=(0,p.R)(n);for(let s of r.connectors)if(s.id===i&&(await s.getAccounts()).includes(n.address))return await r.storage?.removeItem(`${i}.disconnected`),void(r.state.connections.get(s.uid)?e({connector:s}):t({connector:s}))},[r.connectors,r.state.connections,t,e])}}},21664:function(e,t,r){"use strict";var n;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function a(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function o(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw Error("array expected")}function c(e,t){if(!s(!0,t))throw Error(`${e}: array of strings expected`)}function u(e,t){if(!s(!1,t))throw Error(`${e}: array of numbers expected`)}function d(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;c("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(l(t),t.map(t=>{a("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function f(e=""){return a("join",e),{encode:t=>(c("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function p(e,t="="){return o(e),a("padding",t),{encode(r){for(c("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){c("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function y(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(l(e),!e.length)return[];let n=0,i=[],s=Array.from(e,e=>{if(o(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){let a=s[i],l=t*e,c=l+a;if(!Number.isSafeInteger(c)||l/t!==e||c-a!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let d=Math.floor(u);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==c)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{Jq:function(){return S},US:function(){return I},pJ:function(){return _}});let g=(e,t)=>0===t?e:g(t,e%t),m=(e,t)=>e+(t-g(e,t)),b=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,r,n){if(l(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(m(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${m(t,r)}`);let i=0,s=0,a=b[t],c=b[r]-1,u=[];for(let n of e){if(o(n),n>=a)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)u.push((i>>s-r&c)>>>0);let e=b[s];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-s&c,!n&&s>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&s>0&&u.push(i>>>0),u}function w(e,t=!1){if(o(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(m(8,e)>32||m(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw Error("radix2.encode input should be Uint8Array");return v(Array.from(r),8,e,!t)},decode:r=>(u("radix2.decode",r),Uint8Array.from(v(r,e,8,t)))}}let _=d(w(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),E="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64,x=(e,t)=>{if(a("base64",e),e.length>0&&!(t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/).test(e))throw Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64",lastChunkHandling:"strict"})},I=E?{encode:e=>((function(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)})(e),e.toBase64()),decode:e=>x(e,!1)}:d(w(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),S=(n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",d((o(58),{encode:e=>{if(!i(e))throw Error("radix.encode input should be Uint8Array");return y(Array.from(e),256,58)},decode:e=>(u("radix.decode",e),Uint8Array.from(y(e,58,256)))}),h(n),f(""))),A=[996825010,642813549,513874426,1027748829,705979059];"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex||function(e){if("function"!=typeof e)throw Error("function expected")}(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})},97110:function(e,t,r){"use strict";r.d(t,{BQD:function(){return E},GFT:function(){return m},mo_:function(){return x},y3x:function(){return I}});var n,i,s,a,o,l=r(38416),c=r(82162),u=r(48100),d=r(85221),h=r(96377),f=r(78753),p=((n=p||{})[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen",n),y=((i=y||{})[i.MintTokens=0]="MintTokens",i[i.FreezeAccount=1]="FreezeAccount",i[i.AccountOwner=2]="AccountOwner",i[i.CloseAccount=3]="CloseAccount",i),g=((s=g||{})[s.CreateAssociatedToken=0]="CreateAssociatedToken",s[s.CreateAssociatedTokenIdempotent=1]="CreateAssociatedTokenIdempotent",s[s.RecoverNestedAssociatedToken=2]="RecoverNestedAssociatedToken",s),m="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",b=((a=b||{})[a.Mint=0]="Mint",a[a.Token=1]="Token",a[a.Multisig=2]="Multisig",a),v=((o=v||{})[o.InitializeMint=0]="InitializeMint",o[o.InitializeAccount=1]="InitializeAccount",o[o.InitializeMultisig=2]="InitializeMultisig",o[o.Transfer=3]="Transfer",o[o.Approve=4]="Approve",o[o.Revoke=5]="Revoke",o[o.SetAuthority=6]="SetAuthority",o[o.MintTo=7]="MintTo",o[o.Burn=8]="Burn",o[o.CloseAccount=9]="CloseAccount",o[o.FreezeAccount=10]="FreezeAccount",o[o.ThawAccount=11]="ThawAccount",o[o.TransferChecked=12]="TransferChecked",o[o.ApproveChecked=13]="ApproveChecked",o[o.MintToChecked=14]="MintToChecked",o[o.BurnChecked=15]="BurnChecked",o[o.InitializeAccount2=16]="InitializeAccount2",o[o.SyncNative=17]="SyncNative",o[o.InitializeAccount3=18]="InitializeAccount3",o[o.InitializeMultisig2=19]="InitializeMultisig2",o[o.InitializeMint2=20]="InitializeMint2",o[o.GetAccountDataSize=21]="GetAccountDataSize",o[o.InitializeImmutableOwner=22]="InitializeImmutableOwner",o[o.AmountToUiAmount=23]="AmountToUiAmount",o[o.UiAmountToAmount=24]="UiAmountToAmount",o);function w(e,t){return t=>{if(!t.value)return Object.freeze({address:e,role:l.g4.READONLY});let r=t.isWritable?l.g4.WRITABLE:l.g4.READONLY;return Object.freeze({address:function(e){if(!e)throw Error("Expected a Address.");return"object"==typeof e&&"address"in e?e.address:Array.isArray(e)?e[0]:e}(t.value),role:_(t.value)?(0,l.$k)(r):r,..._(t.value)?{signer:t.value}:{}})}}function _(e){return!!e&&"object"==typeof e&&"address"in e&&(0,c.he)(e)}async function E(e,t={}){let{programAddress:r="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=t;return await (0,u.QN)({programAddress:r,seeds:[(0,u.I7)().encode(e.owner),(0,u.I7)().encode(e.tokenProgram),(0,u.I7)().encode(e.mint)]})}function x(e,t){let r=t?.programAddress??"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",n={payer:{value:e.payer??null,isWritable:!0},ata:{value:e.ata??null,isWritable:!0},owner:{value:e.owner??null,isWritable:!1},mint:{value:e.mint??null,isWritable:!1},systemProgram:{value:e.systemProgram??null,isWritable:!1},tokenProgram:{value:e.tokenProgram??null,isWritable:!1}};n.tokenProgram.value||(n.tokenProgram.value="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),n.systemProgram.value||(n.systemProgram.value="11111111111111111111111111111111");let i=w(r);return Object.freeze({accounts:[i(n.payer),i(n.ata),i(n.owner),i(n.mint),i(n.systemProgram),i(n.tokenProgram)],data:(0,d.Nz)((0,h.Q5)([["discriminator",(0,f.$L)()]]),e=>({...e,discriminator:1})).encode({}),programAddress:r})}function I(e,t){let r=t?.programAddress??m,n={source:{value:e.source??null,isWritable:!0},destination:{value:e.destination??null,isWritable:!0},authority:{value:e.authority??null,isWritable:!1}},i={...e},s=(i.multiSigners??[]).map(e=>({address:e.address,role:l.g4.READONLY_SIGNER,signer:e})),a=w(r);return Object.freeze({accounts:[a(n.source),a(n.destination),a(n.authority),...s],data:(0,d.Nz)((0,h.Q5)([["discriminator",(0,f.$L)()],["amount",(0,f.bP)()]]),e=>({...e,discriminator:3})).encode(i),programAddress:r})}},48100:function(e,t,r){"use strict";r.d(t,{EJ:function(){return _},I7:function(){return f},Iw:function(){return p},Lk:function(){return h},N8:function(){return y},QN:function(){return w},UJ:function(){return u},cE:function(){return d}});var n,i,s=r(85221),a=r(77828),o=r(1013),l=r(49771);function c(){return n||(n=(0,a.Un)()),n}function u(e){if(e.length<32||e.length>44)return!1;let t=c();try{return 32===t.encode(e).byteLength}catch{return!1}}function d(e){if(e.length<32||e.length>44)throw new o.g1$(o.PE6,{actualLength:e.length});let t=c().encode(e).byteLength;if(32!==t)throw new o.g1$(o.Yd8,{actualLength:t})}function h(e){return d(e),e}function f(){return(0,s.Nz)((0,s.Vo)(c(),32),e=>h(e))}function p(){return(0,s.il)((i||(i=(0,a._V)()),i),32)}function y(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare}function g(e){let t=e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return t>=0n?t:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn+t}function m(e,t){let r=e;for(;t-- >0n;)r*=r,r%=0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return r}var b=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function v({programAddress:e,seeds:t}){let r;if((0,l.X5)(),t.length>16)throw new o.g1$(o.d95,{actual:t.length,maxSeeds:16});let n=t.reduce((e,t,n)=>{let i="string"==typeof t?(r||=new TextEncoder).encode(t):t;if(i.byteLength>32)throw new o.g1$(o.xVG,{actual:i.byteLength,index:n,maxSeedLength:32});return e.push(...i),e},[]),i=(0,s.$t)(f(),p()),a=i.encode(e),c=await crypto.subtle.digest("SHA-256",new Uint8Array([...n,...a,...b])),u=new Uint8Array(c);if(32===u.byteLength&&function(e,t){let r=g(e*e),n=function(e,t){let r=g(t*t*t),n=function(e){let t=e*e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn*e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,r=m(t,2n)*t%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n=m(r,1n)*e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,i=m(n,5n)*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,s=m(i,10n)*i%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,a=m(s,20n)*s%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,o=m(a,40n)*a%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,l=m(o,80n)*o%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,c=m(l,80n)*o%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,u=m(c,10n)*i%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return m(u,2n)*e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn}(e*g(r*r*t)),i=g(e*r*n),s=g(t*i*i),a=i,o=g(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*i),l=s===e,c=s===g(-e),u=s===g(-(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*e));return(l&&(i=a),(c||u)&&(i=o),(1n&g(i))===1n&&(i=g(-i)),l||c)?i:null}(g(r-1n),g(0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n*r+1n));return null!==n&&(0n!==n||(128&t)==0)}(function(e){let t=e.reduce((e,t,r)=>`${function(e){let t=e.toString(16);return 1===t.length?`0${t}`:t}(31===r?-129&t:t)}${e}`,"");return BigInt(`0x${t}`)}(u),u[31]))throw new o.g1$(o.PeP);return i.decode(u)}async function w({programAddress:e,seeds:t}){let r=255;for(;r>0;)try{return[await v({programAddress:e,seeds:[...t,new Uint8Array([r])]}),r]}catch(e){if((0,o.bvN)(e,o.PeP))r--;else throw e}throw new o.g1$(o.qin)}async function _(e){if((0,l.Rx)(),"public"!==e.type||"Ed25519"!==e.algorithm.name)throw new o.g1$(o.TQe);let t=await crypto.subtle.exportKey("raw",e);return p().decode(new Uint8Array(t))}},49771:function(e,t,r){"use strict";r.d(t,{Bj:function(){return c},Fc:function(){return l},Rx:function(){return o},X5:function(){return a},rz:function(){return i}});var n=r(1013);function i(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.getRandomValues)throw new n.g1$(n.eoY)}function s(){if(!globalThis.isSecureContext)throw new n.g1$(n.Afi)}function a(){if(s(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.digest)throw new n.g1$(n.eWp)}function o(){if(s(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.exportKey)throw new n.g1$(n.sD0)}function l(){if(s(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.sign)throw new n.g1$(n.Pce)}function c(){if(s(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.verify)throw new n.g1$(n.Iav)}},85221:function(e,t,r){"use strict";r.d(t,{$t:function(){return u},BV:function(){return c},C6:function(){return a},Mf:function(){return o},Nz:function(){return w},UF:function(){return l},Vo:function(){return m},W8:function(){return _},Y6:function(){return h},YR:function(){return y},f7:function(){return d},il:function(){return b},n4:function(){return p},rJ:function(){return g},yF:function(){return v},yK:function(){return s}});var n=r(1013),i=(e,t)=>(function(e,t){if(e.length>=t)return e;let r=new Uint8Array(t).fill(0);return r.set(e),r})(e.length<=t?e:e.slice(0,t),t);function s(e,t){return e.length===t.length&&e.every((e,r)=>e===t[r])}function a(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function o(e){return Object.freeze({...e,encode:t=>{let r=new Uint8Array(a(t,e));return e.write(t,r,0),r}})}function l(e){return Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]})}function c(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function u(e,t){if(c(e)!==c(t))throw new n.g1$(n.$aB);if(c(e)&&c(t)&&e.fixedSize!==t.fixedSize)throw new n.g1$(n.zJs,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!c(e)&&!c(t)&&e.maxSize!==t.maxSize)throw new n.g1$(n.p9K,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function d(e,t,r=0){if(t.length-r<=0)throw new n.g1$(n.GS7,{codecDescription:e})}function h(e,t,r,i=0){let s=r.length-i;if(s<t)throw new n.g1$(n.on3,{bytesLength:s,codecDescription:e,expected:t})}function f(e,t,r){if(t<0||t>r)throw new n.g1$(n.oec,{bytesLength:r,codecDescription:e,offset:t})}function p(e,t){let r=(r,n,i)=>{let s=e.encode(r);return i=t.write(s.length,n,i),n.set(s,i),i+s.length};if(c(t)&&c(e))return o({...e,fixedSize:t.fixedSize+e.fixedSize,write:r});let n=c(t)?t.fixedSize:t.maxSize??null,i=c(e)?e.fixedSize:e.maxSize??null,s=null!==n&&null!==i?n+i:null;return o({...e,...null!==s?{maxSize:s}:{},getSizeFromValue:r=>{let n=a(r,e);return a(n,t)+n},write:r})}function y(e,t){let r=(r,n)=>{let[i,s]=t.read(r,n),a=Number(i);return((n=s)>0||r.length>a)&&(r=r.slice(n,n+a)),h("addDecoderSizePrefix",a,r),[e.decode(r),n+a]};if(c(t)&&c(e))return l({...e,fixedSize:t.fixedSize+e.fixedSize,read:r});let n=c(t)?t.fixedSize:t.maxSize??null,i=c(e)?e.fixedSize:e.maxSize??null,s=null!==n&&null!==i?n+i:null;return l({...e,...null!==s?{maxSize:s}:{},read:r})}function g(e,t,r){let n;let i=e.byteOffset+(t??0),s=r??e.byteLength;return"undefined"==typeof SharedArrayBuffer?n=e.buffer:e.buffer instanceof SharedArrayBuffer?new Uint8Array(n=new ArrayBuffer(e.length)).set(new Uint8Array(e)):n=e.buffer,(0===i||i===-e.byteLength)&&s===e.byteLength?n:n.slice(i,i+s)}function m(e,t){return o({fixedSize:t,write:(r,n,i)=>{let s=e.encode(r),a=s.length>t?s.slice(0,t):s;return n.set(a,i),i+t}})}function b(e,t){return l({fixedSize:t,read:(r,n)=>{h("fixCodecSize",t,r,n),(n>0||r.length>t)&&(r=r.slice(n,n+t)),c(e)&&(r=i(r,e.fixedSize));let[s]=e.read(r,0);return[s,n+t]}})}function v(e,t){var r,i;return r=function(e,t){if(c(e)){let r=t(e.fixedSize);if(r<0)throw new n.g1$(n.Bd7,{bytesLength:r,codecDescription:"resizeDecoder"});return l({...e,fixedSize:r})}return e}(e,e=>e+t),i={postOffset:({postOffset:e})=>e+t},l({...r,read:(e,t)=>{let n=t=>{var r;return 0===(r=e.length)?0:(t%r+r)%r},s=i.preOffset?i.preOffset({bytes:e,preOffset:t,wrapBytes:n}):t;f("offsetDecoder",s,e.length);let[a,o]=r.read(e,s),l=i.postOffset?i.postOffset({bytes:e,newPreOffset:s,postOffset:o,preOffset:t,wrapBytes:n}):o;return f("offsetDecoder",l,e.length),[a,l]}})}function w(e,t){return o({...c(e)?e:{...e,getSizeFromValue:r=>e.getSizeFromValue(t(r))},write:(r,n,i)=>e.write(t(r),n,i)})}function _(e,t){return l({...e,read:(r,n)=>{let[i,s]=e.read(r,n);return[t(i,r,n),s]}})}},96377:function(e,t,r){"use strict";r.d(t,{B9:function(){return h},LV:function(){return u},Lj:function(){return g},ON:function(){return f},Pn:function(){return c},Q5:function(){return b},Ud:function(){return p},Xn:function(){return v},g0:function(){return y}});var n=r(85221),i=r(78753),s=r(1013);function a(e){return e.reduce((e,t)=>null===e||null===t?null:e+t,0)}function o(e){return(0,n.BV)(e)?e.fixedSize:null}function l(e){return(0,n.BV)(e)?e.fixedSize:e.maxSize??null}function c(e,t={}){let r=t.size??(0,i.Nf)(),a=d(r,o(e)),c=d(r,l(e))??void 0;return(0,n.Mf)({...null!==a?{fixedSize:a}:{getSizeFromValue:t=>("object"==typeof r?(0,n.C6)(t.length,r):0)+[...t].reduce((t,r)=>t+(0,n.C6)(r,e),0),maxSize:c},write:(t,n,i)=>("number"==typeof r&&function(e,t,r){if(t!==r)throw new s.g1$(s.PgF,{actual:r,codecDescription:e,expected:t})}("array",r,t.length),"object"==typeof r&&(i=r.write(t.length,n,i)),t.forEach(t=>{i=e.write(t,n,i)}),i)})}function u(e,t={}){let r=t.size??(0,i.Pz)(),s=d(r,o(e)),a=d(r,l(e))??void 0;return(0,n.UF)({...null!==s?{fixedSize:s}:{maxSize:a},read:(t,n)=>{let i=[];if("object"==typeof r&&0===t.slice(n).length)return[i,n];if("remainder"===r){for(;n<t.length;){let[r,s]=e.read(t,n);n=s,i.push(r)}return[i,n]}let[s,a]="number"==typeof r?[r,n]:r.read(t,n);n=a;for(let r=0;r<s;r+=1){let[r,s]=e.read(t,n);n=s,i.push(r)}return[i,n]}})}function d(e,t){return"number"!=typeof e?null:0===e?0:null===t?null:t*e}function h(){return(0,n.Mf)({getSizeFromValue:e=>e.length,write:(e,t,r)=>(t.set(e,r),r+e.length)})}function f(){return(0,n.UF)({read:(e,t)=>{let r=e.slice(t);return[r,t+r.length]}})}function p(e){return(0,n.Mf)({fixedSize:e.length,write:(t,r,n)=>(r.set(e,n),n+e.length)})}function y(e){let t=a(e.map(o)),r=a(e.map(l))??void 0;return(0,n.UF)({...null===t?{maxSize:r}:{fixedSize:t},read:(t,r)=>{let n=[];return e.forEach(e=>{let[i,s]=e.read(t,r);n.push(i),r=s}),[n,r]}})}function g(e,t){let r=function(e){if(0===e.length)return 0;if(!(0,n.BV)(e[0]))return null;let t=e[0].fixedSize;return e.every(e=>(0,n.BV)(e)&&e.fixedSize===t)?t:null}(e),i=(r,n,i)=>{let s=t(r);return m(e,s),e[s].write(r,n,i)};if(null!==r)return(0,n.Mf)({fixedSize:r,write:i});let s=e.map(e=>l(e)).reduce((e,t)=>null===e||null===t?null:Math.max(e,t),0);return(0,n.Mf)({...null!==s?{maxSize:s}:{},getSizeFromValue:r=>{let i=t(r);return m(e,i),(0,n.C6)(r,e[i])},write:i})}function m(e,t){if(void 0===e[t])throw new s.g1$(s.D76,{maxRange:e.length-1,minRange:0,variant:t})}function b(e){let t=e.map(([,e])=>e),r=a(t.map(o)),i=a(t.map(l))??void 0;return(0,n.Mf)({...null===r?{getSizeFromValue:t=>e.map(([e,r])=>(0,n.C6)(t[e],r)).reduce((e,t)=>e+t,0),maxSize:i}:{fixedSize:r},write:(t,r,n)=>(e.forEach(([e,i])=>{n=i.write(t[e],r,n)}),n)})}function v(e){let t=e.map(([,e])=>e),r=a(t.map(o)),i=a(t.map(l))??void 0;return(0,n.UF)({...null===r?{maxSize:i}:{fixedSize:r},read:(t,r)=>{let n={};return e.forEach(([e,i])=>{let[s,a]=i.read(t,r);r=a,n[e]=s}),[n,r]}})}},78753:function(e,t,r){"use strict";r.d(t,{$L:function(){return g},Nf:function(){return f},Pz:function(){return p},RS:function(){return m},bP:function(){return y},j0:function(){return d},y3:function(){return h}});var n,i=r(1013),s=r(85221);function a(e,t,r,n){if(n<t||n>r)throw new i.g1$(i.Fc5,{codecDescription:e,max:r,min:t,value:n})}var o=((n=o||{})[n.Little=0]="Little",n[n.Big=1]="Big",n);function l(e){return e?.endian!==1}function c(e){return(0,s.Mf)({fixedSize:e.size,write(t,r,n){e.range&&a(e.name,e.range[0],e.range[1],t);let i=new ArrayBuffer(e.size);return e.set(new DataView(i),t,l(e.config)),r.set(new Uint8Array(i),n),n+e.size}})}function u(e){return(0,s.UF)({fixedSize:e.size,read(t,r=0){(0,s.f7)(e.name,t,r),(0,s.Y6)(e.name,e.size,t,r);let n=new DataView((0,s.rJ)(t,r,e.size));return[e.get(n,l(e.config)),r+e.size]}})}var d=()=>(0,s.Mf)({getSizeFromValue:e=>e<=127?1:e<=16383?2:3,maxSize:3,write:(e,t,r)=>{a("shortU16",0,65535,e);let n=[0];for(let t=0;;t+=1){let r=Number(e)>>7*t;if(0===r)break;let i=127&r;n[t]=i,t>0&&(n[t-1]|=128)}return t.set(n,r),r+n.length}}),h=()=>(0,s.UF)({maxSize:3,read:(e,t)=>{let r=0,n=0;for(;++n;){let i=n-1,s=e[t+i];if(r|=(127&s)<<7*i,(128&s)==0)break}return[r,t+n]}}),f=(e={})=>c({config:e,name:"u32",range:[0,Number("0xffffffff")],set:(e,t,r)=>e.setUint32(0,Number(t),r),size:4}),p=(e={})=>u({config:e,get:(e,t)=>e.getUint32(0,t),name:"u32",size:4}),y=(e={})=>c({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),g=()=>c({name:"u8",range:[0,Number("0xff")],set:(e,t)=>e.setUint8(0,Number(t)),size:1}),m=()=>u({get:e=>e.getUint8(0),name:"u8",size:1})},77828:function(e,t,r){"use strict";r.d(t,{TJ:function(){return p},Un:function(){return u},_V:function(){return d},tA:function(){return f}});var n=r(1013),i=r(85221),s=e=>(0,i.Mf)({getSizeFromValue:t=>{let[r,n]=o(t,e[0]);if(!n)return t.length;let i=l(n,e);return r.length+Math.ceil(i.toString(16).length/2)},write(t,r,i){if(!function(e,t,r=t){if(!t.match(RegExp(`^[${e}]*$`)))throw new n.g1$(n.v2s,{alphabet:e,base:e.length,value:r})}(e,t),""===t)return i;let[s,a]=o(t,e[0]);if(!a)return r.set(new Uint8Array(s.length).fill(0),i),i+s.length;let c=l(a,e),u=[];for(;c>0n;)u.unshift(Number(c%256n)),c/=256n;let d=[...Array(s.length).fill(0),...u];return r.set(d,i),i+d.length}}),a=e=>(0,i.UF)({read(t,r){let n=0===r?t:t.slice(r);if(0===n.length)return["",0];let i=n.findIndex(e=>0!==e);i=-1===i?n.length:i;let s=e[0].repeat(i);return i===n.length?[s,t.length]:[s+function(e,t){let r=BigInt(t.length),n=[];for(;e>0n;)n.unshift(t[Number(e%r)]),e/=r;return n.join("")}(n.slice(i).reduce((e,t)=>256n*e+BigInt(t),0n),e),t.length]}});function o(e,t){let[r,n]=e.split(RegExp(`((?!${t}).*)`));return[r,n]}function l(e,t){let r=BigInt(t.length),n=0n;for(let i of e)n*=r,n+=BigInt(t.indexOf(i));return n}var c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",u=()=>s(c),d=()=>a(c),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=()=>(0,i.Mf)({getSizeFromValue:e=>{try{return atob(e).length}catch{throw new n.g1$(n.v2s,{alphabet:h,base:64,value:e})}},write(e,t,r){try{let n=atob(e).split("").map(e=>e.charCodeAt(0));return t.set(n,r),n.length+r}catch{throw new n.g1$(n.v2s,{alphabet:h,base:64,value:e})}}}),p=()=>(0,i.UF)({read:(e,t=0)=>[btoa(String.fromCharCode(...e.slice(t))),e.length]})},1013:function(e,t,r){"use strict";r.d(t,{$aB:function(){return U},Afi:function(){return h},Aij:function(){return H},Asp:function(){return v},Bd7:function(){return $},BjO:function(){return el},D76:function(){return q},Dze:function(){return W},Fc5:function(){return M},GS7:function(){return D},Gxb:function(){return Y},HmQ:function(){return Z},Iav:function(){return g},JY_:function(){return J},L25:function(){return d},MYi:function(){return m},PE6:function(){return i},Pce:function(){return y},PeP:function(){return l},PgF:function(){return j},Pzc:function(){return k},RE:function(){return ee},SH6:function(){return u},S_Y:function(){return P},TQe:function(){return s},TvV:function(){return T},VcU:function(){return x},WRp:function(){return C},Wlw:function(){return A},XsN:function(){return Q},Yd8:function(){return n},YvZ:function(){return K},ZVV:function(){return V},bAv:function(){return w},bvN:function(){return er},d95:function(){return a},eWp:function(){return f},eoY:function(){return b},g1$:function(){return en},mqq:function(){return I},oEF:function(){return E},oR5:function(){return R},oRT:function(){return S},oec:function(){return F},on3:function(){return N},p9K:function(){return L},qXh:function(){return G},qin:function(){return c},rjo:function(){return ei},sD0:function(){return p},v2s:function(){return z},xTK:function(){return O},xVG:function(){return o},yFC:function(){return _},ybQ:function(){return X},zJs:function(){return B}});var n=28e5,i=2800001,s=2800003,a=2800006,o=2800007,l=2800008,c=2800009,u=32300001,d=3230004,h=361e4,f=3610001,p=3610003,y=3610005,g=3610006,m=3610007,b=3611e3,v=3704e3,w=3704001,_=3704004,E=5663e3,x=5663001,I=5663004,S=5663005,A=5663006,k=5663007,T=5663008,C=5663015,O=5663016,P=5663017,R=5663021,D=8078e3,N=8078001,U=8078004,B=8078005,L=8078006,j=8078007,M=8078011,z=8078012,$=8078013,F=8078014,q=8078017,W=81e5,V=8100002,H=8100003,K=819e4,G=8190001,Z=8190002,J=8190003,Y=8190004,Q=99e5,X=9900001,ee=9900004;function et([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}function er(e,t){return e instanceof Error&&"SolanaError"===e.name&&(void 0===t||e.context.__code===t)}var en=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;t&&Object.entries(Object.getOwnPropertyDescriptors(t)).forEach(([t,i])=>{"cause"===t?n={cause:i.value}:(void 0===r&&(r={__code:e}),Object.defineProperty(r,t,i))}),super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(et).join("&"))}'`),`${r}\``}}(e,r),n),this.context=Object.freeze(void 0===r?{__code:e}:r),this.name="SolanaError"}};function ei(...e){"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(...e)}function es({errorCodeBaseOffset:e,getErrorContext:t,orderedErrorNames:r,rpcEnumError:n},i){let s,a;"string"==typeof n?s=n:(s=Object.keys(n)[0],a=n[s]);let o=e+r.indexOf(s),l=t(o,s,a),c=new en(o,l);return ei(c,i),c}var ea=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"],eo=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function el(e){let t;if("object"==typeof e&&null!==e&&"code"in e&&"message"in e&&("number"==typeof e.code||"bigint"==typeof e.code)&&"string"==typeof e.message){let{code:r,data:n,message:i}=e,s=Number(r);if(-32002===s){let{err:e,...r}=n,i=e?{cause:function e(t){return"object"==typeof t&&"InstructionError"in t?function e(t,r){let n=Number(t);return es({errorCodeBaseOffset:4615001,getErrorContext:(e,t,r)=>4615e3===e?{errorName:t,index:n,...void 0!==r?{instructionErrorContext:r}:null}:4615026===e?{code:Number(r),index:n}:{index:n},orderedErrorNames:ea,rpcEnumError:r},e)}(...t.InstructionError):es({errorCodeBaseOffset:7050001,getErrorContext:(e,t,r)=>705e4===e?{errorName:t,...void 0!==r?{transactionErrorContext:r}:null}:7050030===e?{index:Number(r)}:7050031===e||7050035===e?{accountIndex:Number(r.account_index)}:void 0,orderedErrorNames:eo,rpcEnumError:t},e)}(e)}:null;t=new en(-32002,{...r,...i})}else{let e;switch(s){case -32603:case -32602:case -32600:case -32601:case -32700:case -32012:case -32001:case -32004:case -32014:case -32010:case -32009:case -32007:case -32006:case -32015:e={__serverMessage:i};break;default:"object"!=typeof n||Array.isArray(n)||(e=n)}t=new en(s,e)}}else{let r="object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?e.message:"Malformed JSON-RPC error with no message attribute";t=new en(10,{error:e,message:r})}return ei(t,el),t}},93182:function(e,t,r){"use strict";function n(e,...t){return t.reduce((e,t)=>t(e),e)}r.d(t,{z:function(){return n}})},38416:function(e,t,r){"use strict";r.d(t,{$k:function(){return l},BH:function(){return a},TC:function(){return s},fy:function(){return o},g4:function(){return i}});var n,i=((n=i||{})[n.WRITABLE_SIGNER=3]="WRITABLE_SIGNER",n[n.READONLY_SIGNER=2]="READONLY_SIGNER",n[n.WRITABLE=1]="WRITABLE",n[n.READONLY=0]="READONLY",n);function s(e){return e>=2}function a(e){return(1&e)!=0}function o(e,t){return e|t}function l(e){return 2|e}},15602:function(e,t,r){"use strict";r.d(t,{Jp:function(){return h},eS:function(){return c},g5:function(){return d}});var n=r(49771),i=r(1013),s=r(85221),a=Object.freeze({name:"Ed25519"});async function o(e,t=!1){let r=e.byteLength;if(32!==r)throw new i.g1$(i.bAv,{actualLength:r});let n=new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...e]);return await crypto.subtle.importKey("pkcs8",n,a,t,["sign"])}async function l(e,t=!1){if((0,n.Rx)(),!1===e.extractable)throw new i.g1$(i.MYi,{key:e});let r=await crypto.subtle.exportKey("jwk",e);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:t,key_ops:["verify"],kty:"OKP",x:r.x},"Ed25519",t,["verify"])}async function c(e,t){return(0,n.Fc)(),new Uint8Array(await crypto.subtle.sign(a,e,(0,s.rJ)(t)))}async function u(e,t,r){return(0,n.Bj)(),await crypto.subtle.verify(a,e,(0,s.rJ)(t),(0,s.rJ)(r))}async function d(e,t=!1){if((0,n.rz)(),64!==e.byteLength)throw new i.g1$(i.Asp,{byteLength:e.byteLength});let[r,s]=await Promise.all([crypto.subtle.importKey("raw",e.slice(32),a,!0,["verify"]),o(e.slice(0,32),t)]),l=new Uint8Array(32);crypto.getRandomValues(l);let d=await c(s,l);if(!await u(r,d,l))throw new i.g1$(i.yFC);return{privateKey:s,publicKey:r}}async function h(e,t=!1){let r=o(e,t),[n,i]=await Promise.all([(t?r:o(e,!0)).then(async e=>await l(e,!0)),r]);return{privateKey:i,publicKey:n}}},85970:function(e,t,r){"use strict";r.d(t,{$9:function(){return a},Hb:function(){return i},RJ:function(){return s}});var n=r(48100);function i(e){return(0,n.UJ)(e)}function s(e){return e}function a(e){return e}},82162:function(e,t,r){"use strict";r.d(t,{Aq:function(){return o},Db:function(){return a},Lh:function(){return d},Qg:function(){return c},f1:function(){return h},he:function(){return l}});var n=r(48100),i=r(15602),s=r(49437);function a(e){return"modifyAndSignTransactions"in e&&"function"==typeof e.modifyAndSignTransactions}function o(e){return"signTransactions"in e&&"function"==typeof e.signTransactions}function l(e){return o(e)||a(e)||"signAndSendTransactions"in e&&"function"==typeof e.signAndSendTransactions}function c(e,t){Object.freeze(e);let r={...t,feePayer:e};return Object.freeze(r),r}async function u(e){let t=await (0,n.EJ)(e.publicKey);return Object.freeze({address:t,keyPair:e,signMessages:r=>Promise.all(r.map(async r=>Object.freeze({[t]:await (0,i.eS)(e.privateKey,r.content)}))),signTransactions:r=>Promise.all(r.map(async r=>Object.freeze({[t]:(await (0,s.n1)([e],r)).signatures[t]})))})}async function d(e,t){return await u(await (0,i.g5)(e,t))}async function h(e,t){return await u(await (0,i.Jp)(e,t))}},12888:function(e,t,r){"use strict";r.d(t,{CG:function(){return T},MK:function(){return m},RZ:function(){return F},Vu:function(){return R},al:function(){return W},bV:function(){return b},d3:function(){return q},fy:function(){return L},o$:function(){return D},pE:function(){return B}});var n,i,s,a,o,l,c=r(1013),u=r(85970),d=r(48100),h=r(85221),f=r(96377),p=r(78753),y=r(38416),g=r(93182);function m(e){return"lifetimeConstraint"in e&&"string"==typeof e.lifetimeConstraint.blockhash&&"bigint"==typeof e.lifetimeConstraint.lastValidBlockHeight&&(0,u.Hb)(e.lifetimeConstraint.blockhash)}function b(e,t){return"lifetimeConstraint"in t&&t.lifetimeConstraint&&"blockhash"in t.lifetimeConstraint&&t.lifetimeConstraint.blockhash===e.blockhash&&t.lifetimeConstraint.lastValidBlockHeight===e.lastValidBlockHeight?t:Object.freeze({...t,lifetimeConstraint:Object.freeze(e)})}var v=e=>(0,h.Mf)({getSizeFromValue:t=>{let[r,n]=_(t,e[0]);if(!n)return t.length;let i=E(n,e);return r.length+Math.ceil(i.toString(16).length/2)},write(t,r,n){if(!function(e,t,r=t){if(!t.match(RegExp(`^[${e}]*$`)))throw new c.g1$(c.v2s,{alphabet:e,base:e.length,value:r})}(e,t),""===t)return n;let[i,s]=_(t,e[0]);if(!s)return r.set(new Uint8Array(i.length).fill(0),n),n+i.length;let a=E(s,e),o=[];for(;a>0n;)o.unshift(Number(a%256n)),a/=256n;let l=[...Array(i.length).fill(0),...o];return r.set(l,n),n+l.length}}),w=e=>(0,h.UF)({read(t,r){let n=0===r?t:t.slice(r);if(0===n.length)return["",0];let i=n.findIndex(e=>0!==e);i=-1===i?n.length:i;let s=e[0].repeat(i);return i===n.length?[s,t.length]:[s+function(e,t){let r=BigInt(t.length),n=[];for(;e>0n;)n.unshift(t[Number(e%r)]),e/=r;return n.join("")}(n.slice(i).reduce((e,t)=>256n*e+BigInt(t),0n),e),t.length]}});function _(e,t){let[r,n]=e.split(RegExp(`((?!${t}).*)`));return[r,n]}function E(e,t){let r=BigInt(t.length),n=0n;for(let i of e)n*=r,n+=BigInt(t.indexOf(i));return n}var x="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",I=()=>v(x),S=()=>w(x);function A(){return s||(s=(0,p.$L)()),s}function k(){return a||(a=(0,p.RS)()),a}function T(){return(0,h.UF)({maxSize:1,read:(e,t)=>{let r=e[t];if((128&r)==0)return["legacy",t];{let e=128^r;if(e>0)throw new c.g1$(c.oR5,{unsupportedVersion:e});return[e,t+1]}}})}function C(){return(0,f.Q5)(P())}function O(){return(0,h.Nz)((0,f.Q5)([...P(),["addressTableLookups",(0,f.Pn)(function(){if(!n){let e=(0,f.Pn)((0,p.$L)(),{size:(0,p.j0)()});n=(0,f.Q5)([["lookupTableAddress",(0,d.I7)()],["writableIndexes",e],["readonlyIndexes",e]])}return n}(),{size:(0,p.j0)()})]]),e=>"legacy"===e.version?e:{...e,addressTableLookups:e.addressTableLookups??[]})}function P(){let e=(0,f.Lj)([(0,f.Ud)(new Uint8Array(32)),(0,h.Vo)(I(),32)],e=>void 0===e?0:1);return[["version",(0,h.Mf)({getSizeFromValue:e=>"legacy"===e?0:1,maxSize:1,write:(e,t,r)=>{if("legacy"===e)return r;if(e<0||e>127)throw new c.g1$(c.mqq,{actualVersion:e});if(e>0)throw new c.g1$(c.oR5,{unsupportedVersion:e});return t.set([128|e],r),r+1}})],["header",(0,f.Q5)([["numSignerAccounts",A()],["numReadonlySignerAccounts",A()],["numReadonlyNonSignerAccounts",A()]])],["staticAccounts",(0,f.Pn)((0,d.I7)(),{size:(0,p.j0)()})],["lifetimeToken",e],["instructions",(0,f.Pn)((o||(o=(0,h.Nz)((0,f.Q5)([["programAddressIndex",(0,p.$L)()],["accountIndices",(0,f.Pn)((0,p.$L)(),{size:(0,p.j0)()})],["data",(0,h.n4)((0,f.B9)(),(0,p.j0)())]]),e=>void 0!==e.accountIndices&&void 0!==e.data?e:{...e,accountIndices:e.accountIndices??[],data:e.data??new Uint8Array(0)})),o),{size:(0,p.j0)()})]]}function R(){return(0,h.Mf)({getSizeFromValue:e=>"legacy"===e.version?C().getSizeFromValue(e):O().getSizeFromValue(e),write:(e,t,r)=>"legacy"===e.version?C().write(e,t,r):O().write(e,t,r)})}function D(){return(0,h.W8)((0,f.Xn)([["version",T()],["header",(0,f.Xn)([["numSignerAccounts",k()],["numReadonlySignerAccounts",k()],["numReadonlyNonSignerAccounts",k()]])],["staticAccounts",(0,f.LV)((0,d.Iw)(),{size:(0,p.y3)()})],["lifetimeToken",(0,h.il)(S(),32)],["instructions",(0,f.LV)((l||(l=(0,h.W8)((0,f.Xn)([["programAddressIndex",(0,p.RS)()],["accountIndices",(0,f.LV)((0,p.RS)(),{size:(0,p.y3)()})],["data",(0,h.YR)((0,f.ON)(),(0,p.y3)())]]),e=>{if(e.accountIndices.length&&e.data.byteLength)return e;let{accountIndices:t,data:r,...n}=e;return{...n,...t.length?{accountIndices:t}:null,...r.byteLength?{data:r}:null}})),l),{size:(0,p.y3)()})],["addressTableLookups",(0,f.LV)(function(){if(!i){let e=(0,f.LV)((0,p.RS)(),{size:(0,p.y3)()});i=(0,f.Xn)([["lookupTableAddress",(0,d.Iw)()],["writableIndexes",e],["readonlyIndexes",e]])}return i}(),{size:(0,p.y3)()})]]),({addressTableLookups:e,...t})=>"legacy"!==t.version&&e?.length?{...t,addressTableLookups:e}:t)}function N(e,t,r){e[t]=r(e[t]??{role:y.g4.READONLY})}var U=Symbol("AddressMapTypeProperty");function B(e){let t;let r=Object.entries(function(e,t){let r={[e]:{[U]:0,role:y.g4.WRITABLE_SIGNER}},n=new Set;for(let e of t){let t;if(N(r,e.programAddress,t=>{if(n.add(e.programAddress),U in t){if((0,y.BH)(t.role)){if(0===t[U])throw new c.g1$(c.oEF,{programAddress:e.programAddress});throw new c.g1$(c.VcU,{programAddress:e.programAddress})}if(2===t[U])return t}return{[U]:2,role:y.g4.READONLY}}),e.accounts)for(let i of e.accounts)N(r,i.address,e=>{let{address:r,...s}=i;if(U in e)switch(e[U]){case 0:return e;case 1:{let r=(0,y.fy)(e.role,s.role);if("lookupTableAddress"in s){if(e.lookupTableAddress!==s.lookupTableAddress&&0>(t||=(0,d.N8)())(s.lookupTableAddress,e.lookupTableAddress))return{[U]:1,...s,role:r}}else if((0,y.TC)(s.role))return{[U]:2,role:r};if(e.role!==r)return{...e,role:r};return e}case 2:{let t=(0,y.fy)(e.role,s.role);if(n.has(i.address)){if((0,y.BH)(s.role))throw new c.g1$(c.VcU,{programAddress:i.address});if(e.role!==t)return{...e,role:t};return e}if("lookupTableAddress"in s&&!(0,y.TC)(e.role))return{...s,[U]:1,role:t};if(e.role!==t)return{...e,role:t};return e}}return"lookupTableAddress"in s?{...s,[U]:1}:{...s,[U]:2}})}return r}(e.feePayer.address,e.instructions)).sort(([e,r],[n,i])=>{if(r[U]!==i[U]){if(0===r[U])return -1;if(0===i[U])return 1;if(2===r[U])return -1;if(2===i[U])return 1}let s=(0,y.TC)(r.role);if(s!==(0,y.TC)(i.role))return s?-1:1;let a=(0,y.BH)(r.role);return a!==(0,y.BH)(i.role)?a?-1:1:(t||=(0,d.N8)(),1===r[U]&&1===i[U]&&r.lookupTableAddress!==i.lookupTableAddress)?t(r.lookupTableAddress,i.lookupTableAddress):t(e,n)}).map(([e,t])=>({address:e,...t})),n=e.lifetimeConstraint;return{..."legacy"!==e.version?{addressTableLookups:function(e){let t={};for(let r of e){if(!("lookupTableAddress"in r))continue;let e=t[r.lookupTableAddress]||={readonlyIndexes:[],writableIndexes:[]};r.role===y.g4.WRITABLE?e.writableIndexes.push(r.addressIndex):e.readonlyIndexes.push(r.addressIndex)}return Object.keys(t).sort((0,d.N8)()).map(e=>({lookupTableAddress:e,...t[e]}))}(r)}:null,...n?{lifetimeToken:"nonce"in n?n.nonce:n.blockhash}:null,header:function(e){let t=0,r=0,n=0;for(let i of e){if("lookupTableAddress"in i)break;let e=(0,y.BH)(i.role);(0,y.TC)(i.role)?(n++,!e&&r++):!e&&t++}return{numReadonlyNonSignerAccounts:t,numReadonlySignerAccounts:r,numSignerAccounts:n}}(r),instructions:function(e,t){let r=function(e){let t={};for(let[r,n]of e.entries())t[n.address]=r;return t}(t);return e.map(({accounts:e,data:t,programAddress:n})=>({programAddressIndex:r[n],...e?{accountIndices:e.map(({address:e})=>r[e])}:null,...t?{data:t}:null}))}(e.instructions,r),staticAccounts:function(e){let t=e.findIndex(e=>"lookupTableAddress"in e);return(-1===t?e:e.slice(0,t)).map(({address:e})=>e)}(r),version:e.version}}function L(e){return Object.freeze({instructions:Object.freeze([]),version:e.version})}var j="SysvarRecentB1ockHashes11111111111111111111",M="11111111111111111111111111111111";function z(e,t){return{accounts:[{address:e,role:y.g4.WRITABLE},{address:j,role:y.g4.READONLY},{address:t,role:y.g4.READONLY_SIGNER}],data:new Uint8Array([4,0,0,0]),programAddress:M}}function $(e){var t;return e.programAddress===M&&null!=e.data&&4===(t=e.data).byteLength&&4===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&e.accounts?.length===3&&null!=e.accounts[0].address&&e.accounts[0].role===y.g4.WRITABLE&&e.accounts[1].address===j&&e.accounts[1].role===y.g4.READONLY&&null!=e.accounts[2].address&&(0,y.TC)(e.accounts[2].role)}function F(e){return"lifetimeConstraint"in e&&"string"==typeof e.lifetimeConstraint.nonce&&null!=e.instructions[0]&&$(e.instructions[0])}function q(e,t){var r;return r=[e],Object.freeze({...t,instructions:Object.freeze([...t.instructions,...r])})}function W(e,t){let r=e.staticAccounts[0];if(!r)throw new c.g1$(c.TvV);let n=[...function(e){let{header:t}=e,r=t.numSignerAccounts-t.numReadonlySignerAccounts,n=e.staticAccounts.length-t.numSignerAccounts-t.numReadonlyNonSignerAccounts,i=[],s=0;for(let t=0;t<r;t++)i.push({address:e.staticAccounts[s],role:y.g4.WRITABLE_SIGNER}),s++;for(let r=0;r<t.numReadonlySignerAccounts;r++)i.push({address:e.staticAccounts[s],role:y.g4.READONLY_SIGNER}),s++;for(let t=0;t<n;t++)i.push({address:e.staticAccounts[s],role:y.g4.WRITABLE}),s++;for(let r=0;r<t.numReadonlyNonSignerAccounts;r++)i.push({address:e.staticAccounts[s],role:y.g4.READONLY}),s++;return i}(e),..."addressTableLookups"in e&&void 0!==e.addressTableLookups&&e.addressTableLookups.length>0?function(e,t){let r=e.map(e=>e.lookupTableAddress).filter(e=>void 0===t[e]);if(r.length>0)throw new c.g1$(c.oRT,{lookupTableAddresses:r});let n=[],i=[];for(let r of e){let e=t[r.lookupTableAddress],s=r.readonlyIndexes,a=r.writableIndexes,o=Math.max(...s,...a);if(o>=e.length)throw new c.g1$(c.Wlw,{highestKnownIndex:e.length-1,highestRequestedIndex:o,lookupTableAddress:r.lookupTableAddress});let l=s.map(t=>({address:e[t],addressIndex:t,lookupTableAddress:r.lookupTableAddress,role:y.g4.READONLY}));n.push(...l);let u=a.map(t=>({address:e[t],addressIndex:t,lookupTableAddress:r.lookupTableAddress,role:y.g4.WRITABLE}));i.push(...u)}return[...i,...n]}(e.addressTableLookups,t?.addressesByLookupTableAddress??{}):[]],i=e.instructions.map(e=>(function(e,t){let r=t[e.programAddressIndex]?.address;if(!r)throw new c.g1$(c.Pzc,{index:e.programAddressIndex});let n=e.accountIndices?.map(e=>t[e]),{data:i}=e;return Object.freeze({programAddress:r,...n&&n.length?{accounts:Object.freeze(n)}:{},...i&&i.length?{data:i}:{}})})(e,n)),s=i[0],a=function(e,t,r){if(!t||!$(t))return{blockhash:e,lastValidBlockHeight:r??2n**64n-1n};{let r=t.accounts[0].address;(0,d.cE)(r);let n=t.accounts[2].address;return(0,d.cE)(n),{nonce:e,nonceAccountAddress:r,nonceAuthorityAddress:n}}}(e.lifetimeToken,s,t?.lastValidBlockHeight);return(0,g.z)(L({version:e.version}),e=>(function(e,t){var r;if("feePayer"in t&&e===t.feePayer?.address&&(r=t.feePayer)&&"address"in r&&"string"==typeof r.address&&1===Object.keys(r).length)return t;let n={...t,feePayer:Object.freeze({address:e})};return Object.freeze(n),n})(r,e),e=>i.reduce((e,t)=>q(t,e),e),e=>"blockhash"in a?b(a,e):function({nonce:e,nonceAccountAddress:t,nonceAuthorityAddress:r},n){let i;let s=n.instructions[0];if(s&&$(s)){if(s.accounts[0].address===t&&s.accounts[2].address===r){if(F(n)&&n.lifetimeConstraint.nonce===e)return n;i=[s,...n.instructions.slice(1)]}else i=[Object.freeze(z(t,r)),...n.instructions.slice(1)]}else i=[Object.freeze(z(t,r)),...n.instructions];return Object.freeze({...n,instructions:Object.freeze(i),lifetimeConstraint:Object.freeze({nonce:e})})}(a,e))}},49437:function(e,t,r){"use strict";r.d(t,{Kt:function(){return h},n1:function(){return g},oU:function(){return m},qy:function(){return y},x7:function(){return f}});var n=r(48100),i=r(85221),s=r(96377),a=r(78753),o=r(1013),l=r(12888),c=r(77828),u=r(15602);function d(e){let t=Object.values(e);if(0===t.length)throw new o.g1$(o.xTK);return t.map(e=>e||new Uint8Array(64).fill(0))}function h(){return(0,s.Q5)([["signatures",(0,i.Nz)((0,s.Pn)((0,i.Vo)((0,s.B9)(),64),{size:(0,a.j0)()}),d)],["messageBytes",(0,s.B9)()]])}function f(){return(0,i.W8)((0,s.Xn)([["signatures",(0,s.LV)((0,i.il)((0,s.ON)(),64),{size:(0,a.y3)()})],["messageBytes",(0,s.ON)()]]),p)}function p(e){let{messageBytes:t,signatures:r}=e,[c,u,d]=(0,s.g0)([(0,l.CG)(),(0,i.yF)((0,a.RS)(),2),(0,s.LV)((0,n.Iw)(),{size:(0,a.y3)()})]).decode(t),h=d.slice(0,u);if(h.length!==r.length)throw new o.g1$(o.S_Y,{numRequiredSignatures:u,signaturesLength:r.length,signerAddresses:h});let f={};return h.forEach((e,t)=>{let n=r[t];n.every(e=>0===e)?f[e]=null:f[e]=n}),{messageBytes:t,signatures:Object.freeze(f)}}function y(e){let t;let r=(0,l.pE)(e),n=(0,l.Vu)().encode(r),i=r.staticAccounts.slice(0,r.header.numSignerAccounts),s={};for(let e of i)s[e]=null;return(0,l.MK)(e)?t={blockhash:e.lifetimeConstraint.blockhash,lastValidBlockHeight:e.lifetimeConstraint.lastValidBlockHeight}:(0,l.RZ)(e)&&(t={nonce:e.lifetimeConstraint.nonce,nonceAccountAddress:e.instructions[0].accounts[0].address}),Object.freeze({...t?{lifetimeConstraint:t}:void 0,messageBytes:n,signatures:Object.freeze(s)})}async function g(e,t){let r,s;if(await Promise.all(e.map(async e=>{let a=await (0,n.EJ)(e.publicKey),o=t.signatures[a];if(void 0===o){(s||=new Set).add(a);return}if(s)return;let l=await (0,u.eS)(e.privateKey,t.messageBytes);null!==o&&(0,i.yK)(l,o)||((r||={})[a]=l)})),s&&s.size>0){let e=Object.keys(t.signatures);throw new o.g1$(o.WRp,{expectedAddresses:e,unexpectedAddresses:[...s]})}return r?Object.freeze({...t,signatures:Object.freeze({...t.signatures,...r})}):t}function m(e){let t=h().encode(e);return(0,c.TJ)().decode(t)}},21623:function(e,t,r){"use strict";r.d(t,{S:function(){return y}});var n=r(45345),i=r(21733),s=r(18238),a=r(24112),o=class extends a.l{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){let s=t.queryKey,a=t.queryHash??(0,n.Rm)(s,t),o=this.get(a);return o||(o=new i.A({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){s.Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n._x)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,n._x)(e,t)):t}notify(e){s.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){s.Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){s.Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=r(2894),c=class extends a.l{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#r=new Map,this.#n=0}#t;#r;#n;build(e,t,r){let n=new l.m({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);let t=u(e);if("string"==typeof t){let r=this.#r.get(t);r?r.push(e):this.#r.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=u(e);if("string"==typeof t){let r=this.#r.get(t);if(r){if(r.length>1){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#r.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=u(e);if("string"!=typeof t)return!0;{let r=this.#r.get(t),n=r?.find(e=>"pending"===e.state.status);return!n||n===e}}runNext(e){let t=u(e);if("string"!=typeof t)return Promise.resolve();{let r=this.#r.get(t)?.find(t=>t!==e&&t.state.isPaused);return r?.continue()??Promise.resolve()}}clear(){s.Vr.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#r.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n.X7)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,n.X7)(e,t))}notify(e){s.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return s.Vr.batch(()=>Promise.all(e.map(e=>e.continue().catch(n.ZT))))}};function u(e){return e.options.scope?.id}var d=r(87045),h=r(57853);function f(e){return{onFetch:(t,r)=>{let i=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[],l={pages:[],pageParams:[]},c=0,u=async()=>{let r=!1,u=e=>{(0,n.I4)(e,()=>t.signal,()=>r=!0)},d=(0,n.cG)(t.options,t.fetchOptions),h=async(e,i,s)=>{if(r)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);let a=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:s?"backward":"forward",meta:t.options.meta};return u(e),e})(),o=await d(a),{maxPages:l}=t.options,c=s?n.Ht:n.VX;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,i,l)}};if(s&&a.length){let e="backward"===s,t={pages:a,pageParams:o},r=(e?function(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}:p)(i,t);l=await h(t,r,e)}else{let t=e??a.length;do{let e=0===c?o[0]??i.initialPageParam:p(i,l);if(c>0&&null==e)break;l=await h(l,e),c++}while(c<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function p(e,{pages:t,pageParams:r}){let n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}var y=class{#i;#s;#a;#o;#l;#c;#u;#d;constructor(e={}){this.#i=e.queryCache||new o,this.#s=e.mutationCache||new c,this.#a=e.defaultOptions||{},this.#o=new Map,this.#l=new Map,this.#c=0}mount(){this.#c++,1===this.#c&&(this.#u=d.j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onFocus())}),this.#d=h.N.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onOnline())}))}unmount(){this.#c--,0===this.#c&&(this.#u?.(),this.#u=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#i.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#s.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),r=this.#i.build(this,t),i=r.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.KC)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#i.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){let i=this.defaultQueryOptions({queryKey:e}),s=this.#i.get(i.queryHash),a=s?.state.data,o=(0,n.SE)(t,a);if(void 0!==o)return this.#i.build(this,i).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return s.Vr.batch(()=>this.#i.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state}removeQueries(e){let t=this.#i;s.Vr.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let r=this.#i;return s.Vr.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let r={revert:!0,...t};return Promise.all(s.Vr.batch(()=>this.#i.findAll(e).map(e=>e.cancel(r)))).then(n.ZT).catch(n.ZT)}invalidateQueries(e,t={}){return s.Vr.batch(()=>(this.#i.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let r={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(s.Vr.batch(()=>this.#i.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(n.ZT)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let r=this.#i.build(this,t);return r.isStaleByTime((0,n.KC)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.ZT).catch(n.ZT)}fetchInfiniteQuery(e){return e.behavior=f(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.ZT).catch(n.ZT)}ensureInfiniteQueryData(e){return e.behavior=f(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return h.N.isOnline()?this.#s.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#i}getMutationCache(){return this.#s}getDefaultOptions(){return this.#a}setDefaultOptions(e){this.#a=e}setQueryDefaults(e,t){this.#o.set((0,n.Ym)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],r={};return t.forEach(t=>{(0,n.to)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){this.#l.set((0,n.Ym)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],r={};return t.forEach(t=>{(0,n.to)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.CN&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#a.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#i.clear(),this.#s.clear()}}},19726:function(e,t,r){"use strict";r.d(t,{L:function(){return d}});var n=r(31669),i=r(77014),s=r(39504),a=r(49287),o=r(59455),l=r(13102),c=r(26129);class u extends c.G{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function d(e={}){let t,r,c,p;let{shimDisconnect:y=!0,unstable_shimAsyncInject:g}=e;function m(){let t=e.target;if("function"==typeof t){let e=t();if(e)return e}return"object"==typeof t?t:"string"==typeof t?{...h[t]??{id:t,name:`${t[0].toUpperCase()}${t.slice(1)}`,provider:`is${t[0].toUpperCase()}${t.slice(1)}`}}:{id:"injected",name:"Injected",provider:e=>e?.ethereum}}return h=>({get icon(){return m().icon},get id(){return m().id},get name(){return m().name},get supportsSimulation(){return!0},type:d.type,async setup(){let r=await this.getProvider();r?.on&&e.target&&(c||(c=this.onConnect.bind(this),r.on("connect",c)),t||(t=this.onAccountsChanged.bind(this),r.on("accountsChanged",t)))},async connect({chainId:s,isReconnecting:a,withCapabilities:o}={}){let l=await this.getProvider();if(!l)throw new u;let d=[];if(a)d=await this.getAccounts().catch(()=>[]);else if(y)try{let e=await l.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});(d=e[0]?.caveats?.[0]?.value?.map(e=>n.K(e))).length>0&&(d=await this.getAccounts())}catch(e){if(e.code===i.ab.code)throw new i.ab(e);if(e.code===i.pT.code)throw e}try{d?.length||a||(d=(await l.request({method:"eth_requestAccounts"})).map(e=>(0,n.K)(e))),c&&(l.removeListener("connect",c),c=void 0),t||(t=this.onAccountsChanged.bind(this),l.on("accountsChanged",t)),r||(r=this.onChainChanged.bind(this),l.on("chainChanged",r)),p||(p=this.onDisconnect.bind(this),l.on("disconnect",p));let u=await this.getChainId();if(s&&u!==s){let e=await this.switchChain({chainId:s}).catch(e=>{if(e.code===i.ab.code)throw e;return{id:u}});u=e?.id??u}return y&&await h.storage?.removeItem(`${this.id}.disconnected`),e.target||await h.storage?.setItem("injected.connected",!0),{accounts:o?d.map(e=>({address:e,capabilities:{}})):d,chainId:u}}catch(e){if(e.code===i.ab.code)throw new i.ab(e);if(e.code===i.pT.code)throw new i.pT(e);throw e}},async disconnect(){let t=await this.getProvider();if(!t)throw new u;r&&(t.removeListener("chainChanged",r),r=void 0),p&&(t.removeListener("disconnect",p),p=void 0),c||(c=this.onConnect.bind(this),t.on("connect",c));try{await (0,s.F)(()=>t.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}y&&await h.storage?.setItem(`${this.id}.disconnected`,!0),e.target||await h.storage?.removeItem("injected.connected")},async getAccounts(){let e=await this.getProvider();if(!e)throw new u;return(await e.request({method:"eth_accounts"})).map(e=>(0,n.K)(e))},async getChainId(){let e=await this.getProvider();if(!e)throw new u;return Number(await e.request({method:"eth_chainId"}))},async getProvider(){let e;if("undefined"==typeof window)return;let t=m();return(e="function"==typeof t.provider?t.provider(window):"string"==typeof t.provider?f(window,t.provider):t.provider)&&!e.removeListener&&("off"in e&&"function"==typeof e.off?e.removeListener=e.off:e.removeListener=()=>{}),e},async isAuthorized(){try{if(y&&await h.storage?.getItem(`${this.id}.disconnected`)||!e.target&&!await h.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(void 0!==g&&!1!==g){let e=async()=>("undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",e),!!await this.getProvider()),t="number"==typeof g?g:1e3;if(await Promise.race([..."undefined"!=typeof window?[new Promise(t=>window.addEventListener("ethereum#initialized",()=>t(e()),{once:!0}))]:[],new Promise(r=>setTimeout(()=>r(e()),t))]))return!0}throw new u}return!!(await (0,a.J)(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let r=await this.getProvider();if(!r)throw new u;let n=h.chains.find(e=>e.id===t);if(!n)throw new i.x3(new l.X4);let s=new Promise(e=>{let r=n=>{"chainId"in n&&n.chainId===t&&(h.emitter.off("change",r),e())};h.emitter.on("change",r)});try{return await Promise.all([r.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,o.eC)(t)}]}).then(async()=>{await this.getChainId()===t&&h.emitter.emit("change",{chainId:t})}),s]),n}catch(a){if(4902===a.code||a?.data?.originalError?.code===4902)try{let a,l;let{default:c,...u}=n.blockExplorers??{};e?.blockExplorerUrls?a=e.blockExplorerUrls:c&&(a=[c.url,...Object.values(u).map(e=>e.url)]),l=e?.rpcUrls?.length?e.rpcUrls:[n.rpcUrls.default?.http[0]??""];let d={blockExplorerUrls:a,chainId:(0,o.eC)(t),chainName:e?.chainName??n.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??n.nativeCurrency,rpcUrls:l};return await Promise.all([r.request({method:"wallet_addEthereumChain",params:[d]}).then(async()=>{if(await this.getChainId()===t)h.emitter.emit("change",{chainId:t});else throw new i.ab(Error("User rejected switch after adding network."))}),s]),n}catch(e){throw new i.ab(e)}if(a.code===i.ab.code)throw new i.ab(a);throw new i.x3(a)}},async onAccountsChanged(e){if(0===e.length)this.onDisconnect();else if(h.emitter.listenerCount("connect")){let e=(await this.getChainId()).toString();this.onConnect({chainId:e}),y&&await h.storage?.removeItem(`${this.id}.disconnected`)}else h.emitter.emit("change",{accounts:e.map(e=>(0,n.K)(e))})},onChainChanged(e){let t=Number(e);h.emitter.emit("change",{chainId:t})},async onConnect(e){let n=await this.getAccounts();if(0===n.length)return;let i=Number(e.chainId);h.emitter.emit("connect",{accounts:n,chainId:i});let s=await this.getProvider();s&&(c&&(s.removeListener("connect",c),c=void 0),t||(t=this.onAccountsChanged.bind(this),s.on("accountsChanged",t)),r||(r=this.onChainChanged.bind(this),s.on("chainChanged",r)),p||(p=this.onDisconnect.bind(this),s.on("disconnect",p)))},async onDisconnect(e){let t=await this.getProvider();e&&1013===e.code&&t&&(await this.getAccounts()).length||(h.emitter.emit("disconnect"),t&&(r&&(t.removeListener("chainChanged",r),r=void 0),p&&(t.removeListener("disconnect",p),p=void 0),c||(c=this.onConnect.bind(this),t.on("connect",c))))}})}d.type="injected";let h={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:e=>e?.coinbaseWalletExtension?e.coinbaseWalletExtension:f(e,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:e=>f(e,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;for(let t of["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"])if(e[t])return!1;return!0})},phantom:{id:"phantom",name:"Phantom",provider:e=>e?.phantom?.ethereum?e.phantom?.ethereum:f(e,"isPhantom")}};function f(e,t){function r(e){return"function"==typeof t?t(e):"string"!=typeof t||e[t]}let n=e.ethereum;return n?.providers?n.providers.find(e=>r(e)):n&&r(n)?n:void 0}},27600:function(e,t,r){"use strict";let n;function i(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function s(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let n=i(r);return(e,r)=>n.then(n=>r(n.transaction(t,e).objectStore(t)))}function a(){return n||(n=s("keyval-store","keyval")),n}function o(e,t=a()){return t("readonly",t=>i(t.get(e)))}function l(e,t,r=a()){return r("readwrite",r=>(r.put(t,e),i(r.transaction)))}function c(e,t=a()){return t("readwrite",t=>(t.delete(e),i(t.transaction)))}function u(e=a()){return e("readwrite",e=>(e.clear(),i(e.transaction)))}function d(e=a()){return e("readonly",e=>{var t;if(e.getAllKeys)return i(e.getAllKeys());let r=[];return(t=e=>r.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},i(e.transaction)).then(()=>r)})}r.d(t,{IV:function(){return c},MT:function(){return s},U2:function(){return o},XP:function(){return d},ZH:function(){return u},t8:function(){return l}})},64131:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return i}});var i=function e(t,r){function i(e,i,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in s)s[o]&&(a+="; "+o,!0!==s[o]&&(a+="="+s[o].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var s=r[i].split("="),a=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(n[o]=t.read(a,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){i(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},80206:function(e,t,r){"use strict";function n(){let e=new Set,t=[],r=()=>(function(e){if("undefined"==typeof window)return;let t=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)})(r=>{t.some(({info:e})=>e.uuid===r.info.uuid)||(t=[...t,r],e.forEach(e=>e(t,{added:[r]})))}),n=r();return{_listeners:()=>e,clear(){e.forEach(e=>e([],{removed:[...t]})),t=[]},destroy(){this.clear(),e.clear(),n?.()},findProvider:({rdns:e})=>t.find(t=>t.info.rdns===e),getProviders:()=>t,reset(){this.clear(),n?.(),n=r()},subscribe:(r,{emitImmediately:n}={})=>(e.add(r),n&&r(t,{added:t}),()=>e.delete(r))}}r.d(t,{M:function(){return n}})},23673:function(e,t,r){"use strict";r.d(t,{Wg:function(){return l}});var n=r(14427);let i=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}(),s=i.fetch?(...e)=>i.fetch(...e):()=>Promise.reject(Error("[ofetch] global.fetch is not supported!")),a=i.Headers,o=i.AbortController,l=(0,n.c)({fetch:s,Headers:a,AbortController:o})},32807:function(e,t,r){"use strict";r.d(t,{s:function(){return c}});var n=r(98158),i=r(65436),s=r(17283),a=r(59455),o=r(82645),l=r(50550);async function c(e,{address:t,blockNumber:r,blockTag:c=e.experimental_blockTag??"latest"}){if(e.batch?.multicall&&e.chain?.contracts?.multicall3){let a=e.chain.contracts.multicall3.address,u=(0,s.R)({abi:n.F8,functionName:"getEthBalance",args:[t]}),{data:d}=await (0,o.s)(e,l.R,"call")({to:a,data:u,blockNumber:r,blockTag:c});return(0,i.k)({abi:n.F8,functionName:"getEthBalance",args:[t],data:d||"0x"})}let u="bigint"==typeof r?(0,a.eC)(r):void 0;return BigInt(await e.request({method:"eth_getBalance",params:[t,u||c]}))}},56570:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(59455);async function i(e,{address:t,blockNumber:r,blockTag:i="latest"}){let s=void 0!==r?(0,n.eC)(r):void 0,a=await e.request({method:"eth_getCode",params:[t,s||i]},{dedupe:!!s});if("0x"!==a)return a}},94797:function(e,t,r){"use strict";r.d(t,{A:function(){return p}});var n=r(98158),i=r(45434),s=r(65531),a=r(81544),o=r(20010),l=r(65436),c=r(17283),u=r(93627),d=r(34180),h=r(82645),f=r(28766);async function p(e,t){let{account:r,authorizationList:p,allowFailure:y=!0,blockNumber:g,blockOverrides:m,blockTag:b,stateOverride:v}=t,w=t.contracts,{batchSize:_=t.batchSize??1024,deployless:E=t.deployless??!1}="object"==typeof e.batch?.multicall?e.batch.multicall:{},x=(()=>{if(t.multicallAddress)return t.multicallAddress;if(E)return null;if(e.chain)return(0,u.L)({blockNumber:g,chain:e.chain,contract:"multicall3"});throw Error("client chain not configured. multicallAddress is required.")})(),I=[[]],S=0,A=0;for(let e=0;e<w.length;e++){let{abi:t,address:n,args:i,functionName:s}=w[e];try{let e=(0,c.R)({abi:t,args:i,functionName:s});A+=(e.length-2)/2,_>0&&A>_&&I[S].length>0&&(S++,A=(e.length-2)/2,I[S]=[]),I[S]=[...I[S],{allowFailure:!0,callData:e,target:n}]}catch(a){let e=(0,d.S)(a,{abi:t,address:n,args:i,docsPath:"/docs/contract/multicall",functionName:s,sender:r});if(!y)throw e;I[S]=[...I[S],{allowFailure:!0,callData:"0x",target:n}]}}let k=await Promise.allSettled(I.map(t=>(0,h.s)(e,f.L,"readContract")({...null===x?{code:i.xd}:{address:x},abi:n.F8,account:r,args:[t],authorizationList:p,blockNumber:g,blockOverrides:m,blockTag:b,functionName:"aggregate3",stateOverride:v}))),T=[];for(let e=0;e<k.length;e++){let t=k[e];if("rejected"===t.status){if(!y)throw t.reason;for(let r=0;r<I[e].length;r++)T.push({status:"failure",error:t.reason,result:void 0});continue}let r=t.value;for(let t=0;t<r.length;t++){let{returnData:n,success:i}=r[t],{callData:a}=I[e][t],{abi:c,address:u,functionName:h,args:f}=w[T.length];try{if("0x"===a)throw new s.wb;if(!i)throw new o.VQ({data:n});let e=(0,l.k)({abi:c,args:f,data:n,functionName:h});T.push(y?{result:e,status:"success"}:e)}catch(t){let e=(0,d.S)(t,{abi:c,address:u,args:f,docsPath:"/docs/contract/multicall",functionName:h});if(!y)throw e;T.push({error:e,result:void 0,status:"failure"})}}}if(T.length!==w.length)throw new a.G("multicall results mismatch");return T}},34557:function(e,t,r){"use strict";r.d(t,{$:function(){return l}});var n=r(69921),i=r(36826),s=r(72932),a=r(13550),o=r(89361);async function l(e,t){async function r(t){if(t.endsWith(o.ny.slice(2))){let r=(0,i.f)((0,n.p5)(t,-64,-32)),a=(0,n.p5)(t,0,-64).slice(2).match(/.{1,64}/g),l=await Promise.all(a.map(t=>o.rC.slice(2)!==t?e.request({method:"eth_getTransactionReceipt",params:[`0x${t}`]},{dedupe:!0}):void 0)),c=l.some(e=>null===e)?100:l.every(e=>e?.status==="0x1")?200:l.every(e=>e?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,s.ly)(r),receipts:l.filter(Boolean),status:c,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[t]})}let{atomic:l=!1,chainId:c,receipts:u,version:d="2.0.0",...h}=await r(t.id),[f,p]=(()=>{let e=h.status;return e>=100&&e<200?["pending",e]:e>=200&&e<300?["success",e]:e>=300&&e<700?["failure",e]:"CONFIRMED"===e?["success",200]:"PENDING"===e?["pending",100]:[void 0,e]})();return{...h,atomic:l,chainId:c?(0,s.ly)(c):void 0,receipts:u?.map(e=>({...e,blockNumber:s.y_(e.blockNumber),gasUsed:s.y_(e.gasUsed),status:a.ew[e.status]}))??[],statusCode:p,status:f,version:d}}},89239:function(e,t,r){"use strict";r.d(t,{x:function(){return c}});var n=r(19775),i=r(65704),s=r(93637),a=r(82645),o=r(12363),l=r(16689);async function c(e,t){let{account:r=e.account,chainId:c,nonce:u}=t;if(!r)throw new i.o({docsPath:"/docs/eip7702/prepareAuthorization"});let d=(0,n.T)(r),h=(()=>{if(t.executor)return"self"===t.executor?t.executor:(0,n.T)(t.executor)})(),f={address:t.contractAddress??t.address,chainId:c,nonce:u};return void 0===f.chainId&&(f.chainId=e.chain?.id??await (0,a.s)(e,o.L,"getChainId")({})),void 0===f.nonce&&(f.nonce=await (0,a.s)(e,l.K,"getTransactionCount")({address:d.address,blockTag:"pending"}),("self"===h||h?.address&&(0,s.E)(h.address,d.address))&&(f.nonce+=1)),f}},89361:function(e,t,r){"use strict";r.d(t,{ny:function(){return h},rC:function(){return f},s_:function(){return p}});var n=r(19775),i=r(81544),s=r(77014),a=r(17283),o=r(89256),l=r(72932),c=r(59455),u=r(93606),d=r(41709);let h="0x5792579257925792579257925792579257925792579257925792579257925792",f=(0,c.eC)(0,{size:32});async function p(e,t){let{account:r=e.account,chain:p=e.chain,experimental_fallback:y,experimental_fallbackDelay:g=32,forceAtomic:m=!1,id:b,version:v="2.0.0"}=t,w=r?(0,n.T)(r):null,_=t.capabilities;e.dataSuffix&&!t.capabilities?.dataSuffix&&(_="string"==typeof e.dataSuffix?{...t.capabilities,dataSuffix:{value:e.dataSuffix,optional:!0}}:{...t.capabilities,dataSuffix:{value:e.dataSuffix.value,...e.dataSuffix.required?{}:{optional:!0}}});let E=t.calls.map(e=>{let t=e.abi?(0,a.R)({abi:e.abi,functionName:e.functionName,args:e.args}):e.data;return{data:e.dataSuffix&&t?(0,o.zo)([t,e.dataSuffix]):t,to:e.to,value:e.value?(0,c.eC)(e.value):void 0}});try{let t=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:m,calls:E,capabilities:_,chainId:(0,c.eC)(p.id),from:w?.address,id:b,version:v}]},{retryCount:0});if("string"==typeof t)return{id:t};return t}catch(r){if(y&&("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name||"UnknownRpcError"===r.name||r.details.toLowerCase().includes("does not exist / is not available")||r.details.toLowerCase().includes("missing or invalid. request()")||r.details.toLowerCase().includes("did not match any variant of untagged enum")||r.details.toLowerCase().includes("account upgraded to unsupported contract")||r.details.toLowerCase().includes("eip-7702 not supported")||r.details.toLowerCase().includes("unsupported wc_ method")||r.details.toLowerCase().includes("feature toggled misconfigured")||r.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(_&&Object.values(_).some(e=>!e.optional)){let e="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new s.vl(new i.G(e,{details:e}))}if(m&&E.length>1){let e="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new s.r0(new i.G(e,{details:e}))}let t=[];for(let r of E){let n=(0,d.T)(e,{account:w,chain:p,data:r.data,to:r.to,value:r.value?(0,l.y_)(r.value):void 0});t.push(n),g>0&&await new Promise(e=>setTimeout(e,g))}let r=await Promise.allSettled(t);if(r.every(e=>"rejected"===e.status))throw r[0].reason;let n=r.map(e=>"fulfilled"===e.status?e.value:f);return{id:(0,o.zo)([...n,(0,c.eC)(p.id,{size:32}),h])}}throw(0,u.$)(r,{...t,account:w,chain:t.chain})}}},85631:function(e,t,r){"use strict";r.d(t,{s:function(){return a}});var n=r(63228),i=r(13550),s=r(59455);async function a(e,{serializedTransaction:t,throwOnReceiptRevert:r,timeout:a}){let o=await e.request({method:"eth_sendRawTransactionSync",params:a?[t,(0,s.eC)(a)]:[t]},{retryCount:0}),l=(e.chain?.formatters?.transactionReceipt?.format||i.fA)(o);if("reverted"===l.status&&r)throw new n.A3({receipt:l});return l}},48202:function(e,t,r){"use strict";r.d(t,{O:function(){return d}});var n=r(19775),i=r(65704),s=r(40402),a=r(59455),o=r(92614),l=r(82645),c=r(54605),u=r(12363);async function d(e,t){let{account:r=e.account,chain:d=e.chain,...h}=t;if(!r)throw new i.o({docsPath:"/docs/actions/wallet/signTransaction"});let f=(0,n.T)(r);(0,c.F)({account:f,...t});let p=await (0,l.s)(e,u.L,"getChainId")({});null!==d&&(0,s.q)({currentChainId:p,chain:d});let y=d?.formatters||e.chain?.formatters,g=y?.transactionRequest?.format||o.tG;return f.signTransaction?f.signTransaction({...h,chainId:p},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...g({...h,account:f},"signTransaction"),chainId:(0,a.eC)(p),from:f.address}]},{retryCount:0})}},69133:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(19775),i=r(65704),s=r(99493);async function a(e,t){let{account:r=e.account,domain:a,message:o,primaryType:l}=t;if(!r)throw new i.o({docsPath:"/docs/actions/wallet/signTypedData"});let c=(0,n.T)(r),u={EIP712Domain:(0,s.cj)({domain:a}),...t.types};if((0,s.iC)({domain:a,message:o,primaryType:l,types:u}),c.signTypedData)return c.signTypedData({domain:a,message:o,primaryType:l,types:u});let d=(0,s.H6)({domain:a,message:o,primaryType:l,types:u});return e.request({method:"eth_signTypedData_v4",params:[c.address,d]},{retryCount:0})}},88027:function(e,t,r){"use strict";r.d(t,{l:function(){return h}});var n=r(81544);class i extends n.G{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}var s=r(82645),a=r(36478),o=r(41495),l=r(56921),c=r(49287),u=r(31853),d=r(34557);async function h(e,t){let r;let{id:n,pollingInterval:h=e.pollingInterval,status:p=({statusCode:e})=>200===e||e>=300,retryCount:y=4,retryDelay:g=({count:e})=>200*~~(1<<e),timeout:m=6e4,throwOnFailure:b=!1}=t,v=(0,u.P)(["waitForCallsStatus",e.uid,n]),{promise:w,resolve:_,reject:E}=(0,l.n)(),x=(0,a.N7)(v,{resolve:_,reject:E},t=>{let a=(0,o.$)(async()=>{let o=e=>{clearTimeout(r),a(),e(),x()};try{let r=await (0,c.J)(async()=>{let t=await (0,s.s)(e,d.$,"getCallsStatus")({id:n});if(b&&"failure"===t.status)throw new i(t);return t},{retryCount:y,delay:g});if(!p(r))return;o(()=>t.resolve(r))}catch(e){o(()=>t.reject(e))}},{interval:h,emitOnBegin:!0});return a});return r=m?setTimeout(()=>{x(),clearTimeout(r),E(new f({id:n}))},m):void 0,await w}class f extends n.G{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}},90713:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var n=r(72225);let i=(0,r(90328).a)({...n.i,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...n.i.contracts,disputeGameFactory:{1:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{1:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{1:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{1:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:1});({...i})},70751:function(e,t,r){"use strict";r.d(t,{v:function(){return s}});var n=r(82538),i=r(67798);function s(e){let{key:t="public",name:r="Public Client"}=e;return(0,n.e)({...e,key:t,name:r,type:"publicClient"}).extend(i.I)}},35156:function(e,t,r){"use strict";r.d(t,{K:function(){return J}});var n=r(82538),i=r(332),s=r(12363),a=r(59455);async function o(e,{chain:t}){let{id:r,name:n,nativeCurrency:i,rpcUrls:s,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,a.eC)(r),chainName:n,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:e})=>e):void 0}]},{dedupe:!0,retryCount:0})}var l=r(23010),c=r(41709),u=r(31669);async function d(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(e=>(0,u.x)(e))}var h=r(34557),f=r(19775);async function p(e,t={}){let{account:r=e.account,chainId:n}=t,i=r?(0,f.T)(r):void 0,s=n?[i?.address,[(0,a.eC)(n)]]:[i?.address],o=await e.request({method:"wallet_getCapabilities",params:s}),l={};for(let[e,t]of Object.entries(o))for(let[r,n]of(l[Number(e)]={},Object.entries(t)))"addSubAccount"===r&&(r="unstable_addSubAccount"),l[Number(e)][r]=n;return"number"==typeof n?l[n]:l}async function y(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}var g=r(89239),m=r(34467);async function b(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(e=>(0,u.K)(e))}async function v(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}var w=r(89361),_=r(82645),E=r(88027);async function x(e,t){let{chain:r=e.chain}=t,n=t.timeout??Math.max((r?.blockTime??0)*3,5e3),i=await (0,_.s)(e,w.s_,"sendCalls")(t);return await (0,_.s)(e,E.l,"waitForCallsStatus")({...t,id:i.id,timeout:n})}var I=r(9769),S=r(85631),A=r(65704),k=r(81544),T=r(63228),C=r(63936),O=r(40402),P=r(89256),R=r(93606),D=r(70878),N=r(92614),U=r(82061),B=r(54605),L=r(67348);let j=new U.k(128);async function M(e,t){let{account:r=e.account,assertChainId:n=!0,chain:i=e.chain,accessList:a,authorizationList:o,blobs:l,data:c,dataSuffix:u="string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value,gas:d,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:b,pollingInterval:v,throwOnReceiptRevert:w,type:E,value:x,...I}=t,U=t.timeout??Math.max((i?.blockTime??0)*3,5e3);if(void 0===r)throw new A.o({docsPath:"/docs/actions/wallet/sendTransactionSync"});let M=r?(0,f.T)(r):null;try{(0,B.F)(t);let r=await (async()=>t.to?t.to:null!==t.to&&o&&o.length>0?await (0,C.z)({authorization:o[0]}).catch(()=>{throw new k.G("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(M?.type==="json-rpc"||null===M){let t;null!==i&&(t=await (0,_.s)(e,s.L,"getChainId")({}),n&&(0,O.q)({currentChainId:t,chain:i}));let f=e.chain?.formatters?.transactionRequest?.format,m=(f||N.tG)({...(0,D.K)(I,{format:f}),accessList:a,account:M,authorizationList:o,blobs:l,chainId:t,data:c?(0,P.zo)([c,u??"0x"]):c,gas:d,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:b,to:r,type:E,value:x},"sendTransaction"),S=j.get(e.uid),A=S?"wallet_sendTransaction":"eth_sendTransaction",k=await (async()=>{try{return await e.request({method:A,params:[m]},{retryCount:0})}catch(t){if(!1===S)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[m]},{retryCount:0}).then(t=>(j.set(e.uid,!0),t)).catch(r=>{if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw j.set(e.uid,!1),t;throw r});throw t}})(),C=await (0,_.s)(e,L.e,"waitForTransactionReceipt")({checkReplacement:!1,hash:k,pollingInterval:v,timeout:U});if(w&&"reverted"===C.status)throw new T.A3({receipt:C});return C}if(M?.type==="local"){let n=await (0,_.s)(e,m.ZE,"prepareTransactionRequest")({account:M,accessList:a,authorizationList:o,blobs:l,chain:i,data:c?(0,P.zo)([c,u??"0x"]):c,gas:d,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:b,nonceManager:M.nonceManager,parameters:[...m.QZ,"sidecars"],type:E,value:x,...I,to:r}),s=i?.serializers?.transaction,f=await M.signTransaction(n,{serializer:s});return await (0,_.s)(e,S.s,"sendRawTransactionSync")({serializedTransaction:f,throwOnReceiptRevert:w,timeout:t.timeout})}if(M?.type==="smart")throw new A.Y({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new A.Y({docsPath:"/docs/actions/wallet/sendTransactionSync",type:M?.type})}catch(e){if(e instanceof A.Y)throw e;throw(0,R.$)(e,{...t,account:M,chain:t.chain||void 0})}}async function z(e,t){let{id:r}=t;await e.request({method:"wallet_showCallsStatus",params:[r]})}async function $(e,t){let{account:r=e.account}=t;if(!r)throw new A.o({docsPath:"/docs/eip7702/signAuthorization"});let n=(0,f.T)(r);if(!n.signAuthorization)throw new A.Y({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});let i=await (0,g.x)(e,t);return n.signAuthorization(i)}async function F(e,{account:t=e.account,message:r}){if(!t)throw new A.o({docsPath:"/docs/actions/wallet/signMessage"});let n=(0,f.T)(t);if(n.signMessage)return n.signMessage({message:r});let i="string"==typeof r?(0,a.$G)(r):r.raw instanceof Uint8Array?(0,a.NC)(r.raw):r.raw;return e.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}var q=r(48202),W=r(69133);async function V(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,a.eC)(t)}]},{retryCount:0})}async function H(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}var K=r(50825);async function G(e,t){return K.n.internal(e,M,"sendTransactionSync",t)}function Z(e){return{addChain:t=>o(e,t),deployContract:t=>(function(e,t){let{abi:r,args:n,bytecode:i,...s}=t,a=(0,l.w)({abi:r,args:n,bytecode:i});return(0,c.T)(e,{...s,...s.authorizationList?{to:null}:{},data:a})})(e,t),fillTransaction:t=>(0,i.b)(e,t),getAddresses:()=>d(e),getCallsStatus:t=>(0,h.$)(e,t),getCapabilities:t=>p(e,t),getChainId:()=>(0,s.L)(e),getPermissions:()=>y(e),prepareAuthorization:t=>(0,g.x)(e,t),prepareTransactionRequest:t=>(0,m.ZE)(e,t),requestAddresses:()=>b(e),requestPermissions:t=>v(e,t),sendCalls:t=>(0,w.s_)(e,t),sendCallsSync:t=>x(e,t),sendRawTransaction:t=>(0,I.p)(e,t),sendRawTransactionSync:t=>(0,S.s)(e,t),sendTransaction:t=>(0,c.T)(e,t),sendTransactionSync:t=>M(e,t),showCallsStatus:t=>z(e,t),signAuthorization:t=>$(e,t),signMessage:t=>F(e,t),signTransaction:t=>(0,q.O)(e,t),signTypedData:t=>(0,W.x)(e,t),switchChain:t=>V(e,t),waitForCallsStatus:t=>(0,E.l)(e,t),watchAsset:t=>H(e,t),writeContract:t=>(0,K.n)(e,t),writeContractSync:t=>G(e,t)}}function J(e){let{key:t="wallet",name:r="Wallet Client",transport:i}=e;return(0,n.e)({...e,key:t,name:r,transport:i,type:"walletClient"}).extend(Z)}},67798:function(e,t,r){"use strict";r.d(t,{I:function(){return rB}});var n=r(98158),i=r(65436),s=r(17283),a=r(93627),o=r(36826),l=r(59455),c=r(81544),u=r(20010);function d(e){if(!(e instanceof c.G))return!1;let t=e.walk(e=>e instanceof u.Lu);return t instanceof u.Lu&&(t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile")}var h=r(7143),f=r(89256),p=r(44659),y=r(13169),g=r(93610);function m(e){if(66!==e.length||0!==e.indexOf("[")||65!==e.indexOf("]"))return null;let t=`0x${e.slice(1,65)}`;return(0,g.v)(t)?t:null}function b(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,l.ci)(t);let r=e.split(".");for(let e=r.length-1;e>=0;e-=1){let n=m(r[e]),i=n?(0,p.O0)(n):(0,y.w)((0,p.qX)(r[e]),"bytes");t=(0,y.w)((0,f.zo)([t,i]),"bytes")}return(0,l.ci)(t)}function v(e){let t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);let r=new Uint8Array((0,p.qX)(t).byteLength+2),n=0,i=t.split(".");for(let e=0;e<i.length;e++){let t=(0,p.qX)(i[e]);if(t.byteLength>255){var s;t=(0,p.qX)((s=function(e){let t=new Uint8Array(32).fill(0);return e?m(e)||(0,y.w)((0,p.qX)(e)):(0,l.ci)(t)}(i[e]),`[${s.slice(2)}]`))}r[n]=t.length,r.set(t,n+1),n+=t.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}var w=r(82645),_=r(28766);async function E(e,t){let{blockNumber:r,blockTag:c,coinType:u,name:f,gatewayUrls:p,strict:y}=t,{chain:g}=e,m=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!g)throw Error("client chain not configured. universalResolverAddress is required.");return(0,a.L)({blockNumber:r,chain:g,contract:"ensUniversalResolver"})})(),E=g?.ensTlds;if(E&&!E.some(e=>f.endsWith(e)))return null;let x=null!=u?[b(f),BigInt(u)]:[b(f)];try{let t=(0,s.R)({abi:n.X$,functionName:"addr",args:x}),a={address:m,abi:n.k3,functionName:"resolveWithGateways",args:[(0,l.NC)(v(f)),t,p??[h.M]],blockNumber:r,blockTag:c},u=(0,w.s)(e,_.L,"readContract"),d=await u(a);if("0x"===d[0])return null;let y=(0,i.k)({abi:n.X$,args:x,functionName:"addr",data:d[0]});if("0x"===y||"0x00"===(0,o.f)(y))return null;return y}catch(e){if(y)throw e;if(d(e))return null;throw e}}class x extends c.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class I extends c.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class S extends c.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class A extends c.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}let k=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,T=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,C=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,O=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function P(e){try{let t=await fetch(e,{method:"HEAD"});if(200===t.status){let e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){if("object"==typeof t&&void 0!==t.response||!Object.hasOwn(globalThis,"Image"))return!1;return new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e})}}function R(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function D({uri:e,gatewayUrls:t}){let r=C.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let n=R(t?.ipfs,"https://ipfs.io"),i=R(t?.arweave,"https://arweave.net"),s=e.match(k),{protocol:a,subpath:o,target:l,subtarget:c=""}=s?.groups||{},u="ipns:/"===a||"ipns/"===o,d="ipfs:/"===a||"ipfs/"===o||T.test(e);if(e.startsWith("http")&&!u&&!d){let r=e;return t?.arweave&&(r=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:r,isOnChain:!1,isEncoded:!1}}if((u||d)&&l)return{uri:`${n}/${u?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if("ar:/"===a&&l)return{uri:`${i}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let h=e.replace(O,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new S({uri:e})}function N(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new x({data:e});return e.image||e.image_url||e.image_data}async function U({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(e=>e.json());return await B({gatewayUrls:e,uri:N(r)})}catch{throw new S({uri:t})}}async function B({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:n}=D({uri:t,gatewayUrls:e});if(n||await P(r))return r;throw new S({uri:t})}async function L(e,{nft:t}){if("erc721"===t.namespace)return(0,_.L)(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return(0,_.L)(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new A({namespace:t.namespace})}async function j(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?M(e,{gatewayUrls:t,record:r}):B({uri:r,gatewayUrls:t})}async function M(e,{gatewayUrls:t,record:r}){let n=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,n,i]=t.split("/"),[s,a]=r.split(":"),[o,l]=n.split(":");if(!s||"eip155"!==s.toLowerCase())throw new I({reason:"Only EIP-155 supported"});if(!a)throw new I({reason:"Chain ID not found"});if(!l)throw new I({reason:"Contract address not found"});if(!i)throw new I({reason:"Token ID not found"});if(!o)throw new I({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a,10),namespace:o.toLowerCase(),contractAddress:l,tokenID:i}}(r),{uri:i,isOnChain:s,isEncoded:a}=D({uri:await L(e,{nft:n}),gatewayUrls:t});if(s&&(i.includes("data:application/json;base64,")||i.startsWith("{")))return B({uri:N(JSON.parse(a?atob(i.replace("data:application/json;base64,","")):i)),gatewayUrls:t});let o=n.tokenID;return"erc1155"===n.namespace&&(o=o.replace("0x","").padStart(64,"0")),U({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,o)})}async function z(e,t){let{blockNumber:r,blockTag:o,key:c,name:u,gatewayUrls:f,strict:p}=t,{chain:y}=e,g=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!y)throw Error("client chain not configured. universalResolverAddress is required.");return(0,a.L)({blockNumber:r,chain:y,contract:"ensUniversalResolver"})})(),m=y?.ensTlds;if(m&&!m.some(e=>u.endsWith(e)))return null;try{let t={address:g,abi:n.k3,args:[(0,l.NC)(v(u)),(0,s.R)({abi:n.nZ,functionName:"text",args:[b(u),c]}),f??[h.M]],functionName:"resolveWithGateways",blockNumber:r,blockTag:o},a=(0,w.s)(e,_.L,"readContract"),d=await a(t);if("0x"===d[0])return null;let p=(0,i.k)({abi:n.nZ,functionName:"text",data:d[0]});return""===p?null:p}catch(e){if(p)throw e;if(d(e))return null;throw e}}async function $(e,{blockNumber:t,blockTag:r,assetGatewayUrls:n,name:i,gatewayUrls:s,strict:a,universalResolverAddress:o}){let l=await (0,w.s)(e,z,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:i,universalResolverAddress:o,gatewayUrls:s,strict:a});if(!l)return null;try{return await j(e,{record:l,gatewayUrls:n})}catch{return null}}async function F(e,t){let{address:r,blockNumber:i,blockTag:s,coinType:o=60n,gatewayUrls:l,strict:c}=t,{chain:u}=e,f=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw Error("client chain not configured. universalResolverAddress is required.");return(0,a.L)({blockNumber:i,chain:u,contract:"ensUniversalResolver"})})();try{let t={address:f,abi:n.du,args:[r,o,l??[h.M]],functionName:"reverseWithGateways",blockNumber:i,blockTag:s},a=(0,w.s)(e,_.L,"readContract"),[c]=await a(t);return c||null}catch(e){if(c)throw e;if(d(e))return null;throw e}}async function q(e,t){let{blockNumber:r,blockTag:n,name:i}=t,{chain:s}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw Error("client chain not configured. universalResolverAddress is required.");return(0,a.L)({blockNumber:r,chain:s,contract:"ensUniversalResolver"})})(),c=s?.ensTlds;if(c&&!c.some(e=>i.endsWith(e)))throw Error(`${i} is not a valid ENS TLD (${c?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[u]=await (0,w.s)(e,_.L,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,l.NC)(v(i))],blockNumber:r,blockTag:n});return u}var W=r(50550),V=r(19775),H=r(14015),K=r(70878),G=r(92614),Z=r(54605);async function J(e,t){let{account:r=e.account,blockNumber:n,blockTag:i="latest",blobs:s,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,to:f,value:p,...y}=t,g=r?(0,V.T)(r):void 0;try{(0,Z.F)(t);let r="bigint"==typeof n?(0,l.eC)(n):void 0,m=e.chain?.formatters?.transactionRequest?.format,b=(m||G.tG)({...(0,K.K)(y,{format:m}),account:g,blobs:s,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,to:f,value:p},"createAccessList"),v=await e.request({method:"eth_createAccessList",params:[b,r||i]});return{accessList:v.accessList,gasUsed:BigInt(v.gasUsed)}}catch(r){throw(0,H.P)(r,{...t,account:g,chain:e.chain})}}function Y(e,{method:t}){let r={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:n,status:i,transport:s})=>{"success"===i&&t===e&&(r[n]=s.request)}),t=>r[t]||e.request}async function Q(e){let t=Y(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}var X=r(65531);class ee extends c.G{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var et=r(45392),er=r(30056),en=r(7275),ei=r(64043);let es="/docs/contract/encodeEventTopics";function ea(e){let{abi:t,eventName:r,args:n}=e,i=t[0];if(r){let e=(0,ei.mE)({abi:t,name:r});if(!e)throw new X.mv(r,{docsPath:es});i=e}if("event"!==i.type)throw new X.mv(void 0,{docsPath:es});let s=(0,en.t)(i),a=(0,et.n)(s),o=[];if(n&&"inputs"in i){let e=i.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map(e=>n[e.name])??[]:[];t.length>0&&(o=e?.map((e,r)=>Array.isArray(t[r])?t[r].map((n,i)=>eo({param:e,value:t[r][i]})):void 0!==t[r]&&null!==t[r]?eo({param:e,value:t[r]}):null)??[])}return[a,...o]}function eo({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,y.w)((0,p.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new ee(e.type);return(0,er.E)([e],[t])}async function el(e,t){let{address:r,abi:n,args:i,eventName:s,fromBlock:a,strict:o,toBlock:c}=t,u=Y(e,{method:"eth_newFilter"}),d=s?ea({abi:n,args:i,eventName:s}):void 0,h=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:"bigint"==typeof a?(0,l.eC)(a):a,toBlock:"bigint"==typeof c?(0,l.eC)(c):c,topics:d}]});return{abi:n,args:i,eventName:s,id:h,request:u(h),strict:!!o,type:"event"}}async function ec(e,{address:t,args:r,event:n,events:i,fromBlock:s,strict:a,toBlock:o}={}){let c=i??(n?[n]:void 0),u=Y(e,{method:"eth_newFilter"}),d=[];c&&(d=[c.flatMap(e=>ea({abi:[e],eventName:e.name,args:r}))],n&&(d=d[0]));let h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof s?(0,l.eC)(s):s,toBlock:"bigint"==typeof o?(0,l.eC)(o):o,...d.length?{topics:d}:{}}]});return{abi:c,args:r,eventName:n?n.name:void 0,fromBlock:s,id:h,request:u(h),strict:!!a,toBlock:o,type:"event"}}async function eu(e){let t=Y(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}var ed=r(34180),eh=r(8741);async function ef(e,t){let{abi:r,address:n,args:i,functionName:a,dataSuffix:o="string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value,...l}=t,c=(0,s.R)({abi:r,args:i,functionName:a});try{return await (0,w.s)(e,eh.Q,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:n,...l})}catch(t){let e=l.account?(0,V.T)(l.account):void 0;throw(0,ed.S)(t,{abi:r,address:n,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:e?.address})}}var ep=r(6458),ey=r(96174),eg=r(332),em=r(32807);async function eb(e){return BigInt(await e.request({method:"eth_blobBaseFee"}))}var ev=r(74587),ew=r(13708),e_=r(72932);async function eE(e,{blockHash:t,blockNumber:r,blockTag:n="latest"}={}){let i;let s=void 0!==r?(0,l.eC)(r):void 0;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||n]},{dedupe:!!s}),(0,e_.ly)(i)}var ex=r(12363),eI=r(56570),eS=r(93637),eA=r(27964);function ek(e){let{abi:t,args:r,logs:n,strict:i=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})(),a=t.filter(e=>"event"===e.type).map(e=>({abi:e,selector:(0,et.n)(e)}));return n.map(e=>{let t,n;let o=a.filter(t=>e.topics[0]===t.selector);if(0===o.length)return null;for(let r of o)try{t=(0,eA.F)({...e,abi:[r.abi],strict:!0}),n=r;break}catch{}if(!t&&!i){n=o[0];try{t=(0,eA.F)({data:e.data,topics:e.topics,abi:[n.abi],strict:!1})}catch{let t=n.abi.inputs?.some(e=>!("name"in e&&e.name));return{...e,args:t?[]:{},eventName:n.abi.name}}}return t&&n&&(!s||s.includes(t.eventName))&&function(e){let{args:t,inputs:r,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function i(e,t,r){try{if("address"===e.type)return(0,eS.E)(t,r);if("string"===e.type||"bytes"===e.type)return(0,y.w)((0,p.O0)(t))===r;return t===r}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every((e,n)=>{if(null==e)return!0;let s=r[n];return!!s&&(Array.isArray(e)?e:[e]).some(e=>i(s,e,t[n]))}):!("object"!=typeof t||Array.isArray(t)||"object"!=typeof n||Array.isArray(n))&&Object.entries(n).every(([e,n])=>{if(null==n)return!0;let s=r.find(t=>t.name===e);return!!s&&(Array.isArray(n)?n:[n]).some(r=>i(s,r,t[e]))})}({args:t.args,inputs:n.abi.inputs,matchArgs:r})?{...t,...e}:null}).filter(Boolean)}var eT=r(55668);async function eC(e,{address:t,blockHash:r,fromBlock:n,toBlock:i,event:s,events:a,args:o,strict:c}={}){let u=a??(s?[s]:void 0),d=[];u&&(d=[u.flatMap(e=>ea({abi:[e],eventName:e.name,args:a?void 0:o}))],s&&(d=d[0]));let h=(r?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:r}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof n?(0,l.eC)(n):n,toBlock:"bigint"==typeof i?(0,l.eC)(i):i}]})).map(e=>(0,eT.U)(e));return u?ek({abi:u,args:o,logs:h,strict:c??!1}):h}async function eO(e,t){let{abi:r,address:n,args:i,blockHash:s,eventName:a,fromBlock:o,toBlock:l,strict:c}=t,u=a?(0,ei.mE)({abi:r,name:a}):void 0,d=u?void 0:r.filter(e=>"event"===e.type);return(0,w.s)(e,eC,"getLogs")({address:n,args:i,blockHash:s,event:u,events:d,fromBlock:o,toBlock:l,strict:c})}class eP extends c.G{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function eR(e,t){let{address:r,factory:n,factoryData:i}=t;try{let[t,s,a,o,l,c,u]=await (0,w.s)(e,_.L,"readContract")({abi:eD,address:r,functionName:"eip712Domain",factory:n,factoryData:i});return{domain:{name:s,version:a,chainId:Number(o),verifyingContract:l,salt:c},extensions:u,fields:t}}catch(e){if("ContractFunctionExecutionError"===e.name&&"ContractFunctionZeroDataError"===e.cause.name)throw new eP({address:r});throw e}}let eD=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function eN(e,{blockCount:t,blockNumber:r,blockTag:n="latest",rewardPercentiles:i}){var s;let a="bigint"==typeof r?(0,l.eC)(r):void 0;return{baseFeePerGas:(s=await e.request({method:"eth_feeHistory",params:[(0,l.eC)(t),a||n,i]},{dedupe:!!a})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:s.gasUsedRatio,oldestBlock:BigInt(s.oldestBlock),reward:s.reward?.map(e=>e.map(e=>BigInt(e)))}}async function eU(e,{filter:t}){let r="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof n[0])return n;let i=n.map(e=>(0,eT.U)(e));return"abi"in t&&t.abi?ek({abi:t.abi,logs:i,strict:r}):i}async function eB(e,{filter:t}){let r=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>(0,eT.U)(e));return t.abi?ek({abi:t.abi,logs:n,strict:r}):n}var eL=r(25283);async function ej(e,{address:t,blockNumber:r,blockTag:n,storageKeys:i}){var s;let a=void 0!==r?(0,l.eC)(r):void 0;return{...s=await e.request({method:"eth_getProof",params:[t,i,a||(n??"latest")]}),balance:s.balance?BigInt(s.balance):void 0,nonce:s.nonce?(0,e_.ly)(s.nonce):void 0,storageProof:s.storageProof?s.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function eM(e,{address:t,blockNumber:r,blockTag:n="latest",slot:i}){let s=void 0!==r?(0,l.eC)(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,i,s||n]})}var ez=r(39277);async function e$(e,{hash:t,transactionReceipt:r}){let[n,i]=await Promise.all([(0,w.s)(e,ew.z,"getBlockNumber")({}),t?(0,w.s)(e,ez.f,"getTransaction")({hash:t}):void 0]),s=r?.blockNumber||i?.blockNumber;return s?n-s+1n:0n}var eF=r(16689),eq=r(78526),eW=r(94797),eV=r(63063),eH=r(78125),eK=r(18856),eG=r(59069),eZ=r(77911);async function eJ(e,t){let{blockNumber:r,blockTag:n=e.experimental_blockTag??"latest",blocks:a,returnFullTransactions:o,traceTransfers:c,validation:d}=t;try{let t=[];for(let e of a){let r=e.blockOverrides?eV.o(e.blockOverrides):void 0,n=e.calls.map(e=>{let t=e.account?(0,V.T)(e.account):void 0,r=e.abi?(0,s.R)(e):e.data,n={...e,account:t,data:e.dataSuffix?(0,f.zo)([r||"0x",e.dataSuffix]):r,from:e.from??t?.address};return(0,Z.F)(n),(0,G.tG)(n)}),i=e.stateOverrides?(0,eZ.mF)(e.stateOverrides):void 0;t.push({blockOverrides:r,calls:n,stateOverrides:i})}let h="bigint"==typeof r?(0,l.eC)(r):void 0;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:o,traceTransfers:c,validation:d},h||n]})).map((e,t)=>({...(0,eG.Z)(e),calls:e.calls.map((e,r)=>{let{abi:n,args:s,functionName:o,to:l}=a[t].calls[r],c=e.error?.data??e.returnData,d=BigInt(e.gasUsed),h=e.logs?.map(e=>eT.U(e)),f="0x1"===e.status?"success":"failure",p=n&&"success"===f&&"0x"!==c?(0,i.k)({abi:n,data:c,functionName:o}):null,y=(()=>{let e;if("success"!==f&&("0x"===c?e=new X.wb:c&&(e=new u.VQ({data:c})),e))return(0,ed.S)(e,{abi:n??[],address:l??"0x",args:s,functionName:o??"<unknown>"})})();return{data:c,gasUsed:d,logs:h,status:f,..."success"===f?{result:p}:{error:y}}})}))}catch(t){let e=(0,eK.k)(t,{});if(e instanceof eH.cj)throw t;throw e}}var eY=r(21669),eQ=r(26588),eX=r(79223),e0=r(91465),e1=r(1678),e2=r(1291),e3=r(92530),e5=r(19586);function e8(e,t){if(ti(e)>t)throw new tl({givenSize:ti(e),maxSize:t})}let e6={zero:48,nine:57,A:65,F:70,a:97,f:102};function e4(e){return e>=e6.zero&&e<=e6.nine?e-e6.zero:e>=e6.A&&e<=e6.F?e-(e6.A-10):e>=e6.a&&e<=e6.f?e-(e6.a-10):void 0}function e9(e,t={}){let{dir:r="left"}=t,n=0;for(let t=0;t<e.length-1&&"0"===e["left"===r?t:e.length-t-1].toString();t++)n++;return"left"===r?e.slice(n):e.slice(0,e.length-n)}var e7=r(82543),te=r(56535);let tt=new TextDecoder,tr=new TextEncoder;function tn(e,t={}){let{size:r}=t,n=e;r&&(e7.Yf(e,r),n=e5.eh(e,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);let s=i.length/2,a=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let r=e4(i.charCodeAt(t++)),n=e4(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new e2.G(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);a[e]=r<<4|n}return a}function ti(e){return e.length}function ts(e,t={}){let{size:r}=t;void 0!==r&&e8(e,r);let n=e5.xv(e,t);return e5.He(n,t)}function ta(e){return e9(e,{dir:"left"})}class to extends e2.G{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}class tl extends e2.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class tc extends e2.G{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}class tu extends e2.G{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function td(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,n=(0,e3.fr)(e instanceof Uint8Array?e:"string"==typeof e?tn(e):e instanceof Uint8Array?e:new Uint8Array(e));return"Bytes"===r?n:e5.xv(n)}class th extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let tf={checksum:new th(8192)}.checksum,tp=/^0x[a-fA-F0-9]{40}$/;function ty(e,t={}){let{strict:r=!0}=t;if(!tp.test(e))throw new tb({address:e,cause:new tv});if(r){if(e.toLowerCase()===e)return;if(tg(e)!==e)throw new tb({address:e,cause:new tw})}}function tg(e){if(tf.has(e))return tf.get(e);ty(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=td(function(e,t={}){let{size:r}=t,n=tr.encode(e);return"number"==typeof r?(e8(n,r),function(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new tu({size:e.length,targetSize:n,type:"Bytes"});let i=new Uint8Array(n);for(let t=0;t<n;t++){let s="right"===r;i[s?t:n-t-1]=e[s?t:e.length-t-1]}return i}(n,{dir:"right",size:r})):n}(t),{as:"Bytes"}),n=t.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&r[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let i=`0x${n.join("")}`;return tf.set(e,i),i}function tm(e,t={}){let{strict:r=!0}=t??{};try{return ty(e,{strict:r}),!0}catch{return!1}}class tb extends e2.G{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tv extends e2.G{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class tw extends e2.G{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function t_(e){let t=!0,r="",n=0,i="",s=!1;for(let a=0;a<e.length;a++){let o=e[a];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t){if(0===n){if(" "===o&&["event","function","error",""].includes(i))i="";else if(i+=o,")"===o){s=!0;break}continue}if(" "===o){","!==e[a-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}i+=o,r+=o}}if(!s)throw new e2.G("Unable to normalize signature.");return i}function tE(e,t={}){let{prepare:r=!0}=t,n=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=(0,e0.cK)(e);else{let r=(0,eX.D)(e),n=e.length;for(let i=0;i<n;i++){let n=e[i];if(!(0,eQ.N0)(n)){t=(0,e0.cK)(n,r);break}}}if(!t)throw new eY.a_({signature:e});return t}(e):e;return{...n,...r?{hash:tS(n)}:{}}}function tx(e,t,r){let n;let{args:i=[],prepare:s=!0}=r??{},a=e5.Gu(t,{strict:!1}),o=e.filter(e=>a?"function"===e.type||"error"===e.type?tI(e)===e5.tP(t,0,4):"event"===e.type&&tS(e)===t:"name"in e&&e.name===t);if(0===o.length)throw new tk({name:t});if(1===o.length)return{...o[0],...s?{hash:tS(o[0])}:{}};for(let e of o)if("inputs"in e){if(!i||0===i.length){if(!e.inputs||0===e.inputs.length)return{...e,...s?{hash:tS(e)}:{}};continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===i.length&&i.every((t,r)=>{let n="inputs"in e&&e.inputs[r];return!!n&&function e(t,r){let n=typeof t,i=r.type;switch(i){case"address":return tm(t,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:if("tuple"===i&&"components"in r)return Object.values(r.components).every((r,n)=>e(Object.values(t)[n],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i))return"number"===n||"bigint"===n;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i))return"string"===n||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:i.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,n)})){if(n&&"inputs"in n&&n.inputs){let t=function e(t,r,n){for(let i in t){let s=t[i],a=r[i];if("tuple"===s.type&&"tuple"===a.type&&"components"in s&&"components"in a)return e(s.components,a.components,n[i]);let o=[s.type,a.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&tm(n[i],{strict:!1}))return o}}(e.inputs,n.inputs,i);if(t)throw new tA({abiItem:e,type:t[0]},{abiItem:n,type:t[1]})}n=e}}let l=(()=>{if(n)return n;let[e,...t]=o;return{...e,overloads:t}})();if(!l)throw new tk({name:t});return{...l,...s?{hash:tS(l)}:{}}}function tI(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return tx(t,r)}return e[0]})();return e5.tP(tS(t),0,4)}function tS(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return tx(t,r)}return e[0]})();return"string"!=typeof t&&"hash"in t&&t.hash?t.hash:td(e5.mL(function(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return tx(t,r)}return e[0]})();return t_("string"==typeof t?t:e1.t(t))}(t)))}class tA extends e2.G{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${t_(e1.t(e.abiItem))}\`, and`,`\`${t.type}\` in \`${t_(e1.t(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class tk extends e2.G{constructor({name:e,data:t,type:r="item"}){super(`ABI ${r}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}var tT=r(70945),tC=r(45841);let tO=/^(.*)\[([0-9]*)\]$/,tP=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tR=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,tD=2n**256n-1n;function tN(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:n,encoded:i}=e[r];n?t+=32:t+=e5.dp(i)}let r=[],n=[],i=0;for(let s=0;s<e.length;s++){let{dynamic:a,encoded:o}=e[s];a?(r.push(e5.xS(t+i,{size:32})),n.push(o),i+=e5.dp(o)):r.push(o)}return e5.zo(...r,...n)}function tU(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function tB(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(tB);let r=tU(e.type);return!!(r&&tB({...e,type:r[1]}))}let tL={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new tz({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new tM({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new tj({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new tj({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};class tj extends e2.G{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class tM extends e2.G{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class tz extends e2.G{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function t$(e,t,r){let{checksumAddress:n=!1}=r??{};if(e.length!==t.length)throw new tG({expectedLength:e.length,givenLength:t.length});let i=tN(function({checksumAddress:e,parameters:t,values:r}){let n=[];for(let i=0;i<t.length;i++)n.push(function e({checksumAddress:t=!1,parameter:r,value:n}){let i=tU(r.type);if(i){let[s,a]=i;return function(t,r){let{checksumAddress:n,length:i,parameter:s}=r,a=null===i;if(!Array.isArray(t))throw new tZ(t);if(!a&&t.length!==i)throw new tH({expectedLength:i,givenLength:t.length,type:`${s.type}[${i}]`});let o=!1,l=[];for(let r=0;r<t.length;r++){let i=e({checksumAddress:n,parameter:s,value:t[r]});i.dynamic&&(o=!0),l.push(i)}if(a||o){let e=tN(l);if(a){let t=e5.xS(l.length,{size:32});return{dynamic:!0,encoded:l.length>0?e5.zo(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:e5.zo(...l.map(({encoded:e})=>e))}}(n,{checksumAddress:t,length:s,parameter:{...r,type:a}})}if("tuple"===r.type)return function(t,r){let{checksumAddress:n,parameter:i}=r,s=!1,a=[];for(let r=0;r<i.components.length;r++){let o=i.components[r],l=Array.isArray(t)?r:o.name,c=e({checksumAddress:n,parameter:o,value:t[l]});a.push(c),c.dynamic&&(s=!0)}return{dynamic:s,encoded:s?tN(a):e5.zo(...a.map(({encoded:e})=>e))}}(n,{checksumAddress:t,parameter:r});if("address"===r.type)return function(e,t){let{checksum:r=!1}=t;return ty(e,{strict:r}),{dynamic:!1,encoded:e5.Q_(e.toLowerCase())}}(n,{checksum:t});if("bool"===r.type)return function(e){if("boolean"!=typeof e)throw new e2.G(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:e5.Q_(e5.O3(e))}}(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){let e=r.type.startsWith("int"),[,,t="256"]=tR.exec(r.type)??[];return function(e,{signed:t,size:r}){if("number"==typeof r){let n=2n**(BigInt(r)-(t?1n:0n))-1n,i=t?-n-1n:0n;if(e>n||e<i)throw new e5.J5({max:n.toString(),min:i.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:e5.xS(e,{size:32,signed:t})}}(n,{signed:e,size:Number(t)})}if(r.type.startsWith("bytes"))return function(e,{type:t}){let[,r]=t.split("bytes"),n=e5.dp(e);if(!r){let t=e;return n%32!=0&&(t=e5.eh(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:e5.zo(e5.Q_(e5.xS(n,{size:32})),t)}}if(n!==Number.parseInt(r,10))throw new tK({expectedSize:Number.parseInt(r,10),value:e});return{dynamic:!1,encoded:e5.eh(e)}}(n,{type:r.type});if("string"===r.type)return function(e){let t=e5.mL(e),r=Math.ceil(e5.dp(t)/32),n=[];for(let e=0;e<r;e++)n.push(e5.eh(e5.tP(t,32*e,(e+1)*32)));return{dynamic:!0,encoded:e5.zo(e5.eh(e5.xS(e5.dp(t),{size:32})),...n)}}(n);throw new tJ(r.type)}({checksumAddress:e,parameter:t[i],value:r[i]}));return n}({checksumAddress:n,parameters:e,values:t}));return 0===i.length?"0x":i}function tF(e,t){if(e.length!==t.length)throw new tG({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t[n];r.push(tF.encode(i,s))}return e5.zo(...r)}function tq(e){return Array.isArray(e)&&"string"==typeof e[0]||"string"==typeof e?function(e){let t=[];if("string"==typeof e){let r=(0,e0.Q4)(e),n=r.length;for(let e=0;e<n;e++)t.push((0,e0.C$)(r[e],{modifiers:eQ.LY}))}else{let r=(0,eX.D)(e),n=e.length;for(let i=0;i<n;i++){let n=e[i];if((0,eQ.N0)(n))continue;let s=(0,e0.Q4)(n),a=s.length;for(let e=0;e<a;e++)t.push((0,e0.C$)(s[e],{modifiers:eQ.LY,structs:r}))}}if(0===t.length)throw new tT.$r({params:e});return t}(e):e}(tF||(tF={})).encode=function e(t,r,n=!1){if("address"===t)return ty(r),e5.Q_(r.toLowerCase(),n?32:0);if("string"===t)return e5.mL(r);if("bytes"===t)return r;if("bool"===t)return e5.Q_(e5.O3(r),n?32:1);let i=t.match(tR);if(i){let[e,t,s="256"]=i,a=Number.parseInt(s,10)/8;return e5.xS(r,{size:n?32:a,signed:"int"===t})}let s=t.match(tP);if(s){let[e,t]=s;if(Number.parseInt(t,10)!==(r.length-2)/2)throw new tK({expectedSize:Number.parseInt(t,10),value:r});return e5.eh(r,n?32:0)}let a=t.match(tO);if(a&&Array.isArray(r)){let[t,n]=a,i=[];for(let t=0;t<r.length;t++)i.push(e(n,r[t],!0));return 0===i.length?"0x":e5.zo(...i)}throw new tJ(t)};class tW extends e2.G{constructor({data:e,parameters:t,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${tC.P(t)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class tV extends e2.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class tH extends e2.G{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class tK extends e2.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${e5.dp(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class tG extends e2.G{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class tZ extends e2.G{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class tJ extends e2.G{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function tY(e,t={}){return tE(e,t)}function tQ(e,t,r){let n=tx(e,t,r);if("function"!==n.type)throw new tk({name:t,type:"function"});return n}let tX="0x0000000000000000000000000000000000000000";var t0=r(45434);async function t1(e,t){let{blockNumber:r,blockTag:n,calls:i,stateOverrides:a,traceAssetChanges:o,traceTransfers:l,validation:u}=t,d=t.account?(0,V.T)(t.account):void 0;if(o&&!d)throw new c.G("`account` is required when `traceAssetChanges` is true");let h=d?function(...e){let[t,r]=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return[function(e){let t=e.find(e=>"constructor"===e.type);if(!t)throw new tk({name:"constructor"});return t}(t),r]}return e})(),{bytecode:n,args:i}=r;return e5.zo(n,t.inputs?.length&&i?.length?t$(t.inputs,i):"0x")}(tE("constructor(bytes, bytes)"),{bytecode:t0.NO,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(...e){let[t,r=[]]=(()=>{if(Array.isArray(e[0])){let[t,r,n]=e;return[tQ(t,r,{args:n}),n]}let[t,r]=e;return[t,r]})(),{overloads:n}=t,i=n?tQ([t,...n],t.name,{args:r}):t,s=tI(i),a=r.length>0?t$(i.inputs,r):void 0;return a?e5.zo(s,a):s}(tY("function getBalance(address)"),[d.address])]}):void 0,f=o?await Promise.all(t.calls.map(async t=>{if(!t.data&&!t.abi)return;let{accessList:r}=await J(e,{account:d.address,...t,data:t.abi?(0,s.R)(t):t.data});return r.map(({address:e,storageKeys:t})=>t.length>0?e:null)})).then(e=>e.flat().filter(Boolean)):[],p=await eJ(e,{blockNumber:r,blockTag:n,blocks:[...o?[{calls:[{data:h}],stateOverrides:a},{calls:f.map((e,t)=>({abi:[tY("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:e,from:tX,nonce:t})),stateOverrides:[{address:tX,nonce:0}]}]:[],{calls:[...i,{}].map(e=>({...e,from:d?.address})),stateOverrides:a},...o?[{calls:[{data:h}]},{calls:f.map((e,t)=>({abi:[tY("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:e,from:tX,nonce:t})),stateOverrides:[{address:tX,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[tY("function decimals() returns (uint256)")],functionName:"decimals",from:tX,nonce:t})),stateOverrides:[{address:tX,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[tY("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:tX,nonce:t})),stateOverrides:[{address:tX,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[tY("function symbol() returns (string)")],functionName:"symbol",from:tX,nonce:t})),stateOverrides:[{address:tX,nonce:0}]}]:[]],traceTransfers:l,validation:u}),y=o?p[2]:p[0],[g,m,,b,v,w,_,E]=o?p:[],{calls:x,...I}=y,S=x.slice(0,-1)??[],A=[...g?.calls??[],...m?.calls??[]].map(e=>"success"===e.status?(0,e_.y_)(e.data):null),k=[...b?.calls??[],...v?.calls??[]].map(e=>"success"===e.status?(0,e_.y_)(e.data):null),T=(w?.calls??[]).map(e=>"success"===e.status?e.result:null),C=(E?.calls??[]).map(e=>"success"===e.status?e.result:null),O=(_?.calls??[]).map(e=>"success"===e.status?e.result:null),P=[];for(let[e,t]of k.entries()){let r=A[e];if("bigint"!=typeof t||"bigint"!=typeof r)continue;let n=T[e-1],i=C[e-1],s=O[e-1],a=0===e?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:f[e-1],decimals:s||n?Number(n??1):void 0,symbol:i??void 0};P.some(e=>e.token.address===a.address)||P.push({token:a,value:{pre:r,post:t,diff:t-r}})}return{assetChanges:P,block:I,results:S}}async function t2(e,t){let{abi:r,address:n,args:a,functionName:o,dataSuffix:l="string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value,...c}=t,u=c.account?(0,V.T)(c.account):e.account,d=(0,s.R)({abi:r,args:a,functionName:o});try{let{data:s}=await (0,w.s)(e,W.R,"call")({batch:!1,data:`${d}${l?l.replace("0x",""):""}`,to:n,...c,account:u}),h=(0,i.k)({abi:r,args:a,functionName:o,data:s||"0x"}),f=r.filter(e=>"name"in e&&e.name===t.functionName);return{result:h,request:{abi:f,address:n,args:a,dataSuffix:l,functionName:o,...c,account:u}}}catch(e){throw(0,ed.S)(e,{abi:r,address:n,args:a,docsPath:"/docs/contract/simulateContract",functionName:o,sender:u?.address})}}async function t3(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}let t5="0x6492649264926492649264926492649264926492649264926492649264926492";class t8 extends e2.G{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function t6(e,t={}){let{recovered:r}=t;if(void 0===e.r||void 0===e.s||r&&void 0===e.yParity)throw new re({signature:e});if(e.r<0n||e.r>tD)throw new rt({value:e.r});if(e.s<0n||e.s>tD)throw new rr({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new rn({value:e.yParity})}function t4(e){if(130!==e.length&&132!==e.length)throw new t7({signature:e});let t=BigInt(e5.tP(e,0,32)),r=BigInt(e5.tP(e,32,64)),n=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return t9(t)}catch{throw new rn({value:t})}})();return void 0===n?{r:t,s:r}:{r:t,s:r,yParity:n}}function t9(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return e%2==0?1:0;throw new ri({value:e})}class t7 extends e2.G{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${e5.dp(e5.Dp(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class re extends e2.G{constructor({signature:e}){super(`Signature \`${te.Pz(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class rt extends e2.G{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class rr extends e2.G{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class rn extends e2.G{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class ri extends e2.G{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}let rs=tq("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function ra(e){if("string"==typeof e){if("0x8010801080108010801080108010801080108010801080108010801080108010"!==e5.tP(e,-32))throw new ro(e)}else t6(e.authorization)}class ro extends e2.G{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}var rl=r(23010),rc=r(31669),ru=r(63936);async function rd({address:e,authorization:t,signature:r}){return(0,eS.E)((0,rc.K)(e),await (0,ru.z)({authorization:t,signature:r}))}var rh=r(95267),rf=r(45337);async function rp(e,t){let{address:r,chain:n=e.chain,hash:i,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??n?.contracts?.erc6492Verifier?.address,multicallAddress:a=t.multicallAddress??n?.contracts?.multicall3?.address}=t;if(n?.verifyHash)return await n.verifyHash(e,t);let o=(()=>{let e=t.signature;return(0,g.v)(e)?e:"object"==typeof e&&"r"in e&&"s"in e?(0,rf.V)(e):(0,l.ci)(e)})();try{if(function(e){try{return ra(e),!0}catch{return!1}}(o))return await ry(e,{...t,multicallAddress:a,signature:o});return await rg(e,{...t,verifierAddress:s,signature:o})}catch(e){try{if((0,eS.E)((0,rc.K)(r),await (0,rh.R)({hash:i,signature:o})))return!0}catch{}if(e instanceof rb)return!1;throw e}}async function ry(e,t){let{address:r,blockNumber:i,blockTag:a,hash:o,multicallAddress:c}=t,{authorization:u,data:d,signature:h,to:p}=function(e){ra(e);let t=e5.He(e5.tP(e,-64,-32)),r=e5.tP(e,-t-64,-64),n=e5.tP(e,0,-t-64),[i,s,a]=function(e,t,r={}){let{as:n="Array",checksumAddress:i=!1}=r,s="string"==typeof t?tn(t):t,a=function(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(tL);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}(s);if(0===ti(s)&&e.length>0)throw new tV;if(ti(s)&&32>ti(s))throw new tW({data:"string"==typeof t?t:e5.xv(t),parameters:e,size:ti(s)});let o=0,l="Array"===n?[]:{};for(let t=0;t<e.length;++t){let r=e[t];a.setPosition(o);let[s,c]=function e(t,r,n){let{checksumAddress:i,staticPosition:s}=n,a=tU(r.type);if(a){let[n,o]=a;return function(t,r,n){let{checksumAddress:i,length:s,staticPosition:a}=n;if(!s){let n=a+ts(t.readBytes(32)),s=n+32;t.setPosition(n);let o=ts(t.readBytes(32)),l=tB(r),c=0,u=[];for(let n=0;n<o;++n){t.setPosition(s+(l?32*n:c));let[a,o]=e(t,r,{checksumAddress:i,staticPosition:s});c+=o,u.push(a)}return t.setPosition(a+32),[u,32]}if(tB(r)){let n=a+ts(t.readBytes(32)),o=[];for(let a=0;a<s;++a){t.setPosition(n+32*a);let[s]=e(t,r,{checksumAddress:i,staticPosition:n});o.push(s)}return t.setPosition(a+32),[o,32]}let o=0,l=[];for(let n=0;n<s;++n){let[n,s]=e(t,r,{checksumAddress:i,staticPosition:a+o});o+=s,l.push(n)}return[l,o]}(t,{...r,type:o},{checksumAddress:i,length:n,staticPosition:s})}if("tuple"===r.type)return function(t,r,n){let{checksumAddress:i,staticPosition:s}=n,a=0===r.components.length||r.components.some(({name:e})=>!e),o=a?[]:{},l=0;if(tB(r)){let n=s+ts(t.readBytes(32));for(let s=0;s<r.components.length;++s){let c=r.components[s];t.setPosition(n+l);let[u,d]=e(t,c,{checksumAddress:i,staticPosition:n});l+=d,o[a?s:c?.name]=u}return t.setPosition(s+32),[o,32]}for(let n=0;n<r.components.length;++n){let c=r.components[n],[u,d]=e(t,c,{checksumAddress:i,staticPosition:s});o[a?n:c?.name]=u,l+=d}return[o,l]}(t,r,{checksumAddress:i,staticPosition:s});if("address"===r.type)return function(e,t={}){let r;let{checksum:n=!1}=t,i=e.readBytes(32);return[(r=e5.xv(function(e,t,r,n={}){var i,s;let{strict:a}=n;i=0,s=0;let o=e.slice(-20,void 0);return a&&function(e,t,r){if("number"==typeof r&&ti(e)!==r-t)throw new tc({offset:r,position:"end",size:ti(e)})}(o,-20,void 0),o}(i,0)),n?tg(r):r),32]}(t,{checksum:i});if("bool"===r.type)return[function(e,t={}){let{size:r}=t,n=e;if(void 0!==r&&(e8(n,r),n=ta(n)),n.length>1||n[0]>1)throw new to(n);return!!n[0]}(t.readBytes(32),{size:32}),32];if(r.type.startsWith("bytes"))return function(e,t,{staticPosition:r}){let[n,i]=t.type.split("bytes");if(!i){let t=ts(e.readBytes(32));e.setPosition(r+t);let n=ts(e.readBytes(32));if(0===n)return e.setPosition(r+32),["0x",32];let i=e.readBytes(n);return e.setPosition(r+32),[e5.xv(i),32]}return[e5.xv(e.readBytes(Number.parseInt(i,10),32)),32]}(t,r,{staticPosition:s});if(r.type.startsWith("uint")||r.type.startsWith("int"))return function(e,t){let r=t.type.startsWith("int"),n=Number.parseInt(t.type.split("int")[1]||"256",10),i=e.readBytes(32);return[n>48?function(e,t={}){let{size:r}=t;void 0!==r&&e8(e,r);let n=e5.xv(e,t);return e5.Gh(n,t)}(i,{signed:r}):ts(i,{signed:r}),32]}(t,r);if("string"===r.type)return function(e,{staticPosition:t}){let r=ts(e.readBytes(32));e.setPosition(t+r);let n=ts(e.readBytes(32));if(0===n)return e.setPosition(t+32),["",32];let i=function(e,t={}){let{size:r}=t,n=e;return void 0!==r&&(e8(n,r),n=e9(n,{dir:"right"})),tt.decode(n)}(ta(e.readBytes(n,32)));return e.setPosition(t+32),[i,32]}(t,{staticPosition:s});throw new tJ(r.type)}(a,r,{checksumAddress:i,staticPosition:0});o+=c,"Array"===n?l.push(s):l[r.name??t]=s}return l}(rs,r);return{authorization:function(e,t={}){return"string"==typeof e.chainId?function(e){let{address:t,chainId:r,nonce:n}=e,i=function(e){if(void 0!==e.r&&void 0!==e.s)return function(e){let t=(()=>"string"==typeof e?t4(e):e instanceof Uint8Array?t4(e5.xv(e)):"string"==typeof e.r?function(e){let t=(()=>{let t=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if("number"==typeof t&&"number"!=typeof r&&(r=t9(t)),"number"!=typeof r)throw new rn({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}(e):e.v?{r:e.r,s:e.s,yParity:t9(e.v)}:{r:e.r,s:e.s,...void 0!==e.yParity?{yParity:e.yParity}:{}})();return t6(t),t}(e)}(e);return{address:t,chainId:Number(r),nonce:BigInt(n),...i}}(e):{...e,...t.signature}}({address:i.delegation,chainId:Number(i.chainId),nonce:i.nonce,yParity:i.yParity,r:i.r,s:i.s}),signature:n,...a&&"0x"!==a?{data:a,to:s}:{}}}(t.signature);if(await (0,eI.C)(e,{address:r,blockNumber:i,blockTag:a})===(0,f.SM)(["0xef0100",u.address]))return await rm(e,{address:r,blockNumber:i,blockTag:a,hash:o,signature:h});let y={address:u.address,chainId:Number(u.chainId),nonce:Number(u.nonce),r:(0,l.eC)(u.r,{size:32}),s:(0,l.eC)(u.s,{size:32}),yParity:u.yParity};if(!await rd({address:r,authorization:y}))throw new rb;let g=await (0,w.s)(e,_.L,"readContract")({...c?{address:c}:{code:t0.xd},authorizationList:[y],abi:n.F8,blockNumber:i,blockTag:"pending",functionName:"aggregate3",args:[[...d?[{allowFailure:!0,target:p??r,callData:d}]:[],{allowFailure:!0,target:r,callData:(0,s.R)({abi:n._A,functionName:"isValidSignature",args:[o,h]})}]]}),m=g[g.length-1]?.returnData;if(m?.startsWith("0x1626ba7e"))return!0;throw new rb}async function rg(e,t){let{address:r,factory:i,factoryData:a,hash:o,signature:l,verifierAddress:c,...d}=t,h=await (async()=>!i&&!a||function(e){try{return!function(e){if(e5.tP(e,-32)!==t5)throw new t8(e)}(e),!0}catch{return!1}}(l)?l:function(e){let{data:t,signature:r,to:n}=e;return e5.zo(t$(tq("address, bytes, bytes"),[n,t,r]),t5)}({data:a,signature:l,to:i}))(),f=c?{to:c,data:(0,s.R)({abi:n.MR,functionName:"isValidSig",args:[r,o,h]}),...d}:{data:(0,rl.w)({abi:n.MR,args:[r,o,h],bytecode:t0.de}),...d},{data:p}=await (0,w.s)(e,W.R,"call")(f).catch(e=>{if(e instanceof u.cg)throw new rb;throw e});if((0,e_.XA)(p??"0x0"))return!0;throw new rb}async function rm(e,t){let{address:r,blockNumber:i,blockTag:s,hash:a,signature:o}=t;if((await (0,w.s)(e,_.L,"readContract")({address:r,abi:n._A,args:[a,o],blockNumber:i,blockTag:s,functionName:"isValidSignature"}).catch(e=>{if(e instanceof u.uq)throw new rb;throw e})).startsWith("0x1626ba7e"))return!0;throw new rb}class rb extends Error{}var rv=r(15566);async function rw(e,{address:t,message:r,factory:n,factoryData:i,signature:s,...a}){let o=(0,rv.r)(r);return(0,w.s)(e,rp,"verifyHash")({address:t,factory:n,factoryData:i,hash:o,signature:s,...a})}var r_=r(42727);async function rE(e,t){let{address:r,factory:n,factoryData:i,signature:s,message:a,primaryType:o,types:l,domain:c,...u}=t,d=(0,r_.Jv)({message:a,primaryType:o,types:l,domain:c});return(0,w.s)(e,rp,"verifyHash")({address:r,factory:n,factoryData:i,hash:d,signature:s,...u})}var rx=r(67348),rI=r(2228),rS=r(36478),rA=r(41495),rk=r(31853),rT=r(77014);let rC=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,rO=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;var rP=r(4012);async function rR(e,t){let{address:r,domain:n,message:i,nonce:s,scheme:a,signature:o,time:l=new Date,...c}=t,u=function(e){let{scheme:t,statement:r,...n}=e.match(rC)?.groups??{},{chainId:i,expirationTime:s,issuedAt:a,notBefore:o,requestId:l,...c}=e.match(rO)?.groups??{},u=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...n,...c,...i?{chainId:Number(i)}:{},...s?{expirationTime:new Date(s)}:{},...a?{issuedAt:new Date(a)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...u?{resources:u}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}(i);if(!u.address||!function(e){let{address:t,domain:r,message:n,nonce:i,scheme:s,time:a=new Date}=e;if(r&&n.domain!==r||i&&n.nonce!==i||s&&n.scheme!==s||n.expirationTime&&a>=n.expirationTime||n.notBefore&&a<n.notBefore)return!1;try{if(!n.address||!(0,rP.U)(n.address,{strict:!1})||t&&!(0,eS.E)(n.address,t))return!1}catch{return!1}return!0}({address:r,domain:n,message:u,nonce:s,scheme:a,time:l}))return!1;let d=(0,rv.r)(i);return rp(e,{address:u.address,hash:d,signature:o,...c})}var rD=r(34467),rN=r(9769),rU=r(85631);function rB(e){return{call:t=>(0,W.R)(e,t),createAccessList:t=>J(e,t),createBlockFilter:()=>Q(e),createContractEventFilter:t=>el(e,t),createEventFilter:t=>ec(e,t),createPendingTransactionFilter:()=>eu(e),estimateContractGas:t=>ef(e,t),estimateGas:t=>(0,eh.Q)(e,t),getBalance:t=>(0,em.s)(e,t),getBlobBaseFee:()=>eb(e),getBlock:t=>(0,ev.Q)(e,t),getBlockNumber:t=>(0,ew.z)(e,t),getBlockTransactionCount:t=>eE(e,t),getBytecode:t=>(0,eI.C)(e,t),getChainId:()=>(0,ex.L)(e),getCode:t=>(0,eI.C)(e,t),getContractEvents:t=>eO(e,t),getEip712Domain:t=>eR(e,t),getEnsAddress:t=>E(e,t),getEnsAvatar:t=>$(e,t),getEnsName:t=>F(e,t),getEnsResolver:t=>q(e,t),getEnsText:t=>z(e,t),getFeeHistory:t=>eN(e,t),estimateFeesPerGas:t=>(0,ep.X)(e,t),getFilterChanges:t=>eU(e,t),getFilterLogs:t=>eB(e,t),getGasPrice:()=>(0,eL.o)(e),getLogs:t=>eC(e,t),getProof:t=>ej(e,t),estimateMaxPriorityFeePerGas:t=>(0,ey._)(e,t),fillTransaction:t=>(0,eg.b)(e,t),getStorageAt:t=>eM(e,t),getTransaction:t=>(0,ez.f)(e,t),getTransactionConfirmations:t=>e$(e,t),getTransactionCount:t=>(0,eF.K)(e,t),getTransactionReceipt:t=>(0,eq.a)(e,t),multicall:t=>(0,eW.A)(e,t),prepareTransactionRequest:t=>(0,rD.ZE)(e,t),readContract:t=>(0,_.L)(e,t),sendRawTransaction:t=>(0,rN.p)(e,t),sendRawTransactionSync:t=>(0,rU.s)(e,t),simulate:t=>eJ(e,t),simulateBlocks:t=>eJ(e,t),simulateCalls:t=>t1(e,t),simulateContract:t=>t2(e,t),verifyHash:t=>rp(e,t),verifyMessage:t=>rw(e,t),verifySiweMessage:t=>rR(e,t),verifyTypedData:t=>rE(e,t),uninstallFilter:t=>t3(e,t),waitForTransactionReceipt:t=>(0,rx.e)(e,t),watchBlocks:t=>(function(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:r=!1,emitOnBegin:n=!1,onBlock:i,onError:s,includeTransactions:a,poll:o,pollingInterval:l=e.pollingInterval}){let c,u,d,h;let f=void 0!==o?o:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type),p=a??!1;return f?(()=>{let a=(0,rk.P)(["watchBlocks",e.uid,t,r,n,p,l]);return(0,rS.N7)(a,{onBlock:i,onError:s},i=>(0,rA.$)(async()=>{try{let n=await (0,w.s)(e,ev.Q,"getBlock")({blockTag:t,includeTransactions:p});if(null!==n.number&&c?.number!=null){if(n.number===c.number)return;if(n.number-c.number>1&&r)for(let t=c?.number+1n;t<n.number;t++){let r=await (0,w.s)(e,ev.Q,"getBlock")({blockNumber:t,includeTransactions:p});i.onBlock(r,c),c=r}}(c?.number==null||"pending"===t&&n?.number==null||null!==n.number&&n.number>c.number)&&(i.onBlock(n,c),c=n)}catch(e){i.onError?.(e)}},{emitOnBegin:n,interval:l}))})():(u=!0,d=!0,h=()=>u=!1,(async()=>{try{n&&(0,w.s)(e,ev.Q,"getBlock")({blockTag:t,includeTransactions:p}).then(e=>{u&&d&&(i(e,void 0),d=!1)}).catch(s);let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:a}=await r.subscribe({params:["newHeads"],async onData(t){if(!u)return;let r=await (0,w.s)(e,ev.Q,"getBlock")({blockNumber:t.result?.number,includeTransactions:p}).catch(()=>{});u&&(i(r,c),d=!1,c=r)},onError(e){s?.(e)}});h=a,u||h()}catch(e){s?.(e)}})(),()=>h())})(e,t),watchBlockNumber:t=>(0,rI.q)(e,t),watchContractEvent:t=>(function(e,t){let{abi:r,address:n,args:i,batch:s=!0,eventName:a,fromBlock:o,onError:l,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:h}=t;return(void 0!==u?u:"bigint"==typeof o||"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type))?(()=>{let t=h??!1,u=(0,rk.P)(["watchContractEvent",n,i,s,e.uid,a,d,t,o]);return(0,rS.N7)(u,{onLogs:c,onError:l},l=>{let c,u;void 0!==o&&(c=o-1n);let h=!1,f=(0,rA.$)(async()=>{if(!h){try{u=await (0,w.s)(e,el,"createContractEventFilter")({abi:r,address:n,args:i,eventName:a,strict:t,fromBlock:o})}catch{}h=!0;return}try{let o;if(u)o=await (0,w.s)(e,eU,"getFilterChanges")({filter:u});else{let s=await (0,w.s)(e,ew.z,"getBlockNumber")({});o=c&&c<s?await (0,w.s)(e,eO,"getContractEvents")({abi:r,address:n,args:i,eventName:a,fromBlock:c+1n,toBlock:s,strict:t}):[],c=s}if(0===o.length)return;if(s)l.onLogs(o);else for(let e of o)l.onLogs([e])}catch(e){u&&e instanceof rT.yR&&(h=!1),l.onError?.(e)}},{emitOnBegin:!0,interval:d});return async()=>{u&&await (0,w.s)(e,t3,"uninstallFilter")({filter:u}),f()}})})():(()=>{let t=(0,rk.P)(["watchContractEvent",n,i,s,e.uid,a,d,h??!1]),o=!0,u=()=>o=!1;return(0,rS.N7)(t,{onLogs:c,onError:l},t=>((async()=>{try{let s=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),l=a?ea({abi:r,eventName:a,args:i}):[],{unsubscribe:c}=await s.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!o)return;let n=e.result;try{let{eventName:e,args:i}=(0,eA.F)({abi:r,data:n.data,topics:n.topics,strict:h}),s=(0,eT.U)(n,{args:i,eventName:e});t.onLogs([s])}catch(s){let e,r;if(s instanceof X.SM||s instanceof X.Gy){if(h)return;e=s.abiItem.name,r=s.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let i=(0,eT.U)(n,{args:r?[]:{},eventName:e});t.onLogs([i])}},onError(e){t.onError?.(e)}});u=c,o||u()}catch(e){l?.(e)}})(),()=>u()))})()})(e,t),watchEvent:t=>(function(e,{address:t,args:r,batch:n=!0,event:i,events:s,fromBlock:a,onError:o,onLogs:l,poll:c,pollingInterval:u=e.pollingInterval,strict:d}){let h,f;let p=void 0!==c?c:"bigint"==typeof a||"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type),y=d??!1;return p?(()=>{let c=(0,rk.P)(["watchEvent",t,r,n,e.uid,i,u,a]);return(0,rS.N7)(c,{onLogs:l,onError:o},o=>{let l,c;void 0!==a&&(l=a-1n);let d=!1,h=(0,rA.$)(async()=>{if(!d){try{c=await (0,w.s)(e,ec,"createEventFilter")({address:t,args:r,event:i,events:s,strict:y,fromBlock:a})}catch{}d=!0;return}try{let a;if(c)a=await (0,w.s)(e,eU,"getFilterChanges")({filter:c});else{let n=await (0,w.s)(e,ew.z,"getBlockNumber")({});a=l&&l!==n?await (0,w.s)(e,eC,"getLogs")({address:t,args:r,event:i,events:s,fromBlock:l+1n,toBlock:n}):[],l=n}if(0===a.length)return;if(n)o.onLogs(a);else for(let e of a)o.onLogs([e])}catch(e){c&&e instanceof rT.yR&&(d=!1),o.onError?.(e)}},{emitOnBegin:!0,interval:u});return async()=>{c&&await (0,w.s)(e,t3,"uninstallFilter")({filter:c}),h()}})})():(h=!0,f=()=>h=!1,(async()=>{try{let n=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),a=s??(i?[i]:void 0),c=[];a&&(c=[a.flatMap(e=>ea({abi:[e],eventName:e.name,args:r}))],i&&(c=c[0]));let{unsubscribe:u}=await n.subscribe({params:["logs",{address:t,topics:c}],onData(e){if(!h)return;let t=e.result;try{let{eventName:e,args:r}=(0,eA.F)({abi:a??[],data:t.data,topics:t.topics,strict:y}),n=(0,eT.U)(t,{args:r,eventName:e});l([n])}catch(i){let e,r;if(i instanceof X.SM||i instanceof X.Gy){if(d)return;e=i.abiItem.name,r=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let n=(0,eT.U)(t,{args:r?[]:{},eventName:e});l([n])}},onError(e){o?.(e)}});f=u,h||f()}catch(e){o?.(e)}})(),()=>f())})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:r,onTransactions:n,poll:i,pollingInterval:s=e.pollingInterval}){let a,o;return(void 0!==i?i:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type)?(()=>{let i=(0,rk.P)(["watchPendingTransactions",e.uid,t,s]);return(0,rS.N7)(i,{onTransactions:n,onError:r},r=>{let n;let i=(0,rA.$)(async()=>{try{if(!n)try{n=await (0,w.s)(e,eu,"createPendingTransactionFilter")({});return}catch(e){throw i(),e}let s=await (0,w.s)(e,eU,"getFilterChanges")({filter:n});if(0===s.length)return;if(t)r.onTransactions(s);else for(let e of s)r.onTransactions([e])}catch(e){r.onError?.(e)}},{emitOnBegin:!0,interval:s});return async()=>{n&&await (0,w.s)(e,t3,"uninstallFilter")({filter:n}),i()}})})():(a=!0,o=()=>a=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!a)return;let t=e.result;n([t])},onError(e){r?.(e)}});o=t,a||o()}catch(e){r?.(e)}})(),()=>o())})(e,t)}}},79516:function(e,t,r){"use strict";r.d(t,{d:function(){return d}});var n=r(17057),i=r(81544);class s extends i.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}var a=r(43226),o=r(39504),l=r(31853);let c={current:0,take(){return this.current++},reset(){this.current=0}};var u=r(24250);function d(e,t={}){let{batch:r,fetchFn:i,fetchOptions:d,key:h="http",methods:f,name:p="HTTP JSON-RPC",onFetchRequest:y,onFetchResponse:g,retryDelay:m,raw:b}=t;return({chain:v,retryCount:w,timeout:_})=>{let{batchSize:E=1e3,wait:x=0}="object"==typeof r?r:{},I=t.retryCount??w,S=_??t.timeout??1e4,A=e||v?.rpcUrls.default.http[0];if(!A)throw new s;let k=function(e,t={}){let{url:r,headers:i}=function(e){try{let t=new URL(e),r=(()=>{if(t.username){let e=`${decodeURIComponent(t.username)}:${decodeURIComponent(t.password)}`;return t.username="",t.password="",{url:t.toString(),headers:{Authorization:`Basic ${btoa(e)}`}}}})();return{url:t.toString(),...r}}catch{return{url:e}}}(e);return{async request(e){let{body:s,fetchFn:a=t.fetchFn??fetch,onRequest:u=t.onRequest,onResponse:d=t.onResponse,timeout:h=t.timeout??1e4}=e,f={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:p,method:y,signal:g}=f;try{let e;let t=await (0,o.F)(async({signal:e})=>{let t={...f,body:Array.isArray(s)?(0,l.P)(s.map(e=>({jsonrpc:"2.0",id:e.id??c.take(),...e}))):(0,l.P)({jsonrpc:"2.0",id:s.id??c.take(),...s}),headers:{...i,"Content-Type":"application/json",...p},method:y||"POST",signal:g||(h>0?e:null)},n=new Request(r,t),o=await u?.(n,t)??{...t,url:r};return await a(o.url??r,o)},{errorInstance:new n.W5({body:s,url:r}),timeout:h,signal:!0});if(d&&await d(t),t.headers.get("Content-Type")?.startsWith("application/json"))e=await t.json();else{e=await t.text();try{e=JSON.parse(e||"{}")}catch(r){if(t.ok)throw r;e={error:e}}}if(!t.ok)throw new n.Gg({body:s,details:(0,l.P)(e.error)||t.statusText,headers:t.headers,status:t.status,url:r});return e}catch(e){if(e instanceof n.Gg||e instanceof n.W5)throw e;throw new n.Gg({body:s,cause:e,url:r})}}}}(A,{fetchFn:i,fetchOptions:d,onRequest:y,onResponse:g,timeout:S});return(0,u.q)({key:h,methods:f,name:p,async request({method:e,params:t}){let i={method:e,params:t},{schedule:s}=(0,a.S)({id:A,wait:x,shouldSplitBatch:e=>e.length>E,fn:e=>k.request({body:e}),sort:(e,t)=>e.id-t.id}),o=async e=>r?s(e):[await k.request({body:e})],[{error:l,result:c}]=await o(i);if(b)return{error:l,result:c};if(l)throw new n.bs({body:i,error:l,url:A});return c},retryCount:I,retryDelay:m,timeout:S,type:"http"},{fetchOptions:d,url:A})}}},64118:function(e,t,r){"use strict";r.d(t,{R:function(){return n},Z:function(){return i}});let n="0x6492649264926492649264926492649264926492649264926492649264926492",i="0x0000000000000000000000000000000000000000000000000000000000000000"},27964:function(e,t,r){"use strict";r.d(t,{F:function(){return u}});var n=r(65531),i=r(33630),s=r(20556),a=r(45392),o=r(2742),l=r(7275);let c="/docs/contract/decodeEventLog";function u(e){let{abi:t,data:r,strict:u,topics:d}=e,h=u??!0,[f,...p]=d;if(!f)throw new n.FM({docsPath:c});let y=t.find(e=>"event"===e.type&&f===(0,a.n)((0,l.t)(e)));if(!(y&&"name"in y)||"event"!==y.type)throw new n.lC(f,{docsPath:c});let{name:g,inputs:m}=y,b=m?.some(e=>!("name"in e&&e.name)),v=b?[]:{},w=m.map((e,t)=>[e,t]).filter(([e])=>"indexed"in e&&e.indexed),_=[];for(let e=0;e<w.length;e++){let[t,r]=w[e],i=p[e];if(!i){if(h)throw new n.Gy({abiItem:y,param:t});_.push([t,r]);continue}v[b?r:t.name||r]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,o.r)([e],t)||[])[0]}({param:t,value:i})}let E=m.filter(e=>!("indexed"in e&&e.indexed)),x=h?E:[..._.map(([e])=>e),...E];if(x.length>0){if(r&&"0x"!==r)try{let e=(0,o.r)(x,r);if(e){let t=0;if(!h)for(let[r,n]of _)v[b?n:r.name||n]=e[t++];if(b)for(let r=0;r<m.length;r++)void 0===v[r]&&t<e.length&&(v[r]=e[t++]);else for(let r=0;r<E.length;r++)v[E[r].name]=e[t++]}}catch(e){if(h){if(e instanceof n.xB||e instanceof i.lQ)throw new n.SM({abiItem:y,data:r,params:x,size:(0,s.d)(r)});throw e}}else if(h)throw new n.SM({abiItem:y,data:"0x",params:x,size:0})}return{eventName:g,args:Object.values(v).length>0?v:void 0}}},87721:function(e,t,r){"use strict";r.d(t,{p:function(){return l}});var n=r(65531),i=r(69921),s=r(10464),a=r(2742),o=r(7275);function l(e){let{abi:t,data:r}=e,l=(0,i.tP)(r,0,4),c=t.find(e=>"function"===e.type&&l===(0,s.C)((0,o.t)(e)));if(!c)throw new n.eF(l,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:c.name,args:"inputs"in c&&c.inputs&&c.inputs.length>0?(0,a.r)(c.inputs,(0,i.tP)(r,4)):void 0}}},93637:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(10052),i=r(4012);function s(e,t){if(!(0,i.U)(e,{strict:!1}))throw new n.b({address:e});if(!(0,i.U)(t,{strict:!1}))throw new n.b({address:t});return e.toLowerCase()===t.toLowerCase()}},7143:function(e,t,r){"use strict";r.d(t,{w:function(){return g},M:function(){return y}});var n=r(98158),i=r(55246),s=r(87721),a=r(65531),o=r(89256),l=r(10464),c=r(30056),u=r(7275),d=r(64043);let h="/docs/contract/encodeErrorResult";function f(e){let{abi:t,errorName:r,args:n}=e,i=t[0];if(r){let e=(0,d.mE)({abi:t,args:n,name:r});if(!e)throw new a.MS(r,{docsPath:h});i=e}if("error"!==i.type)throw new a.MS(void 0,{docsPath:h});let s=(0,u.t)(i),f=(0,l.C)(s),p="0x";if(n&&n.length>0){if(!i.inputs)throw new a.Zh(i.name,{docsPath:h});p=(0,c.E)(i.inputs,n)}return(0,o.SM)([f,p])}let p="/docs/contract/encodeFunctionResult",y="x-batch-gateway:true";async function g(e){let{data:t,ccipRequest:r}=e,{args:[o]}=(0,s.p)({abi:n.Yi,data:t}),l=[],u=[];return await Promise.all(o.map(async(e,t)=>{try{u[t]=e.urls.includes(y)?await g({data:e.data,ccipRequest:r}):await r(e),l[t]=!1}catch(e){l[t]=!0,u[t]="HttpRequestError"===e.name&&e.status?f({abi:n.Yi,errorName:"HttpError",args:[e.status,e.shortMessage]}):f({abi:[i.Up],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}})),function(e){let{abi:t,functionName:r,result:n}=e,i=t[0];if(r){let e=(0,d.mE)({abi:t,name:r});if(!e)throw new a.xL(r,{docsPath:p});i=e}if("function"!==i.type)throw new a.xL(void 0,{docsPath:p});if(!i.outputs)throw new a.MX(i.name,{docsPath:p});let s=(()=>{if(0===i.outputs.length)return[];if(1===i.outputs.length)return[n];if(Array.isArray(n))return n;throw new a.hn(n)})();return(0,c.E)(i.outputs,s)}({abi:n.Yi,functionName:"query",result:[l,u]})}},39504:function(e,t,r){"use strict";function n(e,{errorInstance:t=Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let a;try{let o=new AbortController;r>0&&(a=setTimeout(()=>{n?o.abort():s(t)},r)),i(await e({signal:o?.signal||null}))}catch(e){e?.name==="AbortError"&&s(t),s(e)}finally{clearTimeout(a)}})()})}r.d(t,{F:function(){return n}})},15566:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var n=r(13169),i=r(89256),s=r(20556),a=r(59455);function o(e,t){return(0,n.w)(function(e){let t="string"==typeof e?(0,a.$G)(e):"string"==typeof e.raw?e.raw:(0,a.ci)(e.raw),r=(0,a.$G)(`\x19Ethereum Signed Message:
${(0,s.d)(t)}`);return(0,i.zo)([r,t])}(e),t)}},42727:function(e,t,r){"use strict";r.d(t,{Jv:function(){return l}});var n=r(30056),i=r(89256),s=r(59455),a=r(13169),o=r(99493);function l(e){let{domain:t={},message:r,primaryType:n}=e,s={EIP712Domain:(0,o.cj)({domain:t}),...e.types};(0,o.iC)({domain:t,message:r,primaryType:n,types:s});let l=["0x1901"];return t&&l.push(function({domain:e,types:t}){return c({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:s})),"EIP712Domain"!==n&&l.push(c({data:r,primaryType:n,types:s})),(0,a.w)((0,i.zo)(l))}function c({data:e,primaryType:t,types:r}){let i=function e({data:t,primaryType:r,types:i}){let o=[{type:"bytes32"}],l=[function({primaryType:e,types:t}){let r=(0,s.NC)(function({primaryType:e,types:t}){let r="",n=function e({primaryType:t,types:r},n=new Set){let i=t.match(/^\w*/u),s=i?.[0];if(n.has(s)||void 0===r[s])return n;for(let t of(n.add(s),r[s]))e({primaryType:t.type,types:r},n);return n}({primaryType:e,types:t});for(let i of(n.delete(e),[e,...Array.from(n).sort()]))r+=`${i}(${t[i].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return r}({primaryType:e,types:t}));return(0,a.w)(r)}({primaryType:r,types:i})];for(let c of i[r]){let[r,u]=function t({types:r,name:i,type:o,value:l}){if(void 0!==r[o])return[{type:"bytes32"},(0,a.w)(e({data:l,primaryType:o,types:r}))];if("bytes"===o)return[{type:"bytes32"},(0,a.w)(l)];if("string"===o)return[{type:"bytes32"},(0,a.w)((0,s.NC)(l))];if(o.lastIndexOf("]")===o.length-1){let e=o.slice(0,o.lastIndexOf("[")),s=l.map(n=>t({name:i,type:e,types:r,value:n}));return[{type:"bytes32"},(0,a.w)((0,n.E)(s.map(([e])=>e),s.map(([,e])=>e)))]}return[{type:o},l]}({types:i,name:c.name,type:c.type,value:t[c.name]});o.push(r),l.push(u)}return(0,n.E)(o,l)}({data:e,primaryType:t,types:r});return(0,a.w)(i)}},45337:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var n=r(99345),i=r(72932),s=r(44659);function a({r:e,s:t,to:r="hex",v:a,yParity:o}){let l=(()=>{if(0===o||1===o)return o;if(a&&(27n===a||28n===a||a>=35n))return a%2n===0n?1:0;throw Error("Invalid `v` or `yParity` value")})(),c=`0x${new n.secp256k1.Signature((0,i.y_)(e),(0,i.y_)(t)).toCompactHex()}${0===l?"1b":"1c"}`;return"hex"===r?c:(0,s.nr)(c)}},99493:function(e,t,r){"use strict";r.d(t,{cj:function(){return g},H6:function(){return p},iC:function(){return y}});var n=r(65531),i=r(10052),s=r(31853),a=r(81544);class o extends a.G{constructor({domain:e}){super(`Invalid domain "${(0,s.P)(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class l extends a.G{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class c extends a.G{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var u=r(4012),d=r(20556),h=r(59455),f=r(23251);function p(e){let{domain:t,message:r,primaryType:n,types:i}=e,a=(e,t)=>{let r={...t};for(let t of e){let{name:e,type:n}=t;"address"===n&&(r[e]=r[e].toLowerCase())}return r},o=i.EIP712Domain&&t?a(i.EIP712Domain,t):{},l=(()=>{if("EIP712Domain"!==n)return a(i[n],r)})();return(0,s.P)({domain:o,message:l,primaryType:n,types:i})}function y(e){let{domain:t,message:r,primaryType:s,types:a}=e,p=(e,t)=>{for(let r of e){let{name:e,type:s}=r,o=t[e],l=s.match(f.lh);if(l&&("number"==typeof o||"bigint"==typeof o)){let[e,t,r]=l;(0,h.eC)(o,{signed:"int"===t,size:Number.parseInt(r,10)/8})}if("address"===s&&"string"==typeof o&&!(0,u.U)(o))throw new i.b({address:o});let y=s.match(f.eL);if(y){let[e,t]=y;if(t&&(0,d.d)(o)!==Number.parseInt(t,10))throw new n.KY({expectedSize:Number.parseInt(t,10),givenSize:(0,d.d)(o)})}let g=a[s];g&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new c({type:e})}(s),p(g,o))}};if(a.EIP712Domain&&t){if("object"!=typeof t)throw new o({domain:t});p(a.EIP712Domain,t)}if("EIP712Domain"!==s){if(a[s])p(a[s],r);else throw new l({primaryType:s,types:a})}}function g({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}},78984:function(e,t,r){"use strict";let n;var i,s,a,o,l,c,u,d,h,f,p,y=Object.defineProperty,g=(e,t)=>{for(var r in t)y(e,r,{get:t[r],enumerable:!0})},m={84532:{usdcAddress:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",usdcName:"USDC"},8453:{usdcAddress:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",usdcName:"USD Coin"},43113:{usdcAddress:"0x5425890298aed601595a70AB815c96711a31Bc65",usdcName:"USD Coin"},43114:{usdcAddress:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",usdcName:"USD Coin"},4689:{usdcAddress:"0xcdf79194c6c285077a58da47641d4dbe51f63542",usdcName:"Bridged USDC"},103:{usdcAddress:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",usdcName:"USDC"},101:{usdcAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",usdcName:"USDC"},1328:{usdcAddress:"0x4fcf1784b31630811181f670aea7a7bef803eaed",usdcName:"USDC"},1329:{usdcAddress:"0xe15fc38f6d8c56af07bbcbe3baf5708a2bf42392",usdcName:"USDC"},137:{usdcAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",usdcName:"USD Coin"},80002:{usdcAddress:"0x41E94Eb019C0762f9Bfcf9Fb1E58725BfB0e7582",usdcName:"USDC"},3338:{usdcAddress:"0xbbA60da06c2c5424f03f7434542280FCAd453d10",usdcName:"USDC"},2741:{usdcAddress:"0x84a71ccd554cc1b02749b35d22f684cc8ec987e1",usdcName:"Bridged USDC"},11124:{usdcAddress:"0xe4C7fBB0a626ed208021ccabA6Be1566905E2dFc",usdcName:"Bridged USDC"},1514:{usdcAddress:"0xF1815bd50389c46847f0Bda824eC8da914045D14",usdcName:"Bridged USDC"},41923:{usdcAddress:"0x12a272A581feE5577A5dFa371afEB4b2F3a8C2F8",usdcName:"Bridged USDC (Stargate)"},324705682:{usdcAddress:"0x2e08028E3C4c2356572E096d8EF835cD5C6030bD",usdcName:"Bridged USDC (SKALE Bridge)"}},b=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationUsed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"Blacklisted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newBlacklister",type:"address"}],name:"BlacklisterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"burner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newMasterMinter",type:"address"}],name:"MasterMinterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"MinterConfigured",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldMinter",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"previousOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newAddress",type:"address"}],name:"PauserChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"UnBlacklisted",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[],name:"CANCEL_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"RECEIVE_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"TRANSFER_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"authorizationState",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"blacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"blacklister",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"configureMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currency",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"decrement",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"increment",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"tokenName",type:"string"},{internalType:"string",name:"tokenSymbol",type:"string"},{internalType:"string",name:"tokenCurrency",type:"string"},{internalType:"uint8",name:"tokenDecimals",type:"uint8"},{internalType:"address",name:"newMasterMinter",type:"address"},{internalType:"address",name:"newPauser",type:"address"},{internalType:"address",name:"newBlacklister",type:"address"},{internalType:"address",name:"newOwner",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newName",type:"string"}],name:"initializeV2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"lostAndFound",type:"address"}],name:"initializeV2_1",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"accountsToBlacklist",type:"address[]"},{internalType:"string",name:"newSymbol",type:"string"}],name:"initializeV2_2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"masterMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"minterAllowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"removeMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"unBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newBlacklister",type:"address"}],name:"updateBlacklister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newMasterMinter",type:"address"}],name:"updateMasterMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newPauser",type:"address"}],name:"updatePauser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"}];(i=o||(o={})).assertEqual=e=>{},i.assertIs=function(e){},i.assertNever=function(e){throw Error()},i.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},i.getValidEnumValues=e=>{let t=i.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let n of t)r[n]=e[n];return i.objectValues(r)},i.objectValues=e=>i.objectKeys(e).map(function(t){return e[t]}),i.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},i.find=(e,t)=>{for(let r of e)if(t(r))return r},i.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,i.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},i.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(l||(l={})).mergeShapes=(e,t)=>({...e,...t});let v=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),w=e=>{switch(typeof e){case"undefined":return v.undefined;case"string":return v.string;case"number":return Number.isNaN(e)?v.nan:v.number;case"boolean":return v.boolean;case"function":return v.function;case"bigint":return v.bigint;case"symbol":return v.symbol;case"object":if(Array.isArray(e))return v.array;if(null===e)return v.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return v.promise;if("undefined"!=typeof Map&&e instanceof Map)return v.map;if("undefined"!=typeof Set&&e instanceof Set)return v.set;if("undefined"!=typeof Date&&e instanceof Date)return v.date;return v.object;default:return v.unknown}},_=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class E extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof E))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}E.create=e=>new E(e);var x=(e,t)=>{let r;switch(e.code){case _.invalid_type:r=e.received===v.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case _.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:r=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case _.invalid_union:r="Invalid input";break;case _.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case _.invalid_enum_value:r=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case _.invalid_arguments:r="Invalid function arguments";break;case _.invalid_return_type:r="Invalid function return type";break;case _.invalid_date:r="Invalid date";break;case _.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case _.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case _.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case _.custom:r="Invalid input";break;case _.invalid_intersection_types:r="Intersection results could not be merged";break;case _.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case _.not_finite:r="Number must be finite";break;default:r=t.defaultError,o.assertNever(e)}return{message:r}};(s=c||(c={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},s.toString=e=>"string"==typeof e?e:e?.message;let I=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function S(e,t){let r=I({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,x,x==x?void 0:x].filter(e=>!!e)});e.common.issues.push(r)}class A{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return k;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return A.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return k;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let k=Object.freeze({status:"aborted"}),T=e=>({status:"dirty",value:e}),C=e=>({status:"valid",value:e}),O=e=>"aborted"===e.status,P=e=>"dirty"===e.status,R=e=>"valid"===e.status,D=e=>"undefined"!=typeof Promise&&e instanceof Promise;class N{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let U=(e,t)=>{if(R(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new E(e.common.issues);return this._error=t,this._error}}};function B(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:void 0===i.data?{message:s??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}class L{get description(){return this._def.description}_getType(e){return w(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:w(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new A,ctx:{common:e.parent.common,data:e.data,parsedType:w(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(D(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)},n=this._parseSync({data:e,path:r.path,parent:r});return U(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return R(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>R(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)},n=this._parse({data:e,path:r.path,parent:r});return U(r,await (D(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),s=()=>n.addIssue({code:_.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eO({schema:this,typeName:u.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eP.create(this,this._def)}nullable(){return eR.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ef.create(this)}promise(){return eC.create(this,this._def)}or(e){return ey.create([this,e],this._def)}and(e){return eb.create(this,e,this._def)}transform(e){return new eO({...B(this._def),schema:this,typeName:u.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eD({...B(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:u.ZodDefault})}brand(){return new eB({typeName:u.ZodBranded,type:this,...B(this._def)})}catch(e){return new eN({...B(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:u.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eL.create(this,e)}readonly(){return ej.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let j=/^c[^\s-]{8,}$/i,M=/^[0-9a-z]+$/,z=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,F=/^[a-z0-9_-]{21}$/i,q=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,W=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,V=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,K=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,G=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Z=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,J=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Y=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",X=RegExp(`^${Q}$`);function ee(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class et extends L{_parse(e){var t,r,i,s;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==v.string){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.string,received:t.parsedType}),k}let l=new A;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(S(a=this._getOrReturnCtx(e,a),{code:_.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(S(a=this._getOrReturnCtx(e,a),{code:_.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let t=e.data.length>c.value,r=e.data.length<c.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?S(a,{code:_.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):r&&S(a,{code:_.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)V.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"email",code:_.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:_.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)$.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:_.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)F.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:_.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)j.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:_.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)M.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:_.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)z.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:_.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{S(a=this._getOrReturnCtx(e,a),{validation:"url",code:_.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"regex",code:_.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?(function(e){let t=`${Q}T${ee(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(c).test(e.data)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?X.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${ee(c)}$`).test(e.data)||(S(a=this._getOrReturnCtx(e,a),{code:_.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?W.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"duration",code:_.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(t=e.data,("v4"===(r=c.version)||!r)&&H.test(t)||("v6"===r||!r)&&G.test(t)||(S(a=this._getOrReturnCtx(e,a),{validation:"ip",code:_.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,t){if(!q.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(S(a=this._getOrReturnCtx(e,a),{validation:"jwt",code:_.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(i=e.data,("v4"===(s=c.version)||!s)&&K.test(i)||("v6"===s||!s)&&Z.test(i)||(S(a=this._getOrReturnCtx(e,a),{validation:"cidr",code:_.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?J.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"base64",code:_.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?Y.test(e.data)||(S(a=this._getOrReturnCtx(e,a),{validation:"base64url",code:_.invalid_string,message:c.message}),l.dirty()):o.assertNever(c);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:_.invalid_string,...c.errToObj(r)})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...c.errToObj(e)})}url(e){return this._addCheck({kind:"url",...c.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...c.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...c.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...c.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...c.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...c.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...c.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...c.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...c.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...c.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...c.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...c.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...c.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...c.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...c.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...c.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...c.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...c.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...c.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...c.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...c.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...c.errToObj(t)})}nonempty(e){return this.min(1,c.errToObj(e))}trim(){return new et({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new et({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new et({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}et.create=e=>new et({checks:[],typeName:u.ZodString,coerce:e?.coerce??!1,...B(e)});class er extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==v.number){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.number,received:t.parsedType}),k}let r=new A;for(let n of this._def.checks)"int"===n.kind?o.isInteger(e.data)||(S(t=this._getOrReturnCtx(e,t),{code:_.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,n.value)&&(S(t=this._getOrReturnCtx(e,t),{code:_.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(S(t=this._getOrReturnCtx(e,t),{code:_.not_finite,message:n.message}),r.dirty()):o.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,c.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.toString(t))}setLimit(e,t,r,n){return new er({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:c.toString(n)}]})}_addCheck(e){return new er({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:c.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:c.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:c.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:c.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:c.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:c.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:c.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:c.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&o.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}er.create=e=>new er({checks:[],typeName:u.ZodNumber,coerce:e?.coerce||!1,...B(e)});class en extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==v.bigint)return this._getInvalidInput(e);let r=new A;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(S(t=this._getOrReturnCtx(e,t),{code:_.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):o.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.bigint,received:t.parsedType}),k}gte(e,t){return this.setLimit("min",e,!0,c.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.toString(t))}setLimit(e,t,r,n){return new en({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:c.toString(n)}]})}_addCheck(e){return new en({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:c.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:c.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:c.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:c.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}en.create=e=>new en({checks:[],typeName:u.ZodBigInt,coerce:e?.coerce??!1,...B(e)});class ei extends L{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==v.boolean){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.boolean,received:t.parsedType}),k}return C(e.data)}}ei.create=e=>new ei({typeName:u.ZodBoolean,coerce:e?.coerce||!1,...B(e)});class es extends L{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==v.date){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.date,received:t.parsedType}),k}if(Number.isNaN(e.data.getTime()))return S(this._getOrReturnCtx(e),{code:_.invalid_date}),k;let r=new A;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(S(t=this._getOrReturnCtx(e,t),{code:_.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):o.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new es({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:c.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:c.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}es.create=e=>new es({checks:[],coerce:e?.coerce||!1,typeName:u.ZodDate,...B(e)});class ea extends L{_parse(e){if(this._getType(e)!==v.symbol){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.symbol,received:t.parsedType}),k}return C(e.data)}}ea.create=e=>new ea({typeName:u.ZodSymbol,...B(e)});class eo extends L{_parse(e){if(this._getType(e)!==v.undefined){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.undefined,received:t.parsedType}),k}return C(e.data)}}eo.create=e=>new eo({typeName:u.ZodUndefined,...B(e)});class el extends L{_parse(e){if(this._getType(e)!==v.null){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.null,received:t.parsedType}),k}return C(e.data)}}el.create=e=>new el({typeName:u.ZodNull,...B(e)});class ec extends L{constructor(){super(...arguments),this._any=!0}_parse(e){return C(e.data)}}ec.create=e=>new ec({typeName:u.ZodAny,...B(e)});class eu extends L{constructor(){super(...arguments),this._unknown=!0}_parse(e){return C(e.data)}}eu.create=e=>new eu({typeName:u.ZodUnknown,...B(e)});class ed extends L{_parse(e){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.never,received:t.parsedType}),k}}ed.create=e=>new ed({typeName:u.ZodNever,...B(e)});class eh extends L{_parse(e){if(this._getType(e)!==v.undefined){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.void,received:t.parsedType}),k}return C(e.data)}}eh.create=e=>new eh({typeName:u.ZodVoid,...B(e)});class ef extends L{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==v.array)return S(t,{code:_.invalid_type,expected:v.array,received:t.parsedType}),k;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(S(t,{code:e?_.too_big:_.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(S(t,{code:_.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(S(t,{code:_.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new N(t,e,t.path,r)))).then(e=>A.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new N(t,e,t.path,r)));return A.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ef({...this._def,minLength:{value:e,message:c.toString(t)}})}max(e,t){return new ef({...this._def,maxLength:{value:e,message:c.toString(t)}})}length(e,t){return new ef({...this._def,exactLength:{value:e,message:c.toString(t)}})}nonempty(e){return this.min(1,e)}}ef.create=(e,t)=>new ef({type:e,minLength:null,maxLength:null,exactLength:null,typeName:u.ZodArray,...B(t)});class ep extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==v.object){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.object,received:t.parsedType}),k}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof ed&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let a=[];for(let e of i){let t=n[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new N(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ed){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(S(r,{code:_.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new N(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>A.mergeObjectSync(t,e)):A.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return c.errToObj,new ep({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:c.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ep({...this._def,unknownKeys:"strip"})}passthrough(){return new ep({...this._def,unknownKeys:"passthrough"})}extend(e){return new ep({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ep({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:u.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ep({...this._def,catchall:e})}pick(e){let t={};for(let r of o.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ep({...this._def,shape:()=>t})}omit(e){let t={};for(let r of o.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ep({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ep){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=eP.create(e(i))}return new ep({...t._def,shape:()=>r})}return t instanceof ef?new ef({...t._def,type:e(t.element)}):t instanceof eP?eP.create(e(t.unwrap())):t instanceof eR?eR.create(e(t.unwrap())):t instanceof ev?ev.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let r of o.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new ep({...this._def,shape:()=>t})}required(e){let t={};for(let r of o.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eP;)e=e._def.innerType;t[r]=e}return new ep({...this._def,shape:()=>t})}keyof(){return eA(o.objectKeys(this.shape))}}ep.create=(e,t)=>new ep({shape:()=>e,unknownKeys:"strip",catchall:ed.create(),typeName:u.ZodObject,...B(t)}),ep.strictCreate=(e,t)=>new ep({shape:()=>e,unknownKeys:"strict",catchall:ed.create(),typeName:u.ZodObject,...B(t)}),ep.lazycreate=(e,t)=>new ep({shape:e,unknownKeys:"strip",catchall:ed.create(),typeName:u.ZodObject,...B(t)});class ey extends L{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new E(e.ctx.common.issues));return S(t,{code:_.invalid_union,unionErrors:r}),k});{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new E(e));return S(t,{code:_.invalid_union,unionErrors:i}),k}}get options(){return this._def.options}}ey.create=(e,t)=>new ey({options:e,typeName:u.ZodUnion,...B(t)});let eg=e=>{if(e instanceof eI)return eg(e.schema);if(e instanceof eO)return eg(e.innerType());if(e instanceof eS)return[e.value];if(e instanceof ek)return e.options;if(e instanceof eT)return o.objectValues(e.enum);if(e instanceof eD)return eg(e._def.innerType);if(e instanceof eo)return[void 0];else if(e instanceof el)return[null];else if(e instanceof eP)return[void 0,...eg(e.unwrap())];else if(e instanceof eR)return[null,...eg(e.unwrap())];else if(e instanceof eB)return eg(e.unwrap());else if(e instanceof ej)return eg(e.unwrap());else if(e instanceof eN)return eg(e._def.innerType);else return[]};class em extends L{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.object)return S(t,{code:_.invalid_type,expected:v.object,received:t.parsedType}),k;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(S(t,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=eg(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new em({typeName:u.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...B(r)})}}class eb extends L{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(O(e)||O(n))return k;let i=function e(t,r){let n=w(t),i=w(r);if(t===r)return{valid:!0,data:t};if(n===v.object&&i===v.object){let n=o.objectKeys(r),i=o.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};s[n]=i.data}return{valid:!0,data:s}}if(n===v.array&&i===v.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let s=e(t[i],r[i]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===v.date&&i===v.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return i.valid?((P(e)||P(n))&&t.dirty(),{status:t.value,value:i.data}):(S(r,{code:_.invalid_intersection_types}),k)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eb.create=(e,t,r)=>new eb({left:e,right:t,typeName:u.ZodIntersection,...B(r)});class ev extends L{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==v.array)return S(r,{code:_.invalid_type,expected:v.array,received:r.parsedType}),k;if(r.data.length<this._def.items.length)return S(r,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&r.data.length>this._def.items.length&&(S(r,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new N(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>A.mergeArray(t,e)):A.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ev({...this._def,rest:e})}}ev.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ev({items:e,typeName:u.ZodTuple,rest:null,...B(t)})};class ew extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==v.object)return S(r,{code:_.invalid_type,expected:v.object,received:r.parsedType}),k;let n=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new N(r,e,r.path,e)),value:s._parse(new N(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?A.mergeObjectAsync(t,n):A.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ew(t instanceof L?{keyType:e,valueType:t,typeName:u.ZodRecord,...B(r)}:{keyType:et.create(),valueType:e,typeName:u.ZodRecord,...B(t)})}}class e_ extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==v.map)return S(r,{code:_.invalid_type,expected:v.map,received:r.parsedType}),k;let n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new N(r,e,r.path,[s,"key"])),value:i._parse(new N(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return k;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return k;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}e_.create=(e,t,r)=>new e_({valueType:t,keyType:e,typeName:u.ZodMap,...B(r)});class eE extends L{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==v.set)return S(r,{code:_.invalid_type,expected:v.set,received:r.parsedType}),k;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(S(r,{code:_.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(S(r,{code:_.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return k;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>i._parse(new N(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>s(e)):s(a)}min(e,t){return new eE({...this._def,minSize:{value:e,message:c.toString(t)}})}max(e,t){return new eE({...this._def,maxSize:{value:e,message:c.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eE.create=(e,t)=>new eE({valueType:e,minSize:null,maxSize:null,typeName:u.ZodSet,...B(t)});class ex extends L{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.function)return S(t,{code:_.invalid_type,expected:v.function,received:t.parsedType}),k;function r(e,r){return I({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,x,x].filter(e=>!!e),issueData:{code:_.invalid_arguments,argumentsError:r}})}function n(e,r){return I({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,x,x].filter(e=>!!e),issueData:{code:_.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eC){let e=this;return C(async function(...t){let a=new E([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(r(t,e)),a}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return C(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new E([r(t,a.error)]);let o=Reflect.apply(s,this,a.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new E([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ex({...this._def,args:ev.create(e).rest(eu.create())})}returns(e){return new ex({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ex({args:e||ev.create([]).rest(eu.create()),returns:t||eu.create(),typeName:u.ZodFunction,...B(r)})}}class eI extends L{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eI.create=(e,t)=>new eI({getter:e,typeName:u.ZodLazy,...B(t)});class eS extends L{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return S(t,{received:t.data,code:_.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eA(e,t){return new ek({values:e,typeName:u.ZodEnum,...B(t)})}eS.create=(e,t)=>new eS({value:e,typeName:u.ZodLiteral,...B(t)});class ek extends L{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return S(t,{expected:o.joinValues(r),received:t.parsedType,code:_.invalid_type}),k}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return S(t,{received:t.data,code:_.invalid_enum_value,options:r}),k}return C(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ek.create(e,{...this._def,...t})}exclude(e,t=this._def){return ek.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ek.create=eA;class eT extends L{_parse(e){let t=o.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==v.string&&r.parsedType!==v.number){let e=o.objectValues(t);return S(r,{expected:o.joinValues(e),received:r.parsedType,code:_.invalid_type}),k}if(this._cache||(this._cache=new Set(o.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=o.objectValues(t);return S(r,{received:r.data,code:_.invalid_enum_value,options:e}),k}return C(e.data)}get enum(){return this._def.values}}eT.create=(e,t)=>new eT({values:e,typeName:u.ZodNativeEnum,...B(t)});class eC extends L{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==v.promise&&!1===t.common.async?(S(t,{code:_.invalid_type,expected:v.promise,received:t.parsedType}),k):C((t.parsedType===v.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eC.create=(e,t)=>new eC({type:e,typeName:u.ZodPromise,...B(t)});class eO extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===u.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{S(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return k;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?T(n.value):n});{if("aborted"===t.value)return k;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?T(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?k:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?k:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>R(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):k);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!R(e))return k;let s=n.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}o.assertNever(n)}}eO.create=(e,t,r)=>new eO({schema:e,typeName:u.ZodEffects,effect:t,...B(r)}),eO.createWithPreprocess=(e,t,r)=>new eO({schema:t,effect:{type:"preprocess",transform:e},typeName:u.ZodEffects,...B(r)});class eP extends L{_parse(e){return this._getType(e)===v.undefined?C(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eP.create=(e,t)=>new eP({innerType:e,typeName:u.ZodOptional,...B(t)});class eR extends L{_parse(e){return this._getType(e)===v.null?C(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eR.create=(e,t)=>new eR({innerType:e,typeName:u.ZodNullable,...B(t)});class eD extends L{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===v.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eD.create=(e,t)=>new eD({innerType:e,typeName:u.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...B(t)});class eN extends L{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return D(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new E(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new E(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eN.create=(e,t)=>new eN({innerType:e,typeName:u.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...B(t)});class eU extends L{_parse(e){if(this._getType(e)!==v.nan){let t=this._getOrReturnCtx(e);return S(t,{code:_.invalid_type,expected:v.nan,received:t.parsedType}),k}return{status:"valid",value:e.data}}}eU.create=e=>new eU({typeName:u.ZodNaN,...B(e)}),Symbol("zod_brand");class eB extends L{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eL extends L{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),T(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eL({in:e,out:t,typeName:u.ZodPipeline})}}class ej extends L{_parse(e){let t=this._def.innerType._parse(e),r=e=>(R(e)&&(e.value=Object.freeze(e.value)),e);return D(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}ej.create=(e,t)=>new ej({innerType:e,typeName:u.ZodReadonly,...B(t)}),ep.lazycreate,(a=u||(u={})).ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly";let eM=et.create,ez=er.create;eU.create,en.create;let e$=ei.create,eF=es.create;ea.create,eo.create,el.create;let eq=ec.create;eu.create,ed.create,eh.create;let eW=ef.create,eV=ep.create;ep.strictCreate;let eH=ey.create,eK=em.create;eb.create,ev.create;let eG=ew.create;e_.create,eE.create,ex.create,eI.create;let eZ=eS.create,eJ=ek.create;eT.create,eC.create,eO.create,eP.create,eR.create,eO.createWithPreprocess,eL.create;var eY=r(70751),eQ=r(79516),eX=r(67798),e0=r(35156),e1=r(90328),e2=r(72932),e3=r(44659),e5=r(59455),e8=r(59069),e6=r(55668),e4=r(27481),e9=r(13550),e7=r(92614);let te=32n*r(75018).rU,tt={block:(0,e8.G)({format(e){let t=e.transactions?.map(e=>{if("string"==typeof e)return e;let t=tt.transaction?.format(e);return"0x71"===t.typeHex?t.type="eip712":"0xff"===t.typeHex&&(t.type="priority"),t});return{l1BatchNumber:e.l1BatchNumber?(0,e2.y_)(e.l1BatchNumber):null,l1BatchTimestamp:e.l1BatchTimestamp?(0,e2.y_)(e.l1BatchTimestamp):null,transactions:t}}}),transaction:(0,e4.y_)({format(e){let t={};return"0x71"===e.type?t.type="eip712":"0xff"===e.type&&(t.type="priority"),{...t,l1BatchNumber:e.l1BatchNumber?(0,e2.y_)(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?(0,e2.y_)(e.l1BatchTxIndex):null}}}),transactionReceipt:(0,e9.dI)({format:e=>({l1BatchNumber:e.l1BatchNumber?(0,e2.y_)(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?(0,e2.y_)(e.l1BatchTxIndex):null,logs:e.logs.map(e=>({...(0,e6.U)(e),l1BatchNumber:e.l1BatchNumber?(0,e2.y_)(e.l1BatchNumber):null,transactionLogIndex:(0,e2.ly)(e.transactionLogIndex),logType:e.logType})),l2ToL1Logs:e.l2ToL1Logs.map(e=>({blockNumber:(0,e2.y_)(e.blockHash),blockHash:e.blockHash,l1BatchNumber:e.l1BatchNumber?(0,e2.y_)(e.l1BatchNumber):null,transactionIndex:(0,e2.y_)(e.transactionIndex),shardId:(0,e2.y_)(e.shardId),isService:e.isService,sender:e.sender,key:e.key,value:e.value,transactionHash:e.transactionHash,logIndex:(0,e2.y_)(e.logIndex)}))})}),transactionRequest:(0,e7.iy)({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format:e=>e.gasPerPubdata||e.paymaster&&e.paymasterInput||e.factoryDeps||e.customSignature?{eip712Meta:{...e.gasPerPubdata?{gasPerPubdata:(0,e5.NC)(e.gasPerPubdata)}:{gasPerPubdata:(0,e5.NC)(50000n)},...e.paymaster&&e.paymasterInput?{paymasterParams:{paymaster:e.paymaster,paymasterInput:Array.from((0,e3.nr)(e.paymasterInput))}}:{},...e.factoryDeps?{factoryDeps:e.factoryDeps.map(e=>Array.from((0,e3.nr)(e)))}:{},...e.customSignature?{customSignature:Array.from((0,e3.nr)(e.customSignature))}:{}},type:"0x71"}:{}})};var tr=r(89256),tn=r(70044),ti=r(82531),ts=r(10052),ta=r(81544),to=r(35586),tl=r(4012);class tc extends ta.G{constructor(){super('Transaction is not an EIP712 transaction.\n\nTransaction must:\n  - include `type: "eip712"`\n  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`',{name:"InvalidEip712TransactionError"})}}function tu(e){return"eip712"===e.type||"customSignature"in e&&!!e.customSignature||"paymaster"in e&&!!e.paymaster||"paymasterInput"in e&&!!e.paymasterInput||"gasPerPubdata"in e&&"bigint"==typeof e.gasPerPubdata||"factoryDeps"in e&&!!e.factoryDeps}function td(e){let{chainId:t,to:r,from:n,paymaster:i,paymasterInput:s}=e;if(!tu(e))throw new tc;if(!t||t<=0)throw new to.hJ({chainId:t});if(r&&!(0,tl.U)(r))throw new ts.b({address:r});if(n&&!(0,tl.U)(n))throw new ts.b({address:n});if(i&&!(0,tl.U)(i))throw new ts.b({address:i});if(i&&!s)throw new ta.G("`paymasterInput` must be provided when `paymaster` is defined");if(!i&&s)throw new ta.G("`paymaster` must be provided when `paymasterInput` is defined")}var th=r(8796),tf=r(14588);class tp extends ta.G{constructor({givenLength:e,maxBytecodeSize:t}){super(`Bytecode cannot be longer than ${t} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class ty extends ta.G{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class tg extends ta.G{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function tm(e){let t=(0,e3.O0)(e);if(t.length%32!=0)throw new tg({givenLength:t.length});if(t.length>te)throw new tp({givenLength:t.length,maxBytecodeSize:te});let r=(0,tf.J)(t),n=(0,e3.O0)(r),i=t.length/32;if(i%2==0)throw new ty({givenLengthInWords:i});let s=(0,e3.O0)(i),a=(0,th.vk)(s,{size:2}),o=new Uint8Array([1,0]);return n.set(o,0),n.set(a,2),n}let tb={blockTime:1e3,formatters:tt,serializers:{transaction:function(e,t){return tu(e)?function(e){let{chainId:t,gas:r,nonce:n,to:i,from:s,value:a,maxFeePerGas:o,maxPriorityFeePerGas:l,customSignature:c,factoryDeps:u,paymaster:d,paymasterInput:h,gasPerPubdata:f,data:p}=e;td(e);let y=[n?(0,e5.NC)(n):"0x",l?(0,e5.NC)(l):"0x",o?(0,e5.NC)(o):"0x",r?(0,e5.NC)(r):"0x",i??"0x",a?(0,e5.NC)(a):"0x",p??"0x",(0,e5.NC)(t),(0,e5.NC)(""),(0,e5.NC)(""),(0,e5.NC)(t),s??"0x",f?(0,e5.NC)(f):(0,e5.NC)(50000n),u??[],c??"0x",d&&h?[d,h]:[]];return(0,tr.SM)(["0x71",(0,tn.LV)(y)])}(e):(0,ti.D)(e,t)}},custom:{getEip712Domain:e=>{td(e);let t=function(e){let{gas:t,nonce:r,to:n,from:i,value:s,maxFeePerGas:a,maxPriorityFeePerGas:o,factoryDeps:l,paymaster:c,paymasterInput:u,gasPerPubdata:d,data:h}=e;return{txType:113n,from:BigInt(i),to:n?BigInt(n):0n,gasLimit:t??0n,gasPerPubdataByteLimit:d??50000n,maxFeePerGas:a??0n,maxPriorityFeePerGas:o??0n,paymaster:c?BigInt(c):0n,nonce:r?BigInt(r):0n,value:s??0n,data:h??"0x",factoryDeps:l?.map(e=>e5.NC(tm(e)))??[],paymasterInput:u||"0x"}}(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}}}},tv=(0,e1.a)({...tb,blockTime:200,id:2741,name:"Abstract",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.mainnet.abs.xyz"],webSocket:["wss://api.mainnet.abs.xyz/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.mainnet.abs.xyz"}},contracts:{multicall3:{address:"0xAa4De41dba0Ca5dCBb288b7cC6b708F3aaC759E7",blockCreated:5288},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:5263}}}),tw=(0,e1.a)({...tb,blockTime:200,id:11124,name:"Abstract Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.testnet.abs.xyz"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.testnet.abs.xyz"}},testnet:!0,contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963",blockCreated:358349},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:431682}}});var t_=r(90713),tE=r(81460);let tx=(0,e1.a)({id:43114,name:"Avalanche",blockTime:1700,nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),tI=(0,e1.a)({id:43113,name:"Avalanche Fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://testnet.snowtrace.io",apiUrl:"https://api-testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0}),tS=(0,e1.a)({id:1329,name:"Sei Network",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc.sei-apis.com/"],webSocket:["wss://evm-ws.sei-apis.com/"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com",apiUrl:"https://seitrace.com/pacific-1/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11"}}}),tA=(0,e1.a)({id:1328,name:"Sei Testnet",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc-testnet.sei-apis.com"],webSocket:["wss://evm-ws-testnet.sei-apis.com"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:98697651}},testnet:!0}),tk=(0,e1.a)({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),tT=(0,e1.a)({id:80002,name:"Polygon Amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://amoy.polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3127388}},testnet:!0}),tC=(0,e1.a)({id:3338,name:"Peaq",nativeCurrency:{decimals:18,name:"peaq",symbol:"PEAQ"},rpcUrls:{default:{http:["https://quicknode1.peaq.xyz","https://quicknode2.peaq.xyz","https://quicknode3.peaq.xyz"],webSocket:["wss://quicknode1.peaq.xyz","wss://quicknode2.peaq.xyz","wss://quicknode3.peaq.xyz"]}},blockExplorers:{default:{name:"Subscan",url:"https://peaq.subscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3566354}}}),tO=(0,e1.a)({id:1514,name:"Story",nativeCurrency:{decimals:18,name:"IP Token",symbol:"IP"},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:340998},ensRegistry:{address:"0x5dc881dda4e4a8d312be3544ad13118d1a04cb17",blockCreated:648924},ensUniversalResolver:{address:"0xddfb18888a9466688235887dec2a10c4f5effee9",blockCreated:649114}},rpcUrls:{default:{http:["https://mainnet.storyrpc.io"]}},blockExplorers:{default:{name:"Story explorer",url:"https://storyscan.io",apiUrl:"https://storyscan.io/api/v2"}},ensTlds:[".ip"],testnet:!1}),tP=(0,e1.a)({id:41923,name:"EDU Chain",nativeCurrency:{decimals:18,name:"EDU",symbol:"EDU"},rpcUrls:{default:{http:["https://rpc.edu-chain.raas.gelato.cloud"]}},blockExplorers:{default:{name:"EDU Chain Explorer",url:"https://educhain.blockscout.com/"}},testnet:!1}),tR=(0,e1.a)({id:4689,name:"IoTeX",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.mainnet.iotex.io"],webSocket:["wss://babel-api.mainnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://iotexscan.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:22163670}}}),tD=(0,e1.a)({id:4690,name:"IoTeX Testnet",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.testnet.iotex.io"],webSocket:["wss://babel-api.testnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://testnet.iotexscan.io"}},contracts:{multicall3:{address:"0xb5cecD6894c6f473Ec726A176f1512399A2e355d",blockCreated:24347592}},testnet:!0});var tN=r(99345),tU=r(32449),tB=r(93610),tL=r(45337);async function tj({hash:e,privateKey:t,to:r="object"}){let{r:n,s:i,recovery:s}=tN.secp256k1.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:!!(0,tB.v)(!1,{strict:!1})&&(0,e3.nr)(!1)}),a={r:(0,e5.eC)(n,{size:32}),s:(0,e5.eC)(i,{size:32}),v:s?28n:27n,yParity:s};return"bytes"===r||"hex"===r?(0,tL.V)({...a,to:r}):a}var tM=r(29217);async function tz(e){let{chainId:t,nonce:r,privateKey:n,to:i="object"}=e,s=e.contractAddress??e.address,a=await tj({hash:(0,tM.t)({address:s,chainId:t,nonce:r}),privateKey:n,to:i});return"object"===i?{address:s,chainId:t,nonce:r,...a}:a}var t$=r(15566);async function tF({message:e,privateKey:t}){return await tj({hash:(0,t$.r)(e),privateKey:t,to:"hex"})}var tq=r(13169);async function tW(e){let{privateKey:t,transaction:r,serializer:n=ti.D}=e,i="eip4844"===r.type?{...r,sidecars:!1}:r,s=await tj({hash:(0,tq.w)(await n(i)),privateKey:t});return await n(r,s)}var tV=r(42727);async function tH(e){let{privateKey:t,...r}=e;return await tj({hash:(0,tV.Jv)(r),privateKey:t,to:"hex"})}var tK=r(50825),tG=r(64118),tZ=r(65531),tJ=r(30056),tY=r(17283);let tQ=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],name:"AccountNonceOrderingUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"aaVersion",type:"uint8"}],name:"AccountVersionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployerAddress",type:"address"},{indexed:!0,internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"contractAddress",type:"address"}],name:"ContractDeployed",type:"event"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"create2Account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"createAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"extendedAccountVersion",outputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_keccak256BytecodeHash",type:"bytes32"}],name:"forceDeployKeccak256",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment",name:"_deployment",type:"tuple"},{internalType:"address",name:"_sender",type:"address"}],name:"forceDeployOnAddress",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment[]",name:"_deployments",type:"tuple[]"}],name:"forceDeployOnAddresses",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getAccountInfo",outputs:[{components:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"supportedAAVersion",type:"uint8"},{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],internalType:"struct IContractDeployer.AccountInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"uint256",name:"_senderNonce",type:"uint256"}],name:"getNewAddressCreate",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"getNewAddressCreate2",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_version",type:"uint8"}],name:"updateAccountVersion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"_nonceOrdering",type:"uint8"}],name:"updateNonceOrdering",outputs:[],stateMutability:"nonpayable",type:"function"}],tX="/docs/contract/encodeDeployData";function t0(e,t,r,n){let i=[t,r,n];return({create:{functionName:"create",argsContractDeployer:i},create2:{functionName:"create2",argsContractDeployer:i},createAccount:{functionName:"createAccount",argsContractDeployer:[...i,1]},create2Account:{functionName:"create2Account",argsContractDeployer:[...i,1]}})[e||"create"]}var t1=r(19775),t2=r(12363),t3=r(34467),t5=r(9769),t8=r(65704),t6=r(40402),t4=r(93606),t9=r(82645),t7=r(54605);function re(e){if(!tu(e))throw new tc;(0,t7.F)(e)}var rt=r(48202),rr=r(69133);async function rn(e,t){let{account:r=e.account,chain:n=e.chain,...i}=t,s=r?(0,t1.T)(r):e.account;if(!s)throw new t8.o({docsPath:"/docs/actions/wallet/signTransaction"});if(re({account:s,chain:n,...t}),!n?.custom?.getEip712Domain)throw new ta.G("`getEip712Domain` not found on chain.");if(!n?.serializers?.transaction)throw new ta.G("transaction serializer not found on chain.");let a=await (0,t9.s)(e,t2.L,"getChainId")({});null!==n&&(0,t6.q)({currentChainId:a,chain:n});let o=n?.custom.getEip712Domain({...i,chainId:a,from:s.address,type:"eip712"}),l=await (0,rr.x)(e,{...o,account:s});return n?.serializers?.transaction({chainId:a,...i,customSignature:l,type:"eip712"},{r:"0x0",s:"0x0",v:0n})}async function ri(e,t){return tu(t)?rn(e,t):await (0,rt.O)(e,t)}async function rs(e,t){let{account:r=e.account,chain:n=e.chain}=t,i=r?(0,t1.T)(r):e.account;if(!i)throw new t8.o({docsPath:"/docs/actions/wallet/sendTransaction"});try{let r;re(t);let s=await (0,t3.ZE)(e,{...t,nonceManager:i.nonceManager,parameters:["gas","nonce","fees"]});null!==n&&(r=await (0,t9.s)(e,t2.L,"getChainId")({}),(0,t6.q)({currentChainId:r,chain:n}));let a=await ri(e,{...s,chainId:r});return await (0,t9.s)(e,t5.p,"sendRawTransaction")({serializedTransaction:a})}catch(e){throw(0,t4.$)(e,{...t,account:i,chain:n})}}var ra=r(41709);async function ro(e,t){return tu(t)?rs(e,t):(0,ra.T)(e,t)}var rl=r(82162),rc=r(21664),ru=r(1013);function rd(e){return JSON.parse(function(e){let t=[],r=!1;for(let n=0;n<e.length;n++){let i=!1;if("\\"===e[n]&&(t.push(e[n++]),i=!i),'"'===e[n]){t.push(e[n]),i||(r=!r);continue}if(!r){let r=function(e,t){if(!e[t]?.match(/[-\d]/))return null;let r=e.slice(t).match(/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?/);return r?r[0]:null}(e,n);if(r?.length){n+=r.length-1,r.match(/\.|[eE]-/)?t.push(r):t.push(`{"$n":"${r}"}`);continue}}t.push(e[n])}return t.join("")}(e),(e,t)=>t&&"object"==typeof t&&"$n"in t&&"string"==typeof t.$n?function({$n:e}){if(e.match(/[eE]/)){let[t,r]=e.split(/[eE]/);return BigInt(t)*BigInt(10)**BigInt(r)}return BigInt(e)}(t):t)}var rh=0n;function rf(e){return{id:function(){let e=rh;return rh++,e.toString()}(),jsonrpc:"2.0",method:e.methodName,params:e.params}}function rp(e,t){return JSON.stringify(e,(e,t)=>"bigint"==typeof t?{$n:`${t}`}:t,t).replace(/\{\s*"\$n"\s*:\s*"(-?\d+)"\s*\}/g,"$1")}function ry(e){return!(null==e||"object"!=typeof e||Array.isArray(e))&&"jsonrpc"in e&&"2.0"===e.jsonrpc&&"method"in e&&"string"==typeof e.method&&"params"in e}var rg=r(93182);function rm(e){return"bigint"==typeof e?Number(e):e}var rb={};function rv(e){return function t(r,n){if(Array.isArray(r))return r.map((e,r)=>t(e,{...n,keyPath:[...n.keyPath,r]}));if("object"!=typeof r||null===r)return e.reduce((e,t)=>t(e,n),r);{let e={};for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let s={...n,keyPath:[...n.keyPath,i]};e[i]=t(r[i],s)}return e}}}function rw(e,t){return r=>{let n=rv(e);return Object.freeze({...r,params:n(r.params,t)})}}var r_={accountNotifications:1,blockNotifications:1,getAccountInfo:1,getBalance:1,getBlock:1,getBlockHeight:0,getBlockProduction:0,getBlocks:2,getBlocksWithLimit:2,getEpochInfo:0,getFeeForMessage:1,getInflationGovernor:0,getInflationReward:1,getLargestAccounts:0,getLatestBlockhash:0,getLeaderSchedule:1,getMinimumBalanceForRentExemption:1,getMultipleAccounts:1,getProgramAccounts:1,getSignaturesForAddress:1,getSlot:0,getSlotLeader:0,getStakeMinimumDelegation:0,getSupply:0,getTokenAccountBalance:1,getTokenAccountsByDelegate:2,getTokenAccountsByOwner:2,getTokenLargestAccounts:1,getTokenSupply:1,getTransaction:1,getTransactionCount:0,getVoteAccounts:0,isBlockhashValid:1,logsNotifications:1,programNotifications:1,requestAirdrop:2,sendTransaction:1,signatureNotifications:1,simulateTransaction:1};function rE(e){let t=e?.onIntegerOverflow;return r=>(0,rg.z)(r,t?e=>{var r;return rw([(r=(...r)=>t(e,...r),(e,{keyPath:t})=>("bigint"==typeof e&&r&&(e>Number.MAX_SAFE_INTEGER||e<-Number.MAX_SAFE_INTEGER)&&r(t,e),e))],{keyPath:[]})(e)}:e=>e,rw([rm],{keyPath:[]}),function({defaultCommitment:e,optionsObjectPositionByMethod:t}){return r=>{let{params:n,methodName:i}=r;if(!Array.isArray(n))return r;let s=t[i];return null==s?r:Object.freeze({methodName:i,params:function({commitmentPropertyName:e,params:t,optionsObjectPositionInParams:r,overrideCommitment:n}){let i=t[r];if(void 0===i||i&&"object"==typeof i&&!Array.isArray(i)){if(i&&e in i){if(!i[e]||"finalized"===i[e]){let n=[...t],{[e]:s,...a}=i;return Object.keys(a).length>0?n[r]=a:r===n.length-1?n.length--:n[r]=void 0,n}}else if("finalized"!==n){let s=[...t];return s[r]={...i,[e]:n},s}}return t}({commitmentPropertyName:"sendTransaction"===i?"preflightCommitment":"commitment",optionsObjectPositionInParams:s,overrideCommitment:e,params:n})})}}({defaultCommitment:e?.defaultCommitment,optionsObjectPositionByMethod:r_}))}function rx(e){return function(t,{keyPath:r}){return"number"==typeof t&&Number.isInteger(t)||"bigint"==typeof t?e.some(e=>{if(e.length!==r.length)return!1;for(let t=r.length-1;t>=0;t--){let n=r[t],i=e[t];if(i!==n&&(i!==rb||"number"!=typeof n))return!1}return!0})?Number(t):BigInt(t):t}}function rI(e){var t,r;return t=[rx(e)],r={keyPath:[]},e=>rv(t)(e,r)}var rS=[["data","parsed","info","tokenAmount","decimals"],["data","parsed","info","tokenAmount","uiAmount"],["data","parsed","info","rentExemptReserve","decimals"],["data","parsed","info","rentExemptReserve","uiAmount"],["data","parsed","info","delegatedAmount","decimals"],["data","parsed","info","delegatedAmount","uiAmount"],["data","parsed","info","extensions",rb,"state","olderTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",rb,"state","newerTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",rb,"state","preUpdateAverageRate"],["data","parsed","info","extensions",rb,"state","currentRate"]],rA=[...rS,["data","parsed","info","lastExtendedSlotStartIndex"],["data","parsed","info","slashPenalty"],["data","parsed","info","warmupCooldownRate"],["data","parsed","info","decimals"],["data","parsed","info","numRequiredSigners"],["data","parsed","info","numValidSigners"],["data","parsed","info","stake","delegation","warmupCooldownRate"],["data","parsed","info","exemptionThreshold"],["data","parsed","info","burnPercent"],["data","parsed","info","commission"],["data","parsed","info","votes",rb,"confirmationCount"]],rk=[["index"],["instructions",rb,"accounts",rb],["instructions",rb,"programIdIndex"],["instructions",rb,"stackHeight"]],rT=[["addressTableLookups",rb,"writableIndexes",rb],["addressTableLookups",rb,"readonlyIndexes",rb],["header","numReadonlySignedAccounts"],["header","numReadonlyUnsignedAccounts"],["header","numRequiredSignatures"],["instructions",rb,"accounts",rb],["instructions",rb,"programIdIndex"],["instructions",rb,"stackHeight"]],rC=["getAccountInfo","getBalance","getBlock","getBlockCommitment","getBlockHeight","getBlockProduction","getBlocks","getBlocksWithLimit","getBlockTime","getClusterNodes","getEpochInfo","getEpochSchedule","getFeeForMessage","getFirstAvailableBlock","getGenesisHash","getHealth","getHighestSnapshotSlot","getIdentity","getInflationGovernor","getInflationRate","getInflationReward","getLargestAccounts","getLatestBlockhash","getLeaderSchedule","getMaxRetransmitSlot","getMaxShredInsertSlot","getMinimumBalanceForRentExemption","getMultipleAccounts","getProgramAccounts","getRecentPerformanceSamples","getRecentPrioritizationFees","getSignaturesForAddress","getSignatureStatuses","getSlot","getSlotLeader","getSlotLeaders","getStakeMinimumDelegation","getSupply","getTokenAccountBalance","getTokenAccountsByDelegate","getTokenAccountsByOwner","getTokenLargestAccounts","getTokenSupply","getTransaction","getTransactionCount","getVersion","getVoteAccounts","index","isBlockhashValid","minimumLedgerSlot","requestAirdrop","sendTransaction","simulateTransaction"];function rO(e){return ry(e)&&rC.includes(e.method)}var rP=Object.prototype.toString,rR=Object.keys||function(e){let t=[];for(let r in e)t.push(r);return t};function rD(e){let t=function e(t,r){let n,i,s,a,o,l,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if("toJSON"in t&&"function"==typeof t.toJSON)return e(t.toJSON(),r);if("[object Array]"===(c=rP.call(t))){for(n=0,s="[",i=t.length-1;n<i;n++)s+=e(t[n],!0)+",";return i>-1&&(s+=e(t[n],!0)),s+"]"}if("[object Object]"!==c)return JSON.stringify(t);for(i=(a=rR(t).sort()).length,s="",n=0;n<i;)void 0!==(l=e(t[o=a[n]],!1))&&(s&&(s+=","),s+=JSON.stringify(o)+":"+l),n++;return"{"+s+"}";case"function":case"undefined":return r?null:void 0;case"bigint":return`${t.toString()}n`;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}(e,!1);if(void 0!==t)return""+t}var rN={defaultCommitment:"confirmed",onIntegerOverflow(e,t,r){throw function e(t,r,n){let i="";if("number"==typeof r[0]){let e=r[0]+1,t=e%10,n=e%100;i=1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}else i=`\`${r[0].toString()}\``;let s=r.length>1?r.slice(1).map(e=>"number"==typeof e?`[${e}]`:e).join("."):void 0,a=new ru.g1$(ru.Dze,{argumentLabel:i,keyPath:r,methodName:t,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...void 0!==s?{path:s}:void 0});return(0,ru.rjo)(a,e),a}(e.methodName,t,r)}},rU=globalThis.AbortController;function rB(e,t){var r,n,i,s,a;return r={url:e,...t},n=(0,rg.z)(function(e){let t;let{fromJson:r,headers:n,toJson:i,url:s}=e,a=n&&function(e){let t={};for(let r in e)t[r.toLowerCase()]=e[r];return t}(n);return async function({payload:e,signal:n}){let o=i?i(e):JSON.stringify(e),l={...t,body:o,headers:{...a,accept:"application/json","content-length":o.length.toString(),"content-type":"application/json; charset=utf-8"},method:"POST",signal:n},c=await fetch(s,l);if(!c.ok)throw new ru.g1$(ru.ZVV,{headers:c.headers,message:c.statusText,statusCode:c.status});return r?r(await c.text(),e):await c.json()}}({...{...r,headers:{...!1,...r.headers?function(e){let t={};for(let r in e)t[r.toLowerCase()]=e[r];return t}(r.headers):void 0,"solana-client":"js/5.5.1"}},fromJson:(e,t)=>rO(t)?rd(e):JSON.parse(e),toJson:e=>rO(e)?rp(e):JSON.stringify(e)}),e=>{let t;return async function(r){var n;let{payload:i,signal:s}=r,a=ry(n=i)?rD([n.method,n.params]):void 0;if(void 0===a)return await e(r);if(t||(queueMicrotask(()=>{t=void 0}),t={}),null==t[a]){let n=new rU,i=(async()=>{try{return await e({...r,signal:n.signal})}catch(e){if(e===(h||={}))return;throw e}})();t[a]={abortController:n,numConsumers:0,responsePromise:i}}let o=t[a];if(o.numConsumers++,!s)return await o.responsePromise;{let e=o.responsePromise;return await new Promise((t,r)=>{let n=e=>{s.removeEventListener("abort",n),o.numConsumers-=1,queueMicrotask(()=>{0===o.numConsumers&&o.abortController.abort(h||={})}),r(e.target.reason)};s.addEventListener("abort",n),e.then(t).catch(r).finally(()=>{s.removeEventListener("abort",n)})})}}}),a={api:(s={requestTransformer:rE(rN),responseTransformer:(i={allowedNumericKeyPaths:(d||(d={getAccountInfo:rA.map(e=>["value",...e]),getBlock:[["transactions",rb,"meta","preTokenBalances",rb,"accountIndex"],["transactions",rb,"meta","preTokenBalances",rb,"uiTokenAmount","decimals"],["transactions",rb,"meta","postTokenBalances",rb,"accountIndex"],["transactions",rb,"meta","postTokenBalances",rb,"uiTokenAmount","decimals"],["transactions",rb,"meta","rewards",rb,"commission"],...rk.map(e=>["transactions",rb,"meta","innerInstructions",rb,...e]),...rT.map(e=>["transactions",rb,"transaction","message",...e]),["rewards",rb,"commission"]],getClusterNodes:[[rb,"featureSet"],[rb,"shredVersion"]],getInflationGovernor:[["initial"],["foundation"],["foundationTerm"],["taper"],["terminal"]],getInflationRate:[["foundation"],["total"],["validator"]],getInflationReward:[[rb,"commission"]],getMultipleAccounts:rA.map(e=>["value",rb,...e]),getProgramAccounts:rA.flatMap(e=>[["value",rb,"account",...e],[rb,"account",...e]]),getRecentPerformanceSamples:[[rb,"samplePeriodSecs"]],getTokenAccountBalance:[["value","decimals"],["value","uiAmount"]],getTokenAccountsByDelegate:rS.map(e=>["value",rb,"account",...e]),getTokenAccountsByOwner:rS.map(e=>["value",rb,"account",...e]),getTokenLargestAccounts:[["value",rb,"decimals"],["value",rb,"uiAmount"]],getTokenSupply:[["value","decimals"],["value","uiAmount"]],getTransaction:[["meta","preTokenBalances",rb,"accountIndex"],["meta","preTokenBalances",rb,"uiTokenAmount","decimals"],["meta","postTokenBalances",rb,"accountIndex"],["meta","postTokenBalances",rb,"uiTokenAmount","decimals"],["meta","rewards",rb,"commission"],...rk.map(e=>["meta","innerInstructions",rb,...e]),...rT.map(e=>["transaction","message",...e])],getVersion:[["feature-set"]],getVoteAccounts:[["current",rb,"commission"],["delinquent",rb,"commission"]],simulateTransaction:[["value","loadedAccountsDataSize"],...rA.map(e=>["value","accounts",rb,...e]),...rk.map(e=>["value","innerInstructions",rb,...e])]}),d)},(e,t)=>{let r=t.methodName,n=i?.allowedNumericKeyPaths&&r?i.allowedNumericKeyPaths[r]:void 0;return(0,rg.z)(e,e=>((e,t)=>{if("error"in e){let{error:i}=e;if(i&&"object"==typeof i&&"code"in i&&(-32002===i.code||i.code===-32002n)&&"data"in i&&i.data){var r,n;let e=(r=[rx([["loadedAccountsDataSize"],...rA.map(e=>["accounts",rb,...e]),...rk.map(e=>["innerInstructions",rb,...e])])],n={keyPath:[]},e=>rv(r)(e,n))(i.data,t),s={...i,data:e};throw(0,ru.BjO)(s)}throw(0,ru.BjO)(e.error)}return e})(e,t),e=>e.result,e=>rI(n??[])(e,t))})},new Proxy({},{defineProperty:()=>!1,deleteProperty:()=>!1,get(...e){let[t,r]=e,n=r.toString();return function(...e){let t=Object.freeze({methodName:n,params:e}),r=s?.requestTransformer?s?.requestTransformer(t):t;return Object.freeze({execute:async({signal:e,transport:t})=>{let n=rf(r),i=await t({payload:n,signal:e});return s?.responseTransformer?s.responseTransformer(i,r):i}})}}})),transport:n},new Proxy(a.api,{defineProperty:()=>!1,deleteProperty:()=>!1,get(e,t,r){if("then"!==t)return function(...n){let i=t.toString(),s=Reflect.get(e,i,r);if(!s)throw new ru.g1$(ru.Aij,{method:i,params:n});return function({transport:e},t){return{send:async r=>await t.execute({signal:r?.abortSignal,transport:e})}}(a,s(...n))}}})}var rL=r(85970),rj=globalThis.AbortController,rM=globalThis.EventTarget;function rz(){return Symbol(void 0)}var r$=Symbol();function rF(e){return{on(t,r,n){function i(e){e instanceof CustomEvent?r(e.detail):r()}return e.addEventListener(t,i,n),()=>{e.removeEventListener(t,i)}}}}function rq(e){return null!==e&&("object"==typeof e||"function"==typeof e)}var rW=new WeakMap;async function rV(e){let t;let r=new Promise((r,n)=>{for(let i of(t={reject:n,resolve:r},e)){if(!rq(i)){Promise.resolve(i).then(r,n);continue}let e=rW.get(i);void 0===e?((e=function(e){let t=new Set,r={deferreds:t,settled:!1};return Promise.resolve(e).then(e=>{for(let{resolve:r}of t)r(e);t.clear(),r.settled=!0},e=>{for(let{reject:r}of t)r(e);t.clear(),r.settled=!0}),r}(i)).deferreds.add(t),rW.set(i,e)):e.settled?Promise.resolve(i).then(r,n):e.deferreds.add(t)}});return await r.finally(()=>{for(let r of e)rq(r)&&rW.get(r).deferreds.delete(t)})}var rH=globalThis.AbortController,rK=new WeakMap;function rG(e,t,r){let n;if(void 0===r)return;let i=((n=rK.get(t))||rK.set(t,n={}),n);!i[r]&&e>0&&(i[r]=0);let s=e+i[r];return s<=0?delete i[r]:i[r]=s,s}var rZ=new WeakMap;async function rJ({channel:e,responseTransformer:t,signal:r,subscribeRequest:n,unsubscribeMethodName:i}){let s;e.on("error",()=>{s=void 0,rK.delete(e)},{signal:r});let a=new Promise((t,n)=>{function a(){if(0===rG(-1,e,s)){let t=rf({methodName:i,params:[s]});s=void 0,e.send(t).catch(()=>{})}n(this.reason)}r.aborted?a.call(r):r.addEventListener("abort",a)}),o=rf(n);await e.send(o);let l=new Promise((t,n)=>{let i=new rH;r.addEventListener("abort",i.abort.bind(i));let s={signal:i.signal};e.on("error",e=>{i.abort(),n(e)},s),e.on("message",e=>{e&&"object"==typeof e&&"id"in e&&e.id===o.id&&(i.abort(),"error"in e?n((0,ru.BjO)(e.error)):t(e.result))},s)});if(null==(s=await rV([a,l])))throw new ru.g1$(ru.qXh);rG(1,e,s);let c=function(e,t,r){let n=rZ.get(e);n||rZ.set(e,n=new WeakMap);let i=r??e,s=n.get(i);return s||n.set(i,s=function(e,t,r){let n;let i=new rM,s=rF(i);return{...s,on(a,o,l){n||(n={dispose:e.on(t,e=>{let t=r(e);if(!t)return;let[n,s]=t;i.dispatchEvent(new CustomEvent(n,{detail:s}))}),numSubscribers:0}),n.numSubscribers++;let c=s.on(a,o,l),u=!0;function d(){u&&(u=!1,l?.signal.removeEventListener("abort",d),n.numSubscribers--,0===n.numSubscribers&&(n.dispose(),n=void 0),c())}return l?.signal.addEventListener("abort",d),d}}}(e,"message",e=>{if(!("method"in e))return;let n=r?r(e.params.result,t):e.params.result;return[`notification:${e.params.subscription}`,n]})),s}(e,n,t),u=`notification:${s}`;return{on(t,r,n){switch(t){case"notification":return c.on(u,r,n);case"error":return e.on("error",r,n);default:throw new ru.g1$(ru.RE,{channelName:t,supportedChannelNames:["notification","error"]})}}}}var rY=globalThis.EventTarget,rQ=globalThis.WebSocket,rX={defaultCommitment:"confirmed",onIntegerOverflow(e,t,r){throw function e(t,r,n){let i="";if("number"==typeof r[0]){let e=r[0]+1,t=e%10,n=e%100;i=1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}else i=`\`${r[0].toString()}\``;let s=r.length>1?r.slice(1).map(e=>"number"==typeof e?`[${e}]`:e).join("."):void 0,a=new ru.g1$(ru.Dze,{argumentLabel:i,keyPath:r,methodName:t,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...void 0!==s?{path:s}:void 0});return(0,ru.rjo)(a,e),a}(e.methodName,t,r)}},r0=globalThis.AbortController,r1={jsonrpc:"2.0",method:"ping"};function r2(e){return(0,rg.z)(e,e=>Object.freeze({...e,on:(t,r,n)=>"message"!==t?e.on(t,r,n):e.on("message",e=>r(rd(e)),n)}),e=>Object.freeze({...e,send:t=>e.send(rp(t))}))}function r3(e,t){var r,n;return r=function({createChannel:e}){return(0,rg.z)(async({execute:t,signal:r})=>{let n=await e({abortSignal:r});return await t({channel:n,signal:r})},e=>(function(e){let t=new Map;return function(r){let{request:n,signal:i}=r,s=rD([n.methodName,n.params]),a=t.get(s);if(!a){let n=new r0,i=e({...r,signal:n.signal});i.then(e=>{e.on("error",()=>{t.delete(s),n.abort()},{signal:n.signal})}).catch(()=>{}),t.set(s,a={abortController:n,dataPublisherPromise:i,numSubscribers:0})}return a.numSubscribers++,i.addEventListener("abort",()=>{a.numSubscribers--,0===a.numSubscribers&&queueMicrotask(()=>{0===a.numSubscribers&&(t.delete(s),a.abortController.abort())})},{signal:a.abortController.signal}),a.dataPublisherPromise}})(e))}({createChannel:function(e){if(!1===/^wss?:/i.test(e.url)){let t=e.url.match(/^([^:]+):/);throw new DOMException(t?`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${t[1]}:' is not allowed.`:`Failed to construct 'WebSocket': The URL '${e.url}' is invalid.`)}let{intervalMs:t,...r}=e;return function(e,{maxSubscriptionsPerChannel:t,minChannels:r}){let n={entries:[],freeChannelIndex:-1};function i(){let e;if(n.entries.length<r){n.freeChannelIndex=-1;return}for(let r=0;r<n.entries.length;r++){let i=(n.freeChannelIndex+r+2)%n.entries.length,s=n.entries[i];s.subscriptionCount<t&&(!e||e.subscriptionCount>=s.subscriptionCount)&&(e={poolIndex:i,subscriptionCount:s.subscriptionCount})}n.freeChannelIndex=e?.poolIndex??-1}return function({abortSignal:t}){let r;function s(){let e=n.entries.findIndex(e=>e===r);n.entries.splice(e,1),r.dispose(),i()}if(-1===n.freeChannelIndex){let t=new r0,i=e({abortSignal:t.signal});i.then(e=>{e.on("error",s,{signal:t.signal})}).catch(s),r={channel:i,dispose(){t.abort()},subscriptionCount:0},n.entries.push(r)}else r=n.entries[n.freeChannelIndex];return r.subscriptionCount++,t.addEventListener("abort",function(){r.subscriptionCount--,0===r.subscriptionCount?s():-1!==n.freeChannelIndex&&(n.freeChannelIndex--,i())}),i(),r.channel}}(({abortSignal:n})=>(function({sendBufferHighWatermark:e,signal:t,url:r}){let n,i,s;if(t.aborted)return Promise.reject(t.reason);let a=!1,o=new Set;function l(){o.forEach(e=>{e()}),o.clear()}function c(){l(),a||i(t.reason),y.readyState!==rQ.CLOSED&&y.readyState!==rQ.CLOSING&&y.close(1e3)}function u(e){if(!t.aborted&&!a){let t=new ru.g1$(ru.Gxb,{errorEvent:e});i(t),h.dispatchEvent(new CustomEvent("error",{detail:t}))}}function d(e){t.aborted||h.dispatchEvent(new CustomEvent("message",{detail:e.data}))}let h=new rY,f=rF(h);function p(){a=!0,s({...f,async send(t){if(y.readyState!==rQ.OPEN)throw new ru.g1$(ru.JY_);if(!n&&y.bufferedAmount>e){let t;let r=new Promise((r,i)=>{let s=setInterval(()=>{y.readyState===rQ.OPEN&&y.bufferedAmount>e||(clearInterval(s),n=void 0,r())},16);t=()=>{n=void 0,clearInterval(s),i(new ru.g1$(ru.HmQ))}});n={onCancel:t,promise:r}}n&&(!ArrayBuffer.isView(t)||t instanceof DataView||(t=new t.constructor(t)),await n.promise),y.send(t)}})}let y=new rQ(r);return t.addEventListener("abort",c),y.addEventListener("close",function e(r){l(),n?.onCancel(),t.removeEventListener("abort",c),y.removeEventListener("close",e),y.removeEventListener("error",u),y.removeEventListener("message",d),y.removeEventListener("open",p),t.aborted||r.wasClean&&1e3===r.code||h.dispatchEvent(new CustomEvent("error",{detail:new ru.g1$(ru.JY_,{cause:r})}))}),y.addEventListener("error",u),y.addEventListener("message",d),y.addEventListener("open",p),new Promise((e,t)=>{i=t,s=e})})({...r,sendBufferHighWatermark:e.sendBufferHighWatermark??131072,signal:n}).then(e.jsonSerializer).then(e=>(function({abortSignal:e,channel:t,intervalMs:r}){let n;function i(){t.send(r1).catch(e=>{(0,ru.bvN)(e,ru.JY_)&&a.abort()})}function s(){clearInterval(n),n=setInterval(i,r)}let a=new r0;return a.signal.addEventListener("abort",()=>{clearInterval(n)}),e.addEventListener("abort",()=>{a.abort()}),t.on("error",()=>{a.abort()},{signal:a.signal}),t.on("message",s,{signal:a.signal}),globalThis.navigator.onLine&&s(),globalThis.addEventListener("offline",function(){clearInterval(n)},{signal:a.signal}),globalThis.addEventListener("online",function(){i(),s()},{signal:a.signal}),{...t,send:(...e)=>(a.signal.aborted||s(),t.send(...e))}})({abortSignal:n,channel:e,intervalMs:t??5e3})),{maxSubscriptionsPerChannel:e.maxSubscriptionsPerChannel??100,minChannels:e.minChannels??1})}({...{...t,url:e},jsonSerializer:r2})}),n={api:function(e){var t,r;let n=rE(e),i=(t={allowedNumericKeyPaths:(p||(p={accountNotifications:rA.map(e=>["value",...e]),blockNotifications:[["value","block","transactions",rb,"meta","preTokenBalances",rb,"accountIndex"],["value","block","transactions",rb,"meta","preTokenBalances",rb,"uiTokenAmount","decimals"],["value","block","transactions",rb,"meta","postTokenBalances",rb,"accountIndex"],["value","block","transactions",rb,"meta","postTokenBalances",rb,"uiTokenAmount","decimals"],["value","block","transactions",rb,"meta","rewards",rb,"commission"],["value","block","transactions",rb,"meta","innerInstructions",rb,"index"],["value","block","transactions",rb,"meta","innerInstructions",rb,"instructions",rb,"programIdIndex"],["value","block","transactions",rb,"meta","innerInstructions",rb,"instructions",rb,"accounts",rb],["value","block","transactions",rb,"transaction","message","addressTableLookups",rb,"writableIndexes",rb],["value","block","transactions",rb,"transaction","message","addressTableLookups",rb,"readonlyIndexes",rb],["value","block","transactions",rb,"transaction","message","instructions",rb,"programIdIndex"],["value","block","transactions",rb,"transaction","message","instructions",rb,"accounts",rb],["value","block","transactions",rb,"transaction","message","header","numReadonlySignedAccounts"],["value","block","transactions",rb,"transaction","message","header","numReadonlyUnsignedAccounts"],["value","block","transactions",rb,"transaction","message","header","numRequiredSignatures"],["value","block","rewards",rb,"commission"]],programNotifications:rA.flatMap(e=>[["value",rb,"account",...e],[rb,"account",...e]])}),p)},(e,r)=>{let n=r.methodName,i=t?.allowedNumericKeyPaths&&n?t.allowedNumericKeyPaths[n]:void 0;return(0,rg.z)(e,e=>rI(i??[])(e,r))});return r={planExecutor:({request:e,...t})=>rJ({...t,responseTransformer:i,subscribeRequest:{...e,methodName:e.methodName.replace(/Notifications$/,"Subscribe")},unsubscribeMethodName:e.methodName.replace(/Notifications$/,"Unsubscribe")}),requestTransformer:n},new Proxy({},{defineProperty:()=>!1,deleteProperty:()=>!1,get(...e){let[t,n]=e,i=n.toString();return function(...e){let t={methodName:i,params:e},n=r.requestTransformer?r.requestTransformer(t):t;return{execute:e=>r.planExecutor({...e,request:n}),request:n}}}})}(rX),transport:r},new Proxy(n.api,{defineProperty:()=>!1,deleteProperty:()=>!1,get(e,t,r){if("then"!==t)return function(...i){var s;let a=t.toString(),o=Reflect.get(e,a,r);if(!o)throw new ru.g1$(ru.YvZ,{notificationName:a});let l=o(...i);return s=n.transport,{async subscribe({abortSignal:e}){let t=await s({signal:e,...l});return function({abortSignal:e,dataChannelName:t,dataPublisher:r,errorChannelName:n}){let i=new Map;function s(e){for(let[t,r]of i.entries())r.__hasPolled?(i.delete(t),r.onError(e)):r.publishQueue.push({__type:1,err:e})}let a=new rj;e.addEventListener("abort",()=>{a.abort(),s(f||=rz())});let o={signal:a.signal},l=r$;return r.on(n,e=>{l===r$&&(l=e,a.abort(),s(e))},o),r.on(t,e=>{i.forEach((t,r)=>{if(t.__hasPolled){let{onData:n}=t;i.set(r,{__hasPolled:!1,publishQueue:[]}),n(e)}else t.publishQueue.push({__type:0,data:e})})},o),{async *[Symbol.asyncIterator](){if(e.aborted)return;if(l!==r$)throw l;let t=Symbol();i.set(t,{__hasPolled:!1,publishQueue:[]});try{for(;;){let e=i.get(t);if(!e)throw new ru.g1$(ru.XsN);if(e.__hasPolled)throw new ru.g1$(ru.ybQ);let r=e.publishQueue;try{if(r.length)for(let t of(e.publishQueue=[],r))if(0===t.__type)yield t.data;else throw t.err;else yield await new Promise((e,r)=>{i.set(t,{__hasPolled:!0,onData:e,onError:r})})}catch(e){if(e===(f||=rz()))return;throw e}}}finally{i.delete(t)}}}}({abortSignal:e,dataChannelName:"notification",dataPublisher:t,errorChannelName:"error"})}}}}})}var r5=r(77828),r8=r(49437),r6=r(12888),r4=r(97110),r9=r(96894);r(82957).lW,eH([eM().transform(e=>e.replace(/[^0-9.-]+/g,"")),ez()]).pipe(({string:e=>et.create({...e,coerce:!0}),number:e=>er.create({...e,coerce:!0}),boolean:e=>ei.create({...e,coerce:!0}),bigint:e=>en.create({...e,coerce:!0}),date:e=>es.create({...e,coerce:!0})}).number().min(1e-4).max(999999999));var r7=eJ(["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","solana-devnet","solana","sei","sei-testnet","polygon","polygon-amoy","peaq","story","educhain","skale-base-sepolia"]),ne=new Map([["abstract",2741],["abstract-testnet",11124],["base-sepolia",84532],["base",8453],["avalanche-fuji",43113],["avalanche",43114],["iotex",4689],["sei",1329],["sei-testnet",1328],["polygon",137],["polygon-amoy",80002],["peaq",3338],["story",1514],["educhain",41923],["skale-base-sepolia",324705682]]),nt=["solana-devnet","solana"];Object.fromEntries(["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","sei","sei-testnet","polygon","polygon-amoy","peaq","story","educhain","skale-base-sepolia",...nt].map(e=>[ne.get(e),e]));var nr={id:324705682,name:"SKALE Base Sepolia",nativeCurrency:{name:"Credits",symbol:"CREDITS",decimals:18},rpcUrls:{default:{http:["https://base-sepolia-testnet.skalenodes.com/v1/jubilant-horrible-ancha"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia-testnet-explorer.skalenodes.com",apiUrl:"https://base-sepolia-testnet-explorer.skalenodes.com/api"}}};function nn(e){let t=nd(e);return(0,eY.v)({chain:t,transport:(0,eQ.d)()}).extend(eX.I)}function ni(){return nn("base-sepolia")}function ns(){return nn("avalanche-fuji")}function na(e,t){let r=nd(e),n=(0,e0.K)({chain:r,transport:(0,eQ.d)(),account:function(e,t={}){let{nonceManager:r}=t,n=(0,e5.NC)(tN.secp256k1.getPublicKey(e.slice(2),!1));return{...function(e){if("string"==typeof e){if(!(0,tl.U)(e,{strict:!1}))throw new ts.b({address:e});return{address:e,type:"json-rpc"}}if(!(0,tl.U)(e.address,{strict:!1}))throw new ts.b({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:(0,tU.y)(n),nonceManager:r,sign:async({hash:t})=>tj({hash:t,privateKey:e,to:"hex"}),signAuthorization:async t=>tz({...t,privateKey:e}),signMessage:async({message:t})=>tF({message:t,privateKey:e}),signTransaction:async(t,{serializer:r}={})=>tW({privateKey:e,transaction:t,serializer:r}),signTypedData:async t=>tH({...t,privateKey:e})}),publicKey:n,source:"privateKey"}}(t)});return nf(r)?n.extend(eX.I).extend(e=>({sendTransaction:t=>ro(e,t),signTransaction:t=>ri(e,t),deployContract:t=>(function(e,t){let{abi:r,args:n,bytecode:i,deploymentType:s,salt:a,...o}=t,l=function(e){let{abi:t,args:r,bytecode:n,deploymentType:i,salt:s}=e;if(!r||0===r.length){let{functionName:e,argsContractDeployer:t}=t0(i,s??tG.Z,(0,e5.NC)(tm(n)),"0x");return(0,tY.R)({abi:tQ,functionName:e,args:t})}let a=t.find(e=>"type"in e&&"constructor"===e.type);if(!a)throw new tZ.fM({docsPath:tX});if(!("inputs"in a)||!a.inputs||0===a.inputs.length)throw new tZ.cO({docsPath:tX});let o=(0,tJ.E)(a.inputs,r),{functionName:l,argsContractDeployer:c}=t0(i,s??tG.Z,(0,e5.NC)(tm(n)),o);return(0,tY.R)({abi:tQ,functionName:l,args:c})}({abi:r,args:n,bytecode:i,deploymentType:s,salt:a});return o.factoryDeps=o.factoryDeps||[],o.factoryDeps.includes(i)||o.factoryDeps.push(i),rs(e,{...o,data:l,to:"create2"===s||"create2Account"===s?"0x0000000000000000000000000000000000010000":"0x0000000000000000000000000000000000008006"})})(e,t),writeContract:t=>(0,tK.n)(Object.assign(e,{sendTransaction:t=>ro(e,t)}),t)})):n.extend(eX.I)}function no(e){return na("base-sepolia",e)}function nl(e){return na("avalanche-fuji",e)}function nc(e){return"object"==typeof e&&null!==e&&"chain"in e&&"transport"in e}function nu(e){return"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.type&&"function"==typeof e.sign&&"function"==typeof e.signMessage&&"function"==typeof e.signTypedData&&"function"==typeof e.signTransaction}function nd(e){if(!e)throw Error("NETWORK environment variable is not set");switch(e){case"abstract":return tv;case"abstract-testnet":return tw;case"base":return t_.u;case"base-sepolia":return tE.L;case"avalanche":return tx;case"avalanche-fuji":return tI;case"sei":return tS;case"sei-testnet":return tA;case"polygon":return tk;case"polygon-amoy":return tT;case"peaq":return tC;case"story":return tO;case"educhain":return tP;case"iotex":return tR;case"iotex-testnet":return tD;case"skale-base-sepolia":return nr;default:throw Error(`Unsupported network: ${e}`)}}var nh=new Set([2741,11124]);function nf(e){return nh.has(e.id)}function np(e){return rB(e?(0,rL.$9)(e):(0,rL.$9)("https://api.devnet.solana.com"))}function ny(e){return rB(e?(0,rL.RJ)(e):(0,rL.RJ)("https://api.mainnet-beta.solana.com"))}function ng(e,t){if("solana-devnet"===e)return np(t);if("solana"===e)return ny(t);throw Error("Invalid network")}function nm(e,t){if("solana-devnet"===e)return r3((0,rL.$9)(t?nb(t):"wss://api.devnet.solana.com"));if("solana"===e)return r3((0,rL.RJ)(t?nb(t):"wss://api.mainnet-beta.solana.com"));throw Error("Invalid network")}function nb(e){return e.startsWith("http")?e.replace("http","ws"):e}function nv(e){if(!nt.find(t=>t===e))throw Error(`Unsupported SVM network: ${e}`);return ng(e)}async function nw(e){let t=rc.Jq.decode(e);if(64===t.length)return await (0,rl.Lh)(t);if(32===t.length)return await (0,rl.f1)(t);throw Error(`Unexpected key length: ${t.length}. Expected 32 or 64 bytes.`)}function n_(e){return"object"==typeof e&&null!==e&&(0,rl.he)(e)}g({},{authorizationPrimaryType:()=>nx,authorizationTypes:()=>nE,config:()=>m,createClientAvalancheFuji:()=>ns,createClientSepolia:()=>ni,createConnectedClient:()=>nn,createSigner:()=>na,createSignerAvalancheFuji:()=>nl,createSignerSepolia:()=>no,getChainFromNetwork:()=>nd,isAccount:()=>nu,isSignerWallet:()=>nc,isZkStackChain:()=>nf,usdcABI:()=>b});var nE={TransferWithAuthorization:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"validAfter",type:"uint256"},{name:"validBefore",type:"uint256"},{name:"nonce",type:"bytes32"}]},nx="TransferWithAuthorization";g({},{SvmAddressRegex:()=>nI});var nI=/^[1-9A-HJ-NP-Za-km-z]{32,44}$/,nS=/^0x[0-9a-fA-F]{40}$/,nA=/^0x[a-fA-F0-9]{40}|[A-Za-z0-9][A-Za-z0-9-]{0,34}[A-Za-z0-9]$/,nk=["exact"],nT=[1],nC=["insufficient_funds","invalid_exact_evm_payload_authorization_valid_after","invalid_exact_evm_payload_authorization_valid_before","invalid_exact_evm_payload_authorization_value","invalid_exact_evm_payload_signature","invalid_exact_evm_payload_undeployed_smart_wallet","invalid_exact_evm_payload_recipient_mismatch","invalid_exact_svm_payload_transaction","invalid_exact_svm_payload_transaction_amount_mismatch","invalid_exact_svm_payload_transaction_create_ata_instruction","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_payee","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_asset","invalid_exact_svm_payload_transaction_instructions","invalid_exact_svm_payload_transaction_instructions_length","invalid_exact_svm_payload_transaction_instructions_compute_limit_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction_too_high","invalid_exact_svm_payload_transaction_instruction_not_spl_token_transfer_checked","invalid_exact_svm_payload_transaction_instruction_not_token_2022_transfer_checked","invalid_exact_svm_payload_transaction_fee_payer_included_in_instruction_accounts","invalid_exact_svm_payload_transaction_fee_payer_transferring_funds","invalid_exact_svm_payload_transaction_not_a_transfer_instruction","invalid_exact_svm_payload_transaction_receiver_ata_not_found","invalid_exact_svm_payload_transaction_sender_ata_not_found","invalid_exact_svm_payload_transaction_simulation_failed","invalid_exact_svm_payload_transaction_transfer_to_incorrect_ata","invalid_network","invalid_payload","invalid_payment_requirements","invalid_scheme","invalid_payment","payment_expired","unsupported_scheme","invalid_x402_version","invalid_transaction_state","invalid_x402_version","settle_exact_svm_block_height_exceeded","settle_exact_svm_transaction_confirmation_timed_out","unsupported_scheme","unexpected_settle_error","unexpected_verify_error"],nO=e=>Number.isInteger(Number(e))&&Number(e)>=0,nP=eM().regex(nS).or(eM().regex(nI)),nR=eM().regex(nA).or(eM().regex(nI)),nD=eV({scheme:eJ(nk),network:r7,maxAmountRequired:eM().refine(nO),resource:eM().url(),description:eM(),mimeType:eM(),outputSchema:eG(eq()).optional(),payTo:nP,maxTimeoutSeconds:ez().int(),asset:nR,extra:eG(eq()).optional()}),nN=eV({from:eM().regex(nS),to:eM().regex(nS),value:eM().refine(nO).refine(e=>e.length<=18),validAfter:eM().refine(nO),validBefore:eM().refine(nO),nonce:eM().regex(/^0x[0-9a-fA-F]{64}$/)}),nU=eV({signature:eM().regex(/^0x[0-9a-fA-F]+$/),authorization:nN}),nB=eV({transaction:eM().regex(/^[A-Za-z0-9+/]*={0,2}$/)}),nL=eV({x402Version:ez().refine(e=>nT.includes(e)),scheme:eJ(nk),network:r7,payload:eH([nU,nB])});eV({x402Version:ez().refine(e=>nT.includes(e)),error:eJ(nC).optional(),accepts:eW(nD).optional(),payer:eM().regex(nA).optional()});var nj=eJ(["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"]);eK("type",[eV({type:eZ("http"),method:nj,queryParams:eG(eM(),eM()).optional(),bodyType:eJ(["json","form-data","multipart-form-data","text","binary"]).optional(),bodyFields:eG(eM(),eq()).optional(),headerFields:eG(eM(),eq()).optional()})]);var nM=eV({resource:eM(),type:eJ(["http"]),x402Version:ez().refine(e=>nT.includes(e)),accepts:eW(nD),lastUpdated:eF(),metadata:eG(eq()).optional()});eV({paymentPayload:nL,paymentRequirements:nD}),eV({paymentPayload:nL,paymentRequirements:nD}),eV({isValid:e$(),invalidReason:eJ(nC).optional(),payer:nP.optional()}),eV({success:e$(),errorReason:eJ(nC).optional(),payer:nP.optional(),transaction:eM().regex(nA),network:r7}),eV({type:eM().optional(),limit:ez().optional(),offset:ez().optional()}),eV({x402Version:ez().refine(e=>nT.includes(e)),items:eW(nM),pagination:eV({limit:ez(),offset:ez(),total:ez()})});var nz=eV({x402Version:ez().refine(e=>nT.includes(e)),scheme:eJ(nk),network:r7,extra:eG(eq()).optional()});function n$(e){try{let t=(0,r5.tA)().encode(e.transaction);return(0,r8.x7)().decode(t)}catch(e){throw console.error("error",e),Error("invalid_exact_svm_payload_transaction")}}function nF(e){let t=(0,r6.o$)().decode(e.messageBytes),r=t.staticAccounts??[];for(let e of t.instructions??[]){let t=r[e.programAddressIndex].toString();if(t===r4.GFT.toString()||t===r9.ktG.toString()){let t=e.accountIndices??[];if(t.length>=4){let e=r[t[3]].toString();if(e)return e}}}return""}async function nq(e,t,r){let n=await nW(e,t),i=(0,r8.oU)(n);return await r.simulateTransaction(i,{sigVerify:!0,replaceRecentBlockhash:!1,commitment:"confirmed",encoding:"base64",accounts:void 0,innerInstructions:void 0,minContextSlot:void 0}).send()}async function nW(e,t){if((0,rl.Db)(e)){let[r]=await e.modifyAndSignTransactions([t]);if(!r)throw Error("transaction_signer_failed_to_return_transaction");return r}if((0,rl.Aq)(e)){let[r]=await e.signTransactions([t]);if(!r)throw Error("transaction_signer_failed_to_return_signatures");return Object.freeze({...t,signatures:Object.freeze({...t.signatures,...r})})}throw Error("transaction_signer_must_support_offline_signing")}eV({kinds:eW(nz)}),g({},{createDevnetRpcClient:()=>np,createMainnetRpcClient:()=>ny,createSignerFromBase58:()=>nw,createSvmConnectedClient:()=>nv,decodeTransactionFromPayload:()=>n$,getRpcClient:()=>ng,getRpcSubscriptions:()=>nm,getTokenPayerFromTransaction:()=>nF,isSignerWallet:()=>n_,signAndSimulateTransaction:()=>nq,signTransactionWithSigner:()=>nW}),eV({paymentHeader:eM(),paymentRequirements:nD})}}]);