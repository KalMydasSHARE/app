(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5444],{89807:function(e,s,r){Promise.resolve().then(r.bind(r,36662))},36662:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(57437),n=r(59535),a=r(27648),l=r(31620),i=r(93448),d=r(87084),o=r(85549),c=r(89416),x=r(81460);function m(){var e,s,r;let{authenticated:m,login:u,user:h}=(0,n.a)(),{address:b}=(0,o.m)(),{isValid:f,daysRemaining:g,isLoading:p}=(0,d.XJ)(),{balance:v}=(0,d.hs)(),j=v?Number(v)/1e6:0,{data:N,isLoading:y}=(0,c.u)({address:l.qE.poolManager,abi:l.Vn,functionName:"userPortfolio",args:b?[b]:void 0,chainId:x.L.id,query:{enabled:!!b,staleTime:12e4}}),w=l.D.map(e=>{let s=0,r=0;if(N){let[t,n,a]=N,l=t.findIndex(s=>s===e.id);l>=0&&(s=Number(n[l])/1e6,r=Number(a[l])/1e6)}return{...e,shares:s,value:r}}),F=w.reduce((e,s)=>e+s.value,0),k=y||p;return m?(0,t.jsx)("div",{className:"min-h-screen py-8 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-8",children:"Mon Portefeuille"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-5 sm:p-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Valeur totale"}),(0,t.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-mono",children:k?"...":(0,i.ZP)(F)})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-5 sm:p-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Solde USDC"}),(0,t.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-mono",children:(0,i.ZP)(j)})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-5 sm:p-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Strat\xe9gies actives"}),(0,t.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-mono",children:k?"...":w.filter(e=>e.shares>0).length})]})]}),(0,t.jsx)("div",{className:"rounded-2xl border border-indigo-500/30 bg-[var(--card-bg)] p-5 sm:p-6 mb-8",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-1",children:"Abonnement KAL"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Un abonnement actif est n\xe9cessaire pour investir dans les strat\xe9gies."})]}),(0,t.jsx)("div",{className:"text-left sm:text-right",children:p?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Chargement..."}):f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-green-400 font-medium",children:"Actif"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g," jours restants"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-red-400 font-medium",children:"Aucun abonnement"}),(0,t.jsx)(a.default,{href:"/access-pass",className:"mt-2 inline-block px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white text-sm font-semibold transition",children:"Souscrire"})]})})]})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mes investissements"}),k?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-12 text-center",children:(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"Chargement..."})}):w.every(e=>0===e.shares)?(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-12 text-center",children:[(0,t.jsx)("p",{className:"text-gray-500 text-lg mb-4",children:"Vous n'avez aucun investissement actif"}),(0,t.jsx)(a.default,{href:"/",className:"inline-block px-6 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold transition",children:"Explorer les strat\xe9gies"})]}):(0,t.jsx)("div",{className:"space-y-4",children:w.filter(e=>e.shares>0).map(e=>(0,t.jsx)(a.default,{href:"/pool/".concat(e.id),children:(0,t.jsxs)("div",{className:"rounded-xl border border-[var(--card-border)] bg-[var(--card-bg)] p-5 hover:border-indigo-500/50 transition cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:e.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold",children:e.name}),(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"".concat(e.riskColor,"20"),color:e.riskColor},children:e.riskLevel})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-bold font-mono",children:(0,i.ZP)(e.value)}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 font-mono",children:[e.shares.toFixed(2)," parts"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-[var(--card-border)]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Valeur"}),(0,t.jsx)("p",{className:"text-sm font-semibold font-mono",children:(0,i.ZP)(e.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Rendement / an"}),(0,t.jsxs)("p",{className:"text-sm font-semibold font-mono text-green-400",children:[e.targetAPY,"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Parts"}),(0,t.jsx)("p",{className:"text-sm font-semibold font-mono",children:e.shares.toFixed(4)})]})]})]})},e.id))}),(0,t.jsxs)("div",{className:"mt-8 rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-3",children:"Mon compte"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(null==h?void 0:null===(e=h.google)||void 0===e?void 0:e.name)&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Nom"}),(0,t.jsx)("span",{children:h.google.name})]}),(null==h?void 0:null===(s=h.email)||void 0===s?void 0:s.address)&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Email"}),(0,t.jsx)("span",{children:h.email.address})]}),(null==h?void 0:null===(r=h.wallet)||void 0===r?void 0:r.address)&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Identifiant"}),(0,t.jsxs)("span",{className:"font-mono text-xs",children:[h.wallet.address.slice(0,6),"...",h.wallet.address.slice(-4)]})]})]})]})]})}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Mon Portefeuille"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"Connectez-vous pour voir vos investissements"})]}),(0,t.jsx)("button",{onClick:u,className:"px-8 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold transition",children:"Connexion"})]})}},59535:function(e,s,r){"use strict";r.d(s,{a:function(){return n}});var t=r(60716);function n(){try{return(0,t.u)()}catch(e){return{ready:!0,authenticated:!1,login:()=>{},logout:()=>{},user:null}}}},93448:function(e,s,r){"use strict";function t(e){let s="bigint"==typeof e?Number(e)/1e6:e;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}function n(e){let s="bigint"==typeof e?Number(e)/1e6:e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}).format(s)}function a(e){let s=parseFloat(e);return isNaN(s)||s<0?BigInt(0):BigInt(Math.floor(1e6*s))}function l(e){return e>0?"text-green-400":e<0?"text-red-400":"text-gray-400"}function i(e){let s=parseFloat(e);if(isNaN(s)||s<=0)return BigInt(0);let[r="0",t=""]=e.split(".");return BigInt(r+t.padEnd(18,"0").slice(0,18))}r.d(s,{AF:function(){return l},F:function(){return a},Fr:function(){return i},ZP:function(){return t},rK:function(){return n}})}},function(e){e.O(0,[9789,447,716,7648,7084,2971,2117,1744],function(){return e(e.s=89807)}),_N_E=e.O()}]);