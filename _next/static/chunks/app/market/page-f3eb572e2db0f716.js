(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3828],{46735:function(e,t,s){Promise.resolve().then(s.bind(s,67307))},67307:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(57437),r=s(2265),a=s(93448),i=s(87084),o=s(59535),c=s(31620),l=s(68354);function d(){let{authenticated:e,login:t}=(0,o.a)(),[s,d]=(0,r.useState)("buy"),[u,x]=(0,r.useState)(""),[m,h]=(0,r.useState)("idle"),[g,p]=(0,r.useState)(""),{price:b}=(0,i.OJ)(),{balance:f,refetch:v}=(0,i.hs)(),{balance:j,refetch:N}=(0,i.uy)(),y=b?Number(b)/1e6:0,w=f?Number(f)/1e6:0,L=j?Number(j)/1e18:0,{approve:C,isSuccess:S,error:A,isPending:E,isConfirming:P,reset:k}=(0,l.uG)(),{approve:q,isSuccess:I,error:K,isPending:F,isConfirming:R,reset:M}=(0,l.ed)(),{swap:O,isSuccess:z,error:Z,hash:V,isPending:_,isConfirming:B,reset:D}=(0,l.ip)(),{swap:U,isSuccess:G,error:T,hash:$,isPending:H,isConfirming:J,reset:X}=(0,l.Gj)(),Y=parseFloat(u)||0,Q="buy"===s?V:$;(0,r.useEffect)(()=>{S&&"approving"===m&&"buy"===s&&(h("swapping"),O((0,a.F)(u),BigInt(0)))},[S,m,s]),(0,r.useEffect)(()=>{z&&"swapping"===m&&(h("success"),v(),N())},[z,m]),(0,r.useEffect)(()=>{I&&"approving"===m&&"sell"===s&&(h("swapping"),U((0,a.Fr)(u),BigInt(0)))},[I,m,s]),(0,r.useEffect)(()=>{G&&"swapping"===m&&(h("success"),v(),N())},[G,m]),(0,r.useEffect)(()=>{let e=A||K;if(e&&"approving"===m){var t;p((null===(t=e.message)||void 0===t?void 0:t.slice(0,120))||"Erreur lors de l'approbation"),h("error")}},[A,K,m]),(0,r.useEffect)(()=>{let e=Z||T;if(e&&"swapping"===m){var t;p((null===(t=e.message)||void 0===t?void 0:t.slice(0,120))||"Erreur lors de l'\xe9change"),h("error")}},[Z,T,m]);let W=()=>{h("idle"),x(""),p(""),k(),M(),D(),X()},ee="approving"===m||"swapping"===m,et=E||F||_||H,es=P||R||B||J;return(0,n.jsx)("div",{className:"max-w-lg mx-auto",children:(0,n.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:"\xc9changer"}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Achetez ou vendez des jetons KAL instantan\xe9ment via la bonding curve."}),(0,n.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,n.jsx)("button",{onClick:()=>{d("buy"),W()},disabled:ee,className:"flex-1 py-2 rounded-lg text-sm font-medium transition ".concat("buy"===s?"bg-green-600 text-white":"bg-[var(--background)] text-gray-400 hover:text-white"),children:"Acheter KAL"}),(0,n.jsx)("button",{onClick:()=>{d("sell"),W()},disabled:ee,className:"flex-1 py-2 rounded-lg text-sm font-medium transition ".concat("sell"===s?"bg-red-600 text-white":"bg-[var(--background)] text-gray-400 hover:text-white"),children:"Vendre KAL"})]}),e&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-3 mb-4 flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:"buy"===s?"Solde USDC":"Solde KAL"}),(0,n.jsx)("span",{className:"text-sm font-bold font-mono",children:"buy"===s?(0,a.ZP)(w):"".concat(L.toFixed(4)," KAL")})]}),"success"===m&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"✅"}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:"\xc9change r\xe9ussi"}),(0,n.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"buy"===s?"".concat((0,a.ZP)(Y)," \xe9chang\xe9s en KAL"):"".concat(Y," KAL vendus")}),Q&&(0,n.jsx)("a",{href:"https://sepolia.basescan.org/tx/".concat(Q),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 text-xs hover:underline",children:"Voir la transaction"}),(0,n.jsx)("button",{onClick:W,className:"mt-6 w-full py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition",children:"Nouvel \xe9change"})]}),"error"===m&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"❌"}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Erreur"}),(0,n.jsx)("p",{className:"text-red-400 text-xs mb-4",children:g}),(0,n.jsx)("button",{onClick:W,className:"w-full py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition",children:"R\xe9essayer"})]}),("idle"===m||ee)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative mb-2",children:[(0,n.jsx)("input",{type:"number",value:u,onChange:e=>x(e.target.value),placeholder:"0.00",min:"1",disabled:ee,className:"w-full bg-[var(--background)] border border-[var(--card-border)] rounded-xl px-4 py-4 text-2xl font-bold text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition disabled:opacity-50"}),(0,n.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"buy"===s?"$":"KAL"})]}),Y>0&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-4 my-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"buy"===s?"Vous payez":"Vous vendez"}),(0,n.jsx)("span",{className:"font-mono",children:"buy"===s?(0,a.ZP)(Y):"".concat(Y.toLocaleString()," KAL")})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Vous recevez"}),(0,n.jsx)("span",{className:"font-bold font-mono text-green-400",children:"buy"===s?"~".concat(y>0?(Y/y).toFixed(6):"0"," KAL"):(0,a.ZP)(Y*y)})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Prix KAL"}),(0,n.jsx)("span",{className:"font-mono",children:(0,a.ZP)(y)})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Frais"}),(0,n.jsx)("span",{children:"0.3%"})]})]}),ee&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat("approving"===m?"bg-indigo-600 animate-pulse":"bg-green-600"),children:"approving"===m?"1":"✓"}),(0,n.jsx)("span",{className:"text-sm ".concat("approving"===m?"text-white":"text-gray-400"),children:et?"Confirmez dans votre wallet...":es&&"approving"===m?"Approbation en cours...":"Approbation ".concat("buy"===s?"USDC":"KAL")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat("swapping"===m?"bg-indigo-600 animate-pulse":"bg-gray-700"),children:"2"}),(0,n.jsx)("span",{className:"text-sm ".concat("swapping"===m?"text-white":"text-gray-500"),children:et&&"swapping"===m?"Confirmez dans votre wallet...":es&&"swapping"===m?"\xc9change en cours...":"\xc9change"})]})]}),(0,n.jsx)("button",{onClick:e?()=>{if(e&&!(Y<=0)){if(h("approving"),p(""),k(),M(),D(),X(),"buy"===s){let e=(0,a.F)(u);C(c.qE.kalSwap,e)}else{let e=(0,a.Fr)(u);q(c.qE.kalSwap,e)}}}:t,disabled:e&&(Y<=0||ee),className:"w-full py-4 rounded-xl font-bold text-lg transition ".concat(e&&(!(Y>0)||ee)?"bg-gray-800 text-gray-500 cursor-not-allowed":"buy"===s?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white":"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white"),children:ee?"Transaction en cours...":e?Y<=0?"Entrez un montant":"buy"===s?"Acheter KAL":"Vendre KAL":"Se connecter"})]})]})})}function u(){let{authenticated:e,login:t}=(0,o.a)(),[s,d]=(0,r.useState)(""),[u,x]=(0,r.useState)("idle"),[m,h]=(0,r.useState)("idle"),[g,p]=(0,r.useState)("idle"),[b,f]=(0,r.useState)(""),{price:v}=(0,i.OJ)(),{pendingRewards:j}=(0,i.$C)(),{balance:N,refetch:y}=(0,i.hs)(),{balance:w,refetch:L}=(0,i.s8)(),C=v?Number(v)/1e6:0,S=j?Number(j)/1e18:0,A=N?Number(N)/1e6:0,E=w?Number(w)/1e18:0,P=parseFloat(s)||0,k=P>=10,{approve:q,isSuccess:I,error:K,isPending:F,isConfirming:R,reset:M}=(0,l.uG)(),{addLiquidity:O,isSuccess:z,error:Z,hash:V,isPending:_,isConfirming:B,reset:D}=(0,l.X1)(),{removeLiquidity:U,isSuccess:G,error:T,hash:$,isPending:H,isConfirming:J,reset:X}=(0,l.ZS)(),{claim:Y,isSuccess:Q,error:W,hash:ee,isPending:et,isConfirming:es,reset:en}=(0,l.cp)();(0,r.useEffect)(()=>{I&&"approving"===u&&(x("adding"),O((0,a.F)(s),BigInt(0)))},[I,u]),(0,r.useEffect)(()=>{z&&"adding"===u&&(x("success"),y(),L())},[z,u]),(0,r.useEffect)(()=>{Q&&"claiming"===m&&h("success")},[Q,m]),(0,r.useEffect)(()=>{G&&"removing"===g&&(p("success"),y(),L())},[G,g]),(0,r.useEffect)(()=>{if(K&&"approving"===u){var e;f((null===(e=K.message)||void 0===e?void 0:e.slice(0,120))||"Erreur lors de l'approbation"),x("error")}},[K,u]),(0,r.useEffect)(()=>{if(Z&&"adding"===u){var e;f((null===(e=Z.message)||void 0===e?void 0:e.slice(0,120))||"Erreur lors de l'ajout de liquidit\xe9"),x("error")}},[Z,u]),(0,r.useEffect)(()=>{if(W&&"claiming"===m){var e;f((null===(e=W.message)||void 0===e?void 0:e.slice(0,120))||"Erreur lors de la r\xe9clamation"),h("error")}},[W,m]),(0,r.useEffect)(()=>{if(T&&"removing"===g){var e;f((null===(e=T.message)||void 0===e?void 0:e.slice(0,120))||"Erreur lors du retrait"),p("error")}},[T,g]);let er=()=>{x("idle"),d(""),f(""),M(),D()},ea="approving"===u||"adding"===u;return(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Fournir de la liquidit\xe9"}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Placez vos fonds dans le march\xe9 KAL et recevez des r\xe9compenses en KAL automatiquement. Plus vous investissez longtemps, plus vous gagnez."}),"success"===u&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"✅"}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Liquidit\xe9 ajout\xe9e"}),(0,n.jsxs)("p",{className:"text-gray-400 text-sm mb-2",children:[(0,a.ZP)(P)," ajout\xe9s au pool de liquidit\xe9"]}),V&&(0,n.jsx)("a",{href:"https://sepolia.basescan.org/tx/".concat(V),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 text-xs hover:underline",children:"Voir la transaction"}),(0,n.jsx)("button",{onClick:er,className:"mt-6 w-full py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition",children:"Nouvel investissement"})]}),"error"===u&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"❌"}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Erreur"}),(0,n.jsx)("p",{className:"text-red-400 text-xs mb-4",children:b}),(0,n.jsx)("button",{onClick:er,className:"w-full py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition",children:"R\xe9essayer"})]}),("idle"===u||ea)&&(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-3 mb-4 flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:"Solde USDC"}),(0,n.jsx)("span",{className:"text-sm font-bold font-mono",children:(0,a.ZP)(A)})]}),(0,n.jsxs)("div",{className:"relative mb-2",children:[(0,n.jsx)("input",{type:"number",value:s,onChange:e=>d(e.target.value),placeholder:"0.00",min:"10",disabled:ea,className:"w-full bg-[var(--background)] border border-[var(--card-border)] rounded-xl px-4 py-4 text-2xl font-bold text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition disabled:opacity-50"}),(0,n.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"$"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Minimum : $10.00"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[100,500,1e3,5e3].map(e=>(0,n.jsxs)("button",{onClick:()=>d(e.toString()),disabled:ea,className:"py-2 rounded-lg bg-[var(--background)] border border-[var(--card-border)] text-sm text-gray-400 hover:text-white hover:border-indigo-500/50 transition disabled:opacity-50",children:["$",e.toLocaleString()]},e))}),k&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-4 mb-6 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Investissement"}),(0,n.jsx)("span",{className:"font-mono",children:(0,a.ZP)(P)})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"R\xe9compenses estim\xe9es / an"}),(0,n.jsx)("span",{className:"text-green-400",children:"~25%"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Retrait"}),(0,n.jsx)("span",{className:"text-green-400",children:"Disponible 24/7"})]})]}),ea&&(0,n.jsxs)("div",{className:"bg-[var(--background)] rounded-xl p-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat("approving"===u?"bg-indigo-600 animate-pulse":"bg-green-600"),children:"approving"===u?"1":"✓"}),(0,n.jsx)("span",{className:"text-sm ".concat("approving"===u?"text-white":"text-gray-400"),children:F?"Confirmez dans votre wallet...":R?"Approbation en cours...":"Approbation USDC"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat("adding"===u?"bg-indigo-600 animate-pulse":"bg-gray-700"),children:"2"}),(0,n.jsx)("span",{className:"text-sm ".concat("adding"===u?"text-white":"text-gray-500"),children:_?"Confirmez dans votre wallet...":B?"Ajout en cours...":"Ajout de liquidit\xe9"})]})]}),(0,n.jsx)("button",{onClick:e?()=>{if(!e||!k)return;x("approving"),f(""),M(),D();let t=(0,a.F)(s);q(c.qE.kalSwap,t)}:t,disabled:e&&(!k||ea),className:"w-full py-4 rounded-xl font-bold text-lg transition ".concat(e&&(!k||ea)?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white"),children:ea?"Transaction en cours...":e?k?"Investir":"Minimum $10":"Se connecter"})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mon investissement"}),e?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"LP Tokens"}),(0,n.jsx)("span",{className:"font-bold font-mono",children:E.toFixed(4)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"R\xe9compenses KAL \xe0 r\xe9clamer"}),(0,n.jsxs)("span",{className:"font-bold font-mono text-green-400",children:[S.toFixed(4)," KAL"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Valeur des r\xe9compenses"}),(0,n.jsx)("span",{className:"font-bold font-mono",children:(0,a.ZP)(S*C)})]}),"success"===m&&(0,n.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[(0,n.jsx)("p",{className:"text-green-400 text-sm font-bold",children:"R\xe9compenses r\xe9clam\xe9es"}),ee&&(0,n.jsx)("a",{href:"https://sepolia.basescan.org/tx/".concat(ee),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 text-xs hover:underline",children:"Voir la transaction"})]}),"error"===m&&(0,n.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:(0,n.jsx)("p",{className:"text-red-400 text-xs",children:b})}),"success"===g&&(0,n.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[(0,n.jsx)("p",{className:"text-green-400 text-sm font-bold",children:"Liquidit\xe9 retir\xe9e"}),$&&(0,n.jsx)("a",{href:"https://sepolia.basescan.org/tx/".concat($),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 text-xs hover:underline",children:"Voir la transaction"})]}),"error"===g&&(0,n.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:(0,n.jsx)("p",{className:"text-red-400 text-xs",children:b})}),(0,n.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,n.jsx)("button",{onClick:()=>{e&&(h("claiming"),f(""),en(),Y())},disabled:et||es||S<=0,className:"flex-1 py-3 rounded-xl font-semibold text-sm transition ".concat(!(S>0)||et||es?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-500 text-white"),children:et||es?"En cours...":"R\xe9clamer les KAL"}),(0,n.jsx)("button",{onClick:()=>{e&&w&&w!==BigInt(0)&&(p("removing"),f(""),X(),U(w))},disabled:H||J||E<=0,className:"flex-1 py-3 rounded-xl font-semibold text-sm transition ".concat(!(E>0)||H||J?"bg-gray-800 text-gray-500 cursor-not-allowed":"border border-[var(--card-border)] text-gray-400 hover:text-white hover:border-red-500/50"),children:H||J?"En cours...":"Retirer"})]})]}):(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Connectez-vous pour voir"})]}),(0,n.jsxs)("div",{className:"rounded-2xl border border-[var(--card-border)] bg-[var(--card-bg)] p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Comment \xe7a marche"}),(0,n.jsxs)("div",{className:"space-y-3 text-sm text-gray-400",children:[(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("span",{className:"text-indigo-400 font-bold",children:"1."}),(0,n.jsx)("span",{children:"Vous investissez dans la liquidit\xe9 du march\xe9 KAL"})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("span",{className:"text-indigo-400 font-bold",children:"2."}),(0,n.jsx)("span",{children:"Vous recevez des r\xe9compenses en KAL automatiquement"})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("span",{className:"text-indigo-400 font-bold",children:"3."}),(0,n.jsx)("span",{children:"Les r\xe9compenses diminuent avec le temps (comme Bitcoin)"})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("span",{className:"text-indigo-400 font-bold",children:"4."}),(0,n.jsx)("span",{children:"Vous pouvez retirer \xe0 tout moment, pas de blocage"})]})]})]})]})]})}function x(){let[e,t]=(0,r.useState)("invest"),{price:s,isLoading:o}=(0,i.OJ)(),{liquidityTVL:c,epochProgress:l,rewardsRemaining:x,isLoading:m}=(0,i.$C)(),h=s?Number(s)/1e6:.1,g=c?Number(c)/1e6:0,p=l?Number(l):0,b=x?Number(x)/1e18:0,f=o||m;return(0,n.jsx)("div",{className:"min-h-screen py-8 px-4 sm:px-6",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"March\xe9 KAL"}),(0,n.jsx)("p",{className:"text-gray-400 mb-8",children:"Investissez dans la liquidit\xe9 de la plateforme ou \xe9changez vos jetons KAL."}),(0,n.jsx)("div",{className:"rounded-2xl border border-indigo-500/30 bg-[var(--card-bg)] p-6 mb-8",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Prix KAL"}),(0,n.jsx)("p",{className:"text-xl sm:text-2xl font-bold font-mono",children:f?"...":(0,a.ZP)(h)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Liquidit\xe9 totale"}),(0,n.jsx)("p",{className:"text-xl sm:text-2xl font-bold font-mono",children:f?"...":(0,a.ZP)(g)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"R\xe9compenses restantes"}),(0,n.jsx)("p",{className:"text-xl sm:text-2xl font-bold font-mono",children:f?"...":"".concat(b.toLocaleString()," KAL")})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Progression \xe9poque"}),(0,n.jsx)("p",{className:"text-xl sm:text-2xl font-bold font-mono",children:f?"...":"".concat(p,"%")})]})]})}),(0,n.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,n.jsx)("button",{onClick:()=>t("invest"),className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 rounded-xl text-sm sm:text-base font-semibold transition ".concat("invest"===e?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"border border-[var(--card-border)] bg-[var(--card-bg)] text-gray-400 hover:text-white"),children:"Investir dans la liquidit\xe9"}),(0,n.jsx)("button",{onClick:()=>t("exchange"),className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 rounded-xl text-sm sm:text-base font-semibold transition ".concat("exchange"===e?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"border border-[var(--card-border)] bg-[var(--card-bg)] text-gray-400 hover:text-white"),children:"\xc9changer KAL"})]}),"invest"===e&&(0,n.jsx)(u,{}),"exchange"===e&&(0,n.jsx)(d,{})]})})}},59535:function(e,t,s){"use strict";s.d(t,{a:function(){return r}});var n=s(60716);function r(){try{return(0,n.u)()}catch(e){return{ready:!0,authenticated:!1,login:()=>{},logout:()=>{},user:null}}}},68354:function(e,t,s){"use strict";s.d(t,{Eb:function(){return f},Gj:function(){return h},Qh:function(){return u},X1:function(){return g},ZS:function(){return p},cp:function(){return b},ed:function(){return x},ip:function(){return m},mn:function(){return l},nr:function(){return d},uG:function(){return o},zL:function(){return c}});var n=s(94517),r=s(97269),a=s(81460),i=s(31620);function o(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{approve:(e,s)=>{t({address:i.qE.usdc,abi:i.RB,functionName:"approve",args:[e,s],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function c(e){let{data:t,writeContract:s,isPending:o,error:c,reset:l}=(0,n.S)(),{isLoading:d,isSuccess:u}=(0,r.A)({hash:t});return{deposit:t=>{s({address:i.qE.pools[e],abi:i.He,functionName:"depositUSDC",args:[t],chainId:a.L.id})},isPending:o,isConfirming:d,isSuccess:u,error:c,hash:t,reset:l}}function l(e){let{data:t,writeContract:s,isPending:o,error:c,reset:l}=(0,n.S)(),{isLoading:d,isSuccess:u}=(0,r.A)({hash:t});return{withdraw:t=>{s({address:i.qE.pools[e],abi:i.He,functionName:"withdraw",args:[t],chainId:a.L.id})},isPending:o,isConfirming:d,isSuccess:u,error:c,hash:t,reset:l}}function d(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{mintPass:e=>{t({address:i.qE.accessPass,abi:i.Yu,functionName:"mint",args:[BigInt(e)],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function u(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{renewPass:e=>{t({address:i.qE.accessPass,abi:i.Yu,functionName:"renew",args:[BigInt(e)],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function x(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{approve:(e,s)=>{t({address:i.qE.kalToken,abi:i.RB,functionName:"approve",args:[e,s],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function m(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{swap:(e,s)=>{t({address:i.qE.kalSwap,abi:i._1,functionName:"swapUSDCForKAL",args:[e,s],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function h(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{swap:(e,s)=>{t({address:i.qE.kalSwap,abi:i._1,functionName:"swapKALForUSDC",args:[e,s],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function g(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{addLiquidity:(e,s)=>{t({address:i.qE.kalSwap,abi:i._1,functionName:"addLiquidity",args:[e,s],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function p(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{removeLiquidity:e=>{t({address:i.qE.kalSwap,abi:i._1,functionName:"removeLiquidity",args:[e],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function b(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{claim:()=>{t({address:i.qE.liquidityRewards,abi:i.HV,functionName:"claim",args:[],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}function f(){let{data:e,writeContract:t,isPending:s,error:o,reset:c}=(0,n.S)(),{isLoading:l,isSuccess:d}=(0,r.A)({hash:e});return{claim:()=>{t({address:i.qE.airdrop,abi:i.eX,functionName:"claim",args:[],chainId:a.L.id})},isPending:s,isConfirming:l,isSuccess:d,error:o,hash:e,reset:c}}},93448:function(e,t,s){"use strict";function n(e){let t="bigint"==typeof e?Number(e)/1e6:e;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function r(e){let t="bigint"==typeof e?Number(e)/1e6:e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}).format(t)}function a(e){let t=parseFloat(e);return isNaN(t)||t<0?BigInt(0):BigInt(Math.floor(1e6*t))}function i(e){return e>0?"text-green-400":e<0?"text-red-400":"text-gray-400"}function o(e){let t=parseFloat(e);if(isNaN(t)||t<=0)return BigInt(0);let[s="0",n=""]=e.split(".");return BigInt(s+n.padEnd(18,"0").slice(0,18))}s.d(t,{AF:function(){return i},F:function(){return a},Fr:function(){return o},ZP:function(){return n},rK:function(){return r}})},93715:function(e,t,s){"use strict";s.d(t,{P:function(){return r}});var n=s(24250);function r(e,t={}){let{key:s="custom",methods:r,name:a="Custom Provider",retryDelay:i}=t;return({retryCount:o})=>(0,n.q)({key:s,methods:r,name:a,request:e.request.bind(e),retryCount:t.retryCount??o,retryDelay:i,type:"custom"})}},97269:function(e,t,s){"use strict";s.d(t,{A:function(){return m}});var n=s(72932),r=s(67348),a=s(39277),i=s(50550),o=s(44199);async function c(e,t){let{chainId:s,timeout:c=0,...l}=t,d=e.getClient({chainId:s}),u=(0,o.s)(d,r.e,"waitForTransactionReceipt"),x=await u({...l,timeout:c});if("reverted"===x.status){let e=(0,o.s)(d,a.f,"getTransaction"),{from:t,...s}=await e({hash:x.transactionHash}),r=(0,o.s)(d,i.R,"call"),c=await r({...s,account:t,data:s.input,gasPrice:"eip1559"!==s.type?s.gasPrice:void 0,maxFeePerGas:"eip1559"===s.type?s.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===s.type?s.maxPriorityFeePerGas:void 0});throw Error(c?.data?(0,n.rR)(`0x${c.data.substring(138)}`):"unknown reason")}return{...x,chainId:d.chain.id}}var l=s(27534),d=s(97074),u=s(44005),x=s(12364);function m(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hash:n,query:r={}}=s,a=(0,x.Z)(s),i=(0,u.x)({config:a}),o=function(e,t={}){return{async queryFn({queryKey:s}){let{hash:n,...r}=s[1];if(!n)throw Error("hash is required");return c(e,{...r,onReplaced:t.onReplaced,hash:n})},queryKey:function(e={}){let{onReplaced:t,...s}=e;return["waitForTransactionReceipt",(0,l.OP)(s)]}(t)}}(a,{...s,chainId:null!==(e=s.chainId)&&void 0!==e?e:i}),m=!!(n&&(null===(t=r.enabled)||void 0===t||t));return(0,d.aM)({...r,...o,enabled:m})}},94517:function(e,t,s){"use strict";s.d(t,{S:function(){return j}});var n=s(2265),r=s(2894),a=s(18238),i=s(24112),o=s(45345),c=class extends i.l{#e;#t=void 0;#s;#n;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#a()}mutate(e,t){return this.#n=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#r(){let e=this.#s?.state??(0,r.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.Vr.batch(()=>{if(this.#n&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#n.onSuccess?.(e.data,t,s,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(e.data,null,t,s,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#n.onError?.(e.error,t,s,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(void 0,e.error,t,s,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},l=s(29827),d=s(50825),u=s(44199),x=s(82538),m=s(93715),h=s(19775),g=s(31669),p=s(13102);async function b(e,t={}){let s;let{assertChainId:n=!0}=t;if(t.connector){let{connector:n}=t;if("reconnecting"===e.state.status&&!n.getAccounts&&!n.getChainId)throw new p.$S({connector:n});let[r,a]=await Promise.all([n.getAccounts().catch(e=>{if(null===t.account)return[];throw e}),n.getChainId()]);s={accounts:r,chainId:a,connector:n}}else s=e.state.connections.get(e.state.current);if(!s)throw new p.aH;let r=t.chainId??s.chainId,a=await s.connector.getChainId();if(n&&a!==r)throw new p.XZ({connectionChainId:r,connectorChainId:a});let i=s.connector;if(i.getClient)return i.getClient({chainId:r});let o=(0,h.T)(t.account??s.accounts[0]);if(o&&(o.address=(0,g.K)(o.address)),t.account&&!s.accounts.some(e=>e.toLowerCase()===o.address.toLowerCase()))throw new p.JK({address:o.address,connector:i});let c=e.chains.find(e=>e.id===r),l=await s.connector.getProvider({chainId:r});return(0,x.e)({account:o,chain:c,name:"Connector Client",transport:e=>(0,m.P)(l)({...e,retryCount:0})})}async function f(e,t){let s;let{account:n,chainId:r,connector:a,...i}=t;s="object"==typeof n&&n?.type==="local"?e.getClient({chainId:r}):await b(e,{account:n??void 0,assertChainId:!1,chainId:r,connector:a});let o=(0,u.s)(s,d.n,"writeContract");return await o({...i,...n?{account:n}:{},chain:r?{id:r}:null})}var v=s(12364);function j(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:s}=t,r=(e=(0,v.Z)(t),{mutationFn:t=>f(e,t),mutationKey:["writeContract"]}),{mutate:i,mutateAsync:d,...u}=function(e,t){let s=(0,l.NL)(void 0),[r]=n.useState(()=>new c(s,e));n.useEffect(()=>{r.setOptions(e)},[r,e]);let i=n.useSyncExternalStore(n.useCallback(e=>r.subscribe(a.Vr.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=n.useCallback((e,t)=>{r.mutate(e,t).catch(o.ZT)},[r]);if(i.error&&(0,o.L3)(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:d,mutateAsync:i.mutate}}({...s,...r});return{...u,writeContract:i,writeContractAsync:d}}}},function(e){e.O(0,[8248,447,5001,716,7084,2971,2117,1744],function(){return e(e.s=46735)}),_N_E=e.O()}]);